webpackJsonp([1],{"/BFf":function(t,e){},"/Y2M":function(t,e){},"0Iid":function(t,e){},"0mKC":function(t,e){},"0rKD":function(t,e){},"1x9i":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAIAAACQKrqGAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAANklEQVR42mP4+PHjnTt3buIFQAVAZQxA6vv37//xAqACoDIGoKb/RACgslGlA6+UhIglPrkAAM4oM7P8M2g5AAAAAElFTkSuQmCC"},"4TxO":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={name:"appl-user",data:function(){return{acount:"管理员",oldPas:"",newPas:"",newPass:""}},methods:{logout:function(){var t=this;this.axios.post(this.serve.logout).then(function(e){t.$store.commit("logout"),t.$router.push("/login")}).catch(function(t){return t})},confirm:function(){var t=this,e=new URLSearchParams;e.append("old_password",this.oldPas),e.append("new_password",this.newPass),this.axios.post(this.serve.changePassword,e).then(function(e){t.oldPas="",t.newPas="",t.newPass="",t.$notification.success({message:"提示",description:"修改密码成功"})}).catch(function(t){return t})},cancel:function(t){this.oldPas="",this.newPas="",this.newPass="",this.$notification.info({message:"提示",description:"取消"+t+"操作"})},keyUpNew:function(t){32===t.keyCode&&(this.newPas=this.newPas.slice(0,this.newPas.length-1))},keyUpNew1:function(t){32===t.keyCode&&(this.newPass=this.newPass.slice(0,this.newPass.length-1))}},computed:{isOk:function(){return!!(this.oldPas&&this.newPas&&this.newPass&&this.newPas.length>=6&&this.newPas===this.newPass)}}},n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"v-container",staticStyle:{"background-color":"white"}},[[i("div",{staticClass:"v-div"},[i("div",{staticClass:"info",staticStyle:{height:"33px","line-height":"33px"}},[i("span",[t._v("销售姓名:")]),t._v(" "),i("span",{staticStyle:{"margin-left":"15px"}},[t._v(t._s(t.$store.state.user))])]),t._v(" "),i("div",{staticClass:"info",staticStyle:{height:"33px","line-height":"33px"}},[i("span",[t._v("账号信息:")]),t._v(" "),i("span",{staticStyle:{"margin-left":"15px"}},[t._v(t._s(t.$store.state.token))]),t._v(" "),i("v-button",{staticStyle:{width:"99px",height:"33px",float:"right"},on:{click:t.logout}},[t._v("退出帐号")])],1),t._v(" "),i("div",{staticClass:"info clearfix"},[i("span",{staticStyle:{float:"left","line-height":"28px"}},[t._v("修改密码:")]),t._v(" "),i("v-input",{staticStyle:{float:"left",width:"256px","margin-left":"15px",height:"38px"},attrs:{type:"password",placeholder:"请在此输入旧密码"},model:{value:t.oldPas,callback:function(e){t.oldPas=e},expression:"oldPas"}})],1),t._v(" "),i("div",{staticClass:"info clearfix"},[i("v-input",{staticStyle:{float:"left",width:"256px","margin-left":"66px",height:"38px"},attrs:{type:"password",placeholder:"请在此输入新密码,大于等于六位"},nativeOn:{keyup:function(e){t.keyUpNew(e)}},model:{value:t.newPas,callback:function(e){t.newPas=e},expression:"newPas"}})],1),t._v(" "),i("div",{staticClass:"info clearfix"},[i("v-input",{staticStyle:{float:"left",width:"256px","margin-left":"66px",height:"38px"},attrs:{type:"password",placeholder:"重复输入新密码进行确认"},nativeOn:{keyup:function(e){t.keyUpNew1(e)}},model:{value:t.newPass,callback:function(e){t.newPass=e},expression:"newPass"}})],1),t._v(" "),i("div",{staticClass:"info clearfix"},[i("div",{staticStyle:{"margin-left":"66px"},attrs:{slot:"extra"},slot:"extra"},[i("v-button",{directives:[{name:"show",rawName:"v-show",value:t.isOk,expression:"isOk"}],staticStyle:{width:"125px",height:"35px"},attrs:{type:"primary"},on:{click:t.confirm}},[t._v("修改")]),t._v(" "),i("v-button",{directives:[{name:"show",rawName:"v-show",value:!t.isOk,expression:"!isOk"}],staticStyle:{width:"125px",height:"35px"},attrs:{disabled:"",type:"primary"},on:{click:t.confirm}},[t._v("修改")]),t._v(" "),i("v-button",{staticStyle:{"margin-left":"2px",width:"125px",height:"35px"},on:{click:function(e){t.cancel("修改密码")}}},[t._v("取消")])],1)])])]],2)},staticRenderFns:[]};var s=i("VU/8")(a,n,!1,function(t){i("XUvE")},"data-v-e38e7592",null);e.default=s.exports},"4Ugs":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAQCAYAAAArij59AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAB+SURBVChTlZE5CoAwEEW9/xns3AoF8SYWiugZ3ItEq2/GkIhkVPww1Xswm4eniB5oc/CCGIAqAEqfEeSoYHhCV5CTgpGFd2GbHXgJ2wLUsQO1sBNMWEjloUlZYEoJGQtMqRbrRws7JC/d12Q2+XEok9dTm0h6lpZ4gULv7gocM0DUwAcqOwIAAAAASUVORK5CYII="},"4kX5":function(t,e){},"7NeA":function(t,e){},"8FLJ":function(t,e){},"9EUw":function(t,e){},"9tsS":function(t,e){},AlYY:function(t,e){},B42q:function(t,e){},C6mL:function(t,e){},CvV4:function(t,e){},DTRI:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAIAAACQKrqGAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAeklEQVR42mNYePGL9ORXAn0v8SCgAqAyBoLq4KoZiFEHQQSUpm77SJRSoLr///8vvvwNi9KANe/R1AFB78mv6Er7Tn798ecfRDWmOhSlQIuAckDVQD2Y6tAdAFGNVR0Wb91+9weo7uTTX0QFFlZ1hMMVRSkJEUt8cgEAzENRc9M8r0gAAAAASUVORK5CYII="},GPjn:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={name:"sensitive",data:function(){return{loadData:function(t){var e=this.$parent.$parent,i=new URLSearchParams;return i.append("page",t.pageNo),this.axios.post(this.serve.sensitiveList,i).then(function(i){return e.total=i.data.data.totalCount,i.data.data.pageSize=e.pageSize,i.data.data.pageNo=i.data.data.currentPage,setTimeout(function(){e.total>0&&(document.getElementsByClassName("ant-pagination-simple-pager")[0].children[0].value=t.pageNo)},300),i.data.data}).catch(function(t){return t})},columns:[{title:"敏感词",field:"sentence",width:"65%"},{title:"操作",field:"operation",width:"35%"}],addModalVisible:!1,addModalLoading:!1,delModalVisible:!1,delModalLoading:!1,delObj:{},sensitive:"",pageNo:1,total:0}},methods:{changePageNo:function(t){this.pageNo=t,this.$refs.xtable.goto(t)},openDelModal:function(t){this.delModalVisible=!0,this.delModalLoading=!1,this.delObj=t},openAddModal:function(){this.addModalVisible=!0,this.addModalLoading=!1,this.sensitive=""},addSensitive:function(){var t=this;if(this.sensitive){this.addModalLoading=!0;var e=new URLSearchParams;e.append("word",this.sensitive),this.axios.post(this.serve.sensitiveAdd,e).then(function(e){t.pageNo=1,t.$refs.xtable.reload(),t.addModalVisible=!1,t.addModalLoading=!1,t.$notification.success({message:"提示",description:"添加成功"})}).catch(function(e){return t.addModalVisible=!1,t.addModalLoading=!1,e})}else this.$notification.warning({message:"提示",description:"请确保信息填写完整"})},deleteSensitive:function(){var t=this,e=this.delObj,i=new URLSearchParams;i.append("id",e.id),this.axios.post(this.serve.sensitiveDelete,i).then(function(e){t.pageNo=1,t.$refs.xtable.reload(),t.delModalVisible=!1,t.delModalLoading=!1,t.$notification.success({message:"提示",description:"删除成功"})}).catch(function(e){return t.delModalVisible=!1,t.delModalLoading=!1,e})},cancel:function(t){}}},n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"v-container bg-color"},[i("el-scrollbar",[i("div",{staticClass:"header clearfix"},[i("div",{staticClass:"common-title"},[t._v("设置敏感词")]),t._v(" "),i("v-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.openAddModal}},[t._v("添加")])],1),t._v(" "),i("div",{staticClass:"v-content"},[i("div",{staticStyle:{height:"auto"}},[i("v-data-table",{ref:"xtable",attrs:{data:t.loadData,columns:t.columns,"page-num":t.pageNo,pagination:!1,emptyText:"暂无数据",bordered:""},scopedSlots:t._u([{key:"th",fn:function(e){return[i("div",{staticStyle:{"text-align":"center",color:"#000"}},["operation"==e.column.field?i("span",[t._v("操作")]):i("span",{domProps:{innerHTML:t._s(e.title)}})])]}},{key:"td",fn:function(e){return["operation"==e.column.field?i("div",{staticStyle:{"text-align":"center",color:"#666"}},[i("span",{staticClass:"lzp-operation-color",on:{click:function(i){t.openDelModal(e.item)}}},[t._v("删除")])]):i("div",{staticStyle:{"text-align":"center",color:"#666"},domProps:{innerHTML:t._s(e.content)}})]}}])}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],staticClass:"clearfix",staticStyle:{"margin-top":"30px"}},[i("div",{staticStyle:{float:"right",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(e){t.pageNo=Math.ceil(t.total/t.pageSize)}}},[t._v("尾页")]),t._v(" "),i("div",{staticStyle:{float:"right"}},[i("v-pagination",{attrs:{value:t.pageNo,total:t.total,pageSize:t.pageSize,"show-quick-jumper":"",simple:""},on:{change:t.changePageNo}})],1),t._v(" "),i("div",{staticStyle:{float:"right",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(e){t.pageNo=1}}},[t._v("首页")])])],1)])]),t._v(" "),[i("v-modal",{attrs:{title:"删除敏感词",visible:t.delModalVisible,"confirm-loading":t.delModalLoading},on:{ok:function(e){t.deleteSensitive()},cancel:function(e){t.cancel("删除敏感词"),t.delModalVisible=!1}}},[i("div",{staticStyle:{"text-align":"center",height:"120px","line-height":"120px"}},[t._v("\n        确认删除敏感词吗？\n      ")])])],t._v(" "),[i("v-modal",{attrs:{title:"添加敏感词",visible:t.addModalVisible,"confirm-loading":t.addModalLoading},on:{ok:function(e){t.addSensitive()},cancel:function(e){t.cancel("添加敏感词"),t.addModalVisible=!1}}},[i("div",{staticStyle:{"text-align":"center"}},[i("v-input",{staticStyle:{width:"232px",height:"38px"},attrs:{placeholder:"请在此输入敏感词",maxlength:"50"},model:{value:t.sensitive,callback:function(e){t.sensitive=e},expression:"sensitive"}})],1)])]],2)},staticRenderFns:[]};var s=i("VU/8")(a,n,!1,function(t){i("RxJc")},"data-v-8b88c882",null);e.default=s.exports},Gi4w:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAV0lEQVQoke3SIQ4AIQwAwYW0H8DC/3+FA41uSgLmzoO93PpxG8xs9d5xd04SEUophFrrSikdobcxBnHOeYUA3J14rZ5++BGoqtdIRAhmtlprnK6nquSc2VDrIIfFTgmtAAAAAElFTkSuQmCC"},I1KV:function(t,e){},Kv5s:function(t,e){},LEXV:function(t,e){},M8M4:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAE4UlEQVRogd2aS2xVVRSGv1uIQm0liuJMfEARgyIUwsMBkGgMJToxhoGP1IGJxjjRiY+5wQRQNMEBGkwkMRAdlIFDkAktifLQRMAIRKoSoJZEQKKCn4OzjvfcS9v7Ore3dSUr+5x99177/+9+nL3XXgWVHKULWAU8FM/3ArcBnfH7RWAIOAH8ABwG9sVzLlLIgdADwPPAk8Cdddo4DXwBfAJ82wiYegkVgLXAW8DKTP454CtgADgGnATOA5fj95uA24G7gfnAcmA1MCtjYz/wNvAlUDs4tVbtVvstyrD6gbpCLdRhr6AuVTeHrVT6o62a7NVSeJr6rnotGjyjvqZ21EFiNO0Im2eijWvqlmg7V0Jz1UPRyN/xb+ZJZCRim6Mto+25eRFaof4Who+qi5tIpFwXR5sGhhWNElqrXg6Du9Wbx5FMqp3RtoFlbb2ElmXIfKROaQGZVKcEhpTUsloJzVGHwsDH1rd65a2FwKLJ8BtxTo1U8Ub1YFTsa3HPjNRTfYHtYGCtSGhLVDihzpgAJMp1RmAzsI5JqFu9arJc1vxRG0ftDoxXy3FmCxXUA8F80wQAXUk3BdZ+M3M8W2BdFDhjslS2GnAl7VB/Dczr0vy2zLbujUg3kWzzJ7pcAt6J5zfTzHS3/SBwBBgGZkfhySDTgUFgJskZ7EjaQ89G+imThwzAFWBHPCccYuz9HGNx6QSYG+3qdnWvuqqK8ksD+2C6KCyIjHO2fkcwX/3OorxeRZ2CejbKd7UBD0eX7aGeE2J+0gt8DSwIHC8DG6qoJ7A3nle3AYvjZSBngNVKO7A9tB24CjwHbK3BRop94VTgvnjJzfNSg8wHdpH0CsCfwHqgr0Y7xyOdh3oqxt+ccZ4vvRaPJ6qX1EfqtDUnbJxE/T1exuvwlq5iWRlWVzZgszPsXCyo6UJQaHwEVZTyIQZwFniM5MPeiAiUbH1qkVUkK8tOSn1qY0kvxVUsldNhq1EyN0T6V3bI1bIh3ZoZLmfVp2ocYqrH1dk5DeOZYXOo3kUhe3JMZZc6q6zc/ZZ+KFM5rN6RE5nsonACdV+89NRopF0dKAOa7a1eS1exVPrVW3Ikg4knSHVfG4kPGpLbglrkD+Bx4MdM3iySSS/FD2VW9gCPAhdqbKuSzIv0WBtwKF6W12HoPInT/nwVZfuAHpqzm0+xf4P5bE6zPryRZIc6NedhlmrJ5jTN/CUyGjk+PGHitCiXD9W2JpFBXRLtDGrxCP5ZpE830O27gVfK8jYALwH/NGC3kjwT6U7gvwPewmA5ZHNvFfLW6RY9vAuzPXSE5OZsJvBiE//NvOUFEsz7SXcbGbZZN9Zk6KUR3VjZApPN0bgxsB5wFEcjlrqCF00A0KPpIqtwBaeaOuuPOjE9qJ3q94GxorMekwvayXKdct1l8mgV51q8Yt9m691bBIZtgemC2jVSubEM/K+uJFPtUa+Eod22Zk5lL42vWOGYU43BNRaHXyuv9YcDy5h1qjVcHnix0eYHXmy0SYEXqU5T37M0NObVnIl1hM1saMz7NiE0Jqvdlh698wheWuL1wUsD1nHP20h4WQ/JzVl5eNleiuFlpyIvPaV2kISX3UPigl4OrCHH8LKJEgA4CHxOCwMAR5MukoC+NETzLuBWkp6BpKeGgZ9IHOyHSQIGc7so+BdEYBzpqvMKdQAAAABJRU5ErkJggg=="},PGdx:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAQCAYAAAArij59AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAB/SURBVChThZE7CoBADES9/xns/BUK4k0sVkTP4G8t/FTjxl1cBBMH0iQPkswE6CtgG8ApQB0CKgb20bXessADTa7t5YEbSgw0u5HVG6BqUuBY3PgLuKHMQFoAqAg6VwGgaos/IP9bobkj6RPuSPKCfVM0SrRaRSZRLqyuFOIGLsMw1MBCHzoqAAAAAElFTkSuQmCC"},PRH0:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAACLElEQVQokX2RS0hUcRSHv/+9d5xpXk7jCx+hJWKYkFkmQiiUUBSBEIGL2rpqF20q0CKoXbVoUYREtCuijbQo0032UCvclGKaaTM5E5bO+94797TIiRba2Z7fxzl8P2XbNpuMisTsyyOvk2eWorlQLi/4PRoNdZ7ZQx2Bc+o/4IXr9+JXIssmLgNKwi6+xywQob3FH90MLHk5mYo+ef7LVV/rWe49GjofCupTkZh54OHT1UuL0ZymbXJNG5tMuQC62ny3Q0F90LZloizsutG+2xfXdQ3jn7AXUIAJ5GM/LUAI+PRxABF8mZwcX4iYNY6DZQB+4NTUdLZ74Zup7232vq8qN24pQFCsQ03Tc7mB4TfJnsiy6aqqcCUNy3IG7j5aOTu3aAJQ7DfqqsqNQQHkj9x8KuN0j04kTy5FstTVuDndE35sPHuV6pv7ahIO6mutzd6x/S2eO0Ca9b9BMr4t2tCJw8WtyWQgvH1b0QdDVzeNaNwKgMORrq0Xd+7w3AdZBcIoBSKAQik+V5a6+qRE3EqpFOBoImIjUFFm/Eik7YRloixbKsRx0DVQSgryTCABOABGdXnR9PRsdtfQyFr/wQ5/qxKVHh1PHwOornRbQb+e26gvo7PN92DsXfLqzHy2cWY+21hYKKBzn3844NM+bgQq27a96YxcG32b6I2t2KV5SyQQMFb2NHleNNS6+4FPhbCIoJT6CwK4Rai3bKnP5pw1UPGgX/tSsLsR+BsksvfnOBoi8AAAAABJRU5ErkJggg=="},QNMC:function(t,e){},RxJc:function(t,e){},T2Nq:function(t,e){},T2sH:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAQCAYAAAArij59AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACZSURBVChThZDLCsIwEEXzZX6Bb7cuBX/KnVoXCuLvWPHtrrXWZQbutamkWJLYA7M6ByYZxQBI9pTthN4AaUw9b1PPWm6A55F60S2lEyA7US97lawFeF0K2a/JKkB+o0RDR5YB8gdlNfJKM0rWY6+wo2TTEODdsOL7yHsw+vnmlToahAMDsnP4UJa/p7YgPRRRJxwYkMSU3ZQf38OqAmrdB3wAAAAASUVORK5CYII="},TDvf:function(t,e){},U0hu:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("X9GB"),n={name:"insight-overview",components:{yhqDept:a.a},data:function(){return{timeColumns:[{id:1,title:"日期",field:"date"}],userColumns:[{id:1,title:"销售单元",field:"user"}],columns:[{id:2,title:"新增客户",field:"addFriendCount",sortFlag:0},{id:3,title:"主动申请",field:"activeApplyCount",sortFlag:0},{id:4,title:"申请通过率",field:"activeApplaySuccessRate",sortFlag:0},{id:5,title:"被加通过",field:"unActiveApplySuccessCount",sortFlag:0},{id:6,title:"跟进率",field:"followUpRate",sortFlag:0},{id:7,title:"有效沟通率",field:"validCommunicationRate",sortFlag:1},{id:8,title:"跟进客户-老",field:"oldFollowCount",sortFlag:0},{id:9,title:"有效沟通-老",field:"oldValidCommunicationCount",sortFlag:0},{id:10,title:"总有效沟通",field:"allValidCommunicationCount",sortFlag:0},{id:11,title:"总通话数",field:"allPhoneCommunicationCount",sortFlag:0},{id:12,title:"总时长",field:"allPhoneCommunicationTime",sortFlag:0},{id:13,title:"总平均时长",field:"averagePhoneCommunicationTime",sortFlag:0},{id:14,title:"回复时间",field:"averageReplayTime",sortFlag:0}],maxRange:90,sortTip:{id:7,title:"有效沟通率",field:"validCommunicationRate",sortFlag:1},sortField:"validCommunicationRate",ratePipe:[4,6,7],timePipe:[12,13,14],rateArr:["申请通过率","跟进率","有效沟通率"],timeArr:["总时长","总平均时长","回复时间"],sortDir:1,viewBox1Style:{},viewBox1Flag:!1,screenHeight:window.innerHeight,vContentHeigth:{minHeight:window.innerHeight-447+"px"},mydata:[],mydata2:[],iconActive:1,pageNo:1,total:0,pageNo2:1,total2:0,name:"",rangeDate:["",""],departmentOptions:[],dept:"",sale:"",breadcrumb:[],chartData:[],xAxisData:[],chartFieldList:[],chartField:0,dataLoading:!0,dateList:[],userList:[],tooltip1:""}},created:function(){this.tooltip1="<p  style='font-size: 16px;'>字段说明</p><p style='line-height: 24px;'>新增客户: 主动添加好友成功数+被加成为好友数</p><p style='line-height: 24px;'>主动申请：主动申请添加好友数，同一好友进行排重</p><p style='line-height: 24px;'>申请通过率：主动申请好友通过数/主动申请</p><p style='line-height: 24px;'>被加通过：设置了验证通过的+未设置验证被加为好友的，单向好友也算&nbsp;&nbsp;</p><p style='line-height: 24px;'>跟进率：新增客户中微信跟进数/新增客户</p><p style='line-height: 24px;'>有效沟通率：新增客户中微信有效沟通数/新增客户</p><p style='line-height: 24px;'>跟进客户-老：微信跟进的老客户数</p><p style='line-height: 24px;'>有效沟通-老：微信有效沟通的老客户数</p><p style='line-height: 24px;'>总有效沟通：微信有效沟通的新增客户加老客户数</p><p style='line-height: 24px;'>总通话数：新客户和老客户中，呼出接通和呼入接通的通话个数</p><p style='line-height: 24px;'>总时长：新客户和老客户中，呼出时长和呼入时长的总和</p><p style='line-height: 24px;'>总平均时长：新客户和老客户中，(通话时长总和)/(通话总个数)</p><p style='line-height: 24px;'>回复时间：微信回复客户信息的平均时间</p>";var t=this.myTool.timeFormat(new Date),e=this.myTool.timeFormat(new Date(Math.round((new Date).getTime()-25056e5)));this.rangeDate=[e,t],this.timeColumns=this.timeColumns.concat(this.columns),this.userColumns=this.userColumns.concat(this.columns),this.getChartFieldList()},methods:{getDataList:function(){var t=this;this.dataLoading=!0;var e=new URLSearchParams;return e.append("start_date",this.rangeDate[0]+" 00:00:00"),e.append("end_date",this.rangeDate[1]+" 23:59:59"),e.append("user_id",this.sale),e.append("department_id",this.dept),this.axios.post(this.serve.showOverview,e).then(function(e){t.dataLoading=!1,t.dateList=e.data.data.date,t.userList=e.data.data.user,t.updateData(t.dateList,t.userList)}).catch(function(t){return t})},updateData:function(t,e){this.dataLoading=!1,this.dateList=t,this.userList=e,this.yhqSortDate(),this.total=this.dateList.length,this.total2=this.userList.length;var i=!0,a=!1,n=void 0;try{for(var s,o=this.userList[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;l.userId?l.user=l.userName:l.user=l.departmentName}}catch(t){a=!0,n=t}finally{try{!i&&o.return&&o.return()}finally{if(a)throw n}}this.changePageNo(1),this.initChartBefore(this.dateList),this.initChart(this.chartData[this.chartField]),this.scrollPage()},loadTimeData:function(){var t=this;return new Promise(function(t,e){t()}).then(function(e){var i={};i.pageNo=t.pageNo,i.pageSize=t.pageSize,i.totalCount=t.dateList.length,i.result=[];for(var a=0;a<30&&a<t.dateList.length;a++)i.result.push(t.dateList[a]);return t.total=t.dateList.length,setTimeout(function(){t.total>0&&(t.$el.querySelector(".content-pagination1 .ant-pagination-simple-pager input").value=t.pageNo)},300),i})},deptSelectEvent1:function(t,e){this.breadcrumb=[];for(var i=0;i<e.length;i++){var a=e[i];a.isDept&&this.breadcrumb.push(a)}t.isDept?(this.dept=t.id,this.sale=""):(this.dept=t.department_id,this.sale=t.sales_id),this.timeConfirm()},deptInitEvent1:function(t){this.breadcrumb=t},deptDrilling:function(t,e){t.userId?this.sale!==t.userId&&(this.sale=t.userId,this.timeConfirm()):0===e&&(t.deptId=t.departmentId,t.deptName=t.departmentName,this.$refs.yhqDept1.reverseSet(t),this.dept=t.departmentId,this.sale="",this.timeConfirm(),this.breadcrumb.push({id:t.departmentId,name:t.departmentName}))},backToDept:function(t){this.$refs.yhqDept1.reverseSet(t),this.dept=t.id,this.sale="",this.timeConfirm();for(var e=[],i=0;i<=this.breadcrumb.length&&(e.push(this.breadcrumb[i]),this.breadcrumb[i].id!==t.id);i++);this.breadcrumb=e},changePageNo:function(t){var e=this;this.pageNo=t,this.mydata=[];for(var i=30*(this.pageNo-1);i<30*this.pageNo;i++)this.dateList[i]&&this.mydata.push(this.dateList[i]);setTimeout(function(){e.mydata.length>0&&(e.$el.querySelector(".content-pagination1 .ant-pagination-simple-pager input").value=e.pageNo)},300),this.pageNo2=t,this.mydata2=[];for(var a=30*(this.pageNo2-1);a<30*this.pageNo2;a++)this.userList[a]&&this.mydata2.push(this.userList[a]);setTimeout(function(){e.mydata2.length>0&&(e.$el.querySelector(".content-pagination2 .ant-pagination-simple-pager input").value=e.pageNo2)},300)},timeConfirm:function(){this.pageNo=1,this.pageNo2=1,this.getDataList()},exportData:function(t){var e=this.rangeDate[0]+" 00:00:00",i=this.rangeDate[1]+" 23:59:59";if(1===t){var a="/salesinsight/exportSalesInsight?user_id="+encodeURI(this.sale)+"&department_id="+encodeURI(this.dept)+"&start_date="+e+"&end_date="+i+"&page_type=overview&data_type=date";window.open(a,"_blank")}else{var n="/salesinsight/exportSalesInsight?user_id="+encodeURI(this.sale)+"&department_id="+encodeURI(this.dept)+"&start_date="+e+"&end_date="+i+"&page_type=overview&data_type=user";window.open(n,"_blank")}},getChartFieldList:function(){for(var t=0;t<this.columns.length;t++){var e=this.columns[t];this.chartFieldList.push({id:t,value:e.field,label:e.title})}this.chartField=this.chartFieldList[this.chartField].id},changeChartField:function(t,e){this.chartField=e,this.initChart(this.chartData[this.chartField])},initChartBefore:function(t){for(var e=[],i=0;i<this.columns.length;i++){e.push([])}this.xAxisData=[],this.chartData=[];var a=!0,n=!1,s=void 0;try{for(var o,l=t[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var r=o.value;this.xAxisData.push(r.date);for(var d=0;d<this.columns.length;d++)if(this.ratePipe.includes(d+2)){var c=(r[this.columns[d].field]/100).toFixed(3)/1;e[d].push(c)}else e[d].push(r[this.columns[d].field])}}catch(t){n=!0,s=t}finally{try{!a&&l.return&&l.return()}finally{if(n)throw s}}this.xAxisData.reverse();var h=!0,p=!1,u=void 0;try{for(var v,g=e[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var m=v.value;this.chartData.push(m.reverse())}}catch(t){p=!0,u=t}finally{try{!h&&g.return&&g.return()}finally{if(p)throw u}}},initChart:function(t){var e=this.rateArr,i=this.timeArr;this.echarts.init(document.getElementById("myChart")).setOption({tooltip:{formatter:function(t){if(t[0]){var a=t[0].name,n=!0,s=!1,o=void 0;try{for(var l,r=t[Symbol.iterator]();!(n=(l=r.next()).done);n=!0){var d=l.value;if(e.includes(d.seriesName)){var c=(100*d.value).toFixed(3)/1;a+="<br/>"+d.marker+d.seriesName+": "+c+"%"}else if(i.includes(d.seriesName)){var h=d.value,p=parseInt(h/86400),u=parseInt(h%86400/3600),v=parseInt(h%86400%3600/60),g=parseInt(h%86400%3600%60),m="";p>0&&(m+=p+"天"),u>0&&(m+=u+"小时"),v>0&&(m+=v+"分钟"),g>0&&(m+=g+"秒"),0===m.length&&(m="0秒"),a+="<br/>"+d.marker+d.seriesName+": "+m}else a+="<br/>"+d.marker+d.seriesName+": "+d.value}}catch(t){s=!0,o=t}finally{try{!n&&r.return&&r.return()}finally{if(s)throw o}}return a}return""},trigger:"axis"},xAxis:{boundaryGap:!1,data:this.xAxisData,splitLine:{show:!0}},yAxis:{splitLine:{show:!0}},series:[{name:this.chartFieldList[this.chartField].label,type:"line",symbol:"none",data:t}]})},yhqSortDate:function(){this.userList.sort(this.yhqSortBy())},yhqSortBy:function(){var t=this.sortField,e=this.sortDir;return function(i,a){return 1===e?a[t]-i[t]:2===e?i[t]-a[t]:void 0}},sortDate:function(t){t.id>1&&t.id<this.columns.length+2&&(this.sortTip&&this.sortTip.field!==t.field&&(this.userColumns[this.sortTip.id-1].sortFlag=0),0===t.sortFlag?t.sortFlag=1:1===t.sortFlag?t.sortFlag=2:2===t.sortFlag&&(t.sortFlag=1),this.sortTip=t,this.sortField=t.field,this.sortDir=t.sortFlag,this.yhqSortDate(),this.changePageNo(1))},scrollPage:function(){var t=this;setTimeout(function(){var e=document.querySelector(".chart-page1 .el-scrollbar__wrap");e&&e.addEventListener("scroll",function(){var e=document.querySelector("#viewBox1").getBoundingClientRect();t.viewBox1Style={width:e.width-20+"px"},e.top<=0?t.viewBox1Flag=!0:t.viewBox1Flag=!1})},300)},myChartResize:function(t){var e=this;1===this.iconActive&&setTimeout(function(){e.echarts.init(document.getElementById("myChart")).resize()},t)}},mounted:function(){var t=this;window.onresize=function(){return t.screenHeight=window.innerHeight,void(t.vContentHeigth={minHeight:window.innerHeight-447+"px"})}},computed:{collapsed:function(){return this.myChartResize(500),this.$store.state.collapsed}},watch:{screenHeight:function(t){this.screenHeight=t,this.vContentHeigth={minHeight:t-447+"px"}}}},s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"v-container bg-color chart-page1"},[i("div",{staticClass:"header v-home"},[i("div",{staticClass:"time time-panel clearfix"},[i("v-date-picker",{ref:"datePicker",staticStyle:{"margin-left":"10px"},attrs:{range:"",maxRange:t.maxRange},on:{confirm:function(e){t.timeConfirm()}},model:{value:t.rangeDate,callback:function(e){t.rangeDate=e},expression:"rangeDate"}}),t._v(" "),i("yhq-dept",{ref:"yhqDept1",staticStyle:{"margin-right":"0"},on:{deptSelectEvent:t.deptSelectEvent1,deptInitEvent:t.deptInitEvent1}})],1)]),t._v(" "),i("el-scrollbar",[i("div",{staticStyle:{height:"100%"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.viewBox1Flag,expression:"viewBox1Flag"}],staticClass:"ant-table ant-table-large ant-table-bordered",staticStyle:{width:"100%",height:"57px",position:"absolute",left:"10px",top:"0","z-index":"999"},style:t.viewBox1Style},[i("table",{staticClass:"ant-table-content",staticStyle:{overflow:"visible"}},[i("thead",{staticClass:"ant-table-thead"},[i("tr",t._l(t.userColumns,function(e,a){return i("th",{key:a,staticStyle:{"text-align":"center",cursor:"pointer"},on:{click:function(i){t.sortDate(e,a)}}},[i("span",{domProps:{innerHTML:t._s(e.title)}}),t._v(" "),1===e.sortFlag?i("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[i("i",{staticClass:"fa fa-long-arrow-down",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),2===e.sortFlag?i("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[i("i",{staticClass:"fa fa-long-arrow-up",attrs:{"aria-hidden":"true"}})]):t._e()])}))]),t._v(" "),i("tbody",{staticClass:"ant-table-tbody"},t._l(t.mydata2,function(e,a){return t.mydata2.length>0&&!t.dataLoading?i("tr",{key:a,staticClass:"ant-table-row",staticStyle:{"text-align":"center"}},t._l(t.userColumns,function(a,n){return i("td",{key:n,class:{"user-field":0===n&&!e.userId},on:{click:function(i){t.deptDrilling(e,n)}}},[t.ratePipe.includes(n+1)?i("span",[t._v(t._s(e[a.field])+"%")]):t.timePipe.includes(n+1)?i("span",[t._v(t._s(t._f("second")(e[a.field])))]):i("span",[t._v(t._s(e[a.field]))])])})):t._e()}))])]),t._v(" "),i("div",{staticClass:"v-content",staticStyle:{"margin-bottom":"5px",position:"relative",overflow:"visible"}},[i("div",{staticStyle:{"margin-bottom":"10px"}},[t._v("\n          趋势"),i("span",{staticStyle:{color:"white",position:"absolute",left:"10px","z-index":"-999"}},[t._v(t._s(t.collapsed))]),t._v(" "),i("div",{staticClass:"title-icon"},[i("span",{class:{"title-icon-active":1===t.iconActive},on:{click:function(e){t.iconActive=1,t.myChartResize(50)}}},[i("v-icon",{attrs:{type:"line-chart"}})],1),t._v(" "),i("span",{class:{"title-icon-active":2===t.iconActive},on:{click:function(e){t.iconActive=2}}},[i("i",{staticClass:"fa fa-table",attrs:{"aria-hidden":"true"}})]),t._v(" "),i("span",{on:{click:function(e){t.exportData(1)}}},[i("v-icon",{attrs:{type:"upload"}})],1),t._v(" "),i("span",[i("v-icon",{directives:[{name:"tooltip",rawName:"v-tooltip.lefttop",value:t.tooltip1,expression:"tooltip1",modifiers:{lefttop:!0}}],attrs:{type:"question-circle-o"}})],1)])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1===t.iconActive,expression:"iconActive === 1"}],staticClass:"condition-select"},t._l(t.columns,function(e,a){return i("span",{key:a,class:{"condition-select-active":a===t.chartField},on:{click:function(i){t.changeChartField(e,a)}}},[t._v(t._s(e.title))])})),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1===t.iconActive,expression:"iconActive === 1"}],staticStyle:{"border-top":"1px solid #DFDFE1","padding-top":"6px"},style:{width:"100%",height:"300px"},attrs:{id:"myChart"}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2===t.iconActive,expression:"iconActive === 2"}],staticStyle:{height:"300px",overflow:"hidden"}},[i("el-scrollbar",[i("v-data-table",{ref:"xtable",staticStyle:{"padding-right":"10px"},attrs:{data:t.loadTimeData,columns:t.timeColumns,"current-data":t.mydata,"page-num":t.pageNo,pagination:!1,emptyText:"暂无数据",bordered:""},on:{"update:currentData":function(e){t.mydata=e}},scopedSlots:t._u([{key:"th",fn:function(e){return[i("div",{staticStyle:{"text-align":"center",color:"#000"}},[i("span",{domProps:{innerHTML:t._s(e.title)}})])]}},{key:"td",fn:function(e){return[t.ratePipe.includes(e.column.id)?i("div",{staticStyle:{"text-align":"center",color:"#666"}},[t._v(t._s(e.content)+"%")]):t.timePipe.includes(e.column.id)?i("div",{staticStyle:{"text-align":"center",color:"#666"}},[t._v(t._s(t._f("second")(e.content)))]):i("div",{staticStyle:{"text-align":"center",color:"#666"}},[t._v(t._s(e.content))])]}}])}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],staticClass:"clearfix content-pagination1",staticStyle:{"margin-top":"10px","margin-right":"10px"}},[i("div",{staticStyle:{float:"right",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(e){t.pageNo=Math.ceil(t.total/t.pageSize),t.changePageNo}}},[t._v("尾页")]),t._v(" "),i("div",{staticStyle:{float:"right"}},[i("v-pagination",{attrs:{value:t.pageNo,total:t.total,pageSize:t.pageSize,"show-quick-jumper":"",simple:""},on:{change:t.changePageNo}})],1),t._v(" "),i("div",{staticStyle:{float:"right",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(e){t.pageNo=1,t.changePageNo}}},[t._v("首页")])])],1)],1)]),t._v(" "),i("div",{staticClass:"v-content",style:t.vContentHeigth,attrs:{id:"viewBox1"}},[i("div",[t._v("\n          分析\n          "),i("div",{staticClass:"title-icon"},[i("span",{on:{click:function(e){t.exportData(2)}}},[i("v-icon",{attrs:{type:"upload"}})],1)])]),t._v(" "),i("v-breadcrumb",{staticStyle:{"margin-bottom":"10px","margin-top":"10px"},attrs:{separator:">"}},t._l(t.breadcrumb,function(e){return i("v-breadcrumb-item",{key:e.id,staticStyle:{cursor:"pointer"}},[i("span",{on:{click:function(i){t.backToDept(e)}}},[t._v(t._s(e.name))])])})),t._v(" "),i("div",{staticClass:"ant-table ant-table-large ant-table-bordered",staticStyle:{height:"auto"}},[i("table",{staticClass:"ant-table-content",staticStyle:{overflow:"visible"}},[i("thead",{staticClass:"ant-table-thead"},[i("tr",t._l(t.userColumns,function(e,a){return i("th",{key:a,staticStyle:{"text-align":"center",cursor:"pointer"},on:{click:function(i){t.sortDate(e,a)}}},[i("span",{domProps:{innerHTML:t._s(e.title)}}),t._v(" "),1===e.sortFlag?i("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[i("i",{staticClass:"fa fa-long-arrow-down",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),2===e.sortFlag?i("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[i("i",{staticClass:"fa fa-long-arrow-up",attrs:{"aria-hidden":"true"}})]):t._e()])}))]),t._v(" "),i("tbody",{staticClass:"ant-table-tbody"},[t._l(t.mydata2,function(e,a){return t.mydata2.length>0&&!t.dataLoading?i("tr",{key:a,staticClass:"ant-table-row",staticStyle:{"text-align":"center"}},t._l(t.userColumns,function(a,n){return i("td",{key:n,class:{"user-field":0===n&&!e.userId},on:{click:function(i){t.deptDrilling(e,n)}}},[t.ratePipe.includes(n+1)?i("span",[t._v(t._s(e[a.field])+"%")]):t.timePipe.includes(n+1)?i("span",[t._v(t._s(t._f("second")(e[a.field])))]):i("span",[t._v(t._s(e[a.field]))])])})):t._e()}),t._v(" "),0!==t.mydata2.length||t.dataLoading?t._e():i("tr",{staticStyle:{"text-align":"center"}},[i("td",{attrs:{colspan:"14"}},[t._v("暂无数据")])]),t._v(" "),t.dataLoading?i("tr",{staticStyle:{"text-align":"center"}},[i("td",{attrs:{colspan:"14"}},[i("v-spin",{attrs:{spinning:t.dataLoading}})],1)]):t._e()],2)]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.total2>0,expression:"total2>0"}],staticClass:"clearfix content-pagination2",staticStyle:{"margin-top":"10px"}},[i("div",{staticStyle:{float:"right",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(e){t.pageNo2=Math.ceil(t.total2/t.pageSize),t.changePageNo}}},[t._v("尾页")]),t._v(" "),i("div",{staticStyle:{float:"right"}},[i("v-pagination",{attrs:{value:t.pageNo2,total:t.total2,pageSize:t.pageSize,"show-quick-jumper":"",simple:""},on:{change:t.changePageNo}})],1),t._v(" "),i("div",{staticStyle:{float:"right",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(e){t.pageNo2=1,t.changePageNo}}},[t._v("首页")])])])],1)])])],1)},staticRenderFns:[]};var o=i("VU/8")(n,s,!1,function(t){i("xXpT")},"data-v-6e367a74",null).exports,l={name:"insight-newCustomer",components:{yhqDept:a.a},data:function(){return{timeColumns:[{id:1,title:"日期",field:"date"}],userColumns:[{id:1,title:"销售单元",field:"user"}],columns:[{id:2,title:"新增客户",field:"addFriendCount",sortFlag:0},{id:3,title:"主动申请",field:"activeApplyCount",sortFlag:0},{id:4,title:"申请通过",field:"activeSuccessCount",sortFlag:0},{id:5,title:"申请通过率",field:"activeApplaySuccessRate",sortFlag:0},{id:6,title:"被加通过",field:"unActiveApplySuccessCount",sortFlag:0},{id:7,title:"被加申请",field:"unActiveApplyCount",sortFlag:0},{id:8,title:"被加通过率",field:"unActiveApplySuccessRate",sortFlag:0},{id:9,title:"被加回加",field:"approveReplayCount",sortFlag:0},{id:10,title:"被加回加率",field:"approveReplayRate",sortFlag:0},{id:11,title:"跟进客户",field:"newFollowCount",sortFlag:0},{id:12,title:"跟进率",field:"followUpRate",sortFlag:0},{id:13,title:"有效沟通",field:"newValidCommunicationCount",sortFlag:0},{id:14,title:"有效沟通率",field:"validCommunicationRate",sortFlag:1}],maxRange:90,sortTip:{id:14,title:"有效沟通率",field:"validCommunicationRate",sortFlag:1},sortField:"validCommunicationRate",ratePipe:[5,8,10,12,14],timePipe:[],rateArr:["申请通过率","被加通过率","被加回加率","跟进率","有效沟通率"],timeArr:[],sortDir:1,viewBox2Style:{},viewBox2Flag:!1,screenHeight:window.innerHeight,vContentHeigth:{minHeight:window.innerHeight-447+"px"},mydata:[],mydata2:[],iconActive:1,pageNo:1,total:0,pageNo2:1,total2:0,name:"",rangeDate:["",""],departmentOptions:[],dept:"",sale:"",breadcrumb:[],chartData:[],xAxisData:[],chartFieldList:[],chartField:0,dataLoading:!0,dateList:[],userList:[],tooltip1:""}},created:function(){this.tooltip1="<p  style='font-size: 16px;'>字段说明</p><p style='line-height: 24px;'>新增客户：申请通过+被加通过</p><p style='line-height: 24px;'>主动申请：主动申请添加好友数，同一好友进行排重</p><p style='line-height: 24px;'>申请通过：主动申请后，成功成为好友的数量</p><p style='line-height: 24px;'>申请通过率：申请通过/主动申请</p><p style='line-height: 24px;'>被加通过：设置了验证通过的+未设置验证被加为好友的，单向好友也算&nbsp;&nbsp;</p><p style='line-height: 24px;'>被加申请：设置验证时，被客户申请添加好友数，同一客户进行排重</p><p style='line-height: 24px;'>被加通过率：通过客户申请数/客户申请数</p><p style='line-height: 24px;'>被加回加：未设置验证的，被加为好友后，加对方为好友的数量</p><p style='line-height: 24px;'>被加回加率：未设置验证情况下，被加回加/被加为好友数</p><p style='line-height: 24px;'>跟进客户：微信跟进的新客户数</p><p style='line-height: 24px;'>跟进率：微信跟进客户/新增客户</p><p style='line-height: 24px;'>有效沟通：微信有效沟通客户数</p><p style='line-height: 24px;'>有效沟通率：微信有效沟通/新增客户</p>";var t=this.myTool.timeFormat(new Date),e=this.myTool.timeFormat(new Date(Math.round((new Date).getTime()-25056e5)));this.rangeDate=[e,t],this.timeColumns=this.timeColumns.concat(this.columns),this.userColumns=this.userColumns.concat(this.columns),this.getChartFieldList()},methods:{getDataList:function(){var t=this;this.dataLoading=!0;var e=new URLSearchParams;return e.append("start_date",this.rangeDate[0]+" 00:00:00"),e.append("end_date",this.rangeDate[1]+" 23:59:59"),e.append("user_id",this.sale),e.append("department_id",this.dept),this.axios.post(this.serve.showOverview,e).then(function(e){t.dataLoading=!1,t.dateList=e.data.data.date,t.userList=e.data.data.user,t.updateData(t.dateList,t.userList)}).catch(function(t){return t})},updateData:function(t,e){this.dataLoading=!1,this.dateList=t,this.userList=e,this.yhqSortDate(),this.total=this.dateList.length,this.total2=this.userList.length;var i=!0,a=!1,n=void 0;try{for(var s,o=this.userList[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;l.userId?l.user=l.userName:l.user=l.departmentName}}catch(t){a=!0,n=t}finally{try{!i&&o.return&&o.return()}finally{if(a)throw n}}this.changePageNo(1),this.initChartBefore(this.dateList),this.initChart(this.chartData[this.chartField]),this.scrollPage()},loadTimeData:function(){var t=this;return new Promise(function(t,e){t()}).then(function(e){var i={};i.pageNo=t.pageNo,i.pageSize=t.pageSize,i.totalCount=t.dateList.length,i.result=[];for(var a=0;a<30&&a<t.dateList.length;a++)i.result.push(t.dateList[a]);return t.total=t.dateList.length,setTimeout(function(){t.total>0&&(t.$el.querySelector(".content-pagination1 .ant-pagination-simple-pager input").value=t.pageNo)},300),i})},deptSelectEvent1:function(t,e){this.breadcrumb=[];for(var i=0;i<e.length;i++){var a=e[i];a.isDept&&this.breadcrumb.push(a)}t.isDept?(this.dept=t.id,this.sale=""):(this.dept=t.department_id,this.sale=t.sales_id),this.timeConfirm()},deptInitEvent1:function(t){this.breadcrumb=t},deptDrilling:function(t,e){t.userId?this.sale!==t.userId&&(this.sale=t.userId,this.timeConfirm()):0===e&&(t.deptId=t.departmentId,t.deptName=t.departmentName,this.$refs.yhqDept1.reverseSet(t),this.dept=t.departmentId,this.sale="",this.timeConfirm(),this.breadcrumb.push({id:t.departmentId,name:t.departmentName}))},backToDept:function(t){this.$refs.yhqDept1.reverseSet(t),this.dept=t.id,this.sale="",this.timeConfirm();for(var e=[],i=0;i<=this.breadcrumb.length&&(e.push(this.breadcrumb[i]),this.breadcrumb[i].id!==t.id);i++);this.breadcrumb=e},changePageNo:function(t){var e=this;this.pageNo=t,this.mydata=[];for(var i=30*(this.pageNo-1);i<30*this.pageNo;i++)this.dateList[i]&&this.mydata.push(this.dateList[i]);setTimeout(function(){e.mydata.length>0&&(e.$el.querySelector(".content-pagination1 .ant-pagination-simple-pager input").value=e.pageNo)},300),this.pageNo2=t,this.mydata2=[];for(var a=30*(this.pageNo2-1);a<30*this.pageNo2;a++)this.userList[a]&&this.mydata2.push(this.userList[a]);setTimeout(function(){e.mydata2.length>0&&(e.$el.querySelector(".content-pagination2 .ant-pagination-simple-pager input").value=e.pageNo2)},300)},timeConfirm:function(){this.pageNo=1,this.pageNo2=1,this.getDataList()},exportData:function(t){var e=this.rangeDate[0]+" 00:00:00",i=this.rangeDate[1]+" 23:59:59";if(1===t){var a="/salesinsight/exportSalesInsight?user_id="+encodeURI(this.sale)+"&department_id="+encodeURI(this.dept)+"&start_date="+e+"&end_date="+i+"&page_type=newfriend&data_type=date";window.open(a,"_blank")}else{var n="/salesinsight/exportSalesInsight?user_id="+encodeURI(this.sale)+"&department_id="+encodeURI(this.dept)+"&start_date="+e+"&end_date="+i+"&page_type=newfriend&data_type=user";window.open(n,"_blank")}},getChartFieldList:function(){for(var t=0;t<this.columns.length;t++){var e=this.columns[t];this.chartFieldList.push({id:t,value:e.field,label:e.title})}this.chartField=this.chartFieldList[this.chartField].id},changeChartField:function(t,e){this.chartField=e,this.initChart(this.chartData[this.chartField])},initChartBefore:function(t){for(var e=[],i=0;i<this.columns.length;i++){e.push([])}this.xAxisData=[],this.chartData=[];var a=!0,n=!1,s=void 0;try{for(var o,l=t[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var r=o.value;this.xAxisData.push(r.date);for(var d=0;d<this.columns.length;d++)if(this.ratePipe.includes(d+2)){var c=(r[this.columns[d].field]/100).toFixed(3)/1;e[d].push(c)}else e[d].push(r[this.columns[d].field])}}catch(t){n=!0,s=t}finally{try{!a&&l.return&&l.return()}finally{if(n)throw s}}this.xAxisData.reverse();var h=!0,p=!1,u=void 0;try{for(var v,g=e[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var m=v.value;this.chartData.push(m.reverse())}}catch(t){p=!0,u=t}finally{try{!h&&g.return&&g.return()}finally{if(p)throw u}}},initChart:function(t){var e=this.rateArr,i=this.timeArr;this.echarts.init(document.getElementById("myChart2")).setOption({tooltip:{formatter:function(t){if(t[0]){var a=t[0].name,n=!0,s=!1,o=void 0;try{for(var l,r=t[Symbol.iterator]();!(n=(l=r.next()).done);n=!0){var d=l.value;if(e.includes(d.seriesName)){var c=(100*d.value).toFixed(3)/1;a+="<br/>"+d.marker+d.seriesName+": "+c+"%"}else if(i.includes(d.seriesName)){var h=d.value,p=parseInt(h/86400),u=parseInt(h%86400/3600),v=parseInt(h%86400%3600/60),g=parseInt(h%86400%3600%60),m="";p>0&&(m+=p+"天"),u>0&&(m+=u+"小时"),v>0&&(m+=v+"分钟"),g>0&&(m+=g+"秒"),0===m.length&&(m="0秒"),a+="<br/>"+d.marker+d.seriesName+": "+m}else a+="<br/>"+d.marker+d.seriesName+": "+d.value}}catch(t){s=!0,o=t}finally{try{!n&&r.return&&r.return()}finally{if(s)throw o}}return a}return""},trigger:"axis"},xAxis:{boundaryGap:!1,data:this.xAxisData,splitLine:{show:!0}},yAxis:{splitLine:{show:!0}},series:[{name:this.chartFieldList[this.chartField].label,type:"line",symbol:"none",data:t}]})},yhqSortDate:function(){this.userList.sort(this.yhqSortBy())},yhqSortBy:function(){var t=this.sortField,e=this.sortDir;return function(i,a){return 1===e?a[t]-i[t]:2===e?i[t]-a[t]:void 0}},sortDate:function(t){t.id>1&&t.id<this.columns.length+2&&(this.sortTip&&this.sortTip.field!==t.field&&(this.userColumns[this.sortTip.id-1].sortFlag=0),0===t.sortFlag?t.sortFlag=1:1===t.sortFlag?t.sortFlag=2:2===t.sortFlag&&(t.sortFlag=1),this.sortTip=t,this.sortField=t.field,this.sortDir=t.sortFlag,this.yhqSortDate(),this.changePageNo(1))},scrollPage:function(){var t=this;setTimeout(function(){var e=document.querySelector(".chart-page2 .el-scrollbar__wrap");e&&e.addEventListener("scroll",function(){var e=document.querySelector("#viewBox2").getBoundingClientRect();t.viewBox2Style={width:e.width-20+"px"},e.top<=0?t.viewBox2Flag=!0:t.viewBox2Flag=!1})},300)},myChartResize:function(t){var e=this;1===this.iconActive&&setTimeout(function(){e.echarts.init(document.getElementById("myChart2")).resize()},t)}},mounted:function(){var t=this;window.onresize=function(){return t.screenHeight=window.innerHeight,void(t.vContentHeigth={minHeight:window.innerHeight-447+"px"})}},computed:{collapsed:function(){return this.myChartResize(500),this.$store.state.collapsed}},watch:{screenHeight:function(t){this.screenHeight=t,this.vContentHeigth={minHeight:t-447+"px"}}}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"v-container bg-color chart-page2"},[i("div",{staticClass:"header v-home"},[i("div",{staticClass:"time time-panel clearfix"},[i("v-date-picker",{ref:"datePicker",staticStyle:{"margin-left":"10px"},attrs:{range:"",maxRange:t.maxRange},on:{confirm:function(e){t.timeConfirm()}},model:{value:t.rangeDate,callback:function(e){t.rangeDate=e},expression:"rangeDate"}}),t._v(" "),i("yhq-dept",{ref:"yhqDept1",staticStyle:{"margin-right":"0"},on:{deptSelectEvent:t.deptSelectEvent1,deptInitEvent:t.deptInitEvent1}})],1)]),t._v(" "),i("el-scrollbar",[i("div",{staticStyle:{height:"100%"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.viewBox2Flag,expression:"viewBox2Flag"}],staticClass:"ant-table ant-table-large ant-table-bordered",staticStyle:{width:"100%",height:"57px",position:"absolute",left:"10px",top:"0","z-index":"999"},style:t.viewBox2Style},[i("table",{staticClass:"ant-table-content",staticStyle:{overflow:"visible"}},[i("thead",{staticClass:"ant-table-thead"},[i("tr",t._l(t.userColumns,function(e,a){return i("th",{key:a,staticStyle:{"text-align":"center",cursor:"pointer"},on:{click:function(i){t.sortDate(e,a)}}},[i("span",{domProps:{innerHTML:t._s(e.title)}}),t._v(" "),1===e.sortFlag?i("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[i("i",{staticClass:"fa fa-long-arrow-down",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),2===e.sortFlag?i("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[i("i",{staticClass:"fa fa-long-arrow-up",attrs:{"aria-hidden":"true"}})]):t._e()])}))]),t._v(" "),i("tbody",{staticClass:"ant-table-tbody"},t._l(t.mydata2,function(e,a){return t.mydata2.length>0&&!t.dataLoading?i("tr",{key:a,staticClass:"ant-table-row",staticStyle:{"text-align":"center"}},t._l(t.userColumns,function(a,n){return i("td",{key:n,class:{"user-field":0===n&&!e.userId},on:{click:function(i){t.deptDrilling(e,n)}}},[t.ratePipe.includes(n+1)?i("span",[t._v(t._s(e[a.field])+"%")]):t.timePipe.includes(n+1)?i("span",[t._v(t._s(t._f("second")(e[a.field])))]):i("span",[t._v(t._s(e[a.field]))])])})):t._e()}))])]),t._v(" "),i("div",{staticClass:"v-content",staticStyle:{"margin-bottom":"5px",position:"relative",overflow:"visible"}},[i("div",{staticStyle:{"margin-bottom":"10px"}},[t._v("\n          趋势"),i("span",{staticStyle:{color:"white",position:"absolute",left:"10px","z-index":"-999"}},[t._v(t._s(t.collapsed))]),t._v(" "),i("div",{staticClass:"title-icon"},[i("span",{class:{"title-icon-active":1===t.iconActive},on:{click:function(e){t.iconActive=1,t.myChartResize(50)}}},[i("v-icon",{attrs:{type:"line-chart"}})],1),t._v(" "),i("span",{class:{"title-icon-active":2===t.iconActive},on:{click:function(e){t.iconActive=2}}},[i("i",{staticClass:"fa fa-table",attrs:{"aria-hidden":"true"}})]),t._v(" "),i("span",{on:{click:function(e){t.exportData(1)}}},[i("v-icon",{attrs:{type:"upload"}})],1),t._v(" "),i("span",[i("v-icon",{directives:[{name:"tooltip",rawName:"v-tooltip.lefttop",value:t.tooltip1,expression:"tooltip1",modifiers:{lefttop:!0}}],attrs:{type:"question-circle-o"}})],1)])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1===t.iconActive,expression:"iconActive === 1"}],staticClass:"condition-select"},t._l(t.columns,function(e,a){return i("span",{key:a,class:{"condition-select-active":a===t.chartField},on:{click:function(i){t.changeChartField(e,a)}}},[t._v(t._s(e.title))])})),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1===t.iconActive,expression:"iconActive === 1"}],staticStyle:{"border-top":"1px solid #DFDFE1","padding-top":"6px"},style:{width:"100%",height:"300px"},attrs:{id:"myChart2"}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2===t.iconActive,expression:"iconActive === 2"}],staticStyle:{height:"300px",overflow:"hidden"}},[i("el-scrollbar",[i("v-data-table",{ref:"xtable",staticStyle:{"padding-right":"10px"},attrs:{data:t.loadTimeData,columns:t.timeColumns,"current-data":t.mydata,"page-num":t.pageNo,pagination:!1,emptyText:"暂无数据",bordered:""},on:{"update:currentData":function(e){t.mydata=e}},scopedSlots:t._u([{key:"th",fn:function(e){return[i("div",{staticStyle:{"text-align":"center",color:"#000"}},[i("span",{domProps:{innerHTML:t._s(e.title)}})])]}},{key:"td",fn:function(e){return[t.ratePipe.includes(e.column.id)?i("div",{staticStyle:{"text-align":"center",color:"#666"}},[t._v(t._s(e.content)+"%")]):t.timePipe.includes(e.column.id)?i("div",{staticStyle:{"text-align":"center",color:"#666"}},[t._v(t._s(t._f("second")(e.content)))]):i("div",{staticStyle:{"text-align":"center",color:"#666"}},[t._v(t._s(e.content))])]}}])}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],staticClass:"clearfix content-pagination1",staticStyle:{"margin-top":"10px","margin-right":"10px"}},[i("div",{staticStyle:{float:"right",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(e){t.pageNo=Math.ceil(t.total/t.pageSize),t.changePageNo}}},[t._v("尾页")]),t._v(" "),i("div",{staticStyle:{float:"right"}},[i("v-pagination",{attrs:{value:t.pageNo,total:t.total,pageSize:t.pageSize,"show-quick-jumper":"",simple:""},on:{change:t.changePageNo}})],1),t._v(" "),i("div",{staticStyle:{float:"right",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(e){t.pageNo=1,t.changePageNo}}},[t._v("首页")])])],1)],1)]),t._v(" "),i("div",{staticClass:"v-content",style:t.vContentHeigth,attrs:{id:"viewBox2"}},[i("div",[t._v("\n          分析\n          "),i("div",{staticClass:"title-icon"},[i("span",{on:{click:function(e){t.exportData(2)}}},[i("v-icon",{attrs:{type:"upload"}})],1)])]),t._v(" "),i("v-breadcrumb",{staticStyle:{"margin-bottom":"10px","margin-top":"10px"},attrs:{separator:">"}},t._l(t.breadcrumb,function(e){return i("v-breadcrumb-item",{key:e.id,staticStyle:{cursor:"pointer"}},[i("span",{on:{click:function(i){t.backToDept(e)}}},[t._v(t._s(e.name))])])})),t._v(" "),i("div",{staticClass:"ant-table ant-table-large ant-table-bordered",staticStyle:{height:"auto"}},[i("table",{staticClass:"ant-table-content",staticStyle:{overflow:"visible"}},[i("thead",{staticClass:"ant-table-thead"},[i("tr",t._l(t.userColumns,function(e,a){return i("th",{key:a,staticStyle:{"text-align":"center",cursor:"pointer"},on:{click:function(i){t.sortDate(e,a)}}},[i("span",{domProps:{innerHTML:t._s(e.title)}}),t._v(" "),1===e.sortFlag?i("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[i("i",{staticClass:"fa fa-long-arrow-down",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),2===e.sortFlag?i("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[i("i",{staticClass:"fa fa-long-arrow-up",attrs:{"aria-hidden":"true"}})]):t._e()])}))]),t._v(" "),i("tbody",{staticClass:"ant-table-tbody"},[t._l(t.mydata2,function(e,a){return t.mydata2.length>0&&!t.dataLoading?i("tr",{key:a,staticClass:"ant-table-row",staticStyle:{"text-align":"center"}},t._l(t.userColumns,function(a,n){return i("td",{key:n,class:{"user-field":0===n&&!e.userId},on:{click:function(i){t.deptDrilling(e,n)}}},[t.ratePipe.includes(n+1)?i("span",[t._v(t._s(e[a.field])+"%")]):t.timePipe.includes(n+1)?i("span",[t._v(t._s(t._f("second")(e[a.field])))]):i("span",[t._v(t._s(e[a.field]))])])})):t._e()}),t._v(" "),0!==t.mydata2.length||t.dataLoading?t._e():i("tr",{staticStyle:{"text-align":"center"}},[i("td",{attrs:{colspan:"14"}},[t._v("暂无数据")])]),t._v(" "),t.dataLoading?i("tr",{staticStyle:{"text-align":"center"}},[i("td",{attrs:{colspan:"14"}},[i("v-spin",{attrs:{spinning:t.dataLoading}})],1)]):t._e()],2)]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.total2>0,expression:"total2>0"}],staticClass:"clearfix content-pagination2",staticStyle:{"margin-top":"10px"}},[i("div",{staticStyle:{float:"right",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(e){t.pageNo2=Math.ceil(t.total2/t.pageSize),t.changePageNo}}},[t._v("尾页")]),t._v(" "),i("div",{staticStyle:{float:"right"}},[i("v-pagination",{attrs:{value:t.pageNo2,total:t.total2,pageSize:t.pageSize,"show-quick-jumper":"",simple:""},on:{change:t.changePageNo}})],1),t._v(" "),i("div",{staticStyle:{float:"right",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(e){t.pageNo2=1,t.changePageNo}}},[t._v("首页")])])])],1)])])],1)},staticRenderFns:[]};var d=i("VU/8")(l,r,!1,function(t){i("cEGa")},"data-v-c33af69c",null).exports,c={name:"insight-oldCustomer",components:{yhqDept:a.a},data:function(){return{timeColumns:[{id:1,title:"日期",field:"date"}],userColumns:[{id:1,title:"销售单元",field:"user"}],columns:[{id:2,title:"有效沟通",field:"oldValidCommunicationCount",sortFlag:1},{id:3,title:"跟进客户",field:"oldFollowCount",sortFlag:0},{id:4,title:"昨日客户跟进率",field:"oneDayCommunicationRate",sortFlag:0},{id:5,title:"3日客户跟进率",field:"threeDayCommunicationRate",sortFlag:0},{id:6,title:"7日客户跟进率",field:"sevenDayCommunicationRate",sortFlag:0}],maxRange:90,sortTip:{id:2,title:"有效沟通",field:"oldValidCommunicationCount",sortFlag:0},sortField:"oldValidCommunicationCount",ratePipe:[4,5,6],timePipe:[],rateArr:["昨日客户跟进率","3日客户跟进率","7日客户跟进率"],timeArr:[],sortDir:1,viewBox3Style:{},viewBox3Flag:!1,screenHeight:window.innerHeight,vContentHeigth:{minHeight:window.innerHeight-447+"px"},mydata:[],mydata2:[],iconActive:1,pageNo:1,total:0,pageNo2:1,total2:0,name:"",rangeDate:["",""],departmentOptions:[],dept:"",sale:"",breadcrumb:[],chartData:[],xAxisData:[],chartFieldList:[],chartField:0,dataLoading:!0,dateList:[],userList:[],tooltip1:""}},created:function(){this.tooltip1="<p  style='font-size: 16px;'>字段说明</p><p style='line-height: 24px;'>有效沟通：微信有效沟通客户数</p><p style='line-height: 24px;'>跟进客户：微信跟进的老客户数</p><p style='line-height: 24px;'>昨日客户占比：昨日新增客户微信跟进数/昨日新增客户数。选中某一天可查看该指标。</p><p style='line-height: 24px;'>3日客户占比：3日内新增客户微信跟进数/3日内新增客户数，3日为昨天、前天、大前天&nbsp;&nbsp;</p><p style='line-height: 24px;'>7日客户占比：7日内新增客户微信跟进数/7日内新增客户数，7日为从昨天开始的7天</p>";var t=this.myTool.timeFormat(new Date),e=this.myTool.timeFormat(new Date(Math.round((new Date).getTime()-25056e5)));this.rangeDate=[e,t],this.timeColumns=this.timeColumns.concat(this.columns),this.userColumns=this.userColumns.concat(this.columns),this.getChartFieldList()},methods:{getDataList:function(){var t=this;this.dataLoading=!0;var e=new URLSearchParams;return e.append("start_date",this.rangeDate[0]+" 00:00:00"),e.append("end_date",this.rangeDate[1]+" 23:59:59"),e.append("user_id",this.sale),e.append("department_id",this.dept),this.axios.post(this.serve.showOverview,e).then(function(e){t.dataLoading=!1,t.dateList=e.data.data.date,t.userList=e.data.data.user,t.updateData(t.dateList,t.userList)}).catch(function(t){return t})},updateData:function(t,e){this.dataLoading=!1,this.dateList=t,this.userList=e,this.yhqSortDate(),this.total=this.dateList.length,this.total2=this.userList.length;var i=!0,a=!1,n=void 0;try{for(var s,o=this.userList[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;l.userId?l.user=l.userName:l.user=l.departmentName}}catch(t){a=!0,n=t}finally{try{!i&&o.return&&o.return()}finally{if(a)throw n}}this.changePageNo(1),this.initChartBefore(this.dateList),this.initChart(this.chartData[this.chartField]),this.scrollPage()},loadTimeData:function(){var t=this;return new Promise(function(t,e){t()}).then(function(e){var i={};i.pageNo=t.pageNo,i.pageSize=t.pageSize,i.totalCount=t.dateList.length,i.result=[];for(var a=0;a<30&&a<t.dateList.length;a++)i.result.push(t.dateList[a]);return t.total=t.dateList.length,setTimeout(function(){t.total>0&&(t.$el.querySelector(".content-pagination1 .ant-pagination-simple-pager input").value=t.pageNo)},300),i})},deptSelectEvent1:function(t,e){this.breadcrumb=[];for(var i=0;i<e.length;i++){var a=e[i];a.isDept&&this.breadcrumb.push(a)}t.isDept?(this.dept=t.id,this.sale=""):(this.dept=t.department_id,this.sale=t.sales_id),this.timeConfirm()},deptInitEvent1:function(t){this.breadcrumb=t},deptDrilling:function(t,e){t.userId?this.sale!==t.userId&&(this.sale=t.userId,this.timeConfirm()):0===e&&(t.deptId=t.departmentId,t.deptName=t.departmentName,this.$refs.yhqDept1.reverseSet(t),this.dept=t.departmentId,this.sale="",this.timeConfirm(),this.breadcrumb.push({id:t.departmentId,name:t.departmentName}))},backToDept:function(t){this.$refs.yhqDept1.reverseSet(t),this.dept=t.id,this.sale="",this.timeConfirm();for(var e=[],i=0;i<=this.breadcrumb.length&&(e.push(this.breadcrumb[i]),this.breadcrumb[i].id!==t.id);i++);this.breadcrumb=e},changePageNo:function(t){var e=this;this.pageNo=t,this.mydata=[];for(var i=30*(this.pageNo-1);i<30*this.pageNo;i++)this.dateList[i]&&this.mydata.push(this.dateList[i]);setTimeout(function(){e.mydata.length>0&&(e.$el.querySelector(".content-pagination1 .ant-pagination-simple-pager input").value=e.pageNo)},300),this.pageNo2=t,this.mydata2=[];for(var a=30*(this.pageNo2-1);a<30*this.pageNo2;a++)this.userList[a]&&this.mydata2.push(this.userList[a]);setTimeout(function(){e.mydata2.length>0&&(e.$el.querySelector(".content-pagination2 .ant-pagination-simple-pager input").value=e.pageNo2)},300)},timeConfirm:function(){this.pageNo=1,this.pageNo2=1,this.getDataList()},exportData:function(t){var e=this.rangeDate[0]+" 00:00:00",i=this.rangeDate[1]+" 23:59:59";if(1===t){var a="/salesinsight/exportSalesInsight?user_id="+encodeURI(this.sale)+"&department_id="+encodeURI(this.dept)+"&start_date="+e+"&end_date="+i+"&page_type=oldfriend&data_type=date";window.open(a,"_blank")}else{var n="/salesinsight/exportSalesInsight?user_id="+encodeURI(this.sale)+"&department_id="+encodeURI(this.dept)+"&start_date="+e+"&end_date="+i+"&page_type=oldfriend&data_type=user";window.open(n,"_blank")}},getChartFieldList:function(){for(var t=0;t<this.columns.length;t++){var e=this.columns[t];this.chartFieldList.push({id:t,value:e.field,label:e.title})}this.chartField=this.chartFieldList[this.chartField].id},changeChartField:function(t,e){this.chartField=e,this.initChart(this.chartData[this.chartField])},initChartBefore:function(t){for(var e=[],i=0;i<this.columns.length;i++){e.push([])}this.xAxisData=[],this.chartData=[];var a=!0,n=!1,s=void 0;try{for(var o,l=t[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var r=o.value;this.xAxisData.push(r.date);for(var d=0;d<this.columns.length;d++)if(this.ratePipe.includes(d+2)){var c=(r[this.columns[d].field]/100).toFixed(3)/1;e[d].push(c)}else e[d].push(r[this.columns[d].field])}}catch(t){n=!0,s=t}finally{try{!a&&l.return&&l.return()}finally{if(n)throw s}}this.xAxisData.reverse();var h=!0,p=!1,u=void 0;try{for(var v,g=e[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var m=v.value;this.chartData.push(m.reverse())}}catch(t){p=!0,u=t}finally{try{!h&&g.return&&g.return()}finally{if(p)throw u}}},initChart:function(t){var e=this.rateArr,i=this.timeArr;this.echarts.init(document.getElementById("myChart3")).setOption({tooltip:{formatter:function(t){if(t[0]){var a=t[0].name,n=!0,s=!1,o=void 0;try{for(var l,r=t[Symbol.iterator]();!(n=(l=r.next()).done);n=!0){var d=l.value;if(e.includes(d.seriesName)){var c=(100*d.value).toFixed(3)/1;a+="<br/>"+d.marker+d.seriesName+": "+c+"%"}else if(i.includes(d.seriesName)){var h=d.value,p=parseInt(h/86400),u=parseInt(h%86400/3600),v=parseInt(h%86400%3600/60),g=parseInt(h%86400%3600%60),m="";p>0&&(m+=p+"天"),u>0&&(m+=u+"小时"),v>0&&(m+=v+"分钟"),g>0&&(m+=g+"秒"),0===m.length&&(m="0秒"),a+="<br/>"+d.marker+d.seriesName+": "+m}else a+="<br/>"+d.marker+d.seriesName+": "+d.value}}catch(t){s=!0,o=t}finally{try{!n&&r.return&&r.return()}finally{if(s)throw o}}return a}return""},trigger:"axis"},xAxis:{boundaryGap:!1,data:this.xAxisData,splitLine:{show:!0}},yAxis:{splitLine:{show:!0}},series:[{name:this.chartFieldList[this.chartField].label,type:"line",symbol:"none",data:t}]})},yhqSortDate:function(){this.userList.sort(this.yhqSortBy())},yhqSortBy:function(){var t=this.sortField,e=this.sortDir;return function(i,a){return 1===e?a[t]-i[t]:2===e?i[t]-a[t]:void 0}},sortDate:function(t){t.id>1&&t.id<this.columns.length+2&&(this.sortTip&&this.sortTip.field!==t.field&&(this.userColumns[this.sortTip.id-1].sortFlag=0),0===t.sortFlag?t.sortFlag=1:1===t.sortFlag?t.sortFlag=2:2===t.sortFlag&&(t.sortFlag=1),this.sortTip=t,this.sortField=t.field,this.sortDir=t.sortFlag,this.yhqSortDate(),this.changePageNo(1))},scrollPage:function(){var t=this;setTimeout(function(){var e=document.querySelector(".chart-page3 .el-scrollbar__wrap");e&&e.addEventListener("scroll",function(){var e=document.querySelector("#viewBox3").getBoundingClientRect();t.viewBox3Style={width:e.width-20+"px"},e.top<=0?t.viewBox3Flag=!0:t.viewBox3Flag=!1})},300)},myChartResize:function(t){var e=this;1===this.iconActive&&setTimeout(function(){e.echarts.init(document.getElementById("myChart3")).resize()},t)}},mounted:function(){var t=this;window.onresize=function(){return t.screenHeight=window.innerHeight,void(t.vContentHeigth={minHeight:window.innerHeight-447+"px"})}},computed:{collapsed:function(){return this.myChartResize(500),this.$store.state.collapsed}},watch:{screenHeight:function(t){this.screenHeight=t,this.vContentHeigth={minHeight:t-447+"px"}}}},h={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"v-container bg-color chart-page3"},[i("div",{staticClass:"header v-home"},[i("div",{staticClass:"time time-panel clearfix"},[i("v-date-picker",{ref:"datePicker",staticStyle:{"margin-left":"10px"},attrs:{range:"",maxRange:t.maxRange},on:{confirm:function(e){t.timeConfirm()}},model:{value:t.rangeDate,callback:function(e){t.rangeDate=e},expression:"rangeDate"}}),t._v(" "),i("yhq-dept",{ref:"yhqDept1",staticStyle:{"margin-right":"0"},on:{deptSelectEvent:t.deptSelectEvent1,deptInitEvent:t.deptInitEvent1}})],1)]),t._v(" "),i("el-scrollbar",[i("div",{staticStyle:{height:"100%"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.viewBox3Flag,expression:"viewBox3Flag"}],staticClass:"ant-table ant-table-large ant-table-bordered",staticStyle:{width:"100%",height:"57px",position:"absolute",left:"10px",top:"0","z-index":"999"},style:t.viewBox3Style},[i("table",{staticClass:"ant-table-content",staticStyle:{overflow:"visible"}},[i("thead",{staticClass:"ant-table-thead"},[i("tr",t._l(t.userColumns,function(e,a){return i("th",{key:a,staticStyle:{"text-align":"center",cursor:"pointer"},on:{click:function(i){t.sortDate(e,a)}}},[i("span",{domProps:{innerHTML:t._s(e.title)}}),t._v(" "),1===e.sortFlag?i("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[i("i",{staticClass:"fa fa-long-arrow-down",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),2===e.sortFlag?i("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[i("i",{staticClass:"fa fa-long-arrow-up",attrs:{"aria-hidden":"true"}})]):t._e()])}))]),t._v(" "),i("tbody",{staticClass:"ant-table-tbody"},t._l(t.mydata2,function(e,a){return t.mydata2.length>0&&!t.dataLoading?i("tr",{key:a,staticClass:"ant-table-row",staticStyle:{"text-align":"center"}},t._l(t.userColumns,function(a,n){return i("td",{key:n,class:{"user-field":0===n&&!e.userId},on:{click:function(i){t.deptDrilling(e,n)}}},[t.ratePipe.includes(n+1)?i("span",[t._v(t._s(e[a.field])+"%")]):t.timePipe.includes(n+1)?i("span",[t._v(t._s(t._f("second")(e[a.field])))]):i("span",[t._v(t._s(e[a.field]))])])})):t._e()}))])]),t._v(" "),i("div",{staticClass:"v-content",staticStyle:{"margin-bottom":"5px",position:"relative",overflow:"visible"}},[i("div",{staticStyle:{"margin-bottom":"10px"}},[t._v("\n          趋势"),i("span",{staticStyle:{color:"white",position:"absolute",left:"10px","z-index":"-999"}},[t._v(t._s(t.collapsed))]),t._v(" "),i("div",{staticClass:"title-icon"},[i("span",{class:{"title-icon-active":1===t.iconActive},on:{click:function(e){t.iconActive=1,t.myChartResize(50)}}},[i("v-icon",{attrs:{type:"line-chart"}})],1),t._v(" "),i("span",{class:{"title-icon-active":2===t.iconActive},on:{click:function(e){t.iconActive=2}}},[i("i",{staticClass:"fa fa-table",attrs:{"aria-hidden":"true"}})]),t._v(" "),i("span",{on:{click:function(e){t.exportData(1)}}},[i("v-icon",{attrs:{type:"upload"}})],1),t._v(" "),i("span",[i("v-icon",{directives:[{name:"tooltip",rawName:"v-tooltip.lefttop",value:t.tooltip1,expression:"tooltip1",modifiers:{lefttop:!0}}],attrs:{type:"question-circle-o"}})],1)])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1===t.iconActive,expression:"iconActive === 1"}],staticClass:"condition-select"},t._l(t.columns,function(e,a){return t.rangeDate[0]===t.rangeDate[1]||t.rangeDate[0]!==t.rangeDate[1]&&e.id<4?i("span",{key:a,class:{"condition-select-active":a===t.chartField},on:{click:function(i){t.changeChartField(e,a)}}},[t._v("\n            "+t._s(e.title)+"\n          ")]):t._e()})),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1===t.iconActive,expression:"iconActive === 1"}],staticStyle:{"border-top":"1px solid #DFDFE1","padding-top":"6px"},style:{width:"100%",height:"300px"},attrs:{id:"myChart3"}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2===t.iconActive,expression:"iconActive === 2"}],staticStyle:{height:"300px",overflow:"hidden"}},[i("el-scrollbar",[i("v-data-table",{ref:"xtable",staticStyle:{"padding-right":"10px"},attrs:{data:t.loadTimeData,columns:t.timeColumns,"current-data":t.mydata,"page-num":t.pageNo,pagination:!1,emptyText:"暂无数据",bordered:""},on:{"update:currentData":function(e){t.mydata=e}},scopedSlots:t._u([{key:"th",fn:function(e){return[i("div",{staticStyle:{"text-align":"center",color:"#000"}},[i("span",{domProps:{innerHTML:t._s(e.title)}})])]}},{key:"td",fn:function(e){return[t.ratePipe.includes(e.column.id)?i("div",{staticStyle:{"text-align":"center",color:"#666"}},[t.rangeDate[0]===t.rangeDate[1]?i("span",[t._v(t._s(e.content)+"%")]):i("span",[t._v("-")])]):t.timePipe.includes(e.column.id)?i("div",{staticStyle:{"text-align":"center",color:"#666"}},[t._v(t._s(t._f("second")(e.content)))]):i("div",{staticStyle:{"text-align":"center",color:"#666"}},[t._v(t._s(e.content))])]}}])}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],staticClass:"clearfix content-pagination1",staticStyle:{"margin-top":"10px","margin-right":"10px"}},[i("div",{staticStyle:{float:"right",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(e){t.pageNo=Math.ceil(t.total/t.pageSize),t.changePageNo}}},[t._v("尾页")]),t._v(" "),i("div",{staticStyle:{float:"right"}},[i("v-pagination",{attrs:{value:t.pageNo,total:t.total,pageSize:t.pageSize,"show-quick-jumper":"",simple:""},on:{change:t.changePageNo}})],1),t._v(" "),i("div",{staticStyle:{float:"right",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(e){t.pageNo=1,t.changePageNo}}},[t._v("首页")])])],1)],1)]),t._v(" "),i("div",{staticClass:"v-content",style:t.vContentHeigth,attrs:{id:"viewBox3"}},[i("div",[t._v("\n          分析\n          "),i("div",{staticClass:"title-icon"},[i("span",{on:{click:function(e){t.exportData(2)}}},[i("v-icon",{attrs:{type:"upload"}})],1)])]),t._v(" "),i("v-breadcrumb",{staticStyle:{"margin-bottom":"10px","margin-top":"10px"},attrs:{separator:">"}},t._l(t.breadcrumb,function(e){return i("v-breadcrumb-item",{key:e.id,staticStyle:{cursor:"pointer"}},[i("span",{on:{click:function(i){t.backToDept(e)}}},[t._v(t._s(e.name))])])})),t._v(" "),i("div",{staticClass:"ant-table ant-table-large ant-table-bordered",staticStyle:{height:"auto"}},[i("table",{staticClass:"ant-table-content",staticStyle:{overflow:"visible"}},[i("thead",{staticClass:"ant-table-thead"},[i("tr",t._l(t.userColumns,function(e,a){return i("th",{key:a,staticStyle:{"text-align":"center",cursor:"pointer"},on:{click:function(i){t.sortDate(e,a)}}},[i("span",{domProps:{innerHTML:t._s(e.title)}}),t._v(" "),1===e.sortFlag?i("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[i("i",{staticClass:"fa fa-long-arrow-down",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),2===e.sortFlag?i("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[i("i",{staticClass:"fa fa-long-arrow-up",attrs:{"aria-hidden":"true"}})]):t._e()])}))]),t._v(" "),i("tbody",{staticClass:"ant-table-tbody"},[t._l(t.mydata2,function(e,a){return t.mydata2.length>0&&!t.dataLoading?i("tr",{key:a,staticClass:"ant-table-row",staticStyle:{"text-align":"center"}},t._l(t.userColumns,function(a,n){return i("td",{key:n,class:{"user-field":0===n&&!e.userId},on:{click:function(i){t.deptDrilling(e,n)}}},[t.ratePipe.includes(n+1)?i("span",[t.rangeDate[0]===t.rangeDate[1]?i("span",[t._v(t._s(e[a.field])+"%")]):i("span",[t._v("-")])]):t.timePipe.includes(n+1)?i("span",[t._v(t._s(t._f("second")(e[a.field])))]):i("span",[t._v(t._s(e[a.field]))])])})):t._e()}),t._v(" "),0!==t.mydata2.length||t.dataLoading?t._e():i("tr",{staticStyle:{"text-align":"center"}},[i("td",{attrs:{colspan:"14"}},[t._v("暂无数据")])]),t._v(" "),t.dataLoading?i("tr",{staticStyle:{"text-align":"center"}},[i("td",{attrs:{colspan:"14"}},[i("v-spin",{attrs:{spinning:t.dataLoading}})],1)]):t._e()],2)]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.total2>0,expression:"total2>0"}],staticClass:"clearfix content-pagination2",staticStyle:{"margin-top":"10px"}},[i("div",{staticStyle:{float:"right",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(e){t.pageNo2=Math.ceil(t.total2/t.pageSize),t.changePageNo}}},[t._v("尾页")]),t._v(" "),i("div",{staticStyle:{float:"right"}},[i("v-pagination",{attrs:{value:t.pageNo2,total:t.total2,pageSize:t.pageSize,"show-quick-jumper":"",simple:""},on:{change:t.changePageNo}})],1),t._v(" "),i("div",{staticStyle:{float:"right",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(e){t.pageNo2=1,t.changePageNo}}},[t._v("首页")])])])],1)])])],1)},staticRenderFns:[]};var p=i("VU/8")(c,h,!1,function(t){i("UTdD")},"data-v-3131d64e",null).exports,u={name:"insight-whole",components:{yhqDept:a.a},data:function(){return{timeColumns:[{id:1,title:"日期",field:"date"}],userColumns:[{id:1,title:"销售单元",field:"user"}],columns:[{id:2,title:"有效沟通",field:"allValidCommunicationCount",sortFlag:1},{id:3,title:"跟进客户",field:"allFollowCount",sortFlag:0},{id:4,title:"发送消息",field:"sendMessageCount",sortFlag:0},{id:5,title:"收到消息",field:"receiveMessageCount",sortFlag:0},{id:6,title:"客均发消息",field:"averageSendMessageCount",sortFlag:0},{id:7,title:"客均收消息",field:"averageReceiveMessageCount",sortFlag:0},{id:8,title:"平均字数",field:"averageReceiveWordCount",sortFlag:0},{id:9,title:"通话数",field:"allPhoneCommunicationCount",sortFlag:0},{id:10,title:"通话时长",field:"allPhoneCommunicationTime",sortFlag:0},{id:11,title:"平均时长",field:"averagePhoneCommunicationTime",sortFlag:0},{id:12,title:"朋友圈",field:"circleFriendCount",sortFlag:0},{id:13,title:"删除好友",field:"deleteFriendCount",sortFlag:0}],maxRange:90,sortTip:{id:2,title:"有效沟通",field:"allValidCommunicationCount",sortFlag:0},sortField:"allValidCommunicationCount",ratePipe:[],timePipe:[10,11],rateArr:[],timeArr:["通话时长","平均时长"],sortDir:1,viewBox4Style:{},viewBox4Flag:!1,screenHeight:window.innerHeight,vContentHeigth:{minHeight:window.innerHeight-447+"px"},mydata:[],mydata2:[],iconActive:1,pageNo:1,total:0,pageNo2:1,total2:0,name:"",rangeDate:["",""],departmentOptions:[],dept:"",sale:"",breadcrumb:[],chartData:[],xAxisData:[],chartFieldList:[],chartField:0,dataLoading:!0,dateList:[],userList:[],tooltip1:""}},created:function(){this.tooltip1="<p  style='font-size: 16px;'>字段说明</p><p style='line-height: 24px;'>有效通话：微信有效沟通的新老客户数</p><p style='line-height: 24px;'>跟进客户：微信跟进的新老客户数</p><p style='line-height: 24px;'>发送消息：发送微信消息总条数</p><p style='line-height: 24px;'>收到消息：收到微信消息总条数</p><p style='line-height: 24px;'>客均发消息：发送消息总条数/微信跟进客户数&nbsp;&nbsp;</p><p style='line-height: 24px;'>客均收消息：收到消息总条数/微信跟进客户数</p><p style='line-height: 24px;'>平均字数：收到消息字数/收到消息数</p><p style='line-height: 24px;'>通话数：呼入接通数+呼出接通数</p><p style='line-height: 24px;'>通话时长：呼出时长+呼入时长</p><p style='line-height: 24px;'>平均时长：通话时长/通话数</p><p style='line-height: 24px;'>朋友圈：发朋友圈总个数</p><p style='line-height: 24px;'>删除好友：删除好友总个数</p>";var t=this.myTool.timeFormat(new Date),e=this.myTool.timeFormat(new Date(Math.round((new Date).getTime()-25056e5)));this.rangeDate=[e,t],this.timeColumns=this.timeColumns.concat(this.columns),this.userColumns=this.userColumns.concat(this.columns),this.getChartFieldList()},methods:{getDataList:function(){var t=this;this.dataLoading=!0;var e=new URLSearchParams;return e.append("start_date",this.rangeDate[0]+" 00:00:00"),e.append("end_date",this.rangeDate[1]+" 23:59:59"),e.append("user_id",this.sale),e.append("department_id",this.dept),this.axios.post(this.serve.showOverview,e).then(function(e){t.dataLoading=!1,t.dateList=e.data.data.date,t.userList=e.data.data.user,t.updateData(t.dateList,t.userList)}).catch(function(t){return t})},updateData:function(t,e){this.dataLoading=!1,this.dateList=t,this.userList=e,this.yhqSortDate(),this.total=this.dateList.length,this.total2=this.userList.length;var i=!0,a=!1,n=void 0;try{for(var s,o=this.userList[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;l.userId?l.user=l.userName:l.user=l.departmentName}}catch(t){a=!0,n=t}finally{try{!i&&o.return&&o.return()}finally{if(a)throw n}}this.changePageNo(1),this.initChartBefore(this.dateList),this.initChart(this.chartData[this.chartField]),this.scrollPage()},loadTimeData:function(){var t=this;return new Promise(function(t,e){t()}).then(function(e){var i={};i.pageNo=t.pageNo,i.pageSize=t.pageSize,i.totalCount=t.dateList.length,i.result=[];for(var a=0;a<30&&a<t.dateList.length;a++)i.result.push(t.dateList[a]);return t.total=t.dateList.length,setTimeout(function(){t.total>0&&(t.$el.querySelector(".content-pagination1 .ant-pagination-simple-pager input").value=t.pageNo)},300),i})},deptSelectEvent1:function(t,e){this.breadcrumb=[];for(var i=0;i<e.length;i++){var a=e[i];a.isDept&&this.breadcrumb.push(a)}t.isDept?(this.dept=t.id,this.sale=""):(this.dept=t.department_id,this.sale=t.sales_id),this.timeConfirm()},deptInitEvent1:function(t){this.breadcrumb=t},deptDrilling:function(t,e){t.userId?this.sale!==t.userId&&(this.sale=t.userId,this.timeConfirm()):0===e&&(t.deptId=t.departmentId,t.deptName=t.departmentName,this.$refs.yhqDept1.reverseSet(t),this.dept=t.departmentId,this.sale="",this.timeConfirm(),this.breadcrumb.push({id:t.departmentId,name:t.departmentName}))},backToDept:function(t){this.$refs.yhqDept1.reverseSet(t),this.dept=t.id,this.sale="",this.timeConfirm();for(var e=[],i=0;i<=this.breadcrumb.length&&(e.push(this.breadcrumb[i]),this.breadcrumb[i].id!==t.id);i++);this.breadcrumb=e},changePageNo:function(t){var e=this;this.pageNo=t,this.mydata=[];for(var i=30*(this.pageNo-1);i<30*this.pageNo;i++)this.dateList[i]&&this.mydata.push(this.dateList[i]);setTimeout(function(){e.mydata.length>0&&(e.$el.querySelector(".content-pagination1 .ant-pagination-simple-pager input").value=e.pageNo)},300),this.pageNo2=t,this.mydata2=[];for(var a=30*(this.pageNo2-1);a<30*this.pageNo2;a++)this.userList[a]&&this.mydata2.push(this.userList[a]);setTimeout(function(){e.mydata2.length>0&&(e.$el.querySelector(".content-pagination2 .ant-pagination-simple-pager input").value=e.pageNo2)},300)},timeConfirm:function(){this.pageNo=1,this.pageNo2=1,this.getDataList()},exportData:function(t){var e=this.rangeDate[0]+" 00:00:00",i=this.rangeDate[1]+" 23:59:59";if(1===t){var a="/salesinsight/exportSalesInsight?user_id="+encodeURI(this.sale)+"&department_id="+encodeURI(this.dept)+"&start_date="+e+"&end_date="+i+"&page_type=allfriend&data_type=date";window.open(a,"_blank")}else{var n="/salesinsight/exportSalesInsight?user_id="+encodeURI(this.sale)+"&department_id="+encodeURI(this.dept)+"&start_date="+e+"&end_date="+i+"&page_type=allfriend&data_type=user";window.open(n,"_blank")}},getChartFieldList:function(){for(var t=0;t<this.columns.length;t++){var e=this.columns[t];this.chartFieldList.push({id:t,value:e.field,label:e.title})}this.chartField=this.chartFieldList[this.chartField].id},changeChartField:function(t,e){this.chartField=e,this.initChart(this.chartData[this.chartField])},initChartBefore:function(t){for(var e=[],i=0;i<this.columns.length;i++){e.push([])}this.xAxisData=[],this.chartData=[];var a=!0,n=!1,s=void 0;try{for(var o,l=t[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var r=o.value;this.xAxisData.push(r.date);for(var d=0;d<this.columns.length;d++)if(this.ratePipe.includes(d+2)){var c=(r[this.columns[d].field]/100).toFixed(3)/1;e[d].push(c)}else e[d].push(r[this.columns[d].field])}}catch(t){n=!0,s=t}finally{try{!a&&l.return&&l.return()}finally{if(n)throw s}}this.xAxisData.reverse();var h=!0,p=!1,u=void 0;try{for(var v,g=e[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var m=v.value;this.chartData.push(m.reverse())}}catch(t){p=!0,u=t}finally{try{!h&&g.return&&g.return()}finally{if(p)throw u}}},initChart:function(t){var e=this.rateArr,i=this.timeArr;this.echarts.init(document.getElementById("myChart4")).setOption({tooltip:{formatter:function(t){if(t[0]){var a=t[0].name,n=!0,s=!1,o=void 0;try{for(var l,r=t[Symbol.iterator]();!(n=(l=r.next()).done);n=!0){var d=l.value;if(e.includes(d.seriesName)){var c=(100*d.value).toFixed(3)/1;a+="<br/>"+d.marker+d.seriesName+": "+c+"%"}else if(i.includes(d.seriesName)){var h=d.value,p=parseInt(h/86400),u=parseInt(h%86400/3600),v=parseInt(h%86400%3600/60),g=parseInt(h%86400%3600%60),m="";p>0&&(m+=p+"天"),u>0&&(m+=u+"小时"),v>0&&(m+=v+"分钟"),g>0&&(m+=g+"秒"),0===m.length&&(m="0秒"),a+="<br/>"+d.marker+d.seriesName+": "+m}else a+="<br/>"+d.marker+d.seriesName+": "+d.value}}catch(t){s=!0,o=t}finally{try{!n&&r.return&&r.return()}finally{if(s)throw o}}return a}return""},trigger:"axis"},xAxis:{boundaryGap:!1,data:this.xAxisData,splitLine:{show:!0}},yAxis:{splitLine:{show:!0}},series:[{name:this.chartFieldList[this.chartField].label,type:"line",symbol:"none",data:t}]})},yhqSortDate:function(){this.userList.sort(this.yhqSortBy())},yhqSortBy:function(){var t=this.sortField,e=this.sortDir;return function(i,a){return 1===e?a[t]-i[t]:2===e?i[t]-a[t]:void 0}},sortDate:function(t){t.id>1&&t.id<this.columns.length+2&&(this.sortTip&&this.sortTip.field!==t.field&&(this.userColumns[this.sortTip.id-1].sortFlag=0),0===t.sortFlag?t.sortFlag=1:1===t.sortFlag?t.sortFlag=2:2===t.sortFlag&&(t.sortFlag=1),this.sortTip=t,this.sortField=t.field,this.sortDir=t.sortFlag,this.yhqSortDate(),this.changePageNo(1))},scrollPage:function(){var t=this;setTimeout(function(){var e=document.querySelector(".chart-page4 .el-scrollbar__wrap");e&&e.addEventListener("scroll",function(){var e=document.querySelector("#viewBox4").getBoundingClientRect();t.viewBox4Style={width:e.width-20+"px"},e.top<=0?t.viewBox4Flag=!0:t.viewBox4Flag=!1})},300)},myChartResize:function(t){var e=this;1===this.iconActive&&setTimeout(function(){e.echarts.init(document.getElementById("myChart4")).resize()},t)}},mounted:function(){var t=this;window.onresize=function(){return t.screenHeight=window.innerHeight,void(t.vContentHeigth={minHeight:window.innerHeight-447+"px"})}},computed:{collapsed:function(){return this.myChartResize(500),this.$store.state.collapsed}},watch:{screenHeight:function(t){this.screenHeight=t,this.vContentHeigth={minHeight:t-447+"px"}}}},v={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"v-container bg-color chart-page4"},[i("div",{staticClass:"header v-home"},[i("div",{staticClass:"time time-panel clearfix"},[i("v-date-picker",{ref:"datePicker",staticStyle:{"margin-left":"10px"},attrs:{range:"",maxRange:t.maxRange},on:{confirm:function(e){t.timeConfirm()}},model:{value:t.rangeDate,callback:function(e){t.rangeDate=e},expression:"rangeDate"}}),t._v(" "),i("yhq-dept",{ref:"yhqDept1",staticStyle:{"margin-right":"0"},on:{deptSelectEvent:t.deptSelectEvent1,deptInitEvent:t.deptInitEvent1}})],1)]),t._v(" "),i("el-scrollbar",[i("div",{staticStyle:{height:"100%"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.viewBox4Flag,expression:"viewBox4Flag"}],staticClass:"ant-table ant-table-large ant-table-bordered",staticStyle:{width:"100%",height:"57px",position:"absolute",left:"10px",top:"0","z-index":"999"},style:t.viewBox4Style},[i("table",{staticClass:"ant-table-content",staticStyle:{overflow:"visible"}},[i("thead",{staticClass:"ant-table-thead"},[i("tr",t._l(t.userColumns,function(e,a){return i("th",{key:a,staticStyle:{"text-align":"center",cursor:"pointer"},on:{click:function(i){t.sortDate(e,a)}}},[i("span",{domProps:{innerHTML:t._s(e.title)}}),t._v(" "),1===e.sortFlag?i("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[i("i",{staticClass:"fa fa-long-arrow-down",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),2===e.sortFlag?i("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[i("i",{staticClass:"fa fa-long-arrow-up",attrs:{"aria-hidden":"true"}})]):t._e()])}))]),t._v(" "),i("tbody",{staticClass:"ant-table-tbody"},t._l(t.mydata2,function(e,a){return t.mydata2.length>0&&!t.dataLoading?i("tr",{key:a,staticClass:"ant-table-row",staticStyle:{"text-align":"center"}},t._l(t.userColumns,function(a,n){return i("td",{key:n,class:{"user-field":0===n&&!e.userId},on:{click:function(i){t.deptDrilling(e,n)}}},[t.ratePipe.includes(n+1)?i("span",[t._v(t._s(e[a.field])+"%")]):t.timePipe.includes(n+1)?i("span",[t._v(t._s(t._f("second")(e[a.field])))]):i("span",[t._v(t._s(e[a.field]))])])})):t._e()}))])]),t._v(" "),i("div",{staticClass:"v-content",staticStyle:{"margin-bottom":"5px",position:"relative",overflow:"visible"}},[i("div",{staticStyle:{"margin-bottom":"10px"}},[t._v("\n          趋势"),i("span",{staticStyle:{color:"white",position:"absolute",left:"10px","z-index":"-999"}},[t._v(t._s(t.collapsed))]),t._v(" "),i("div",{staticClass:"title-icon"},[i("span",{class:{"title-icon-active":1===t.iconActive},on:{click:function(e){t.iconActive=1,t.myChartResize(50)}}},[i("v-icon",{attrs:{type:"line-chart"}})],1),t._v(" "),i("span",{class:{"title-icon-active":2===t.iconActive},on:{click:function(e){t.iconActive=2}}},[i("i",{staticClass:"fa fa-table",attrs:{"aria-hidden":"true"}})]),t._v(" "),i("span",{on:{click:function(e){t.exportData(1)}}},[i("v-icon",{attrs:{type:"upload"}})],1),t._v(" "),i("span",[i("v-icon",{directives:[{name:"tooltip",rawName:"v-tooltip.lefttop",value:t.tooltip1,expression:"tooltip1",modifiers:{lefttop:!0}}],attrs:{type:"question-circle-o"}})],1)])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1===t.iconActive,expression:"iconActive === 1"}],staticClass:"condition-select"},t._l(t.columns,function(e,a){return i("span",{key:a,class:{"condition-select-active":a===t.chartField},on:{click:function(i){t.changeChartField(e,a)}}},[t._v(t._s(e.title))])})),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1===t.iconActive,expression:"iconActive === 1"}],staticStyle:{"border-top":"1px solid #DFDFE1","padding-top":"6px"},style:{width:"100%",height:"300px"},attrs:{id:"myChart4"}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2===t.iconActive,expression:"iconActive === 2"}],staticStyle:{height:"300px",overflow:"hidden"}},[i("el-scrollbar",[i("v-data-table",{ref:"xtable",staticStyle:{"padding-right":"10px"},attrs:{data:t.loadTimeData,columns:t.timeColumns,"current-data":t.mydata,"page-num":t.pageNo,pagination:!1,emptyText:"暂无数据",bordered:""},on:{"update:currentData":function(e){t.mydata=e}},scopedSlots:t._u([{key:"th",fn:function(e){return[i("div",{staticStyle:{"text-align":"center",color:"#000"}},[i("span",{domProps:{innerHTML:t._s(e.title)}})])]}},{key:"td",fn:function(e){return[t.ratePipe.includes(e.column.id)?i("div",{staticStyle:{"text-align":"center",color:"#666"}},[t._v(t._s(e.content)+"%")]):t.timePipe.includes(e.column.id)?i("div",{staticStyle:{"text-align":"center",color:"#666"}},[t._v(t._s(t._f("second")(e.content)))]):i("div",{staticStyle:{"text-align":"center",color:"#666"}},[t._v(t._s(e.content))])]}}])}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],staticClass:"clearfix content-pagination1",staticStyle:{"margin-top":"10px","margin-right":"10px"}},[i("div",{staticStyle:{float:"right",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(e){t.pageNo=Math.ceil(t.total/t.pageSize),t.changePageNo}}},[t._v("尾页")]),t._v(" "),i("div",{staticStyle:{float:"right"}},[i("v-pagination",{attrs:{value:t.pageNo,total:t.total,pageSize:t.pageSize,"show-quick-jumper":"",simple:""},on:{change:t.changePageNo}})],1),t._v(" "),i("div",{staticStyle:{float:"right",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(e){t.pageNo=1,t.changePageNo}}},[t._v("首页")])])],1)],1)]),t._v(" "),i("div",{staticClass:"v-content",style:t.vContentHeigth,attrs:{id:"viewBox4"}},[i("div",[t._v("\n          分析\n          "),i("div",{staticClass:"title-icon"},[i("span",{on:{click:function(e){t.exportData(2)}}},[i("v-icon",{attrs:{type:"upload"}})],1)])]),t._v(" "),i("v-breadcrumb",{staticStyle:{"margin-bottom":"10px","margin-top":"10px"},attrs:{separator:">"}},t._l(t.breadcrumb,function(e){return i("v-breadcrumb-item",{key:e.id,staticStyle:{cursor:"pointer"}},[i("span",{on:{click:function(i){t.backToDept(e)}}},[t._v(t._s(e.name))])])})),t._v(" "),i("div",{staticClass:"ant-table ant-table-large ant-table-bordered",staticStyle:{height:"auto"}},[i("table",{staticClass:"ant-table-content",staticStyle:{overflow:"visible"}},[i("thead",{staticClass:"ant-table-thead"},[i("tr",t._l(t.userColumns,function(e,a){return i("th",{key:a,staticStyle:{"text-align":"center",cursor:"pointer"},on:{click:function(i){t.sortDate(e,a)}}},[i("span",{domProps:{innerHTML:t._s(e.title)}}),t._v(" "),1===e.sortFlag?i("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[i("i",{staticClass:"fa fa-long-arrow-down",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),2===e.sortFlag?i("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[i("i",{staticClass:"fa fa-long-arrow-up",attrs:{"aria-hidden":"true"}})]):t._e()])}))]),t._v(" "),i("tbody",{staticClass:"ant-table-tbody"},[t._l(t.mydata2,function(e,a){return t.mydata2.length>0&&!t.dataLoading?i("tr",{key:a,staticClass:"ant-table-row",staticStyle:{"text-align":"center"}},t._l(t.userColumns,function(a,n){return i("td",{key:n,class:{"user-field":0===n&&!e.userId},on:{click:function(i){t.deptDrilling(e,n)}}},[t.ratePipe.includes(n+1)?i("span",[t._v(t._s(e[a.field])+"%")]):t.timePipe.includes(n+1)?i("span",[t._v(t._s(t._f("second")(e[a.field])))]):i("span",[t._v(t._s(e[a.field]))])])})):t._e()}),t._v(" "),0!==t.mydata2.length||t.dataLoading?t._e():i("tr",{staticStyle:{"text-align":"center"}},[i("td",{attrs:{colspan:"14"}},[t._v("暂无数据")])]),t._v(" "),t.dataLoading?i("tr",{staticStyle:{"text-align":"center"}},[i("td",{attrs:{colspan:"14"}},[i("v-spin",{attrs:{spinning:t.dataLoading}})],1)]):t._e()],2)]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.total2>0,expression:"total2>0"}],staticClass:"clearfix content-pagination2",staticStyle:{"margin-top":"10px"}},[i("div",{staticStyle:{float:"right",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(e){t.pageNo2=Math.ceil(t.total2/t.pageSize),t.changePageNo}}},[t._v("尾页")]),t._v(" "),i("div",{staticStyle:{float:"right"}},[i("v-pagination",{attrs:{value:t.pageNo2,total:t.total2,pageSize:t.pageSize,"show-quick-jumper":"",simple:""},on:{change:t.changePageNo}})],1),t._v(" "),i("div",{staticStyle:{float:"right",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(e){t.pageNo2=1,t.changePageNo}}},[t._v("首页")])])])],1)])])],1)},staticRenderFns:[]};var g=i("VU/8")(u,v,!1,function(t){i("l6k8")},"data-v-3de0a2f1",null).exports,m={name:"insight-retain",components:{yhqDept:a.a},data:function(){return{columns:[{id:2,title:"跟进客户",field:"addFriendCount",sortFlag:0},{id:3,title:"累计跟进客户",field:"activeApplyCount",sortFlag:0},{id:4,title:"有效沟通",field:"activeSuccessCount",sortFlag:1},{id:5,title:"累计有效沟通",field:"activeApplaySuccessRate",sortFlag:0}],maxRange:90,sortTip:{id:4,title:"有效沟通",field:"activeSuccessCount",sortFlag:1},sortField:"activeSuccessCount",ratePipe:[2,3,4,5],timePipe:[],rateArr:["跟进客户","累计跟进客户","有效沟通","累计有效沟通"],viewBox5Style:{},viewBox5Flag:!1,screenHeight:window.innerHeight,vContentHeigth:{minHeight:window.innerHeight-447+"px"},iconActive:1,name:"",rangeDate:["",""],rangeDate1:["",""],departmentOptions:[],dept:"",sale:"",breadcrumb:[],chartData:[],xAxisData:[],chartFieldList:[],chartField:0,dataLoading:!1,quotaModalVisible:!1,quotaModalLoading:!1,tooltip1:"",dataRes:{addUserCount:0,names:[],dates:[],datas:[]},quotaData:{},dataSource1:[],targetKeys1:[]}},created:function(){this.tooltip1="<p  style='font-size: 16px;'>字段说明</p><p style='line-height: 24px;'>分析时间范围：交友日期范围之后的时间可选</p><p style='line-height: 24px;'>日期：分析时间范围内的日期</p><p style='line-height: 24px;'>跟进客户：当日对新增好友进行了跟进的人数占比</p><p style='line-height: 24px;'>累计跟进客户：截止到当日，对新增好友进行了跟进的去重人数占比</p><p style='line-height: 24px;'>有效沟通：当日对新增好友进行了有效沟通的人数占比</p><p style='line-height: 24px;'>累计有效沟通：截止到当日，对新增好友进行了有效沟通的去重人数占比</p><p style='line-height: 24px;'>其他规则指标：该规则下的统计指标数量占比</p>";var t=this.myTool.timeFormat(new Date),e=this.myTool.timeFormat(new Date(Math.round((new Date).getTime()-864e5)));this.rangeDate=[e,e],this.rangeDate1=[t,t],this.getDataList(),this.getQuotaList()},methods:{getQuotaList:function(){var t=this,e=new URLSearchParams;return this.axios.get(this.serve.quotaList,e).then(function(e){var i=[],a=[],n=[],s=!0,o=!1,l=void 0;try{for(var r,d=e.data.data.showIterms[Symbol.iterator]();!(s=(r=d.next()).done);s=!0){var c=r.value;a.push(c.id),i.push(c.id)}}catch(t){o=!0,l=t}finally{try{!s&&d.return&&d.return()}finally{if(o)throw l}}var h=!0,p=!1,u=void 0;try{for(var v,g=e.data.data.hideIterms[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var m=v.value;n.push(m.id),i.push(m.id)}}catch(t){p=!0,u=t}finally{try{!h&&g.return&&g.return()}finally{if(p)throw u}}t.quotaData={arrAll:i,showIterms:a,hideIterms:n};var f=e.data.data.showIterms.concat(e.data.data.hideIterms);t.mockData(f)}).catch(function(t){return t})},mockData:function(t){this.dataSource1=[],this.targetKeys1=[];for(var e=0;e<t.length;e++)this.dataSource1.push({key:t[e].id,title:t[e].name,description:t[e].name}),t[e].boolShow&&this.targetKeys1.push(t[e].id)},render1:function(t){return t.title},handleChange1:function(t,e,i){this.targetKeys1=t},getDataList:function(){var t=this;this.dataLoading=!0;var e=new URLSearchParams;return e.append("start_query_date",this.rangeDate[0]),e.append("end_query_date",this.rangeDate[1]),e.append("start_analyse_date",this.rangeDate1[0]),e.append("end_analyse_date",this.rangeDate1[1]),e.append("userId",this.sale),e.append("departmentId",this.dept),this.axios.post(this.serve.retentionList,e).then(function(e){t.chartFieldList=e.data.data.names.slice(1,e.data.data.names.length),t.updateData(e.data.data)}).catch(function(t){return t})},updateData:function(t){this.dataLoading=!1,this.dataRes=JSON.parse(JSON.stringify(t)),this.initChartBefore(t.datas),this.initChart(this.chartData[this.chartField]),this.scrollPage()},deptSelectEvent1:function(t,e){this.breadcrumb=[];for(var i=0;i<e.length;i++){var a=e[i];a.isDept&&this.breadcrumb.push(a)}t.isDept?(this.dept=t.id,this.sale=""):(this.dept=t.department_id,this.sale=t.sales_id),this.timeConfirm()},timeConfirm:function(){this.getDataList()},timeChange:function(t){console.log(t)},timeChange1:function(t){console.log(t)},exportData:function(){var t="/retention/statisticsExcel?userId="+encodeURI(this.sale)+"&departmentId="+encodeURI(this.dept)+"&start_query_date="+this.rangeDate[0]+"&end_query_date="+this.rangeDate[1]+"&start_analyse_date="+this.rangeDate1[0]+"&end_analyse_date="+this.rangeDate1[1];window.open(t,"_blank")},addColumn:function(){this.quotaModalVisible=!0},saveQuota:function(){var t=this,e=[],i=[],a=!0,n=!1,s=void 0;try{for(var o,l=this.targetKeys1[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var r=o.value;this.quotaData.showIterms.includes(r)||e.push(r)}}catch(t){n=!0,s=t}finally{try{!a&&l.return&&l.return()}finally{if(n)throw s}}var d=!0,c=!1,h=void 0;try{for(var p,u=this.quotaData.showIterms[Symbol.iterator]();!(d=(p=u.next()).done);d=!0){var v=p.value;this.targetKeys1.includes(v)||i.push(v)}}catch(t){c=!0,h=t}finally{try{!d&&u.return&&u.return()}finally{if(c)throw h}}this.quotaModalLoading=!0;var g=new URLSearchParams;return g.append("show_terms",e),g.append("hide_terms",i),this.axios.post(this.serve.quotaSave,g).then(function(e){t.quotaModalLoading=!1,t.quotaModalVisible=!1,t.getDataList(),t.getQuotaList()}).catch(function(t){return t})},changeChartField:function(t,e){this.chartField=e,this.initChart(this.chartData[this.chartField])},initChartBefore:function(t){for(var e=[],i=0;i<t.length;i++)if(i>0){var a=[],n=!0,s=!1,o=void 0;try{for(var l,r=t[i][Symbol.iterator]();!(n=(l=r.next()).done);n=!0){var d=(l.value/100).toFixed(3)/1;a.push(d)}}catch(t){s=!0,o=t}finally{try{!n&&r.return&&r.return()}finally{if(s)throw o}}e.push(a)}this.xAxisData=t[0],this.chartData=[],this.xAxisData.reverse();var c=!0,h=!1,p=void 0;try{for(var u,v=e[Symbol.iterator]();!(c=(u=v.next()).done);c=!0){var g=u.value;this.chartData.push(g.reverse())}}catch(t){h=!0,p=t}finally{try{!c&&v.return&&v.return()}finally{if(h)throw p}}},initChart:function(t){var e=this.dataRes.names;this.echarts.init(document.getElementById("myChart5")).setOption({tooltip:{formatter:function(t){if(t[0]){var i=t[0].name,a=!0,n=!1,s=void 0;try{for(var o,l=t[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var r=o.value;if(e.includes(r.seriesName)){var d=(100*r.value).toFixed(3)/1;i+="<br/>"+r.marker+r.seriesName+": "+d+"%"}else i+="<br/>"+r.marker+r.seriesName+": "+r.value}}catch(t){n=!0,s=t}finally{try{!a&&l.return&&l.return()}finally{if(n)throw s}}return i}return""},trigger:"axis"},xAxis:{boundaryGap:!1,data:this.xAxisData,splitLine:{show:!0}},yAxis:{splitLine:{show:!0}},series:[{name:this.chartFieldList[this.chartField],type:"line",symbol:"none",data:t}]})},scrollPage:function(){var t=this;setTimeout(function(){var e=document.querySelector(".chart-page5 .el-scrollbar__wrap");e&&e.addEventListener("scroll",function(){var e=document.querySelector("#viewBox5").getBoundingClientRect();t.viewBox5Style={width:e.width-20+"px"},e.top<=0?t.viewBox5Flag=!0:t.viewBox5Flag=!1})},500)},myChartResize:function(t){var e=this;1===this.iconActive&&setTimeout(function(){e.echarts.init(document.getElementById("myChart5")).resize()},t)}},mounted:function(){var t=this;window.onresize=function(){return t.screenHeight=window.innerHeight,void(t.vContentHeigth={minHeight:window.innerHeight-447+"px"})}},computed:{collapsed:function(){return this.myChartResize(500),this.$store.state.collapsed}},watch:{screenHeight:function(t){this.screenHeight=t,this.vContentHeigth={minHeight:t-447+"px"}}}},f={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"v-container bg-color chart-page5"},[i("div",{staticClass:"header v-home"},[i("div",{staticClass:"time time-panel clearfix",staticStyle:{"padding-left":"10px"}},[t._v("\n      交友日期："),i("v-date-picker",{ref:"datePicker",staticStyle:{"margin-left":"5px","margin-right":"15px"},attrs:{range:"",maxRange:t.maxRange},on:{change:function(e){t.timeChange(t.rangeDate)},confirm:function(e){t.timeConfirm()}},model:{value:t.rangeDate,callback:function(e){t.rangeDate=e},expression:"rangeDate"}}),t._v("\n      分析时间范围："),i("v-date-picker",{ref:"datePicker1",staticStyle:{"margin-left":"5px"},attrs:{range:""},on:{change:function(e){t.timeChange1(t.rangeDate1)},confirm:function(e){t.timeConfirm()}},model:{value:t.rangeDate1,callback:function(e){t.rangeDate1=e},expression:"rangeDate1"}}),t._v(" "),i("yhq-dept",{ref:"yhqDept1",staticStyle:{"margin-right":"0"},on:{deptSelectEvent:t.deptSelectEvent1}})],1)]),t._v(" "),i("el-scrollbar",[i("div",{staticStyle:{height:"100%"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.viewBox5Flag,expression:"viewBox5Flag"}],staticClass:"ant-table ant-table-large ant-table-bordered",staticStyle:{width:"100%",height:"57px",position:"absolute",left:"10px",top:"0","z-index":"999"},style:t.viewBox5Style},[i("table",{staticClass:"ant-table-content",staticStyle:{overflow:"visible"}},[i("thead",{staticClass:"ant-table-thead"},[i("tr",t._l(t.dataRes.names,function(e,a){return i("th",{key:a,staticStyle:{"text-align":"center",cursor:"pointer"}},[i("span",{domProps:{innerHTML:t._s(e)}})])}))]),t._v(" "),i("tbody",{staticClass:"ant-table-tbody"},t._l(t.dataRes.dates,function(e,a){return t.dataRes.dates.length>0&&!t.dataLoading?i("tr",{key:a,staticClass:"ant-table-row",staticStyle:{"text-align":"center"}},t._l(t.dataRes.datas,function(e,n){return i("td",{key:n},[i("span",[t._v(t._s(e[a]))])])})):t._e()}))])]),t._v(" "),i("div",{staticClass:"v-content",staticStyle:{"margin-bottom":"5px",position:"relative",overflow:"visible"}},[i("div",{staticStyle:{"margin-bottom":"10px"}},[t._v("\n          趋势"),i("span",{staticStyle:{color:"white",position:"absolute",left:"10px","z-index":"-999"}},[t._v(t._s(t.collapsed))]),t._v(" "),i("div",{staticClass:"title-icon"},[i("span",{on:{click:function(e){t.exportData()}}},[i("v-icon",{attrs:{type:"upload"}})],1),t._v(" "),i("span",[i("v-icon",{directives:[{name:"tooltip",rawName:"v-tooltip.lefttop",value:t.tooltip1,expression:"tooltip1",modifiers:{lefttop:!0}}],attrs:{type:"question-circle-o"}})],1)])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1===t.iconActive,expression:"iconActive === 1"}],staticClass:"condition-select"},t._l(t.chartFieldList,function(e,a){return i("span",{key:a,class:{"condition-select-active":a===t.chartField},on:{click:function(i){t.changeChartField(e,a)}}},[t._v(t._s(e))])})),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1===t.iconActive,expression:"iconActive === 1"}],staticStyle:{"border-top":"1px solid #DFDFE1","padding-top":"6px"},style:{width:"100%",height:"300px"},attrs:{id:"myChart5"}})]),t._v(" "),i("div",{staticClass:"v-content",style:t.vContentHeigth,attrs:{id:"viewBox5"}},[i("div",[t._v("\n          分析\n          "),i("div",{staticClass:"title-icon"},[i("span",{on:{click:function(e){t.addColumn()}}},[i("i",{staticClass:"fa fa-cog",attrs:{"aria-hidden":"true"}})])])]),t._v(" "),i("div",{staticStyle:{"margin-bottom":"10px","margin-top":"10px"}},[t._v("\n          新增客户："+t._s(t.dataRes.addUserCount)+"\n        ")]),t._v(" "),i("div",{staticClass:"ant-table ant-table-large ant-table-bordered",staticStyle:{height:"auto"}},[i("table",{staticClass:"ant-table-content",staticStyle:{overflow:"visible"}},[i("thead",{staticClass:"ant-table-thead"},[i("tr",t._l(t.dataRes.names,function(e,a){return i("th",{key:a,staticStyle:{"text-align":"center",cursor:"pointer"}},[i("span",{domProps:{innerHTML:t._s(e)}})])}))]),t._v(" "),i("tbody",{staticClass:"ant-table-tbody"},[t._l(t.dataRes.dates,function(e,a){return t.dataRes.dates.length>0&&!t.dataLoading?i("tr",{key:a,staticClass:"ant-table-row",staticStyle:{"text-align":"center"}},t._l(t.dataRes.datas,function(e,n){return i("td",{key:n},[i("span",[t._v("\n                  "+t._s(e[a])),0!==n?[t._v("%")]:t._e()],2)])})):t._e()}),t._v(" "),0!==t.dataRes.dates.length||t.dataLoading?t._e():i("tr",{staticStyle:{"text-align":"center"}},[i("td",{attrs:{colspan:"14"}},[t._v("暂无数据")])]),t._v(" "),t.dataLoading?i("tr",{staticStyle:{"text-align":"center"}},[i("td",{attrs:{colspan:"14"}},[i("v-spin",{attrs:{spinning:t.dataLoading}})],1)]):t._e()],2)])])])])]),t._v(" "),[i("v-modal",{attrs:{title:"选择显示指标",visible:t.quotaModalVisible,"confirm-loading":t.quotaModalLoading,width:800},on:{ok:function(e){t.saveQuota()},cancel:function(e){t.quotaModalVisible=!1}}},[i("div",{staticStyle:{height:"300px"},attrs:{id:"retainTransfer"}},[i("v-transfer",{attrs:{data:t.dataSource1,titles:["不显示的指标","显示的指标"],"target-keys":t.targetKeys1,label:t.render1,"list-style":{width:"338px",height:"300px"}},on:{change:t.handleChange1}})],1)])]],2)},staticRenderFns:[]};var y={name:"insight",components:{insightOverview:o,insightNewCustomer:d,insightOldCustomer:p,insightWhole:g,insightRetain:i("VU/8")(m,f,!1,function(t){i("C6mL"),i("QNMC")},"data-v-603f9100",null).exports},data:function(){return{activeTab:1,showInsight2:!1,showInsight3:!1,showInsight4:!1,showInsight5:!1,showOldDoor:!1,dataLoading:!1,dateList:[],userList:[]}},created:function(){(window.location.href.includes("duia-srb.aihujing.com")||window.location.href.includes("duia.aihujing.com")||window.location.href.includes("39.106.42.64:9987"))&&(this.showOldDoor=!0),this.getDataList()},methods:{contentChange:function(t){this.dataLoading?this.$notification.info({message:"提示",description:"数据请求中，请稍后！"}):(this.activeTab=t,1===t&&this.$refs.yhqInsight1.myChartResize(50),2===t&&(this.showInsight2?this.$refs.yhqInsight2.myChartResize(50):(this.$refs.yhqInsight2.updateData(this.dateList,this.userList),this.showInsight2=!0,this.$refs.yhqInsight2.myChartResize(100))),3===t&&(this.$refs.yhqInsight3.myChartResize(50),this.showInsight3?this.$refs.yhqInsight3.myChartResize(50):(this.$refs.yhqInsight3.updateData(this.dateList,this.userList),this.showInsight3=!0,this.$refs.yhqInsight3.myChartResize(100))),4===t&&(this.$refs.yhqInsight4.myChartResize(50),this.showInsight4?this.$refs.yhqInsight4.myChartResize(50):(this.$refs.yhqInsight4.updateData(this.dateList,this.userList),this.showInsight4=!0,this.$refs.yhqInsight4.myChartResize(100))),5===t&&(this.showInsight5=!0))},getDataList:function(){var t=this;this.dataLoading=!0;var e=this.myTool.timeFormat(new Date),i=this.myTool.timeFormat(new Date(Math.round((new Date).getTime()-25056e5))),a=new URLSearchParams;return a.append("start_date",i+" 00:00:00"),a.append("end_date",e+" 23:59:59"),a.append("user_id",""),a.append("department_id",""),this.axios.post(this.serve.showOverview,a).then(function(e){t.dataLoading=!1,t.dateList=e.data.data.date,t.userList=e.data.data.user,t.$refs.yhqInsight1.updateData(t.dateList,t.userList)}).catch(function(t){return t})}}},_={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"v-container bg-color chart-page"},[i("div",{staticClass:"header v-home"},[i("div",{staticClass:"common-title"},[i("span",{staticClass:"content-option",class:{active:1===t.activeTab},on:{click:function(e){t.contentChange(1)}}},[t._v("概览")]),t._v(" "),i("span",{staticClass:"content-option",class:{active:2===t.activeTab},on:{click:function(e){t.contentChange(2),t.showInsight2=!0}}},[t._v("新客户")]),t._v(" "),i("span",{staticClass:"content-option",class:{active:3===t.activeTab},on:{click:function(e){t.contentChange(3),t.showInsight3=!0}}},[t._v("老客户")]),t._v(" "),i("span",{staticClass:"content-option",class:{active:4===t.activeTab},on:{click:function(e){t.contentChange(4),t.showInsight4=!0}}},[t._v("总体")]),t._v(" "),i("span",{staticClass:"content-option",class:{active:5===t.activeTab},on:{click:function(e){t.contentChange(5),t.showInsight5=!0}}},[t._v("留存")]),t._v(" "),t.showOldDoor?i("v-button",{staticStyle:{float:"right",right:"20px",position:"absolute"},on:{click:function(e){t.myFn.goToOldSystem()}}},[t._v("进入旧版")]):t._e()],1)]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1===t.activeTab,expression:"activeTab === 1"}],staticClass:"v-container"},[i("insight-overview",{ref:"yhqInsight1"})],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2===t.activeTab,expression:"activeTab === 2"}],staticClass:"v-container"},[i("insight-new-customer",{ref:"yhqInsight2"})],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:3===t.activeTab,expression:"activeTab === 3"}],staticClass:"v-container"},[i("insight-old-customer",{ref:"yhqInsight3"})],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:4===t.activeTab,expression:"activeTab === 4"}],staticClass:"v-container"},[i("insight-whole",{ref:"yhqInsight4"})],1),t._v(" "),t.showInsight5?i("div",{directives:[{name:"show",rawName:"v-show",value:5===t.activeTab,expression:"activeTab === 5"}],staticClass:"v-container"},[i("insight-retain",{ref:"yhqInsight5"})],1):t._e()])},staticRenderFns:[]};var x=i("VU/8")(y,_,!1,function(t){i("pO7c")},"data-v-417bc76c",null);e.default=x.exports},UJSb:function(t,e){},UTdD:function(t,e){},UTwB:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={name:"roleManage",data:function(){return{loadData:function(t){var e=new URLSearchParams;return e.append("page",t.pageNo),this.axios.post(this.serve.roleList,e).then(function(t){var e={};e.result=t.data.data;var i=!0,a=!1,n=void 0;try{for(var s,o=e.result[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value,r="",d=!0,c=!1,h=void 0;try{for(var p,u=l.authoritys[Symbol.iterator]();!(d=(p=u.next()).done);d=!0){r+=p.value.name+", "}}catch(t){c=!0,h=t}finally{try{!d&&u.return&&u.return()}finally{if(c)throw h}}r.length>0?l.authoritysMy=r.substr(0,r.length-2):l.authoritysMy=""}}catch(t){a=!0,n=t}finally{try{!i&&o.return&&o.return()}finally{if(a)throw n}}return e}).catch(function(t){return t})},columns:[{title:"角色名称",field:"roleName",width:"25%"},{title:"权限",field:"authoritysMy",width:"55%"},{title:"操作",field:"operation",width:"20%"}],powerList:[],addModalVisible:!1,addModalLoading:!1,delModalVisible:!1,delModalLoading:!1,delObj:{},modalTitle:"添加角色",roleId:1,roleName:"",pageNo:1,total:0}},created:function(){var t=this.$store.state.protype/1;1===t&&(this.powerList=this.myData.powerList1),2===t&&(this.powerList=this.myData.powerList2),3===t&&(this.powerList=this.myData.powerList3),console.log(this.powerList)},methods:{goToBack:function(){this.$router.go(-1)},changePageNo:function(t){this.pageNo=t,this.$refs.xtable.goto(t)},openAddModal:function(){this.addModalVisible=!0,this.addModalLoading=!1,this.modalTitle="添加角色",this.roleName="";var t=!0,e=!1,i=void 0;try{for(var a,n=this.powerList[Symbol.iterator]();!(t=(a=n.next()).done);t=!0){a.value.checked=!1}}catch(t){e=!0,i=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw i}}},openDelModal:function(t){this.delModalVisible=!0,this.delModalLoading=!1,this.delObj=t},addRole:function(){var t=this;if(this.roleName){this.addModalLoading=!0;var e=new URLSearchParams,i=[],a=!0,n=!1,s=void 0;try{for(var o,l=this.powerList[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var r=o.value;r.checked&&i.push(r.value)}}catch(t){n=!0,s=t}finally{try{!a&&l.return&&l.return()}finally{if(n)throw s}}e.append("authorityIds",i.toString()),e.append("role_name",this.roleName),"修改角色"===this.modalTitle?(e.append("role_id",this.roleId),this.axios.post(this.serve.roleUpdate,e).then(function(e){t.pageNo=1,t.$refs.xtable.reload(),t.addModalVisible=!1,t.addModalLoading=!1,t.$notification.success({message:"提示",description:"添加成功"})}).catch(function(e){return t.addModalVisible=!1,t.addModalLoading=!1,e})):this.axios.post(this.serve.roleAdd,e).then(function(e){t.pageNo=1,t.$refs.xtable.reload(),t.addModalVisible=!1,t.addModalLoading=!1,t.$notification.success({message:"提示",description:"添加成功"})}).catch(function(e){return t.addModalVisible=!1,t.addModalLoading=!1,e})}else this.$notification.warning({message:"提示",description:"请确保信息填写完整"})},openChangeModal:function(t){this.addModalVisible=!0,this.modalTitle="修改角色",this.roleId=t.roleId,this.roleName=t.roleName;var e=[],i=!0,a=!1,n=void 0;try{for(var s,o=t.authoritys[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;e.push(l.id)}}catch(t){a=!0,n=t}finally{try{!i&&o.return&&o.return()}finally{if(a)throw n}}var r=!0,d=!1,c=void 0;try{for(var h,p=this.powerList[Symbol.iterator]();!(r=(h=p.next()).done);r=!0){var u=h.value;u.checked=!1,e.includes(u.value)&&(u.checked=!0)}}catch(t){d=!0,c=t}finally{try{!r&&p.return&&p.return()}finally{if(d)throw c}}},deleteRole:function(t){var e=this;t=this.delObj;var i=new URLSearchParams;i.append("role_id",t.roleId),this.axios.post(this.serve.roledel,i).then(function(t){e.pageNo=1,e.$refs.xtable.reload(),e.delModalVisible=!1,e.delModalLoading=!1,e.$notification.success({message:"提示",description:"删除成功"})}).catch(function(t){return e.delModalVisible=!1,e.delModalLoading=!1,t})},cancel:function(t){}}},n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"v-container bg-color"},[i("el-scrollbar",[i("div",{staticClass:"header"},[i("div",{staticClass:"common-title"},[t._v("角色管理")]),t._v(" "),i("div",{staticClass:"clearfix",staticStyle:{"margin-top":"10px"}},[i("span",{on:{click:t.goToBack}},[i("v-icon",{staticClass:"goBack",attrs:{type:"left"}})],1),t._v(" "),i("v-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.openAddModal}},[t._v("添加")])],1)]),t._v(" "),i("div",{staticClass:"v-content"},[i("div",{staticStyle:{height:"auto"}},[i("v-data-table",{ref:"xtable",attrs:{data:t.loadData,columns:t.columns,"page-num":t.pageNo,pagination:!1,emptyText:"暂无数据",bordered:""},scopedSlots:t._u([{key:"th",fn:function(e){return["operation"==e.column.field?i("div",{staticStyle:{"text-align":"center",color:"#000"}},[i("span",[t._v("操作")])]):i("div",{staticStyle:{"text-align":"center",color:"#000"}},[i("span",{domProps:{innerHTML:t._s(e.title)}})])]}},{key:"td",fn:function(e){return["operation"==e.column.field?i("div",{staticStyle:{"text-align":"center",color:"#666"}},[i("span",{staticClass:"operation",attrs:{type:"ghost"},on:{click:function(i){t.openChangeModal(e.item)}}},[t._v("\n              修改\n            ")]),t._v(" "),i("span",{staticClass:"operation",on:{click:function(i){t.openDelModal(e.item)}}},[t._v("删除")])]):i("div",{staticStyle:{"text-align":"center",color:"#666"},domProps:{innerHTML:t._s(e.content)}})]}}])})],1)])]),t._v(" "),[i("v-modal",{attrs:{title:t.modalTitle,visible:t.addModalVisible,"confirm-loading":t.addModalLoading},on:{ok:function(e){t.addRole()},cancel:function(e){t.cancel("角色"),t.addModalVisible=!1}}},[i("div",[i("span",{staticClass:"modal-span"},[t._v("角色名称")]),t._v(" "),i("v-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请在此输入角色",maxlength:"30"},model:{value:t.roleName,callback:function(e){t.roleName=e},expression:"roleName"}})],1),t._v(" "),i("div",[i("span",{staticClass:"modal-span",staticStyle:{"margin-top":"30px",float:"left"}},[t._v("权限")]),t._v(" "),i("ul",{staticClass:"modal-ul"},t._l(t.powerList,function(e){return 13!==e.value||13===e.value&&t.$store.state.power.includes("e")?i("li",{key:e.value},[4!==e.value&&7!==e.value?[i("v-checkbox",{model:{value:e.checked,callback:function(i){t.$set(e,"checked",i)},expression:"item.checked"}},[t._v(t._s(e.label))])]:t._e(),t._v(" "),4===e.value?[i("v-checkbox",{model:{value:e.checked,callback:function(i){t.$set(e,"checked",i)},expression:"item.checked"}},[t._v(t._s(e.label))]),t._v(" "),i("v-icon",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:"只获取销售用户的查询权限",expression:"'只获取销售用户的查询权限'",modifiers:{right:!0}}],staticStyle:{opacity:"0.2"},attrs:{type:"question-circle"}})]:t._e(),t._v(" "),7===e.value?[i("v-checkbox",{model:{value:e.checked,callback:function(i){t.$set(e,"checked",i)},expression:"item.checked"}},[t._v(t._s(e.label))]),t._v(" "),i("v-icon",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:"获取销售用户的增删改查权限",expression:"'获取销售用户的增删改查权限'",modifiers:{right:!0}}],staticStyle:{opacity:"0.2"},attrs:{type:"question-circle"}})]:t._e()],2):t._e()}))])])],t._v(" "),[i("v-modal",{attrs:{title:"删除角色",visible:t.delModalVisible,"confirm-loading":t.delModalLoading},on:{ok:function(e){t.deleteRole()},cancel:function(e){t.cancel("删除角色"),t.delModalVisible=!1}}},[i("div",{staticStyle:{"text-align":"center",height:"120px","line-height":"120px"}},[t._v("\n        确认删除该角色吗？\n      ")])])]],2)},staticRenderFns:[]};var s=i("VU/8")(a,n,!1,function(t){i("rovC")},"data-v-0d929f92",null);e.default=s.exports},UeBE:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAQCAYAAAArij59AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAChSURBVChThZFJCgJBDEXrZJ7A2a1LwUu5024XCuJ1VJxad87LDiQmVYGipNN++IvKf1AZHKzHhLctWXLlpEHlrEV432kpVQA81CZ87LUcFQFx1iF8HjUKSgFx3iN8nTWuAtgwHxC+LzYg9tDnagNiWA7/AIsaIPRhfAF5n8PCaDLr8pgnH4pSwC/qoFFQBGpXPW3ysaov6mA14nNv9Pkroi/xMKoCI1R/8wAAAABJRU5ErkJggg=="},VGpR:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAEeUlEQVRogd2az28VVRTHPzM0ivEV4g90Z1q0RROx0kJoYSEsC0t3ogv/AU3UlSZIXLgqILpEExMgxkQXsHApmlhaFgK6ENRAo0UbSlsjSJpAyZfFPdMZXue9Nz/u9LWe5OTOzL33nPOde+/MveecQBIeqRd4CXjRrp8GHgc6rf4mMANcBn4DLgDf27UXCjwA2gy8DrwMPFVQxp/A18DnwM9ljCkKKACGgfeAHYnn08B3wDhwCbgCXAduWf3DwAagG3gOGAR2AU8kZJwBPgS+AfIbJykvD0gaU0xzkj6RNCQpKCAvkLRN0iGTFdGY6colL0/jtZIOS7prCqckvS2pVgBEI66ZzCnTcVfSEdPtFVCPpPOm5I69TZ9A0oAdMl0y3T2+AA1JmjXBFyX1VwiknvtNp8yGobKAhiXdMoGnJK1bRjARd5pumS3DRQFtT4D5VNKaNoCJeI3ZEIHanhfQM5JmTMBnKvb18s2B2SK56Ze6ptI6PijpnHU82eaRSRupk2bbObO1JaAj1uGypPUrAEQ9rzfbZLY2BTQgaUHuc5n7p7aMPGA2LtTbmWwUSDpryA96VL5O0rEKQB00W8eUWOPJBnutwZTcp9KH0h2Srphc34Bqkv422XvTAP1gle94UNYhab/iP30VgJD0pskerQf0glXMqvyWpivxcpJUBaCHFP9e+iQR2qb7NSuPAf/l3rLH9ArwE7CzhIw8NA8ct2uHwZBeNZTbCr6paOE3oypGCLNZkiZlU+55ezCtYjuC5MJvB6BA0jXT0Rsmpse35DshdgDv43wC3X5mUCEScNqud4VAv92M5xDShTtqH8ABazdFtveFwLN2k9XzstwLPwv9auWmDmJPTVZAJwoqLeteCprU/W7lxhB4zG6mSypsJ12zckMgKXpzzd7AaiABiz/W1U4PWHm7A+ee7TS+maGzV99xDmo2gxZdzSEwazdPVmtPpfSIlf+GOL8yOOd6FgpKcl66QbzXbEQ9Vl4NcT5oyA5oOekMLpJxvEW7TVZeCoHzdjNYlVUFaAH4ABeamcjQPrL9Rx+b07zciiYk7Sy6OY0e/mUPih4ffAE6ofze2a3Wd1KKD3hfWLnP89TJStHC32fXeehVK78EFg94fYZyRtVGFdJGaFRSd0FZS47gycpRq/DhJMkC6I6kA3IOlaKy3ki8FOoBJd1YVY6SlH/hp3FLN1ZVjsZ6LrLw03jEbD2rBo5GdL8reEuFoMryFmVwBUccOesvyp8H1Sd3SvrFbGzprEcuQLtawilLgsmNOvYoDrEf1coJeB01m/6R1JvWrpmA/1VIMuI9kuZN0Cm1Z00lg8bzZlPD9lkE7lY8/doZ1p8zW5r2ySq4PvFiRNUnXoyoosSLiNdK+kj3p8a85RlYzWQmU2M+VgWpMUkekDSumHwkL23V0uSlcRWI85ZJL9sDvMvS9LLTxOllE/YsijnVcOllG3Eu6EFgNx7Ty1ZKAuAk8BVtTABsRL24hL4oRbMLeBQ3MuBGag74A+dgv4CLYnhL0bwHVavIAgvIDsgAAAAASUVORK5CYII="},VaWg:function(t,e){},X9GB:function(t,e,i){"use strict";var a={name:"yhq-dept",props:["deptData","deptDataFlag","leafClickFlag"],data:function(){return{rootNode:{},currentNode:{},showSelectionFlag:!1,selectionList:[{id:0,name:"请选择部门"}],selectionSalesList:[],selectionValueState:!1,selectionValue:"",selectionBreadcrumb:[],allSalesList:[]}},created:function(){var t=this;this.deptDataFlag?setTimeout(function(){t.deptData.length>0?(t.treeData=t.deptData,t.getSelectTreeData()):t.getDeptList()},500):this.getDeptList()},methods:{showSelection:function(){this.showSelectionFlag=!this.showSelectionFlag,this.showSelectionFlag&&this.breadcrumbTextStyle()},breadcrumbBack:function(t){this.getDataList(t),t.isDept&&this.getSelectionList(t)},setCurrentNodeSales:function(t){for(var e=void 0,i=0;i<this.treeList.length;i++)if(t.department_id===this.treeList[i].id){e=this.treeList[i];break}this.selectionBreadcrumb=[],this.getParentNode(this.treeList,e,this.rootNode.id,this.selectionBreadcrumb),this.selectionBreadcrumb.push(e),this.selectionBreadcrumb.push(t),this.currentNode=t,this.selectionValue="",this.selectionValueState=!1,this.selectionList=e.users,this.getDataList(t)},setCurrentNode:function(t){this.currentNode.id!==t.id&&this.getDataList(t),this.currentNode=t,t.isDept?(this.selectionBreadcrumb=[],this.getParentNode(this.treeList,t,this.rootNode.id,this.selectionBreadcrumb),this.selectionBreadcrumb.push(t)):this.selectionBreadcrumb[this.selectionBreadcrumb.length-1].isDept?this.selectionBreadcrumb.push(t):(this.selectionBreadcrumb[this.selectionBreadcrumb.length-1]=t,this.leafClickFlag&&this.getDataList(t)),this.breadcrumbTextStyle()},getSelectionList:function(t){this.setCurrentNode(t),this.selectionList=[];for(var e=0;e<t.users.length;e++)t.users[e].name=t.users[e].username;for(var i=0;i<this.treeList.length;i++)this.treeList[i].parent_id===t.id&&this.selectionList.push(this.treeList[i]);this.selectionList=this.selectionList.concat(t.users)},getDataList:function(t){var e=this;setTimeout(function(){e.$emit("deptSelectEvent",t,e.selectionBreadcrumb)},30)},keyUp:function(t){if(13===t.keyCode){this.selectionValueState=!0,this.selectionSalesList=[];var e=!0,i=!1,a=void 0;try{for(var n,s=this.allSalesList[Symbol.iterator]();!(e=(n=s.next()).done);e=!0){var o=n.value;o.name=o.username,o.username.includes(this.selectionValue)&&this.selectionSalesList.push(o)}}catch(t){i=!0,a=t}finally{try{!e&&s.return&&s.return()}finally{if(i)throw a}}}},reverseSet:function(t){t||(t=this.treeList[0]);for(var e=void 0,i=0;i<this.treeList.length;i++)if(t.deptId){if(t.deptId===this.treeList[i].id){e=this.treeList[i];break}}else if(t.id===this.treeList[i].id){e=this.treeList[i];break}this.currentNode=e,e.isDept?(this.selectionBreadcrumb=[],this.getParentNode(this.treeList,e,this.rootNode.id,this.selectionBreadcrumb),this.selectionBreadcrumb.push(e)):this.selectionBreadcrumb[this.selectionBreadcrumb.length-1].isDept?this.selectionBreadcrumb.push(e):this.selectionBreadcrumb[this.selectionBreadcrumb.length-1]=e,this.breadcrumbTextStyle(),this.selectionList=[];for(var a=0;a<e.users.length;a++)e.users[a].name=e.users[a].username;for(var n=0;n<this.treeList.length;n++)this.treeList[n].parent_id===e.id&&this.selectionList.push(this.treeList[n]);this.selectionList=this.selectionList.concat(e.users)},breadcrumbTextStyle:function(){for(var t="",e=0;e<this.selectionBreadcrumb.length;e++)t+=this.selectionBreadcrumb[e].name;t.length<16?this.$el.querySelector(".ant-breadcrumb").style.float="left":this.$el.querySelector(".ant-breadcrumb").style.float="right"},getDeptList:function(){var t=this,e=new URLSearchParams;this.axios.get(this.serve.deptAuthorList,e).then(function(e){t.treeData=e.data.data,t.getSelectTreeData()}).catch(function(t){return t})},getSelectTreeData:function(){this.treeData.length>0&&(this.departmentOptions=JSON.parse(JSON.stringify(this.treeData)),this.treeList=this.treeToList(this.departmentOptions,[]),this.rootNode=this.treeList[0],this.currentNode=this.treeList[0],this.$emit("deptInitEvent",[this.rootNode]),this.getSelectionList(this.rootNode))},treeToList:function(t,e){var i=!0,a=!1,n=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;if(l.isDept=!0,e.push(l),l.users.length>0){var r=!0,d=!1,c=void 0;try{for(var h,p=l.users[Symbol.iterator]();!(r=(h=p.next()).done);r=!0){var u=h.value;u.isDept=!1,u.name=u.username}}catch(t){d=!0,c=t}finally{try{!r&&p.return&&p.return()}finally{if(d)throw c}}this.allSalesList=this.allSalesList.concat(l.users)}l.children&&this.treeToList(l.children,e)}}catch(t){a=!0,n=t}finally{try{!i&&o.return&&o.return()}finally{if(a)throw n}}return e},getParentNode:function(t,e,i,a){var n=!0,s=!1,o=void 0;try{for(var l,r=t[Symbol.iterator]();!(n=(l=r.next()).done);n=!0){var d=l.value;if(e.id===i)return a;if(d.id===e.parent_id){if(a.unshift(d),d.id===i)return a;this.getParentNode(t,d,i,a)}}}catch(t){s=!0,o=t}finally{try{!n&&r.return&&r.return()}finally{if(s)throw o}}}},mounted:function(){},watch:{selectionValue:function(t){t||(this.selectionValueState=!1)}}},n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"yhq-tree-select-container"},[i("div",{staticClass:"yhq-tree-select-content",on:{click:t.showSelection}},[t._v("\n    "+t._s(t.currentNode.name)+"\n  ")]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:!t.showSelectionFlag,expression:"!showSelectionFlag"}],staticClass:"yhq-tree-select-arrow",on:{click:t.showSelection}},[i("v-icon",{attrs:{type:"down"}})],1),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.showSelectionFlag,expression:"showSelectionFlag"}],staticClass:"yhq-tree-select-arrow",on:{click:t.showSelection}},[i("v-icon",{attrs:{type:"up"}})],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showSelectionFlag,expression:"showSelectionFlag"}],staticClass:"yhq-tree-select-selections"},[i("div",{staticClass:"yhq-tree-select-selections-input"},[i("v-input",{attrs:{maxlength:"10",placeholder:"搜索销售名称"},nativeOn:{keyup:function(e){t.keyUp(e)}},model:{value:t.selectionValue,callback:function(e){t.selectionValue=e},expression:"selectionValue"}}),t._v(" "),t.selectionValue?i("span",{on:{click:function(e){t.selectionValue=""}}},[i("v-icon",{attrs:{type:"close"}})],1):t._e(),t._v(" "),t.selectionValue?t._e():i("span",[i("v-icon",{attrs:{type:"search"}})],1)],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.selectionValueState,expression:"!selectionValueState"}],staticClass:"yhq-tree-select-selections-breadcrumb"},[i("v-breadcrumb",{staticStyle:{height:"32px","line-height":"32px"},attrs:{separator:">"}},t._l(t.selectionBreadcrumb,function(e,a){return i("v-breadcrumb-item",{key:e.id,class:{"breadcrumb-font":a!==t.selectionBreadcrumb.length-1,"breadcrumb-font-last":a===t.selectionBreadcrumb.length-1}},[i("span",{on:{click:function(i){t.breadcrumbBack(e)}}},[t._v(t._s(e.name))])])}))],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.selectionValueState,expression:"!selectionValueState"}],staticClass:"yhq-tree-select-selections-list"},[t.selectionList.length>0?i("ul",t._l(t.selectionList,function(e){return i("li",{key:e.id,class:{"active-li":e.id===t.currentNode.id}},[i("span",{staticClass:"yhq-tree-select-selections-list-span1",on:{click:function(i){t.setCurrentNode(e),t.showSelectionFlag=!t.showSelectionFlag}}},[t._v(t._s(e.name))]),t._v(" "),e.isDept?i("span",{staticClass:"yhq-tree-select-selections-list-span2",on:{click:function(i){t.getSelectionList(e)}}},[i("v-icon",{attrs:{type:"right"}})],1):t._e()])})):t._e(),t._v(" "),0===t.selectionList.length?i("ul",[i("li",{staticStyle:{"text-align":"center"}},[t._v("\n          暂无数据\n        ")])]):t._e()]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.selectionValueState,expression:"selectionValueState"}],staticClass:"yhq-tree-select-selections-breadcrumb",staticStyle:{color:"#999"}},[t._v("\n      搜索姓名为“"+t._s(t.selectionValue)+"”的结果\n    ")]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.selectionValueState,expression:"selectionValueState"}],staticClass:"yhq-tree-select-selections-list"},[t.selectionSalesList.length>0?i("ul",t._l(t.selectionSalesList,function(e){return i("li",{key:e.id,class:{"active-li":e.id===t.currentNode.id}},[i("span",{staticClass:"yhq-tree-select-selections-list-span1",on:{click:function(i){t.setCurrentNodeSales(e),t.showSelectionFlag=!t.showSelectionFlag}}},[t._v(t._s(e.name))])])})):t._e(),t._v(" "),0===t.selectionSalesList.length?i("ul",[i("li",{staticStyle:{"text-align":"center"}},[t._v("\n          暂无数据\n        ")])]):t._e()])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showSelectionFlag,expression:"showSelectionFlag"}],staticClass:"ant-modal-wrap",on:{click:function(e){t.showSelectionFlag=!1}}})])},staticRenderFns:[]};var s=i("VU/8")(a,n,!1,function(t){i("n6XQ")},"data-v-14523569",null);e.a=s.exports},XUvE:function(t,e){},Xfwo:function(t,e){},YNO7:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={name:"quality",data:function(){return{loadData:function(t){var e=new URLSearchParams;return this.axios.post(this.serve.quaList,e).then(function(t){var e={};e.result=t.data.data,e.totalCount=e.result.length,e.pageSize=15,e.pageNo=1;var i=!0,a=!1,n=void 0;try{for(var s,o=e.result[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;l.myStatus=["禁用","启用中"][l.status];var r=[],d="",c=!0,h=!1,p=void 0;try{for(var u,v=l.roles[Symbol.iterator]();!(c=(u=v.next()).done);c=!0){var g=u.value;r.push(g.role_name)}}catch(t){h=!0,p=t}finally{try{!c&&v.return&&v.return()}finally{if(h)throw p}}l.myRole=r.toString();var m=!0,f=!1,y=void 0;try{for(var _,x=l.viewDepartments[Symbol.iterator]();!(m=(_=x.next()).done);m=!0){d+=_.value.name+", "}}catch(t){f=!0,y=t}finally{try{!m&&x.return&&x.return()}finally{if(f)throw y}}l.myDept=d.substr(0,d.length-2)}}catch(t){a=!0,n=t}finally{try{!i&&o.return&&o.return()}finally{if(a)throw n}}return e}).catch(function(t){return t})},columns:[{title:"用户名称",field:"username",width:"10%"},{title:"用户ID",field:"salesId",width:"12%"},{title:"状态",field:"status",width:"8%"},{title:"角色",field:"myRole",width:"20%"},{title:"质检部门",field:"myDept",width:"30%"},{title:"操作",field:"operation",width:"20%"}],saleList:[],roleList:[],addModalVisible:!1,addModalLoading:!1,sensitive:"",pageNo:1,total:0,userName:"",userId:"",dept:"",sale:"",radioType:1,manageModalVisible:!1,manageModalLoading:!1,deptItems:[],roleItems:[],allDeptChecked:!1,indeterminateDept:!1,allRoleChecked:!1,indeterminateRole:!1,delModalVisible:!1,delModalLoading:!1,delObj:{},resetModalVisible:!1,resetModalLoading:!1,resetObj:{},forbidModalVisible:!1,forbidModalLoading:!1,forbidObj:{},startModalVisible:!1,startModalLoading:!1,startObj:{},treeData:[],departmentOptions:[],deptItemId:0,deptName:0}},created:function(){var t=this,e=new URLSearchParams;this.axios.post(this.serve.roleList,e).then(function(e){var i=e.data.data;t.roleList=[];var a=!0,n=!1,s=void 0;try{for(var o,l=i[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var r=o.value;t.roleList.push({value:r.roleId,label:r.roleName})}}catch(t){n=!0,s=t}finally{try{!a&&l.return&&l.return()}finally{if(n)throw s}}}).catch(function(t){return t}),this.getDeptList()},methods:{popupContainer:function(){return document.getElementById("tree-select-container")},popupContainerAdd:function(){return document.getElementById("tree-select-container-add")},treeClick:function(t){var e=this;t?(this.saleList=[],this.sale="",t.children?(this.$notification.warning({message:"提示",description:"只能选取叶子节点"}),setTimeout(function(){e.$(".ant-select-selection__rendered").find("span")[0].innerHTML=""},100),this.deptItemId="",this.deptName=""):(this.deptItemId=t.id,this.deptName=t.name,this.getSaleList())):setTimeout(function(){var t=e.$(".ant-select-selection__rendered").find("span")[0];e.$(".ant-select-search__field__placeholder")[0].style.display="none",t.style.display="",t.innerHTML=e.deptName,e.departmentOptions=e.myTool.setSelect(e.departmentOptions,e.deptItemId)},10)},treeSelect:function(t){this.deptItems=[];var e=!0,i=!1,a=void 0;try{for(var n,s=t[Symbol.iterator]();!(e=(n=s.next()).done);e=!0){var o=n.value;this.deptItems.push(o.id)}}catch(t){i=!0,a=t}finally{try{!e&&s.return&&s.return()}finally{if(i)throw a}}},getDeptList:function(){var t=this,e=new URLSearchParams;this.axios.get(this.serve.deptList,e).then(function(e){t.treeData=e.data.data,t.getSelectTreeData()}).catch(function(t){return t})},getSelectTreeData:function(){var t=JSON.parse(JSON.stringify(this.treeData));this.departmentOptions=this.myTool.deepClone(t),this.getDeptItemId(this.departmentOptions)},getDeptItemId:function(t){t[0]&&!t[0].children?this.deptItemId=t[0].id:this.getDeptItemId(t[0].children)},getSaleList:function(){var t=this,e=new URLSearchParams;e.append("department_id",this.deptItemId),e.append("filter",""),e.append("page",1),e.append("count",9999999),this.axios.post(this.serve.saleList,e).then(function(e){var i=e.data.data;t.saleList=[];var a=!0,n=!1,s=void 0;try{for(var o,l=i.result[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var r=o.value;r.value=r.id,r.label=r.username,0===r.is_check&&t.saleList.push(r)}}catch(t){n=!0,s=t}finally{try{!a&&l.return&&l.return()}finally{if(n)throw s}}t.saleList[0]?t.sale=t.saleList[0].value:(t.sale=0,t.$notification.warning({message:"提示",description:"该部门下无销售，请选择其他部门"}))}).catch(function(t){return t})},changePageNo:function(t){this.pageNo=t,this.$refs.xtable.goto(t)},openAddModal:function(){this.getSelectTreeData(),this.addModalVisible=!0,this.addModalLoading=!1,this.radioType=1,this.userName="",this.userId="",this.saleList=[],this.sale=""},openDelModal:function(t){this.delModalVisible=!0,this.delModalLoading=!1,this.delObj=t},openResetModal:function(t){this.resetModalVisible=!0,this.resetModalLoading=!1,this.resetObj=t},openForbidModal:function(t){this.forbidModalVisible=!0,this.forbidModalLoading=!1,this.forbidObj=t},openStartModal:function(t){this.startModalVisible=!0,this.startModalLoading=!1,this.startObj=t},goToRoleManage:function(){this.$router.push("/roleManage")},addQuaUser:function(){var t=this;if(1===this.radioType&&this.userName&&this.userId||2===this.radioType&&this.sale){this.addModalLoading=!0;var e=new URLSearchParams;e.append("mode",this.radioType),e.append("username",this.userName),e.append("sales_id",this.sale),e.append("user_id",this.userId),this.axios.post(this.serve.quaAdd,e).then(function(e){t.pageNo=1,t.$refs.xtable.reload(),t.addModalVisible=!1,t.addModalLoading=!1,t.$notification.success({message:"提示",description:"添加成功"})}).catch(function(e){return t.addModalVisible=!1,t.addModalLoading=!1,e})}else this.$notification.warning({message:"提示",description:"请确保信息填写完整"})},authority:function(){var t=this,e=new URLSearchParams;e.append("departmentIds",this.deptItems.toString()),e.append("roleIds",this.roleItems.toString()),e.append("user_id",this.userId),this.manageModalLoading=!0,this.axios.post(this.serve.quaAuth,e).then(function(e){t.pageNo=1,t.$refs.xtable.reload(),t.manageModalVisible=!1,t.manageModalLoading=!1,t.$notification.success({message:"提示",description:"权限设置成功"})}).catch(function(e){return t.manageModalVisible=!1,t.manageModalLoading=!1,e})},openManageModal:function(t){this.manageModalVisible=!0,this.manageModalLoading=!1,this.userId=t.user_id,this.deptItems=[],this.roleItems=[],this.allDeptChecked=!1,this.indeterminateDept=!1,this.allRoleChecked=!1,this.indeterminateRole=!1;var e=!0,i=!1,a=void 0;try{for(var n,s=t.departments[Symbol.iterator]();!(e=(n=s.next()).done);e=!0){var o=n.value;this.deptItems.push(o.id)}}catch(t){i=!0,a=t}finally{try{!e&&s.return&&s.return()}finally{if(i)throw a}}var l=JSON.parse(JSON.stringify(this.treeData));this.departmentOptions=this.myTool.deepCloneCheck(l,this.deptItems);var r=!0,d=!1,c=void 0;try{for(var h,p=t.roles[Symbol.iterator]();!(r=(h=p.next()).done);r=!0){var u=h.value;this.roleItems.push(u.id)}}catch(t){d=!0,c=t}finally{try{!r&&p.return&&p.return()}finally{if(d)throw c}}this.deptItems.length>0&&(this.indeterminateDept=!0),this.roleItems.length>0&&(this.indeterminateRole=!0),this.roleItems.length===this.roleList.length&&(this.allRoleChecked=!0,this.indeterminateRole=!1)},checkAllRole:function(){if(this.roleItems.length===this.roleList.length)this.roleItems=[],this.allRoleChecked=!1,this.indeterminateRole=!1;else{this.roleItems=[];var t=!0,e=!1,i=void 0;try{for(var a,n=this.roleList[Symbol.iterator]();!(t=(a=n.next()).done);t=!0){var s=a.value;this.roleItems.push(s.value)}}catch(t){e=!0,i=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw i}}this.allRoleChecked=!0,this.indeterminateRole=!1}},setStateRole:function(){this.indeterminateRole=this.roleItems.length>0&&this.roleItems.length<this.roleList.length,this.allRoleChecked=this.roleItems.length===this.roleList.length},deletequality:function(){var t=this,e=this.delObj,i=new URLSearchParams;i.append("user_id",e.user_id),this.axios.post(this.serve.quaDel,i).then(function(e){t.pageNo=1,t.$refs.xtable.reload(),t.delModalVisible=!1,t.delModalLoading=!1,t.$notification.success({message:"提示",description:"删除成功"})}).catch(function(e){return t.delModalVisible=!1,t.delModalLoading=!1,e})},resetPassword:function(){var t=this,e=this.resetObj,i=new URLSearchParams;i.append("user_id",e.user_id),this.axios.post(this.serve.quaResetPas,i).then(function(e){t.pageNo=1,t.$refs.xtable.reload(),t.resetModalVisible=!1,t.resetModalLoading=!1,t.$notification.success({message:"提示",description:"密码重置成功,新密码：123456"})}).catch(function(e){return t.resetModalVisible=!1,t.resetModalLoading=!1,e})},forbidQuality:function(){var t=this,e=this.forbidObj,i="正常"===e.status?0:1,a=new URLSearchParams;a.append("user_id",e.user_id),a.append("status",i),this.axios.post(this.serve.quaChangeStatue,a).then(function(e){t.pageNo=1,t.$refs.xtable.reload(),t.forbidModalVisible=!1,t.forbidModalLoading=!1,t.$notification.success({message:"提示",description:"禁用用户成功"})}).catch(function(e){return t.forbidModalVisible=!1,t.forbidModalLoading=!1,e})},startQuality:function(){var t=this,e=this.startObj,i="正常"===e.status?0:1,a=new URLSearchParams;a.append("user_id",e.user_id),a.append("status",i),this.axios.post(this.serve.quaChangeStatue,a).then(function(e){t.pageNo=1,t.$refs.xtable.reload(),t.startModalVisible=!1,t.startModalLoading=!1,t.$notification.success({message:"提示",description:"启用用户成功"})}).catch(function(e){return t.startModalVisible=!1,t.startModalLoading=!1,e})},cancel:function(t){}}},n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"v-container bg-color"},[i("el-scrollbar",[i("div",{staticClass:"header"},[i("div",{staticClass:"common-title"},[t._v("质检用户管理")]),t._v(" "),i("div",{staticClass:"clearfix",staticStyle:{"margin-top":"23px"}},[i("v-button",{staticStyle:{float:"left",left:"10px"},attrs:{type:"primary"},on:{click:t.openAddModal}},[t._v("添加")]),t._v(" "),i("v-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.goToRoleManage}},[t._v("角色管理")])],1)]),t._v(" "),i("div",{staticClass:"v-content"},[i("div",{staticStyle:{height:"auto"}},[i("v-data-table",{ref:"xtable",attrs:{data:t.loadData,columns:t.columns,"page-num":t.pageNo,pagination:!1,emptyText:"暂无数据",bordered:""},scopedSlots:t._u([{key:"th",fn:function(e){return[i("div",{staticStyle:{"text-align":"center",color:"#000"}},["operation"==e.column.field?i("span",[t._v("操作")]):i("span",{domProps:{innerHTML:t._s(e.title)}})])]}},{key:"td",fn:function(e){return["operation"==e.column.field?i("div",{staticStyle:{"text-align":"center",color:"#666"}},[i("span",{staticClass:"operation",attrs:{type:"ghost"},on:{click:function(i){t.openManageModal(e.item)}}},[t._v("权限")]),t._v(" "),i("span",{staticClass:"operation",on:{click:function(i){t.openResetModal(e.item)}}},[t._v("重置密码")]),t._v(" "),"admin"!==e.item.salesId&&"正常"===e.item.status?i("span",{staticClass:"operation",on:{click:function(i){t.openForbidModal(e.item)}}},[t._v("禁用")]):t._e(),t._v(" "),"admin"!==e.item.salesId&&"禁用"===e.item.status?i("span",{staticClass:"operation",on:{click:function(i){t.openStartModal(e.item)}}},[t._v("启用")]):t._e(),t._v(" "),"admin"!==e.item.salesId?i("span",{staticClass:"operation",on:{click:function(i){t.openDelModal(e.item)}}},[t._v("删除")]):t._e()]):"myDept"==e.column.field?i("div",{staticStyle:{"text-align":"center",color:"#666","white-space":"normal","line-height":"28px"},domProps:{innerHTML:t._s(e.content)}}):i("div",{staticStyle:{"text-align":"center",color:"#666"},domProps:{innerHTML:t._s(e.content)}})]}}])})],1)])]),t._v(" "),[i("v-modal",{attrs:{title:"添加质检用户",visible:t.addModalVisible,"confirm-loading":t.addModalLoading},on:{ok:function(e){t.addQuaUser()},cancel:function(e){t.cancel("添加质检用户"),t.addModalVisible=!1}}},[i("div",{staticStyle:{"padding-left":"90px"}},[i("v-radio-group",{attrs:{data:[{value:1,text:"新建质检用户"},{value:2,text:"选择已有销售用户"}]},model:{value:t.radioType,callback:function(e){t.radioType=e},expression:"radioType"}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1===t.radioType,expression:"radioType === 1"}]},[i("div",{staticClass:"modal-container"},[i("span",{staticClass:"modal-span"},[t._v("用户名称")]),t._v(" "),i("v-input",{staticClass:"modal-input",attrs:{placeholder:"用户名称,不超过20个字符",maxlength:"20"},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}})],1),t._v(" "),i("div",{staticClass:"modal-container"},[i("span",{staticClass:"modal-span"},[t._v("用户ID")]),t._v(" "),i("v-input",{staticClass:"modal-input",attrs:{placeholder:"用户ID,请使用您的手机号或邮箱",maxlength:"50"},model:{value:t.userId,callback:function(e){t.userId=e},expression:"userId"}})],1)]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2===t.radioType,expression:"radioType === 2"}]},[i("div",{staticClass:"modal-container"},[i("span",{staticClass:"modal-span"},[t._v("部门")]),t._v(" "),i("v-tree-select",{staticClass:"modal-input",staticStyle:{width:"232px","text-align":"left",height:"auto"},attrs:{data:t.departmentOptions,"popup-container":t.popupContainerAdd,allowClear:!1,placeholder:"请选择部门"},on:{select:t.treeClick},model:{value:t.deptItemId,callback:function(e){t.deptItemId=e},expression:"deptItemId"}}),t._v(" "),i("div",{staticStyle:{position:"relative","margin-left":"75px"},attrs:{id:"tree-select-container-add"}})],1),t._v(" "),i("div",{staticClass:"modal-container"},[i("span",{staticClass:"modal-span"},[t._v("销售用户")]),t._v(" "),i("v-select",{staticClass:"modal-input",attrs:{allowClear:!1,placeholder:"请选择销售用户",data:t.saleList},model:{value:t.sale,callback:function(e){t.sale=e},expression:"sale"}})],1)])],1)])],t._v(" "),[i("v-modal",{attrs:{title:"权限管理",visible:t.manageModalVisible,"confirm-loading":t.manageModalLoading},on:{ok:function(e){t.authority()},cancel:function(e){t.cancel("权限管理"),t.manageModalVisible=!1}}},[i("div",[i("div",[i("span",[t._v("质检部门范围")]),t._v(" "),i("v-tree-select",{staticClass:"modal-input",staticStyle:{width:"410px","text-align":"left",height:"auto"},attrs:{data:t.departmentOptions,"popup-container":t.popupContainer,multiple:"",allowClear:!1,placeholder:"请选择部门"},on:{check:t.treeSelect},model:{value:t.deptItemId,callback:function(e){t.deptItemId=e},expression:"deptItemId"}}),t._v(" "),i("div",{staticStyle:{position:"relative","margin-left":"92px"},attrs:{id:"tree-select-container"}})],1),t._v(" "),i("div",{staticStyle:{"margin-top":"30px"}},[i("span",[t._v("角色")]),t._v(" "),i("span",{staticStyle:{"margin-left":"30px"}},[i("v-checkbox",{attrs:{indeterminate:t.indeterminateRole},on:{click:t.checkAllRole},model:{value:t.allRoleChecked,callback:function(e){t.allRoleChecked=e},expression:"allRoleChecked"}},[t._v("全选角色")])],1),t._v(" "),i("div",{staticClass:"v-check-container"},[i("v-checkbox-group",{attrs:{data:t.roleList},on:{change:t.setStateRole},model:{value:t.roleItems,callback:function(e){t.roleItems=e},expression:"roleItems"}})],1)])])])],t._v(" "),[i("v-modal",{attrs:{title:"删除销售",visible:t.delModalVisible,"confirm-loading":t.delModalLoading},on:{ok:function(e){t.deletequality()},cancel:function(e){t.cancel("删除质检用户"),t.delModalVisible=!1}}},[i("div",{staticStyle:{"text-align":"center",height:"120px","line-height":"120px"}},[t._v("\n      确认删除该质检用户吗？\n    ")])])],t._v(" "),[i("v-modal",{attrs:{title:"重置密码",visible:t.resetModalVisible,"confirm-loading":t.resetModalLoading},on:{ok:function(e){t.resetPassword()},cancel:function(e){t.cancel("重置密码"),t.resetModalVisible=!1}}},[i("div",{staticStyle:{"text-align":"center",height:"120px","line-height":"120px"}},[t._v("\n        确认重置密码吗？\n      ")])])],t._v(" "),[i("v-modal",{attrs:{title:"禁用",visible:t.forbidModalVisible,"confirm-loading":t.forbidModalLoading},on:{ok:function(e){t.forbidQuality()},cancel:function(e){t.cancel("禁用"),t.forbidModalVisible=!1}}},[i("div",{staticStyle:{"text-align":"center",height:"120px","line-height":"120px"}},[t._v("\n        确认禁用该用户吗？\n      ")])])],t._v(" "),[i("v-modal",{attrs:{title:"启用",visible:t.startModalVisible,"confirm-loading":t.startModalLoading},on:{ok:function(e){t.startQuality()},cancel:function(e){t.cancel("启用"),t.startModalVisible=!1}}},[i("div",{staticStyle:{"text-align":"center",height:"120px","line-height":"120px"}},[t._v("\n        确认启用该用户吗？\n      ")])])]],2)},staticRenderFns:[]};var s=i("VU/8")(a,n,!1,function(t){i("0rKD"),i("7NeA")},"data-v-3b7ca762",null);e.default=s.exports},Z7nI:function(t,e){},ZZ2p:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAA5CAYAAABAgbluAAACzUlEQVRoge3ZX0vjShjH8e9MjNUmSgkKllrrgheCF96fV3DewL7LfTVy9CBCFyxN+kctWELMpDOzF+6Ws6vHbclou5Df5STz9MPDTDNpxXg8/ksp9QVo8jFJ9vf3T33ff1xmkvxgJHmeN5MkuVJK7S4zT/KByB/J87w1GAyuZrPZzqJz5HuC3kqe5604ji+VUgthVwYFyPO8PRgMLoui+C12pVB4xiZJcqmUCt+6b+VQmHf2Smv9v9i1gMIzdjgcXmmtg9eurw0UIE3TdpIk/76GXSsoQJZl7eFw+AK7dlCYd/ZSa13/MbaWUIAsyzrf12wdVgAVQix8b5qmnSRJ/tFa10W/37fv6HoRYwxKKYwxC88JguDrxjuaXo2Ukq2trWWnfVrbNfprKqjrVFDXqaCuU0Fdp4K6zh8DdXYoKYqCNE0pigIpJUEQUKvVljrWvZXSUGstd3d3dLtdlFLzcSklBwcHdDodNjbK96N0hclkws3NDQDNZpMwDMnznNFoRBzHGGM4OTkp3dlSUK01t7e3aK05PT1lb29vDoqiiIuLC0ajEYeHh2xvb5eCltpMWmuKoqDRaBBF0U9dC8OQMAwxxpBlWSkklOyo7/ucn58jpcTzvJ+uGWMoiuL5Q1a9RoUQbG5uvhi31jIej3l6eiIIAur1+iuzl4vzd6bZbEav1yOOY6SUHB0drb6jv8YYw/X1NZPJhDAMOT4+ptFoOKntFHp/f8/DwwM7OzucnZ3h+76z2k4fodPpFCEE7XbbKRIcQ4UQ1Go150gAp7+UGGMwxuB5nrNnPDw3wOkalVIi5fscyJxWfXx8pN/vz7/oXcZZR621dLtdptMpAK1Wy1VpwCFUCEEURVhr2d1d6k+5xeq73EzWWqy1ztep880khHC62/+bP+adqYK6TgV1nQrqOhXUdSSQrBrxuwghelJK+RkYrBrzRnqe5/39DV1NJ39SaWGDAAAAAElFTkSuQmCC"},Zrdu:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("4TxO"),n={name:"appl-safety",data:function(){return{ipList:""}},created:function(){var t=this;this.axios.post(this.serve.showWhiteItems).then(function(e){t.ipList=e.data.data.toString()}).catch(function(t){return t})},methods:{keyUp:function(t){for(var e=["0","1","2","3","4","5","6","7","8","9",".",",","，","\n"],i=this.ipList.length,a=0;a<i;a++)e.includes(this.ipList[a])||(this.ipList=this.ipList.slice(0,a));if(this.leftNum<0)this.ipList=this.ipList.substring(0,this.ipList.length-1);else{this.ipList=this.ipList.replace(/，/g,",");var n=[];this.ipList.split(",").map(function(t,e,i){i[e+1]?t&&t.length>0&&n.push(t):n.push(t)}),this.ipList=n.length>0?n.toString():""}},confirm:function(){var t=this,e=new URLSearchParams;e.append("ips",this.ipList),this.axios.post(this.serve.updateWhiteItems,e).then(function(e){t.$notification.success({message:"提示",description:"白名单修改成功"})}).catch(function(t){return t})},cancel:function(t){this.ipList="",this.$notification.info({message:"提示",description:t+"操作成功"})}},computed:{leftNum:function(){var t=this.ipList.split(","),e=t.length;return this.ipList.length>0?t[e-1].length>0?10-t.length:10-t.length+1:10}},watch:{ipList:function(){}}},s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"v-container"},[i("div",{staticStyle:{width:"30%",margin:"0 auto","margin-top":"100px","min-width":"460px"}},[i("v-input",{staticClass:"v-input",attrs:{type:"textarea",placeholder:"请在此输入ip地址",maxlength:"400",resize:"false"},nativeOn:{keyup:function(e){t.keyUp(e)}},model:{value:t.ipList,callback:function(e){t.ipList=e},expression:"ipList"}}),t._v(" "),i("div",{staticClass:"clearfix tip"},[i("div",{staticStyle:{float:"left"}},[t._v("提示：0.0.0.0表示关闭白名单功能")]),t._v(" "),i("div",{staticStyle:{float:"right"}},[t._v("还可以输入"+t._s(t.leftNum)+"个IP地址，每个IP地址用,分隔")])]),t._v(" "),i("div",{staticClass:"clearfix",staticStyle:{"text-align":"right"}},[i("div",{attrs:{slot:"extra"},slot:"extra"},[i("v-button",{staticStyle:{width:"130px",height:"35px"},attrs:{type:"primary"},on:{click:t.confirm}},[t._v("保存")]),t._v(" "),i("v-button",{staticStyle:{"margin-left":"30px",width:"130px",height:"35px"},on:{click:function(e){t.cancel("清空")}}},[t._v("清空")])],1)])],1)])},staticRenderFns:[]};var o=i("VU/8")(n,s,!1,function(t){i("B42q")},"data-v-0512773e",null).exports,l={name:"appl-pattern",data:function(){return{screenHeight:window.innerHeight,vContentHeigth:{height:window.innerHeight-87+"px"},dragObjId2:"",modalTitle:"",dataList:[],listLoading:!1,activeTab:0,patternModal:{},typeArr:["数字","英文","中文","字符串混合"],lengOptions:this.myData.lengOptions,uniqueOptions:this.myData.uniqueOptions,addModalVisible:!1,addModalLoading:!1,forbidObj:{},forbidModalVisible:!1,forbidModalLoading:!1,startObj:{},startModalVisible:!1,startModalLoading:!1,delObj:{},delModalVisible:!1,delModalLoading:!1}},created:function(){this.loadData()},methods:{loadData:function(){var t=this;return this.listLoading=!0,this.axios.get(this.serve.patternList+"?customerType="+this.activeTab+"&time="+(new Date).getTime()).then(function(e){t.listLoading=!1;var i=!0,a=!1,n=void 0;try{for(var s,o=e.data.data[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value,r=!0,d=!1,c=void 0;try{for(var h,p=l.fieldItems[Symbol.iterator]();!(r=(h=p.next()).done);r=!0){var u=h.value;0===u.minLength&&(u.minLength="0"),0===u.maxLength&&(u.maxLength="0")}}catch(t){d=!0,c=t}finally{try{!r&&p.return&&p.return()}finally{if(d)throw c}}}}catch(t){a=!0,n=t}finally{try{!i&&o.return&&o.return()}finally{if(a)throw n}}t.dataList=e.data.data})},openAddModal:function(){this.modalTitle="添加格式",this.addModalVisible=!0,this.addModalLoading=!1,this.patternModal={name:"",fieldItems:[{name:"",type:"",minLength:1,maxLength:11,unique:0,typeHover:!1}]}},addField:function(){this.patternModal.fieldItems.length<10?this.patternModal.fieldItems.push({name:"",type:"",minLength:1,maxLength:11,unique:0,typeHover:!1}):this.$notification.warning({message:"提示",description:"字段最多10个，无法继续添加。"})},lengthChange:function(t,e,i){if(1===e&&setTimeout(function(){t.minLength=t.minLength>t.maxLength?t.maxLength:t.minLength},30),2===e&&setTimeout(function(){t.maxLength=t.maxLength<t.minLength?t.minLength:t.maxLength},30),3===e){for(var a=!1,n=0;n<this.patternModal.fieldItems.length;n++)n!==i&&1===this.patternModal.fieldItems[n].unique&&(a=!0);a&&(1===t.unique&&this.$notification.warning({message:"提示",description:"唯一标识只能有一个。"}),setTimeout(function(){t.unique=0},30))}},changeTypeArr:function(t){var e=["数字","英文","中文","字符串混合"];if(0===t.type.length)this.typeArr=e;else{this.typeArr=[];var i=!0,a=!1,n=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;0===l.indexOf(t.type)&&this.typeArr.push(l)}}catch(t){a=!0,n=t}finally{try{!i&&o.return&&o.return()}finally{if(a)throw n}}}},focusChange:function(t,e){e?(this.changeTypeArr(t),t.typeHover=e):setTimeout(function(){t.typeHover=e},150)},typeKeyUp:function(t,e){this.changeTypeArr(t),t.typeHover=!0},setType:function(t,e,i){t.type=e,t.typeHover=!1},setTypeOld:function(t,e,i){var a=!1;0===i?this.patternModal.fieldItems[i+1]&&e===this.patternModal.fieldItems[i+1].type&&(a=!0):i===this.patternModal.fieldItems.length-1?e===this.patternModal.fieldItems[i-1].type&&(a=!0):e!==this.patternModal.fieldItems[i-1].type&&e!==this.patternModal.fieldItems[i+1].type||(a=!0),a?(this.$notification.warning({message:"提示",description:"相邻两个字段的类型不能相同。"}),t.type=""):(t.type=e,t.typeHover=!1)},addPattern:function(){var t=this,e=!0,i=!0,a=!1,n=void 0;try{for(var s,o=this.patternModal.fieldItems[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;l.name&&l.type||(e=!1)}}catch(t){a=!0,n=t}finally{try{!i&&o.return&&o.return()}finally{if(a)throw n}}if(!1!==e&&this.patternModal.name){var r=!0,d=!1,c=void 0;try{for(var h,p=this.patternModal.fieldItems[Symbol.iterator]();!(r=(h=p.next()).done);r=!0){delete h.value.typeHover}}catch(t){d=!0,c=t}finally{try{!r&&p.return&&p.return()}finally{if(d)throw c}}this.patternModal.customerType=this.activeTab,this.addModalLoading=!0,this.axios.post(this.serve.patternAdd,this.patternModal,{"Content-Type":"application/json"}).then(function(e){t.addModalVisible=!1,t.addModalLoading=!1,t.$notification.success({message:"提示",description:"添加用户成功"}),t.loadData()}).catch(function(e){return t.addModalVisible=!1,t.addModalLoading=!1,e})}else this.$notification.success({message:"提示",description:"请确保信息完整。"})},openForbidModal:function(t){this.forbidModalVisible=!0,this.forbidModalLoading=!1,this.forbidObj=t},openStartModal:function(t){this.startModalVisible=!0,this.startModalLoading=!1,this.startObj=t},openUpdateModal:function(t){this.modalTitle="编辑格式",this.addModalVisible=!0,this.addModalLoading=!1,this.patternModal=JSON.parse(JSON.stringify(t))},openDelModal:function(t){this.delModalVisible=!0,this.delModalLoading=!1,this.delObj=t},forbid:function(){var t=this,e=new URLSearchParams;e.append("id",this.forbidObj.id),this.forbidModalLoading=!0,this.axios.post(this.serve.patternClose,e).then(function(e){t.forbidModalVisible=!1,t.forbidModalLoading=!1,t.$notification.success({message:"提示",description:"禁用成功"}),t.loadData()}).catch(function(e){return t.forbidModalVisible=!1,t.forbidModalLoading=!1,e})},startPattern:function(){var t=this,e=new URLSearchParams;e.append("id",this.startObj.id),this.startModalLoading=!0,this.axios.post(this.serve.patternOpen,e).then(function(e){t.startModalVisible=!1,t.startModalLoading=!1,t.$notification.success({message:"提示",description:"启用成功"}),t.loadData()}).catch(function(e){return t.startModalVisible=!1,t.startModalLoading=!1,e})},deletePattern:function(){var t=this,e=new URLSearchParams;e.append("id",this.delObj.id),this.delModalLoading=!0,this.axios.post(this.serve.patternDel,e).then(function(e){t.delModalVisible=!1,t.delModalLoading=!1,t.$notification.success({message:"提示",description:"删除成功"}),t.loadData()}).catch(function(e){return t.forbidModalVisible=!1,t.forbidModalLoading=!1,e})},deleteItem:function(t,e){this.patternModal.fieldItems.length>1?this.patternModal.fieldItems.splice(e,1):this.$notification.success({message:"提示",description:"字段至少保留一个。"})},drag:function(t){t.dataTransfer.setData("dragObj",t.target.id)},dragover:function(t){t.preventDefault()},drop:function(t){t.preventDefault(),this.dragObjId2="",this.parentUtil(t.target);var e=this.dragObjId2.replace("drop","");if(e){var i=t.dataTransfer.getData("dragObj").replace("drag",""),a=this.patternModal.fieldItems[i],n=this.patternModal.fieldItems[e];this.patternModal.fieldItems.splice(i,1,n),this.patternModal.fieldItems.splice(e,1,a)}else this.$notification.success({message:"提示",description:"请放置到操作栏里。"})},parentUtil:function(t){t.id&&t.id.includes("drop")?this.dragObjId2=t.id:this.parentUtil(t.parentNode)},cancel:function(t){}},mounted:function(){var t=this;window.onresize=function(){return t.screenHeight=window.innerHeight,void(t.vContentHeigth={height:window.innerHeight-87+"px"})}},watch:{screenHeight:function(t){this.screenHeight=t,this.vContentHeigth={height:t-87+"px"}}}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"v-container bg-color",style:t.vContentHeigth},[i("el-scrollbar",[i("div",{staticStyle:{"line-height":"30px",height:"80px"}},[i("div",{staticClass:"clearfix",staticStyle:{width:"288px",margin:"0 auto"}},[i("span",{staticClass:"content-option",class:{active:0===t.activeTab},staticStyle:{"border-radius":"4px 0 0 4px"},on:{click:function(e){t.activeTab=0,t.loadData()}}},[t._v("客户格式")]),t._v(" "),i("span",{staticClass:"content-option",class:{active:1===t.activeTab},staticStyle:{"border-radius":"0 4px 4px 0"},on:{click:function(e){t.activeTab=1,t.loadData()}}},[t._v("客户群格式")])]),t._v(" "),i("div",{staticClass:"clearfix",staticStyle:{"margin-top":"10px"}},[i("v-button",{staticStyle:{float:"left",left:"10px"},attrs:{type:"primary"},on:{click:function(e){t.openAddModal()}}},[t._v("添加")])],1)]),t._v(" "),i("div",{staticClass:"v-content"},[t.listLoading?i("div",{staticClass:"have-no-data"},[i("v-spin",{attrs:{spinning:t.listLoading}})],1):t._e(),t._v(" "),0!==t.dataList.length||t.listLoading?t._e():i("div",{staticClass:"have-no-data"},[t._v("暂无数据")]),t._v(" "),t.dataList.length>0&&!t.listLoading?i("div",{staticStyle:{height:"auto"}},t._l(t.dataList,function(e){return i("div",{key:e.id,staticClass:"table-container clearfix"},[i("ul",{staticStyle:{"max-width":"130px","min-width":"130px"}},[i("li",{staticStyle:{"background-color":"#F3F3F3"}},[t._v("格式名称")]),t._v(" "),i("li",{staticStyle:{height:"200px",display:"flex","align-items":"center","justify-content":"center"}},[t._v("\n            "+t._s(e.name)+"\n          ")])]),t._v(" "),i("ul",[i("li",{staticStyle:{"background-color":"#F3F3F3"}},[t._v("字段属性")]),t._v(" "),i("li",[t._v("类型")]),t._v(" "),i("li",[t._v("最小长度")]),t._v(" "),i("li",[t._v("最大长度")]),t._v(" "),i("li",[t._v("唯一标识")])]),t._v(" "),t._l(e.fieldItems,function(e){return i("ul",{key:e.name},[i("li",{staticStyle:{"background-color":"#F3F3F3"}},[t._v(t._s(e.name))]),t._v(" "),i("li",[t._v(t._s(e.type))]),t._v(" "),i("li",[t._v(t._s(e.minLength))]),t._v(" "),i("li",[t._v(t._s(e.maxLength))]),t._v(" "),i("li",[t._v(t._s(e.unique))])])}),t._v(" "),i("ul",{staticStyle:{"max-width":"80px","min-width":"80px"}},[i("li",{staticStyle:{"background-color":"#F3F3F3"}},[t._v("状态")]),t._v(" "),i("li",{staticStyle:{height:"200px",display:"flex","align-items":"center","justify-content":"center"}},[t._v("\n            "+t._s(t._f("state")(e.state))+"\n          ")])]),t._v(" "),i("ul",{staticStyle:{"max-width":"152px","min-width":"152px"}},[i("li",{staticStyle:{"background-color":"#F3F3F3"}},[t._v("操作")]),t._v(" "),i("li",{staticStyle:{height:"200px",display:"flex","align-items":"center","justify-content":"center"}},[1===e.state?i("span",{staticClass:"operation",on:{click:function(i){t.openForbidModal(e)}}},[t._v("禁用")]):t._e(),t._v(" "),0===e.state?i("span",{staticClass:"operation",on:{click:function(i){t.openStartModal(e)}}},[t._v("启用")]):t._e(),t._v(" "),i("span",{staticClass:"operation",on:{click:function(i){t.openUpdateModal(e)}}},[t._v("编辑")]),t._v(" "),i("span",{staticClass:"operation",on:{click:function(i){t.openDelModal(e)}}},[t._v("删除")])])])],2)})):t._e()])]),t._v(" "),[i("v-modal",{attrs:{title:t.modalTitle,width:1200,visible:t.addModalVisible,"confirm-loading":t.addModalLoading},on:{ok:function(e){t.addPattern()},cancel:function(e){t.addModalVisible=!1}}},[i("div",{staticStyle:{"text-align":"center"}},[i("div",{staticClass:"table-container clearfix"},[i("ul",{staticStyle:{"max-width":"130px","min-width":"130px"}},[i("li",[t._v("格式名称")]),t._v(" "),i("li",{staticStyle:{height:"250px",display:"flex","align-items":"center","justify-content":"center"}},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.patternModal.name,expression:"patternModal.name"}],staticStyle:{height:"199px",resize:"none",border:"none","padding-left":"6px",width:"99%"},attrs:{placeholder:"格式名称",maxlength:"20;"},domProps:{value:t.patternModal.name},on:{input:function(e){e.target.composing||t.$set(t.patternModal,"name",e.target.value)}}})])]),t._v(" "),i("ul",[i("li",[t._v("字段属性")]),t._v(" "),i("li",[t._v("类型")]),t._v(" "),i("li",[t._v("最小长度")]),t._v(" "),i("li",[t._v("最大长度")]),t._v(" "),i("li",[t._v("唯一标识")]),t._v(" "),i("li",[t._v("操作")])]),t._v(" "),t._l(t.patternModal.fieldItems,function(e,a){return i("ul",{key:e.id,attrs:{id:"drop"+a},on:{drop:function(e){t.drop(e)},dragover:function(e){t.dragover(e)}}},[i("li",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"it.name"}],staticClass:"modal-select",staticStyle:{"padding-left":"5px"},attrs:{maxlength:"10",placeholder:"字段名称"},domProps:{value:e.name},on:{input:function(i){i.target.composing||t.$set(e,"name",i.target.value)}}})]),t._v(" "),i("li",{staticClass:"self-li"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.type,expression:"it.type"}],staticClass:"modal-select",staticStyle:{"padding-left":"5px"},attrs:{maxlength:"10",placeholder:"类型,可自定义"},domProps:{value:e.type},on:{focus:function(i){t.focusChange(e,!0)},blur:function(i){t.focusChange(e,!1)},keyup:function(i){t.typeKeyUp(e,i)},input:function(i){i.target.composing||t.$set(e,"type",i.target.value)}}}),t._v(" "),i("ul",{directives:[{name:"show",rawName:"v-show",value:e.typeHover,expression:"it.typeHover"}]},t._l(t.typeArr,function(n){return i("li",{key:n,on:{click:function(i){t.setType(e,n,a)}}},[t._v(t._s(n))])}))]),t._v(" "),i("li",[i("v-select",{staticClass:"modal-select",attrs:{data:t.lengOptions,allowClear:!1},on:{change:function(i){t.lengthChange(e,1,a)}},model:{value:e.minLength,callback:function(i){t.$set(e,"minLength",i)},expression:"it.minLength"}})],1),t._v(" "),i("li",[i("v-select",{staticClass:"modal-select",attrs:{data:t.lengOptions,allowClear:!1},on:{change:function(i){t.lengthChange(e,2,a)}},model:{value:e.maxLength,callback:function(i){t.$set(e,"maxLength",i)},expression:"it.maxLength"}})],1),t._v(" "),i("li",[i("v-select",{staticClass:"modal-select",attrs:{data:t.uniqueOptions,allowClear:!1},on:{change:function(i){t.lengthChange(e,3,a)}},model:{value:e.unique,callback:function(i){t.$set(e,"unique",i)},expression:"it.unique"}})],1),t._v(" "),i("li",[i("div",{staticClass:"clearfix modal-btn"},[i("div",{staticStyle:{float:"left"},attrs:{draggable:"true",id:"drag"+a,title:"按住拖动"},on:{dragstart:function(e){t.drag(e)}}},[t._v("\n                  移动\n                ")]),t._v(" "),i("div",{staticStyle:{float:"right"},attrs:{title:"点击删除"},on:{click:function(i){t.deleteItem(e,a)}}},[t._v("\n                  删除\n                ")])])])])}),t._v(" "),i("ul",{staticStyle:{"max-width":"30px","min-width":"30px",cursor:"pointer","background-color":"powderblue",opacity:".3"},on:{click:t.addField}},[i("li",{staticStyle:{height:"250px",display:"flex","align-items":"center","justify-content":"center","font-weight":"bolder"}},[i("v-icon",{attrs:{type:"plus"}})],1)])],2)])])],t._v(" "),[i("v-modal",{attrs:{title:"禁用",visible:t.forbidModalVisible,"confirm-loading":t.forbidModalLoading},on:{ok:function(e){t.forbid()},cancel:function(e){t.cancel("禁用"),t.forbidModalVisible=!1}}},[i("div",{staticStyle:{"text-align":"center",height:"120px","line-height":"120px"}},[t._v("\n        确认禁用该格式吗？\n      ")])])],t._v(" "),[i("v-modal",{attrs:{title:"启用",visible:t.startModalVisible,"confirm-loading":t.startModalLoading},on:{ok:function(e){t.startPattern()},cancel:function(e){t.cancel("启用"),t.startModalVisible=!1}}},[i("div",{staticStyle:{"text-align":"center",height:"120px","line-height":"120px"}},[t._v("\n        确认启用该格式吗？\n      ")])])],t._v(" "),[i("v-modal",{attrs:{title:"删除",visible:t.delModalVisible,"confirm-loading":t.delModalLoading},on:{ok:function(e){t.deletePattern()},cancel:function(e){t.cancel("删除"),t.delModalVisible=!1}}},[i("div",{staticStyle:{"text-align":"center",height:"120px","line-height":"120px"}},[t._v("\n        确认删除该格式吗？\n      ")])])]],2)},staticRenderFns:[]};var d=i("VU/8")(l,r,!1,function(t){i("Kv5s"),i("bP6Y")},"data-v-ec4b034c",null).exports,c={name:"appl-speechRule",data:function(){return{loadData:function(t){var e=this.$parent.$parent,i=new URLSearchParams;return i.append("type_id",e.ruleType),i.append("page",t.pageNo),this.axios.post(this.serve.ruleList,i).then(function(i){var a=i.data.data,n=!0,s=!1,o=void 0;try{for(var l,r=a.result[Symbol.iterator]();!(n=(l=r.next()).done);n=!0){var d=l.value;d.myStatus=["禁用","正常"][d.status]}}catch(t){s=!0,o=t}finally{try{!n&&r.return&&r.return()}finally{if(s)throw o}}return e.total=a.totalCount,a.pageSize=e.pageSize,a.pageNo=a.currentPage,setTimeout(function(){e.total>0&&(document.getElementsByClassName("ant-pagination-simple-pager")[0].children[0].value=t.pageNo)},300),a})},columns:[{title:"规则名称",field:"name",width:"20%"},{title:"规则ID",field:"id",width:"10%"},{title:"规则内容",field:"content",width:"30%"},{title:"状态",field:"myStatus",width:"10%"},{title:"操作",field:"operation",width:"30%"}],screenHeight:window.innerHeight,vContentHeigth:{height:window.innerHeight-87+"px"},addModalVisible:!1,addModalLoading:!1,ruleTypeModalVisible:!1,ruleTypeModalLoading:!1,delModalVisible:!1,delModalLoading:!1,delObj:{},forbidModalVisible:!1,forbidModalLoading:!1,forbidObj:{},startModalVisible:!1,startModalLoading:!1,startObj:{},pageNo:1,total:0,tooltip1:"",tooltip2:"",modalTitle:"添加规则",ruleTypeSelect1:[{value:0,label:"全部"},{value:-1,label:"未分类"}],ruleTypeSelect2:[{value:"noGroup",label:"未分类"}],ruleTypeList:[],modalItem:{type_id:"未分类",name:"",content:""},ruleType:0,delIds:[]}},created:function(){this.tooltip1="<p style='font-size: 16px;'>规则类别说明</p><p>如果只有一套规则、不需要分类，可以直接创建规则，不必先创建规则分类</p>",this.tooltip2="<p  style='font-size: 16px;'>规则内容说明</p><p>OR:表示“或者” AND： 表示“并且” NOT：表示“非”</p><p>在规则内容里，“OR”、“AND”、“NOT”必须为大写</p><p></p><p  style='font-size: 16px;margin-top: 12px;'>举例1</p><p>规则名称：课前沟通了解学生信息</p><p>规则内容：(宝宝OR宝贝)AND喜欢</p><p>内容“宝宝喜欢什么” 和 “宝贝喜欢什么”，都会命中规则 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p>内容“宝贝有爱好吗”时，不会命中规则</p><p></p><p  style='font-size: 16px;margin-top: 12px;'>举例2</p><p>规则名称：课后交流互动</p><p>规则内容：课程AND(NOT优惠)</p><p>内容“对课程满意吗”，命中规则</p><p>内容“课程有优惠”，不会命中规则</p>",this.getRuleTypeList()},methods:{changePageNo:function(t){this.pageNo=t,this.$refs.xtable.goto(t)},change:function(){this.pageNo=1,this.$refs.xtable.reload()},getRuleTypeList:function(){var t=this;this.axios.post(this.serve.ruleTypeList).then(function(e){var i=!0,a=!1,n=void 0;try{for(var s,o=e.data.data[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;l.value=l.id,l.label=l.name,l.btnShow=!1}}catch(t){a=!0,n=t}finally{try{!i&&o.return&&o.return()}finally{if(a)throw n}}t.ruleTypeList=e.data.data,t.ruleTypeSelect1=[{value:0,label:"全部"},{value:-1,label:"未分类"}],t.ruleTypeSelect2=[{value:-1,label:"未分类"}],t.ruleTypeSelect1=t.ruleTypeSelect1.concat(t.ruleTypeList),t.ruleTypeSelect2=t.ruleTypeSelect2.concat(t.ruleTypeList)}).catch(function(t){return t})},delRuleType:function(t,e){if(t.haveDate)this.$notification.warning({message:"提示",description:"该规则下面有数据，无法删除"});else{t.id&&this.delIds.push(t.id);for(var i=0;i<this.ruleTypeList.length;i++)if(i===e){this.ruleTypeList.splice(e,1);break}}},addNullRuleType:function(){this.ruleTypeList.push({name:"",btnShow:!1})},ruleCategoryManage:function(){this.ruleTypeModalVisible=!0,this.ruleTypeModalLoading=!1,this.delIds=[],this.getRuleTypeList()},addRuleType:function(){for(var t=this,e=!0,i=[],a=0;a<this.ruleTypeList.length;a++)this.ruleTypeList[a].name||(e=!1),i.includes(this.ruleTypeList[a].name)||i.push(this.ruleTypeList[a].name);if(e)if(i.length===this.ruleTypeList.length){var n=[],s=!0,o=!1,l=void 0;try{for(var r,d=this.ruleTypeList[Symbol.iterator]();!(s=(r=d.next()).done);s=!0){var c=r.value,h=c.id?c.id:"";n.push({id:h,name:c.name})}}catch(t){o=!0,l=t}finally{try{!s&&d.return&&d.return()}finally{if(o)throw l}}this.ruleTypeModalLoading=!0;var p={ruleType:n,delIds:this.delIds};this.axios.post(this.serve.ruleTypeSave,p).then(function(e){t.getRuleTypeList(),t.ruleTypeModalVisible=!1,t.ruleTypeModalLoading=!1}).catch(function(e){return t.ruleTypeModalVisible=!1,t.ruleTypeModalLoading=!1,e})}else this.$notification.warning({message:"提示",description:"规则类型不能重复，请重新填写"});else this.$notification.warning({message:"提示",description:"请确保信息填写完整"})},openAddModal:function(t){this.addModalVisible=!0,this.addModalLoading=!1,t.id?(this.modalTitle="编辑规则",this.modalItem={id:t.id,type_id:t.type_id,name:t.name,content:t.content}):(this.modalTitle="添加规则",this.modalItem={type_id:-1,name:"",content:""})},openDelModal:function(t){this.delModalVisible=!0,this.delModalLoading=!1,this.delObj=t},openForbidModal:function(t){this.forbidModalVisible=!0,this.forbidModalLoading=!1,this.forbidObj=t},openStartModal:function(t){this.startModalVisible=!0,this.startModalLoading=!1,this.startObj=t},addRule:function(){var t=this;this.modalItem.name&&this.modalItem.content?(this.addModalLoading=!0,"添加规则"===this.modalTitle?this.axios.post(this.serve.ruleAdd,this.modalItem).then(function(e){t.pageNo=1,t.$refs.xtable.reload(),t.addModalVisible=!1,t.addModalLoading=!1}).catch(function(e){return"名称重复，不能添加"!==e.message&&(t.addModalVisible=!1),t.addModalLoading=!1,e}):this.axios.post(this.serve.ruleEdit,this.modalItem).then(function(e){t.pageNo=1,t.$refs.xtable.reload(),t.addModalVisible=!1,t.addModalLoading=!1}).catch(function(e){return t.addModalVisible=!1,t.addModalLoading=!1,e})):this.$notification.warning({message:"提示",description:"请确保信息填写完整"})},delRule:function(){var t=this,e=new URLSearchParams;e.append("id",this.delObj.id),this.axios.post(this.serve.ruleDel,e).then(function(e){t.pageNo=1,t.$refs.xtable.reload(),t.delModalVisible=!1,t.delModalLoading=!1,t.$notification.success({message:"提示",description:"删除成功"})}).catch(function(e){return t.delModalVisible=!1,t.delModalLoading=!1,e})},forbidRule:function(){var t=this,e=new URLSearchParams;e.append("id",this.forbidObj.id),e.append("status",0),this.axios.post(this.serve.ruleUpdute,e).then(function(e){t.pageNo=1,t.$refs.xtable.reload(),t.forbidModalVisible=!1,t.forbidModalLoading=!1,t.$notification.success({message:"提示",description:"禁用规则成功"})}).catch(function(e){return t.forbidModalVisible=!1,t.forbidModalLoading=!1,e})},startRule:function(){var t=this,e=new URLSearchParams;e.append("id",this.startObj.id),e.append("status",1),this.axios.post(this.serve.ruleUpdute,e).then(function(e){t.pageNo=1,t.$refs.xtable.reload(),t.startModalVisible=!1,t.startModalLoading=!1,t.$notification.success({message:"提示",description:"启用规则成功"})}).catch(function(e){return t.startModalVisible=!1,t.startModalLoading=!1,e})},cancel:function(t){}},mounted:function(){var t=this;window.onresize=function(){return t.screenHeight=window.innerHeight,void(t.vContentHeigth={height:window.innerHeight-87+"px"})}},watch:{screenHeight:function(t){this.screenHeight=t,this.vContentHeigth={height:t-87+"px"}}}},h={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"v-container bg-color",style:t.vContentHeigth},[i("div",{staticClass:"header"},[i("div",{staticClass:"clearfix"},[i("v-button",{staticStyle:{float:"left",left:"10px"},attrs:{type:"primary"},on:{click:function(e){t.openAddModal({})}}},[t._v("添加")]),t._v(" "),i("v-select",{staticStyle:{width:"160px",float:"left",left:"20px"},attrs:{placeholder:"请选择类别",allowClear:!1,data:t.ruleTypeSelect1},on:{change:t.change},model:{value:t.ruleType,callback:function(e){t.ruleType=e},expression:"ruleType"}}),t._v(" "),i("v-button",{staticStyle:{float:"right",height:"33px",padding:"0 27px"},on:{click:t.ruleCategoryManage}},[t._v("规则类别管理")])],1)]),t._v(" "),i("div",{staticClass:"v-content",staticStyle:{"padding-right":"0","min-height":"150px"}},[i("el-scrollbar",[i("div",{staticStyle:{height:"auto","padding-right":"10px"}},[i("v-data-table",{ref:"xtable",attrs:{data:t.loadData,columns:t.columns,"page-num":t.pageNo,pagination:!1,emptyText:"暂无数据",bordered:""},scopedSlots:t._u([{key:"th",fn:function(e){return[i("div",{staticStyle:{"text-align":"center",color:"#000"}},["operation"==e.column.field?i("span",[t._v("操作")]):i("span",{domProps:{innerHTML:t._s(e.title)}})])]}},{key:"td",fn:function(e){return["operation"==e.column.field?i("div",{staticStyle:{"text-align":"center",color:"#666"}},[i("span",{staticClass:"operation",on:{click:function(i){t.openAddModal(e.item)}}},[t._v("编辑")]),t._v(" "),"正常"===e.item.myStatus?i("span",{staticClass:"operation",on:{click:function(i){t.openForbidModal(e.item)}}},[t._v("禁用")]):t._e(),t._v(" "),"禁用"===e.item.myStatus?i("span",{staticClass:"operation",on:{click:function(i){t.openStartModal(e.item)}}},[t._v("启用")]):t._e(),t._v(" "),i("span",{staticClass:"operation",on:{click:function(i){t.openDelModal(e.item)}}},[t._v("删除")])]):i("div",{staticStyle:{"text-align":"center",color:"#666"},domProps:{innerHTML:t._s(e.content)}})]}}])}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],staticClass:"clearfix",staticStyle:{"margin-top":"30px","padding-right":"10px"}},[i("div",{staticStyle:{float:"right",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(e){t.pageNo=Math.ceil(t.total/t.pageSize)}}},[t._v("尾页")]),t._v(" "),i("div",{staticStyle:{float:"right"}},[i("v-pagination",{attrs:{value:t.pageNo,total:t.total,pageSize:t.pageSize,"show-quick-jumper":"",simple:""},on:{change:t.changePageNo}})],1),t._v(" "),i("div",{staticStyle:{float:"right",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(e){t.pageNo=1}}},[t._v("首页")])])],1)])],1),t._v(" "),[i("v-modal",{attrs:{title:t.modalTitle,visible:t.addModalVisible,"confirm-loading":t.addModalLoading},on:{ok:function(e){t.addRule()},cancel:function(e){t.cancel("规则"),t.addModalVisible=!1}}},[i("div",{staticStyle:{"padding-left":"90px"}},[i("div",{staticClass:"modal-container"},[i("span",{staticClass:"modal-span"},[t._v("规则类别")]),t._v(" "),i("v-select",{staticClass:"modal-input",attrs:{allowClear:!1,data:t.ruleTypeSelect2},model:{value:t.modalItem.type_id,callback:function(e){t.$set(t.modalItem,"type_id",e)},expression:"modalItem.type_id"}}),t._v(" "),i("v-icon",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:t.tooltip1,expression:"tooltip1",modifiers:{right:!0}}],staticStyle:{opacity:"0.2","font-size":"16px","margin-left":"5px"},attrs:{type:"question-circle"}})],1),t._v(" "),i("div",{staticClass:"modal-container"},[i("span",{staticClass:"modal-span"},[t._v("规则名称")]),t._v(" "),i("v-input",{staticClass:"modal-input",attrs:{placeholder:"规则名称",maxlength:"50"},model:{value:t.modalItem.name,callback:function(e){t.$set(t.modalItem,"name",e)},expression:"modalItem.name"}})],1),t._v(" "),i("div",{staticClass:"modal-container",staticStyle:{position:"relative"}},[i("span",{staticClass:"modal-span",staticStyle:{position:"absolute",top:"0",left:"0"}},[t._v("规则内容")]),t._v(" "),i("v-input",{staticClass:"modal-input",staticStyle:{left:"75px","line-height":"28px",width:"229px",height:"120px",resize:"none"},attrs:{type:"textarea",placeholder:"规则内容",maxlength:"200"},model:{value:t.modalItem.content,callback:function(e){t.$set(t.modalItem,"content",e)},expression:"modalItem.content"}}),t._v(" "),i("v-icon",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:t.tooltip2,expression:"tooltip2",modifiers:{right:!0}}],staticStyle:{opacity:"0.2","font-size":"16px","margin-left":"84px","margin-top":"8px",position:"absolute"},attrs:{type:"question-circle"}})],1)])])],t._v(" "),[i("v-modal",{attrs:{title:"规则类别管理",visible:t.ruleTypeModalVisible,width:450,"confirm-loading":t.ruleTypeModalLoading},on:{ok:function(e){t.addRuleType()},cancel:function(e){t.cancel("规则类别管理"),t.ruleTypeModalVisible=!1}}},[i("div",{staticStyle:{"padding-left":"30px"}},[t._l(t.ruleTypeList,function(e,a){return i("div",{key:e.id,staticClass:"modal-container",on:{mouseover:function(t){e.btnShow=!0},mouseout:function(t){e.btnShow=!1}}},[i("v-input",{staticClass:"modal-input",staticStyle:{width:"320px"},attrs:{placeholder:"规则类别名称",maxlength:"20"},model:{value:e.name,callback:function(i){t.$set(e,"name",i)},expression:"item.name"}}),t._v(" "),e.btnShow?i("v-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger",shape:"circle-outline",icon:"close"},on:{click:function(i){t.delRuleType(e,a)}}}):t._e()],1)}),t._v(" "),i("div",{staticClass:"modal-container"},[i("v-button",{attrs:{type:"dashed",icon:"plus"},on:{click:t.addNullRuleType}},[t._v("添加")])],1)],2)])],t._v(" "),[i("v-modal",{attrs:{title:"删除规则",visible:t.delModalVisible,"confirm-loading":t.delModalLoading},on:{ok:function(e){t.delRule()},cancel:function(e){t.cancel("删除规则"),t.delModalVisible=!1}}},[i("div",{staticStyle:{"text-align":"center",height:"120px","line-height":"120px"}},[t._v("\n        确认删除该规则吗？\n      ")])])],t._v(" "),[i("v-modal",{attrs:{title:"禁用",visible:t.forbidModalVisible,"confirm-loading":t.forbidModalLoading},on:{ok:function(e){t.forbidRule()},cancel:function(e){t.cancel("禁用"),t.forbidModalVisible=!1}}},[i("div",{staticStyle:{"text-align":"center",height:"120px","line-height":"120px"}},[t._v("\n        确认禁用该规则吗？\n      ")])])],t._v(" "),[i("v-modal",{attrs:{title:"启用",visible:t.startModalVisible,"confirm-loading":t.startModalLoading},on:{ok:function(e){t.startRule()},cancel:function(e){t.cancel("启用"),t.startModalVisible=!1}}},[i("div",{staticStyle:{"text-align":"center",height:"120px","line-height":"120px"}},[t._v("\n        确认启用该规则吗？\n      ")])])]],2)},staticRenderFns:[]};var p=i("VU/8")(c,h,!1,function(t){i("aOb/"),i("TDvf")},"data-v-436a4484",null).exports,u={name:"appl-linkSet",data:function(){return{messageSelections:this.myData.messageSelections,receiveMessage:3,sendMessage:3,minDuration:180,dataInit:[3,3]}},created:function(){this.showDetail()},methods:{showDetail:function(){var t=this,e=new URLSearchParams;this.axios.post(this.serve.showLinkSet,e).then(function(e){t.receiveMessage=e.data.data.recive_count,t.sendMessage=e.data.data.send_count,t.dataInit=[],t.dataInit.push(e.data.data.recive_count),t.dataInit.push(e.data.data.send_count)}).catch(function(t){return t})},confirm:function(){var t=this,e=new URLSearchParams;e.append("recive_count",this.receiveMessage),e.append("send_count",this.sendMessage),e.append("phone_time",this.minDuration),this.axios.post(this.serve.applLinkSet,e).then(function(e){t.$notification.success({message:"提示",description:"有效沟通设置成功"}),t.dataInit=[],t.dataInit.push(t.receiveMessage),t.dataInit.push(t.sendMessage)}).catch(function(t){return t})},cancel:function(t){this.receiveMessage=this.dataInit[0],this.sendMessage=this.dataInit[1],this.$notification.info({message:"提示",description:"已重置"})}},computed:{isOk:function(){return this.dataInit[0]===this.receiveMessage&&this.dataInit[1]===this.sendMessage}}},v={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"v-container"},[i("div",{staticClass:"link-container clearfix"},[t._m(0),t._v(" "),t._m(1),t._v(" "),i("div",{staticClass:"link-container-right"},[i("p",[i("v-select",{staticStyle:{width:"160px",left:"20px"},attrs:{placeholder:"请选择",allowClear:!1,data:t.messageSelections},model:{value:t.receiveMessage,callback:function(e){t.receiveMessage=e},expression:"receiveMessage"}})],1),t._v(" "),i("p",[i("v-select",{staticStyle:{width:"160px",left:"20px"},attrs:{placeholder:"请选择",allowClear:!1,data:t.messageSelections},model:{value:t.sendMessage,callback:function(e){t.sendMessage=e},expression:"sendMessage"}})],1)])]),t._v(" "),i("div",{staticClass:"clearfix",staticStyle:{width:"30%",margin:"0 auto","margin-top":"30px","min-width":"460px","text-align":"right"}},[i("div",{attrs:{slot:"extra"},slot:"extra"},[i("v-button",{staticStyle:{width:"130px",height:"35px"},attrs:{type:"primary"},on:{click:t.confirm}},[t._v("保存")])],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"link-container-left"},[e("p",[this._v("微信有效沟通")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"link-container-middle"},[e("p",[this._v("收到消息")]),this._v(" "),e("p",[this._v("发送消息")])])}]};var g=i("VU/8")(u,v,!1,function(t){i("9EUw")},"data-v-f2373b06",null).exports,m={name:"appl-wxFriendBackups",components:{yhqDept:i("X9GB").a},data:function(){return{loadData:function(t){var e=this.$parent.$parent,i=new URLSearchParams;return i.append("department_id",e.dept),i.append("sales_id",e.sale),i.append("filter",e.searchValue),i.append("page",e.pageNo),this.axios.post(this.serve.wxFriendList,i).then(function(t){var i=t.data.data;e.total=i.totalCount,i.pageSize=e.pageSize,i.pageNo=i.currentPage;for(var a=0;a<t.data.data.result.length;a++)t.data.data.result[a].alias?t.data.data.result[a].wxNo=t.data.data.result[a].alias:t.data.data.result[a].wxNo=t.data.data.result[a].wxId;return setTimeout(function(){e.total>0&&(e.$el.querySelector(".wx-friend-backups .ant-pagination-simple-pager input").value=e.pageNo)},300),i})},columns:[{title:"头像",field:"headImg",width:"10%"},{title:"销售姓名",field:"userName",width:"15%"},{title:"微信号",field:"wxNo",width:"20%"},{title:"微信昵称",field:"nickName",width:"20%"},{title:"部门",field:"departmentName",width:"20%"},{title:"操作",field:"operation",width:"15%"}],screenHeight:window.innerHeight,vContentHeigth:{height:window.innerHeight-87+"px"},pageNo:1,total:0,searchValue:"",dept:"",sale:""}},created:function(){},methods:{deptSelectEvent:function(t,e){t.isDept?(this.dept=t.id,this.sale=""):(this.dept=t.department_id,this.sale=t.sales_id),this.clearSearchValue()},keyupSearch:function(t){13===t.keyCode&&(this.dept="",this.sale="",this.pageNo=1,this.$refs.xtable.reload(),this.$refs.yhqDept.reverseSet())},clearSearchValue:function(){this.searchValue="",this.pageNo=1,this.$refs.xtable.reload()},changePageNo:function(t){this.pageNo=t,this.$refs.xtable.goto(t)},change:function(){this.pageNo=1,this.$refs.xtable.reload()},exportAll:function(t){var e=void 0;e=t?"/sysuser/exportWxFriend?wx_id="+t.wxId+"&alias="+t.alias:"/sysuser/exportWxFriend?wx_id=&alias=",window.open(e,"_blank")},cancel:function(t){}},mounted:function(){var t=this;window.onresize=function(){return t.screenHeight=window.innerHeight,void(t.vContentHeigth={height:window.innerHeight-87+"px"})}},watch:{screenHeight:function(t){this.screenHeight=t,this.vContentHeigth={height:t-87+"px"}}}},f={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"v-container bg-color wx-friend-backups",style:t.vContentHeigth},[i("div",{staticClass:"header"},[i("div",{staticClass:"clearfix"},[i("v-input",{staticClass:"input-box",staticStyle:{width:"240px","margin-left":"10px"},attrs:{placeholder:"搜索微信号/销售姓名"},nativeOn:{keyup:function(e){t.keyupSearch(e)}},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}}),t._v(" "),t.searchValue?t._e():i("v-icon",{staticStyle:{position:"relative",left:"-24px"},attrs:{type:"search"}}),t._v(" "),t.searchValue?i("span",{staticStyle:{position:"relative",left:"-24px",cursor:"pointer"},on:{click:function(e){t.clearSearchValue()}}},[i("v-icon",{attrs:{type:"close"}})],1):t._e(),t._v(" "),i("v-button",{staticStyle:{float:"right",height:"33px",padding:"0 27px"},on:{click:function(e){t.exportAll()}}},[t._v("全部导出")]),t._v(" "),i("yhq-dept",{ref:"yhqDept",staticStyle:{float:"right"},on:{deptSelectEvent:t.deptSelectEvent}})],1)]),t._v(" "),i("div",{staticClass:"v-content",staticStyle:{"padding-right":"0","min-height":"150px"}},[i("el-scrollbar",[i("div",{staticStyle:{height:"auto","padding-right":"10px"}},[i("v-data-table",{ref:"xtable",attrs:{data:t.loadData,columns:t.columns,"page-num":t.pageNo,pagination:!1,emptyText:"暂无数据",bordered:""},scopedSlots:t._u([{key:"th",fn:function(e){return[i("div",{staticStyle:{"text-align":"center",color:"#000"}},["operation"==e.column.field?i("span",[t._v("操作")]):i("span",{domProps:{innerHTML:t._s(e.title)}})])]}},{key:"td",fn:function(e){return["operation"==e.column.field?i("div",{staticStyle:{"text-align":"center",color:"#666"}},[i("span",{staticClass:"operation",on:{click:function(i){t.exportAll(e.item)}}},[t._v("导出好友")])]):"headImg"==e.column.field?i("div",{staticStyle:{"text-align":"center",color:"#666",height:"18px"}},[i("img",{staticStyle:{width:"45px",height:"45px",position:"relative",top:"-13px"},attrs:{src:e.content}})]):i("div",{staticStyle:{"text-align":"center",color:"#666"},domProps:{innerHTML:t._s(e.content)}})]}}])}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],staticClass:"clearfix",staticStyle:{"margin-top":"30px","padding-right":"10px"}},[i("div",{staticStyle:{float:"right",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(e){t.pageNo=Math.ceil(t.total/t.pageSize)}}},[t._v("尾页")]),t._v(" "),i("div",{staticStyle:{float:"right"}},[i("v-pagination",{attrs:{value:t.pageNo,total:t.total,pageSize:t.pageSize,"show-quick-jumper":"",simple:""},on:{change:t.changePageNo}})],1),t._v(" "),i("div",{staticStyle:{float:"right",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(e){t.pageNo=1}}},[t._v("首页")])])],1)])],1)])},staticRenderFns:[]};var y=i("VU/8")(m,f,!1,function(t){i("0Iid")},"data-v-42ce5391",null).exports,_={name:"application",components:{ApplUser:a.default,ApplSafety:o,ApplPattern:d,ApplSpeechRule:p,ApplLinkSet:g,ApplWxFriendBackups:y}},x={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"v-container yhq-style bg-color"},[[i("div",{attrs:{id:"components-tabs-demo-card-top"}},[i("div",{staticClass:"card-container"},[i("v-tabs",{staticStyle:{height:"100%"},attrs:{"active-tab-key":"1",type:"card"}},[t.$store.state.power.includes("6")?i("v-tab-pane",{attrs:{"tab-key":"1",tab:"白名单设置"}},[i("appl-safety")],1):t._e(),t._v(" "),t.$store.state.power.includes("12")?i("v-tab-pane",{attrs:{"tab-key":"2",tab:"规则设置"}},[i("appl-speechRule")],1):t._e(),t._v(" "),t.$store.state.power.includes("14")?i("v-tab-pane",{attrs:{"tab-key":"3",tab:"有效沟通"}},[i("appl-link-set")],1):t._e(),t._v(" "),t.$store.state.power.includes("13")?i("v-tab-pane",{attrs:{"tab-key":"4",tab:"微信好友备份"}},[i("appl-wxFriendBackups")],1):t._e()],1)],1)])]],2)},staticRenderFns:[]};var b=i("VU/8")(_,x,!1,function(t){i("Z7nI")},"data-v-5ffe17c4",null);e.default=b.exports},"aOb/":function(t,e){},aOvT:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("X9GB"),n={name:"crm-customerManage",components:{yhqDept:a.a},data:function(){return{screenHeight:window.innerHeight,vContentHeigth:{height:window.innerHeight-141+"px"},getCreateTimeAll:!1,getLastFollowTimeAll:!1,createTime:["",""],lastFollowTime:["",""],departmentId:"",userId:"",orderSeq:"创建时间",orderType:"DESC",pageNo:1,pageSize:30,total:0,dataList:[],dataListLoading:!1,dataHeadList:[],dataHeadListLoading:!1,dataConditionList:[],dataConditionLoading:!1,imprtModalVisible1:!1,imprtModalLoading1:!1,imprtModalVisible:!1,imprtModalLoading:!1,fileName:"",formData:{},importResData:{},downLoadTemplateLoading:!1,tableStyle:{},options:{liveDrag:!1,defaultMinWidth:30,headerOnly:!0,disabledColumns:[],onResizing:null,onResized:null},titleHeight:52}},created:function(){var t=this,e=this.myTool.timeFormat(new Date);this.createTime=[e,e],this.lastFollowTime=[e,e],this.getDataHeadList(),this.getDataList(),setTimeout(function(){var e=t.$el.querySelector(".custormer-manage-title");t.titleHeight=e.clientHeight,t.vContentHeigth={height:window.innerHeight-141+52-e.clientHeight+"px"}},300)},methods:{getDataHeadList:function(){var t=this;this.dataHeadListLoading=!0,this.axios.post(this.serve.customerFieldList,{}).then(function(e){t.dataHeadList=e.data.data,t.dataHeadListLoading=!1;var i=120*(t.dataHeadList.length+2),a=window.innerWidth-230,n=t.$el.querySelector(".custormer-manage-title");t.titleHeight=n.clientHeight,t.tableStyle=i>a?{width:i+10*(t.dataHeadList.length+2)+"px",maxHeight:window.innerHeight-89-t.titleHeight-40+"px"}:{maxHeight:window.innerHeight-89-t.titleHeight-30+"px"},setTimeout(function(){var e=t.$el.querySelector("#resizeTable");t.createColResizable(e,t.options)},500)}).catch(function(t){return t})},getDataList:function(){var t=this,e={condition:{getCreateTimeAll:this.getCreateTimeAll,getLastFollowTimeAll:this.getLastFollowTimeAll,createTime:{start:this.createTime[0]+" 00:00:00",end:this.createTime[1]+" 23:59:59"},lastFollowTime:{start:this.lastFollowTime[0]+" 00:00:00",end:this.lastFollowTime[1]+" 23:59:59"}},orderSeq:"创建时间"===this.orderSeq?"createTime":"lastFollowTime",orderType:this.orderType,departmentId:this.departmentId,userId:this.userId,pageNo:this.pageNo,pageSize:this.pageSize};this.dataListLoading=!0,this.axios.post(this.serve.customerList,e).then(function(e){t.dataList=e.data.data.result,t.total=e.data.data.totalCount,t.dataListLoading=!1,setTimeout(function(){t.dataList.length>0&&(t.$el.querySelector(".content-pagination4 .ant-pagination-simple-pager input").value=t.pageNo)},100)}).catch(function(t){return t})},sortDate:function(t){"创建时间"!==t.fieldName&&"上次跟进"!==t.fieldName||(t.fieldName===this.orderSeq?this.orderType="DESC"===this.orderType?"ASC":"DESC":(this.orderSeq="创建时间"===this.orderSeq?"上次跟进":"创建时间",this.orderType="DESC"),this.search())},deptSelectEvent:function(t,e){t.isDept?(this.departmentId=t.id,this.userId=""):(this.departmentId=t.department_id,this.userId=t.sales_id),this.search()},changePageNo:function(t){this.pageNo=t,this.getDataList()},search:function(){this.changePageNo(1)},timeConfirm:function(){this.search()},openImprtModal:function(){this.imprtModalVisible=!0,this.imprtModalLoading=!1,this.fileName=""},openExprtModal:function(){var t=this.createTime[0]+" 00:00:00",e=this.createTime[1]+" 23:59:59",i=this.lastFollowTime[0]+" 00:00:00",a=this.lastFollowTime[1]+" 23:59:59",n={condition:{getCreateTimeAll:this.getCreateTimeAll,getLastFollowTimeAll:this.getLastFollowTimeAll,createTime:{start:t,end:e},lastFollowTime:{start:i,end:a}},orderSeq:"创建时间"===this.orderSeq?"createTime":"lastFollowTime",orderType:this.orderType,departmentId:this.departmentId,userId:this.userId};this.axios.post(this.serve.customerListExport,n).then(function(t){window.open(t.data.data.url,"target")}).catch(function(t){return t})},downloadWrongData:function(){var t=this;this.imprtModalLoading1=!0;var e=this.importResData.errorFileURL;window.open(e,"target"),setTimeout(function(){t.importResData={},t.imprtModalLoading1=!1,t.imprtModalVisible1=!1},300)},selectFile:function(){document.getElementById("selectFile").click()},fileChange:function(t){var e=t.target.files[0];this.formData=new FormData,this.formData.append("file",e),e.size>4194304?this.$notification.warning({message:"提示",description:"文件不能不超过4M，请重新选择"}):this.fileName=e.name},importData:function(){var t=this;this.imprtModalLoading=!0,this.axios.post(this.serve.customerTemplateImport,this.formData).then(function(e){t.search(),t.importResData=e.data.data,t.formData=new FormData,t.imprtModalLoading=!1,t.imprtModalVisible=!1,t.imprtModalVisible1=!0}).catch(function(t){return t})},downLoadTemplate:function(){this.axios.post(this.serve.customerTemplateExport,{}).then(function(t){window.open(t.data.data.url,"target")}).catch(function(t){return t})}},mounted:function(){var t=this,e=this;window.onresize=function(){return function(){e.screenHeight=window.innerHeight;var i=e.$el.querySelector(".custormer-manage-title");t.titleHeight=i.clientHeight,e.vContentHeigth={minHeight:window.innerHeight-89-i.clientHeight+"px"}}()}},watch:{screenHeight:function(t){this.screenHeight=t;var e=this.$el.querySelector(".custormer-manage-title");this.titleHeight=e.clientHeight,this.vContentHeigth={height:window.innerHeight-89-e.clientHeight+"px"}}}},s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"crm"},[i("div",{staticClass:"clearfix crm-title custormer-manage-title",staticStyle:{"padding-right":"10px"}},[i("div",[i("div",{staticStyle:{float:"left","margin-right":"25px","margin-bottom":"8px"}},[i("div",[i("span",[t._v("创建时间: ")]),t._v(" "),i("span",[i("v-date-picker",{ref:"content1",attrs:{range:""},on:{confirm:function(e){t.timeConfirm()}},model:{value:t.createTime,callback:function(e){t.createTime=e},expression:"createTime"}}),t._v(" "),i("v-checkbox",{staticStyle:{"margin-left":"5px"},on:{click:function(e){t.getCreateTimeAll=!t.getCreateTimeAll,t.timeConfirm()}},model:{value:t.getCreateTimeAll,callback:function(e){t.getCreateTimeAll=e},expression:"getCreateTimeAll"}},[t._v("全部")])],1)])]),t._v(" "),i("div",{staticStyle:{float:"left","margin-right":"15px","margin-bottom":"8px"}},[i("div",[i("span",[t._v("上次跟进: ")]),t._v(" "),i("span",[i("v-date-picker",{ref:"content2",attrs:{range:""},on:{confirm:function(e){t.timeConfirm()}},model:{value:t.lastFollowTime,callback:function(e){t.lastFollowTime=e},expression:"lastFollowTime"}}),t._v(" "),i("v-checkbox",{staticStyle:{"margin-left":"5px"},on:{click:function(e){t.getLastFollowTimeAll=!t.getLastFollowTimeAll,t.timeConfirm()}},model:{value:t.getLastFollowTimeAll,callback:function(e){t.getLastFollowTimeAll=e},expression:"getLastFollowTimeAll"}},[t._v("全部")])],1)])])]),t._v(" "),i("div",{staticStyle:{float:"right"}},[t.$store.state.power.includes("f")?i("v-button",{staticStyle:{float:"right",padding:"0 27px",height:"33px"},on:{click:function(e){t.openExprtModal()}}},[t._v("导出")]):t._e(),t._v(" "),i("v-button",{staticStyle:{float:"right",padding:"0 27px",height:"33px","margin-right":"10px"},on:{click:function(e){t.openImprtModal()}}},[t._v("导入")]),t._v(" "),i("yhq-dept",{on:{deptSelectEvent:t.deptSelectEvent}})],1)]),t._v(" "),i("div",{staticClass:"v-content",staticStyle:{padding:"0"},style:t.vContentHeigth},[i("el-scrollbar",[i("div",{staticClass:"ant-table ant-table-large ant-table-bordered",staticStyle:{"padding-right":"10px",overflow:"auto"},style:t.tableStyle},[i("table",{staticClass:"ant-table-content",staticStyle:{overflow:"visible"},attrs:{id:"resizeTable"}},[i("thead",{staticClass:"ant-table-thead"},[i("tr",[i("th",{staticStyle:{padding:"16px 8px","text-align":"center",width:"120px"},attrs:{"data-min-width":"30"}},[t._v("\n            员工姓名\n          ")]),t._v(" "),i("th",{staticStyle:{padding:"16px 8px","text-align":"center",width:"120px"},attrs:{"data-min-width":"30"}},[t._v("\n            部门名称\n          ")]),t._v(" "),t._l(t.dataHeadList,function(e,a){return i("th",{key:a,staticStyle:{padding:"16px 8px","text-align":"center",width:"120px"},attrs:{"data-min-width":"30"},on:{click:function(i){t.sortDate(e)}}},[t._v("\n            "+t._s(e.fieldName)+"\n            "),e.fieldName===t.orderSeq&&"DESC"===t.orderType?i("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[i("i",{staticClass:"fa fa-long-arrow-down",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),e.fieldName===t.orderSeq&&"ASC"===t.orderType?i("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[i("i",{staticClass:"fa fa-long-arrow-up",attrs:{"aria-hidden":"true"}})]):t._e()])})],2)]),t._v(" "),i("tbody",{staticClass:"ant-table-tbody"},[t._l(t.dataList,function(e){return t.dataList.length>0&&!t.dataListLoading?i("tr",{key:e.id,staticClass:"ant-table-row",staticStyle:{"text-align":"center"}},[i("td",[t._v(t._s(e.salesName))]),t._v(" "),i("td",[t._v(t._s(e.department))]),t._v(" "),t._l(t.dataHeadList,function(a,n){return i("td",{key:a.id,staticStyle:{"white-space":"normal"}},[t._v(t._s(e[t.dataHeadList[n].fieldId]))])})],2):t._e()}),t._v(" "),0!==t.dataList.length||t.dataListLoading?t._e():i("tr",{staticStyle:{"text-align":"center"}},[i("td",{attrs:{colspan:t.dataHeadList.length+2}},[t._v("暂无数据")])]),t._v(" "),t.dataListLoading?i("tr",{staticStyle:{"text-align":"center"}},[i("td",{attrs:{colspan:t.dataHeadList.length+2}},[i("v-spin",{attrs:{spinning:t.dataListLoading}})],1)]):t._e()],2)])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],staticClass:"clearfix content-pagination4",staticStyle:{"padding-right":"10px",position:"absolute",right:"0",bottom:"10px"}},[i("div",{staticStyle:{float:"right",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(e){t.pageNo=Math.ceil(t.total/t.pageSize),t.changePageNo}}},[t._v("尾页")]),t._v(" "),i("div",{staticStyle:{float:"right"}},[i("v-pagination",{attrs:{value:t.pageNo,total:t.total,pageSize:t.pageSize,"show-quick-jumper":"",simple:""},on:{change:t.changePageNo}})],1),t._v(" "),i("div",{staticStyle:{float:"right",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(e){t.pageNo=1,t.changePageNo}}},[t._v("首页")])])])],1),t._v(" "),[i("v-modal",{attrs:{title:"导入订单",visible:t.imprtModalVisible,"confirm-loading":t.imprtModalLoading},on:{ok:function(e){t.importData()},cancel:function(e){t.imprtModalVisible=!1}}},[i("div",{staticStyle:{"padding-left":"40px"}},[i("div",{staticClass:"modal-container"},[i("div",{staticStyle:{"font-size":"14px"}},[i("v-icon",{staticStyle:{"font-size":"20px"},attrs:{type:"cloud-download-o"}}),t._v(" 下载模版")],1),t._v(" "),i("p",{staticStyle:{"line-height":"32px","padding-left":"28px"}},[t._v("为提高导入的成功率，请下载并使用系统提供的模版")]),t._v(" "),i("v-button",{staticStyle:{padding:"0 27px",height:"33px","margin-top":"10px","margin-left":"28px"},on:{click:function(e){t.downLoadTemplate()}}},[t._v("下载模版")])],1),t._v(" "),i("div",{staticClass:"modal-container"},[i("div",{staticStyle:{"font-size":"14px"}},[i("v-icon",{staticStyle:{"font-size":"20px"},attrs:{type:"cloud-upload-o"}}),t._v(" 上传文件")],1),t._v(" "),i("p",{staticStyle:{"line-height":"32px","padding-left":"28px"}},[t._v("仅支持xlsx、xls、csv.文件大小4M")]),t._v(" "),i("v-input",{staticClass:"modal-input",staticStyle:{"margin-left":"28px","line-height":"31px",height:"31px",width:"184px"},attrs:{placeholder:""},model:{value:t.fileName,callback:function(e){t.fileName=e},expression:"fileName"}}),t._v(" "),i("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{name:"file",type:"file",id:"selectFile",accept:"application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel"},on:{change:function(e){t.fileChange(e)}}}),t._v(" "),i("v-button",{staticStyle:{padding:"0 27px",height:"33px","margin-top":"10px"},on:{click:function(e){t.selectFile()}}},[t._v("选择文件")])],1)])])],t._v(" "),[i("v-modal",{staticClass:"v-no-modal-footer",attrs:{title:"导入完成",visible:t.imprtModalVisible1},on:{cancel:function(e){t.imprtModalVisible1=!1}}},[i("div",{staticStyle:{"text-align":"center"}},[i("div",{staticClass:"modal-container"},[i("div",{staticStyle:{"font-size":"24px","line-height":"60px"}},[i("v-icon",{attrs:{type:"check-circle-o"}}),t._v(" 导入完成")],1),t._v(" "),i("p",{staticStyle:{"line-height":"60px"}},[t._v("共有"+t._s(t.importResData.totalSize)+"条数据，导入成功"+t._s(t.importResData.correctSize)+"条，失败"+t._s(t.importResData.errorSize)+"条")])]),t._v(" "),i("div",{staticClass:"modal-container"},[0===t.importResData.errorSize?i("v-button",{staticStyle:{padding:"0 27px",height:"33px"},attrs:{type:"primary"},on:{click:function(e){t.imprtModalVisible1=!1}}},[t._v("关闭")]):t._e(),t._v(" "),t.importResData.errorSize>0?i("v-button",{staticStyle:{padding:"0 27px",height:"33px"},attrs:{type:"primary"},on:{click:function(e){t.downloadWrongData()}}},[t._v("下载问题数据")]):t._e()],1)])])]],2)},staticRenderFns:[]};var o=i("VU/8")(n,s,!1,function(t){i("0mKC")},"data-v-b6230100",null).exports,l={name:"crm-customerField",data:function(){return{imgSrc:"../../../static/check-2.png",imgSrcNo:"../../../static/check-1.png",screenHeight:window.innerHeight,vContentHeigth:{height:window.innerHeight-137-53+"px"},dataListLoading:!1,dataList:[],dragFlag:!1,date:"",num:1,dragOverEleIndex:"",delModalVisible:!1,delModalLoading:!1,delObj:{},addModalVisible:!1,addModalLoading:!1,addModalType:1,addModalId:0,addModalName:"",radioValue1:"2",radioValue2:"1",radioValue3:"1",radioValue4:"1",lengOptions:this.myData.lengOptions,floatLen:"0",optionsArr:[],addModalTitle:"添加字段",departmentOptions:[],addModel:{name:"",dept:""},deptRootId:0,deptId:0,deptName:"",statusChangeTitle:"",statusChangeObj:{},statusModalVisible:!1,statusModalLoading:!1,adminFlag:!0}},created:function(){this.adminFlag=this.$store.state.power.includes("d"),this.getDataList(),this.getDeptList()},methods:{changeStatus:function(t,e){this.statusModalVisible=!0,t.yhqType=e,this.statusChangeObj=t,1===e&&(this.statusChangeTitle="确定修改启用状态吗？"),2===e&&(this.statusChangeTitle="确定修改显示状态吗？")},saveStatus:function(){var t=this;1===this.statusChangeObj.yhqType&&(this.statusChangeObj.enable=!this.statusChangeObj.enable),2===this.statusChangeObj.yhqType&&(this.statusChangeObj.visible=!this.statusChangeObj.visible);var e={fieldId:this.statusChangeObj.fieldId,fieldName:this.statusChangeObj.fieldName,fieldType:this.statusChangeObj.fieldType,required:this.statusChangeObj.required,enable:this.statusChangeObj.enable,visible:this.statusChangeObj.visible,fieldOptsList:this.statusChangeObj.fieldOptsList,decimals:this.statusChangeObj.decimals,departmentId:this.statusChangeObj.departmentId};this.statusModalLoading=!0,this.axios.post(this.serve.customerFieldUpdate,e).then(function(e){t.getDataList(),t.statusModalLoading=!1,t.statusModalVisible=!1,t.$notification.success({message:"提示",description:"修改成功！"})}).catch(function(t){return t})},getDataList:function(){var t=this;this.dataListLoading=!0,this.axios.post(this.serve.customerFieldList,{}).then(function(e){t.dataListLoading=!1,t.dataList=e.data.data;var i=!0,a=!1,n=void 0;try{for(var s,o=t.dataList[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;if(2===l.fieldType){var r=[],d=!0,c=!1,h=void 0;try{for(var p,u=l.fieldOptsList[Symbol.iterator]();!(d=(p=u.next()).done);d=!0){var v=p.value;r.push({value:v,label:v})}}catch(t){c=!0,h=t}finally{try{!d&&u.return&&u.return()}finally{if(c)throw h}}l.myOptions=r,l.myModal=l.fieldOptsList[0]}else if(4===l.fieldType){for(var g="0.",m=l.decimals/1,f=0;f<m;f++)g+=f===m-1?"1":"0";l.myStep=g/1,0===m&&(l.myStep=1)}}}catch(t){a=!0,n=t}finally{try{!i&&o.return&&o.return()}finally{if(a)throw n}}}).catch(function(t){return t})},changeModalType:function(t){this.addModalType=t,2===this.addModalType&&0===this.optionsArr.length&&this.optionsArr.push({id:"",name:""}),4===this.addModalType&&(this.floatLen="0")},addItemBef:function(){this.addModalTitle="添加字段",this.addModalVisible=!0,this.addModalName="",this.addModalType=1,this.radioValue1="2",this.radioValue2="1",this.radioValue3="1",this.radioValue4="1",this.floatLen="0",this.optionsArr=[],this.optionsArr.push({id:"",name:""})},addItem:function(){var t=this;if(!this.addModalName||"2"===this.radioValue4&&!this.deptId)this.$notification.warning({message:"提示",description:"请确保信息填写完整"});else{var e=[];if(2===this.addModalType){var i=!0,a=!1,n=void 0;try{for(var s,o=this.optionsArr[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;l.name&&!e.includes(l.name)&&e.push(l.name)}}catch(t){a=!0,n=t}finally{try{!i&&o.return&&o.return()}finally{if(a)throw n}}}if(2===this.addModalType&&e.length<this.optionsArr.length)this.$notification.warning({message:"提示",description:"选项不能重复、不能为空，请重填。"});else{var r={fieldName:this.addModalName,fieldType:this.addModalType,required:"2"===this.radioValue1,enable:"1"===this.radioValue2,visible:"1"===this.radioValue3,fieldOptsList:this.optionsArr,decimals:this.floatLen,departmentId:"1"===this.radioValue4?this.deptRootId:this.deptId},d=this.serve.customerFieldAdd;"编辑字段"===this.addModalTitle&&(r.fieldId=this.addModalId,d=this.serve.customerFieldUpdate),this.addModalLoading=!0,this.axios.post(d,r).then(function(e){t.getDataList(),t.addModalLoading=!1,t.addModalVisible=!1,t.$notification.success({message:"提示",description:"成功！"})}).catch(function(t){return t})}}},editItemBef:function(t,e){var i=this;this.addModalTitle="编辑字段",this.addModalVisible=!0,this.addModalId=t.fieldId,this.addModalName=t.fieldName,this.addModalType=t.fieldType,this.radioValue1=(t.required,"2"),this.radioValue2=t.enable?"1":"2",this.radioValue3=t.visible?"1":"2",this.radioValue4=t.departmentId===this.deptRootId||0===t.departmentId?"1":"2",this.floatLen=t.decimals/1==0?"0":t.decimals,this.optionsArr=t.fieldOptsList,setTimeout(function(){var e=i.$(".ant-select-selection__rendered").find("span")[0];i.$(".ant-select-search__field__placeholder")[0].style.display="none",e.style.display="",e.innerHTML=t.departmentName,i.departmentOptions=i.myTool.setSelect(i.departmentOptions,t.departmentId)},10)},delItemBef:function(t,e){this.delModalVisible=!0,this.delObj=t},delItem:function(){var t=this;this.delModalLoading=!0,this.axios.post(this.serve.customerFieldDel,{fieldId:this.delObj.fieldId}).then(function(e){t.delModalLoading=!1,t.delModalVisible=!1,t.getDataList(),t.addModalVisible=!1,t.$notification.success({message:"提示",description:"删除成功！"})}).catch(function(t){return t})},addOptionsArr:function(t,e){this.optionsArr.push({id:"",name:""})},delOptionsArr:function(t,e){this.optionsArr.length>1?this.optionsArr.splice(e,1):this.$notification.info({message:"提示",description:"至少保留一项！"})},cancel:function(){this.addModalVisible=!1,this.delModalVisible=!1},popupContainerAdd:function(){return document.getElementById("tree-select-container-add")},treeClick:function(t){var e=this;t?(this.saleList=[],this.sale="",t.has_auth?t.id===this.deptRootId?(this.$notification.warning({message:"提示",description:"不能选择根节点。"}),setTimeout(function(){e.$(".ant-select-selection__rendered").find("span")[0].innerHTML=""},100),this.deptId="",this.deptName=""):(this.deptId=t.id,this.deptName=t.name):(this.$notification.warning({message:"提示",description:"没有该部门的权限。"}),setTimeout(function(){e.$(".ant-select-selection__rendered").find("span")[0].innerHTML=""},100),this.deptId="",this.deptName="")):setTimeout(function(){var t=e.$(".ant-select-selection__rendered").find("span")[0];e.$(".ant-select-search__field__placeholder")[0].style.display="none",t.style.display="",t.innerHTML=e.deptName,e.departmentOptions=e.myTool.setSelect(e.departmentOptions,e.deptId)},10)},getDeptList:function(){var t=this,e=new URLSearchParams;this.axios.get(this.serve.deptList,e).then(function(e){t.treeData=e.data.data,t.deptRootId=t.treeData[0].id,t.getSelectTreeData()}).catch(function(t){return t})},getSelectTreeData:function(){var t=JSON.parse(JSON.stringify(this.treeData));this.departmentOptions=this.myTool.deepClone(t),this.getDeptItemId(this.departmentOptions)},getDeptItemId:function(t){t[0]&&!t[0].children?this.deptId=t[0].id:this.getDeptItemId(t[0].children)},drag:function(t){t.dataTransfer.setData("dragObj",t.target.id)},dragover:function(t){t.preventDefault(),"First"===t.target.id.split("drop")[1]?this.dragOverEleIndex="First":this.dragOverEleIndex=t.target.id.split("drop")[1]/1},dragleave:function(t){t.preventDefault(),this.dragOverEleIndex=""},drop:function(t){var e=this;t.preventDefault();var i=t.dataTransfer.getData("dragObj");this.adjustmentOrder(i,t.target.id),this.dragOverEleIndex="";var a=[],n=!0,s=!1,o=void 0;try{for(var l,r=this.dataList[Symbol.iterator]();!(n=(l=r.next()).done);n=!0){var d=l.value;a.push(d.fieldId)}}catch(t){s=!0,o=t}finally{try{!n&&r.return&&r.return()}finally{if(s)throw o}}this.axios.post(this.serve.customerFieldOrder,{id:a}).then(function(t){e.$notification.success({message:"提示",description:"顺序调整成功！"})}).catch(function(t){return t})},adjustmentOrder:function(t,e){var i=t.split("drag")[1]/1,a=e.split("drop")[1];if("First"===a)this.dataList.unshift(this.dataList[i]),this.dataList.splice(i+1,1);else if(i>(a/=1)){var n=[];n=(n=(n=(n=n.concat(this.dataList.slice(0,a+1))).concat(this.dataList.slice(i,i+1))).concat(this.dataList.slice(a+1,i))).concat(this.dataList.slice(i+1,this.dataList.length)),this.dataList=n}else if(i<a){var s=[];s=(s=(s=(s=s.concat(this.dataList.slice(0,i))).concat(this.dataList.slice(i+1,a+1))).concat(this.dataList.slice(i,i+1))).concat(this.dataList.slice(a+1,this.dataList.length)),this.dataList=s}console.log(this.dataList)}},watch:{screenHeight:function(t){this.screenHeight=t,this.vContentHeigth={height:t-137-53+"px"}}},mounted:function(){var t=this;window.onresize=function(){return t.screenHeight=window.innerHeight,void(t.vContentHeigth={height:window.innerHeight-137-53+"px"})}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"crm"},[a("div",{staticClass:"clearfix screening-title"},[a("span",{staticClass:"screening-title1"},[t._v("客户字段")]),t._v(" "),a("v-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(e){t.addItemBef()}}},[t._v("新建")])],1),t._v(" "),t._m(0),t._v(" "),a("div",{style:t.vContentHeigth},[a("el-scrollbar",[t.dataList.length>0&&!t.dataListLoading&&t.adminFlag?a("ul",{staticClass:"screening-ul"},t._l(t.dataList,function(e,n){return a("li",{key:e.fieldId,staticClass:"clearfix"},[0===n?a("div",{staticClass:"screening-drop",attrs:{id:"dropFirst"},on:{drop:function(e){t.drop(e)},dragover:function(e){t.dragover(e)},dragleave:function(e){t.dragleave(e)}}},["First"===t.dragOverEleIndex?a("i",{staticClass:"fa fa-arrow-right",attrs:{"aria-hidden":"true"}}):t._e()]):t._e(),t._v(" "),a("div",{staticClass:"screening-drag",attrs:{draggable:"true",id:"drag"+n},on:{dragstart:function(e){t.drag(e)}}},[a("div",{staticClass:"screening-name"},[t._v(t._s(e.fieldName))]),t._v(" "),a("div",{staticClass:"screening-name"},[1===e.fieldType?[t._v("文本")]:t._e(),t._v(" "),2===e.fieldType?[t._v("下拉列表")]:t._e(),t._v(" "),3===e.fieldType?[t._v("时间")]:t._e(),t._v(" "),4===e.fieldType?[t._v("数值")]:t._e()],2),t._v(" "),a("div",{staticClass:"screening-name"},[e.departmentId>0&&e.departmentId!==t.deptRootId?[t._v("\n                "+t._s(e.departmentName)+"\n              ")]:[t._v("\n                全体\n              ")]],2),t._v(" "),a("div",{staticClass:"screening-name"},[e.enable?[a("img",{staticStyle:{position:"relative",top:"2px"},attrs:{src:i("DTRI")},on:{click:function(i){t.changeStatus(e,1)}}}),t._v("  启用\n              ")]:t._e(),t._v(" "),e.enable?t._e():[a("img",{staticStyle:{position:"relative",top:"2px"},attrs:{src:i("1x9i")},on:{click:function(i){t.changeStatus(e,1)}}}),t._v("  启用\n              ")]],2),t._v(" "),a("div",{staticClass:"screening-name"},[e.enable&&e.visible?[a("img",{staticStyle:{position:"relative",top:"2px"},attrs:{src:i("DTRI")},on:{click:function(i){t.changeStatus(e,2)}}}),t._v("  显示\n              ")]:t._e(),t._v(" "),e.enable&&!e.visible?[a("img",{staticStyle:{position:"relative",top:"2px"},attrs:{src:i("1x9i")},on:{click:function(i){t.changeStatus(e,2)}}}),t._v("  显示\n              ")]:t._e(),t._v(" "),e.enable?t._e():[a("img",{staticStyle:{position:"relative",top:"2px"},attrs:{src:i("Gi4w")}}),t._v("  显示\n              ")]],2),t._v(" "),a("div",{staticClass:"screening-name",staticStyle:{width:"20%"}},[e.deletable?a("span",{staticClass:"operation",on:{click:function(i){t.delItemBef(e,n)}}},[t._v("删除")]):t._e(),t._v(" "),e.editable?a("span",{staticClass:"operation",on:{click:function(i){t.editItemBef(e,n)}}},[t._v("编辑")]):t._e(),t._v(" "),a("span",{staticClass:"screening-bars",attrs:{title:"按住拖动"}},[a("i",{staticClass:"fa fa-bars",attrs:{"aria-hidden":"true"}})])])]),t._v(" "),a("div",{staticClass:"screening-drop",attrs:{id:"drop"+n},on:{drop:function(e){t.drop(e)},dragover:function(e){t.dragover(e)},dragleave:function(e){t.dragleave(e)}}},[t.dragOverEleIndex===n?a("i",{staticClass:"fa fa-arrow-right",attrs:{"aria-hidden":"true"}}):t._e()])])})):t._e(),t._v(" "),t.dataList.length>0&&!t.dataListLoading&&!t.adminFlag?a("ul",{staticClass:"screening-ul"},t._l(t.dataList,function(e,n){return a("li",{key:e.fieldId,staticClass:"clearfix"},[0===n?a("div",{staticClass:"screening-drop"}):t._e(),t._v(" "),a("div",{staticClass:"screening-drag"},[a("div",{staticClass:"screening-name"},[t._v(t._s(e.fieldName))]),t._v(" "),a("div",{staticClass:"screening-name"},[1===e.fieldType?[t._v("文本")]:t._e(),t._v(" "),2===e.fieldType?[t._v("下拉列表")]:t._e(),t._v(" "),3===e.fieldType?[t._v("时间")]:t._e(),t._v(" "),4===e.fieldType?[t._v("数值")]:t._e()],2),t._v(" "),a("div",{staticClass:"screening-name"},[e.departmentId>0&&e.departmentId!==t.deptRootId?[t._v("\n                "+t._s(e.departmentName)+"\n              ")]:[t._v("\n                全体\n              ")]],2),t._v(" "),a("div",{staticClass:"screening-name"},[e.enable?[a("img",{staticStyle:{position:"relative",top:"2px"},attrs:{src:i("DTRI")},on:{click:function(i){t.changeStatus(e,1)}}}),t._v("  启用\n              ")]:t._e(),t._v(" "),e.enable?t._e():[a("img",{staticStyle:{position:"relative",top:"2px"},attrs:{src:i("1x9i")},on:{click:function(i){t.changeStatus(e,1)}}}),t._v("  启用\n              ")]],2),t._v(" "),a("div",{staticClass:"screening-name"},[e.enable&&e.visible?[a("img",{staticStyle:{position:"relative",top:"2px"},attrs:{src:i("DTRI")},on:{click:function(i){t.changeStatus(e,2)}}}),t._v("  显示\n              ")]:t._e(),t._v(" "),e.enable&&!e.visible?[a("img",{staticStyle:{position:"relative",top:"2px"},attrs:{src:i("1x9i")},on:{click:function(i){t.changeStatus(e,2)}}}),t._v("  显示\n              ")]:t._e(),t._v(" "),e.enable?t._e():[a("img",{staticStyle:{position:"relative",top:"2px"},attrs:{src:i("Gi4w")}}),t._v("  显示\n              ")]],2),t._v(" "),a("div",{staticClass:"screening-name",staticStyle:{width:"20%"}},[e.deletable?a("span",{staticClass:"operation",on:{click:function(i){t.delItemBef(e,n)}}},[t._v("删除")]):t._e(),t._v(" "),e.editable?a("span",{staticClass:"operation",on:{click:function(i){t.editItemBef(e,n)}}},[t._v("编辑")]):t._e()])]),t._v(" "),a("div",{staticClass:"screening-drop"})])})):t._e(),t._v(" "),0!==t.dataList.length||t.dataListLoading?t._e():a("ul",{staticClass:"have-no-data"},[t._v("\n        暂无数据\n      ")]),t._v(" "),0===t.dataList.length&&t.dataListLoading?a("ul",{staticClass:"have-no-data"},[a("v-spin",{staticStyle:{position:"relative",top:"50px"},attrs:{spinning:t.dataListLoading}})],1):t._e()])],1),t._v(" "),[a("v-modal",{attrs:{title:t.addModalTitle,visible:t.addModalVisible,width:800,"confirm-loading":t.addModalLoading},on:{ok:function(e){t.addItem()},cancel:function(e){t.cancel("字段")}}},[a("div",{staticClass:"clearfix",staticStyle:{border:"1px solid #eee"}},[a("div",{staticStyle:{width:"30%","min-height":"420px",float:"left","text-align":"center","line-height":"33px",padding:"10px"}},[a("p",{staticStyle:{"line-height":"100px"}},[t._v("字段类型")]),t._v(" "),a("div",{staticClass:"addmodal-btn",class:{"addmodal-btn-checked":1===t.addModalType},on:{click:function(e){t.changeModalType(1)}}},[t._v("文本")]),t._v(" "),a("div",{staticClass:"addmodal-btn",class:{"addmodal-btn-checked":2===t.addModalType},on:{click:function(e){t.changeModalType(2)}}},[t._v("下拉列表")]),t._v(" "),a("div",{staticClass:"addmodal-btn",class:{"addmodal-btn-checked":3===t.addModalType},on:{click:function(e){t.changeModalType(3)}}},[t._v("时间")]),t._v(" "),a("div",{staticClass:"addmodal-btn",class:{"addmodal-btn-checked":4===t.addModalType},on:{click:function(e){t.changeModalType(4)}}},[t._v("数值")])]),t._v(" "),a("div",{staticStyle:{width:"70%","min-height":"420px",float:"left",padding:"10px","border-left":"1px solid #eee"}},[a("div",[a("p",{staticStyle:{"line-height":"100px","text-align":"center"}},[t._v("字段设置")]),t._v(" "),a("div",{staticClass:"addmodal-field"},[t._v("字段名称:"),a("v-input",{staticStyle:{width:"280px","margin-left":"30px"},attrs:{maxlength:"20"},nativeOn:{keyup:function(e){t.addModalName=t.addModalName.replace(/[\s]/g,"")}},model:{value:t.addModalName,callback:function(e){t.addModalName=e},expression:"addModalName"}})],1),t._v(" "),a("div",{staticClass:"addmodal-field",staticStyle:{display:"none"}},[t._v("\n              是否必填:\n              "),a("v-radio-group",{staticStyle:{"margin-left":"30px"},attrs:{data:[{value:"1",text:"必填"},{value:"2",text:"非必填"}]},model:{value:t.radioValue1,callback:function(e){t.radioValue1=e},expression:"radioValue1"}})],1),t._v(" "),a("div",{staticClass:"addmodal-field"},[t._v("\n              是否禁用:\n              "),a("v-radio-group",{staticStyle:{"margin-left":"30px"},attrs:{data:[{value:"1",text:"启用"},{value:"2",text:"禁用"}]},model:{value:t.radioValue2,callback:function(e){t.radioValue2=e},expression:"radioValue2"}})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"1"===t.radioValue2,expression:"radioValue2 === '1'"}],staticClass:"addmodal-field"},[t._v("\n              是否显示:\n              "),a("v-radio-group",{staticStyle:{"margin-left":"30px"},attrs:{data:[{value:"1",text:"显示"},{value:"2",text:"不显示"}]},model:{value:t.radioValue3,callback:function(e){t.radioValue3=e},expression:"radioValue3"}})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"2"===t.radioValue2,expression:"radioValue2 === '2'"}],staticClass:"addmodal-field"},[t._v("\n              是否显示:\n              "),a("v-radio",{staticStyle:{"margin-left":"30px"},attrs:{label:"显示",disabled:""}},[t._v("  显示")])],1),t._v(" "),a("div",{staticClass:"addmodal-field"},[t._v("\n              部门选择:\n              "),a("v-radio-group",{staticStyle:{"margin-left":"30px"},attrs:{data:[{value:"1",text:"公司字段"},{value:"2",text:"部门字段"}]},model:{value:t.radioValue4,callback:function(e){t.radioValue4=e},expression:"radioValue4"}})],1)]),t._v(" "),"2"===t.radioValue4?a("div",[a("div",{staticClass:"addmodal-field",staticStyle:{"padding-left":"135px"}},[a("v-tree-select",{staticClass:"modal-input",staticStyle:{width:"232px","text-align":"left",height:"auto"},attrs:{data:t.departmentOptions,"popup-container":t.popupContainerAdd,allowClear:!1,placeholder:"请选择部门"},on:{select:t.treeClick},model:{value:t.addModel.dept,callback:function(e){t.$set(t.addModel,"dept",e)},expression:"addModel.dept"}}),t._v(" "),a("div",{staticStyle:{position:"relative","margin-left":"155px","line-height":"24px"},attrs:{id:"tree-select-container-add"}})],1)]):t._e(),t._v(" "),2===t.addModalType?a("div",[a("div",{staticClass:"addmodal-field clearfix",staticStyle:{height:"auto"}},[t._v("\n              列表选项:\n              "),a("div",{staticStyle:{float:"right",width:"410px"}},t._l(t.optionsArr,function(e,i){return a("div",{key:i},[a("v-input",{staticStyle:{width:"180px","margin-left":"30px"},attrs:{maxlength:"20"},nativeOn:{keyup:function(t){e.name=e.name.replace(/[\s]/g,"")}},model:{value:e.name,callback:function(i){t.$set(e,"name",i)},expression:"item.name"}}),t._v(" "),a("span",{staticClass:"screening-modal-bars",attrs:{title:"删除"},on:{click:function(a){t.delOptionsArr(e,i)}}},[a("i",{staticClass:"fa fa-minus-square",attrs:{"aria-hidden":"true"}})]),t._v(" "),i===t.optionsArr.length-1?a("span",{staticClass:"screening-modal-bars",attrs:{title:"添加"},on:{click:function(e){t.addOptionsArr()}}},[a("i",{staticClass:"fa fa-plus-square",attrs:{"aria-hidden":"true"}})]):t._e()],1)}))])]):t._e(),t._v(" "),4===t.addModalType?a("div",[a("div",{staticClass:"addmodal-field"},[t._v("小数位数:"),a("v-select",{staticStyle:{"margin-left":"30px",width:"80px"},attrs:{data:t.lengOptions,allowClear:!1},model:{value:t.floatLen,callback:function(e){t.floatLen=e},expression:"floatLen"}})],1)]):t._e()])])])],t._v(" "),[a("v-modal",{attrs:{title:"删除字段",visible:t.delModalVisible,"confirm-loading":t.delModalLoading},on:{ok:function(e){t.delItem()},cancel:function(e){t.cancel("删除字段")}}},[a("div",{staticStyle:{"text-align":"center",height:"120px","line-height":"120px"}},[t._v("\n        确认删除该字段吗？\n      ")])])],t._v(" "),[a("v-modal",{attrs:{title:"修改状态",visible:t.statusModalVisible,"confirm-loading":t.statusModalLoading},on:{ok:function(e){t.saveStatus()},cancel:function(e){t.cancel("修改状态"),t.statusModalVisible=!1}}},[a("div",{staticStyle:{"text-align":"center",height:"120px","line-height":"120px"}},[t._v("\n        "+t._s(t.statusChangeTitle)+"\n      ")])])]],2)},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"clearfix"},[i("ul",{staticStyle:{width:"99%","background-color":"#f3f3f3"}},[i("li",{staticClass:"clearfix"},[i("div",{staticStyle:{height:"42px","line-height":"42px","border-bottom":"1px solid rgba(67, 148, 247, .2)"}},[i("div",{staticClass:"screening-name"},[t._v("字段名称")]),t._v(" "),i("div",{staticClass:"screening-name"},[t._v("字段类型")]),t._v(" "),i("div",{staticClass:"screening-name"},[t._v("所属部门")]),t._v(" "),i("div",{staticClass:"screening-name"},[t._v("是否启用")]),t._v(" "),i("div",{staticClass:"screening-name"},[t._v("是否显示")]),t._v(" "),i("div",{staticClass:"screening-name",staticStyle:{width:"20%"}},[t._v("操作")])])])])])}]};var d=i("VU/8")(l,r,!1,function(t){i("8FLJ")},"data-v-1db65860",null).exports,c={name:"crm-tagSettingAll",data:function(){return{screenHeight:window.innerHeight,vContentHeigth:{height:window.innerHeight-89+"px"},vContentHeigth1:{height:window.innerHeight-185-24+"px"},dragOverEleIndex:"",dragOverEleIndex2:"",groupId:0,contentId:0,dataListLoading:!1,dataList:[],dataAddList:[],contentListLoading:!1,contentList:[],contentAddList:[],editing:!1,delModalVisible:!1,delModalLoading:!1,delObj:{},delType:1,delTitle:"",editObj:{}}},created:function(){this.getDataList()},methods:{getDataList:function(){var t=this;this.dataListLoading=!0,this.axios.post(this.serve.tagGroupList,{talkType:0}).then(function(e){var i=!0,a=!1,n=void 0;try{for(var s,o=e.data.data[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;l.hoverFlag=!1,l.editFlag=!1;var r=!0,d=!1,c=void 0;try{for(var h,p=l.tagContent[Symbol.iterator]();!(r=(h=p.next()).done);r=!0){var u=h.value;u.hoverFlag=!1,u.editFlag=!1}}catch(t){d=!0,c=t}finally{try{!r&&p.return&&p.return()}finally{if(d)throw c}}}}catch(t){a=!0,n=t}finally{try{!i&&o.return&&o.return()}finally{if(a)throw n}}t.dataListLoading=!1,t.dataList=e.data.data,t.groupId=t.dataList.length>0?t.dataList[0].id:0,t.getContentList()}).catch(function(t){return t})},getContentList:function(){if(this.groupId){var t=!0,e=!1,i=void 0;try{for(var a,n=this.dataList[Symbol.iterator]();!(t=(a=n.next()).done);t=!0){var s=a.value;this.groupId===s.id&&(this.contentList=s.tagContent)}}catch(t){e=!0,i=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw i}}}else this.contentList=[]},addItemNo:function(){this.$notification.warning({message:"提示",description:"请先添加标签分组！"})},addItem:function(t){1===t&&(this.editing||0!==this.dataAddList.length||0!==this.contentAddList.length?this.$notification.info({message:"提示",description:"请先保存未完成的标签分组！"}):this.dataAddList.push({name:""})),2===t&&(this.editing||0!==this.dataAddList.length||0!==this.contentAddList.length?this.$notification.info({message:"提示",description:"请先保存未完成的标签内容！"}):this.contentAddList.push({name:""}))},saveItem:function(t){var e=this;1===t&&(this.dataAddList[0].name?this.axios.post(this.serve.tagGroupAdd,{talkType:0,departmentId:"",name:this.dataAddList[0].name}).then(function(t){e.dataList.unshift({id:t.data.data,index:e.dataList.length+1,name:e.dataAddList[0].name,tagContent:[],editFlag:!1,hoverFlag:!1}),e.dataAddList=[],1===e.dataList.length&&(e.groupId=e.dataList[0].id)}).catch(function(t){return t}):this.$notification.info({message:"提示",description:"名称不能为空！"})),2===t&&(this.contentAddList[0].name?this.axios.post(this.serve.tagContentAdd,{talkType:0,name:this.contentAddList[0].name,parentId:this.groupId}).then(function(t){e.contentList.unshift({id:t.data.data,name:e.contentAddList[0].name,editFlag:!1,hoverFlag:!1,editable:!0}),e.contentAddList=[]}).catch(function(t){return t}):this.$notification.info({message:"提示",description:"内容不能为空！"}))},editItemBef:function(t,e){this.editing||0!==this.dataAddList.length||0!==this.contentAddList.length?this.$notification.info({message:"提示",description:"请先保存未完成的内容！"}):(this.editObj.name=t.name,this.editing=!0,t.editFlag=!0)},editItem:function(t,e){var i=this;1===e&&(t.name?(this.editing=!1,t.editFlag=!1,this.axios.post(this.serve.tagGroupEdit,{id:t.id,name:t.name}).then(function(t){i.$notification.success({message:"提示",description:"修改成功！"})}).catch(function(t){return t})):this.$notification.info({message:"提示",description:"名称不能为空！"})),2===e&&(t.name?(this.editing=!1,t.editFlag=!1,this.axios.post(this.serve.tagContentEdit,{id:t.id,name:t.name,parentId:this.groupId}).then(function(t){i.$notification.success({message:"提示",description:"修改成功！"})}).catch(function(t){return t})):this.$notification.info({message:"提示",description:"内容不能为空！"}))},delItemBef:function(t,e){1===e&&(this.delTitle="标签分组",t.tagContent.length>0)?this.$notification.warning({message:"提示",description:"请先清空分组下内容再删除分组！"}):(2===e&&(this.delTitle="标签内容"),this.delModalVisible=!0,this.delObj=t,this.delType=e)},delItem:function(){var t=this;1===this.delType&&(this.delModalLoading=!0,this.axios.post(this.serve.tagGroupDel,{id:this.delObj.id}).then(function(e){var i=[],a=!0,n=!1,s=void 0;try{for(var o,l=t.dataList[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var r=o.value;r.id!==t.delObj.id&&i.push(r)}}catch(t){n=!0,s=t}finally{try{!a&&l.return&&l.return()}finally{if(n)throw s}}t.dataList=i,t.delModalLoading=!1}).catch(function(t){return t})),2===this.delType&&this.axios.post(this.serve.tagContentDel,{id:this.delObj.id}).then(function(e){var i=[],a=!0,n=!1,s=void 0;try{for(var o,l=t.contentList[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var r=o.value;r.id!==t.delObj.id&&i.push(r)}}catch(t){n=!0,s=t}finally{try{!a&&l.return&&l.return()}finally{if(n)throw s}}t.contentList=i,t.delModalLoading=!1;var d=!0,c=!1,h=void 0;try{for(var p,u=t.dataList[Symbol.iterator]();!(d=(p=u.next()).done);d=!0){var v=p.value;v.id===t.groupId&&(v.tagContent=t.contentList)}}catch(t){c=!0,h=t}finally{try{!d&&u.return&&u.return()}finally{if(c)throw h}}}).catch(function(t){return t}),this.delModalVisible=!1},cancel:function(){this.delModalVisible=!1,this.dataAddList=[],this.contentAddList=[]},drag:function(t){t.dataTransfer.setData("dragObj",t.target.id)},dragover:function(t){t.preventDefault(),"First"===t.target.id.split("drop")[1]?this.dragOverEleIndex="First":this.dragOverEleIndex=t.target.id.split("drop")[1]/1},dragleave:function(t){t.preventDefault(),this.dragOverEleIndex=""},drop:function(t){var e=this;t.preventDefault();var i=t.dataTransfer.getData("dragObj");this.adjustmentOrder(i,t.target.id),this.dragOverEleIndex="";var a=[],n=!0,s=!1,o=void 0;try{for(var l,r=this.dataList[Symbol.iterator]();!(n=(l=r.next()).done);n=!0){var d=l.value;a.push(d.id)}}catch(t){s=!0,o=t}finally{try{!n&&r.return&&r.return()}finally{if(s)throw o}}this.axios.post(this.serve.tagOrder,{id:a}).then(function(t){e.$notification.success({message:"提示",description:"顺序调整成功！"})}).catch(function(t){return t})},adjustmentOrder:function(t,e){var i=t.split("drag")[1]/1,a=e.split("drop")[1];if("First"===a)this.dataList.unshift(this.dataList[i]),this.dataList.splice(i+1,1);else if(i>(a/=1)){var n=[];n=(n=(n=(n=n.concat(this.dataList.slice(0,a+1))).concat(this.dataList.slice(i,i+1))).concat(this.dataList.slice(a+1,i))).concat(this.dataList.slice(i+1,this.dataList.length)),this.dataList=n}else if(i<a){var s=[];s=(s=(s=(s=s.concat(this.dataList.slice(0,i))).concat(this.dataList.slice(i+1,a+1))).concat(this.dataList.slice(i,i+1))).concat(this.dataList.slice(a+1,this.dataList.length)),this.dataList=s}},drag2:function(t){t.dataTransfer.setData("dragObj2",t.target.id)},dragover2:function(t){t.preventDefault(),"Firster"===t.target.id.split("droper")[1]?this.dragOverEleIndex2="Firster":this.dragOverEleIndex2=t.target.id.split("droper")[1]/1},dragleave2:function(t){t.preventDefault(),this.dragOverEleIndex2=""},drop2:function(t){var e=this;t.preventDefault();var i=t.dataTransfer.getData("dragObj2");this.adjustmentOrder2(i,t.target.id),this.dragOverEleIndex2="";var a=[],n=!0,s=!1,o=void 0;try{for(var l,r=this.contentList[Symbol.iterator]();!(n=(l=r.next()).done);n=!0){var d=l.value;a.push(d.id)}}catch(t){s=!0,o=t}finally{try{!n&&r.return&&r.return()}finally{if(s)throw o}}this.axios.post(this.serve.tagOrder,{id:a}).then(function(t){e.$notification.success({message:"提示",description:"顺序调整成功！"})}).catch(function(t){return t})},adjustmentOrder2:function(t,e){var i=t.split("drager")[1]/1,a=e.split("droper")[1];if("Firster"===a)this.contentList.unshift(this.contentList[i]),this.contentList.splice(i+1,1);else if(i>(a/=1)){var n=[];n=(n=(n=(n=n.concat(this.contentList.slice(0,a+1))).concat(this.contentList.slice(i,i+1))).concat(this.contentList.slice(a+1,i))).concat(this.contentList.slice(i+1,this.contentList.length)),this.contentList=n}else if(i<a){var s=[];s=(s=(s=(s=s.concat(this.contentList.slice(0,i))).concat(this.contentList.slice(i+1,a+1))).concat(this.contentList.slice(i,i+1))).concat(this.contentList.slice(a+1,this.contentList.length)),this.contentList=s}}},watch:{screenHeight:function(t){this.screenHeight=t,this.vContentHeigth={height:t-89+"px"},this.vContentHeigth1={height:t-185-24+"px"}}},mounted:function(){var t=this;window.onresize=function(){return t.screenHeight=window.innerHeight,t.vContentHeigth={height:window.innerHeight-89+"px"},void(t.vContentHeigth1={height:window.innerHeight-185-24+"px"})}}},h={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{"margin-top":"44px"}},[i("div",{staticClass:"setting-left"},[i("div",{staticClass:"setting-head"},[t._v("\n      标签分组\n      "),t.$store.state.power.includes("d")?i("v-button",{staticStyle:{float:"right","margin-top":"12px"},attrs:{type:"primary"},on:{click:function(e){t.addItem(1)}}},[t._v("添加分组")]):t._e()],1),t._v(" "),i("div",{staticClass:"setting-body",style:t.vContentHeigth1},[i("el-scrollbar",[!t.dataListLoading&&(t.dataAddList.length>0||t.dataList.length>0)?i("ul",{staticClass:"screening-ul"},[t._l(t.dataAddList,function(e){return t.dataAddList.length>0?i("li",{key:e.id,staticStyle:{"margin-top":"20px"}},[i("div",{staticClass:"screening-drag"},[i("span",{staticClass:"screening-name"},[i("v-input",{attrs:{maxlength:"15"},nativeOn:{keyup:function(t){e.name=e.name.replace(/[\s]/g,"")}},model:{value:e.name,callback:function(i){t.$set(e,"name",i)},expression:"item.name"}})],1),t._v(" "),i("span",{staticClass:"screening-bars-btn"},[i("v-button",{staticStyle:{height:"33px",padding:"0",width:"80%"},on:{click:function(e){t.cancel()}}},[t._v("取消")])],1),t._v(" "),i("span",{staticClass:"screening-bars-btn"},[i("v-button",{staticStyle:{height:"33px",padding:"0",width:"80%"},attrs:{type:"primary"},on:{click:function(e){t.saveItem(1)}}},[t._v("保存")])],1)])]):t._e()}),t._v(" "),t._l(t.dataList,function(e,a){return i("li",{key:e.id},[0===a?i("div",{staticClass:"screening-drop",attrs:{id:"dropFirst"},on:{drop:function(e){t.drop(e)},dragover:function(e){t.dragover(e)},dragleave:function(e){t.dragleave(e)}}},["First"===t.dragOverEleIndex?i("i",{staticClass:"fa fa-arrow-right",attrs:{"aria-hidden":"true"}}):t._e()]):t._e(),t._v(" "),i("div",{staticClass:"screening-drag",class:{"li-select":e.id===t.groupId},attrs:{draggable:"true",id:"drag"+a},on:{dragstart:function(e){t.drag(e)},mouseover:function(t){e.hoverFlag=!0},mouseout:function(t){e.hoverFlag=!1}}},[i("span",{staticClass:"screening-name",on:{click:function(i){t.groupId=e.id,t.getContentList()}}},[e.editFlag?i("v-input",{attrs:{maxlength:"15"},nativeOn:{keyup:function(t){e.name=e.name.replace(/[\s]/g,"")}},model:{value:e.name,callback:function(i){t.$set(e,"name",i)},expression:"item.name"}}):t._e(),t._v(" "),e.editFlag?t._e():[t._v(t._s(e.name))]],2),t._v(" "),e.editFlag?i("span",{staticClass:"screening-bars-btn"},[i("v-button",{staticStyle:{height:"33px",padding:"0",width:"80%"},on:{click:function(i){e.name=t.editObj.name,e.editFlag=!1,t.editing=!1}}},[t._v("取消")])],1):t._e(),t._v(" "),e.editFlag?i("span",{staticClass:"screening-bars-btn"},[i("v-button",{staticStyle:{height:"33px",padding:"0",width:"80%"},attrs:{type:"primary"},on:{click:function(i){t.editItem(e,1)}}},[t._v("保存")])],1):t._e(),t._v(" "),e.editFlag?t._e():i("span",{staticClass:"screening-bars",attrs:{title:"按住拖动"}},[i("i",{staticClass:"fa fa-bars",attrs:{"aria-hidden":"true"}})]),t._v(" "),!e.editFlag&&t.$store.state.power.includes("d")?i("span",{directives:[{name:"show",rawName:"v-show",value:e.hoverFlag,expression:"item.hoverFlag"}],staticClass:"screening-bars",attrs:{title:"删除"},on:{click:function(i){t.delItemBef(e,1)}}},[i("i",{staticClass:"fa fa-trash-o",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),!e.editFlag&&t.$store.state.power.includes("d")?i("span",{directives:[{name:"show",rawName:"v-show",value:e.hoverFlag,expression:"item.hoverFlag"}],staticClass:"screening-bars",attrs:{title:"编辑"},on:{click:function(i){t.editItemBef(e,1)}}},[i("i",{staticClass:"fa fa-pencil",attrs:{"aria-hidden":"true"}})]):t._e()]),t._v(" "),i("div",{staticClass:"screening-drop",attrs:{id:"drop"+a},on:{drop:function(e){t.drop(e)},dragover:function(e){t.dragover(e)},dragleave:function(e){t.dragleave(e)}}},[t.dragOverEleIndex===a?i("i",{staticClass:"fa fa-arrow-right",attrs:{"aria-hidden":"true"}}):t._e()])])})],2):t._e(),t._v(" "),0!==t.dataList.length||0!==t.dataAddList.length||t.dataListLoading?t._e():i("ul",{staticClass:"have-no-data"},[t._v("\n          暂无数据\n        ")]),t._v(" "),0===t.dataList.length&&t.dataListLoading?i("ul",{staticClass:"have-no-data"},[i("v-spin",{staticStyle:{position:"relative",top:"50px"},attrs:{spinning:t.dataListLoading}})],1):t._e()])],1)]),t._v(" "),i("div",{staticClass:"setting-right"},[i("div",{staticClass:"setting-head"},[t._v("\n      标签内容\n      "),0===t.dataList.length&&t.$store.state.power.includes("d")?i("v-button",{staticStyle:{float:"right","margin-top":"12px",height:"33px",padding:"0 27px"},on:{click:function(e){t.addItemNo()}}},[t._v("添加标签")]):t._e(),t._v(" "),t.dataList.length>0&&t.$store.state.power.includes("d")?i("v-button",{staticStyle:{float:"right","margin-top":"12px"},attrs:{type:"primary"},on:{click:function(e){t.addItem(2)}}},[t._v("添加标签")]):t._e()],1),t._v(" "),i("div",{staticClass:"setting-body",style:t.vContentHeigth1},[i("el-scrollbar",[(t.contentList.length>0||t.contentAddList.length>0)&&!t.dataListLoading?i("ul",{staticClass:"screening-ul"},[t._l(t.contentAddList,function(e){return t.contentAddList.length>0?i("li",{key:e.id,staticStyle:{"margin-top":"20px"}},[i("div",{staticClass:"screening-drag"},[i("span",{staticClass:"screening-name"},[i("v-input",{attrs:{maxlength:"15"},nativeOn:{keyup:function(t){e.name=e.name.replace(/[\s]/g,"")}},model:{value:e.name,callback:function(i){t.$set(e,"name",i)},expression:"item.name"}})],1),t._v(" "),i("span",{staticClass:"screening-bars-btn"},[i("v-button",{staticStyle:{height:"33px",padding:"0",width:"80%"},on:{click:function(e){t.cancel()}}},[t._v("取消")])],1),t._v(" "),i("span",{staticClass:"screening-bars-btn"},[i("v-button",{staticStyle:{height:"33px",padding:"0",width:"80%"},attrs:{type:"primary"},on:{click:function(e){t.saveItem(2)}}},[t._v("保存")])],1)])]):t._e()}),t._v(" "),t._l(t.contentList,function(e,a){return i("li",{key:e.id},[0===a?i("div",{staticClass:"screening-drop",attrs:{id:"droperFirster"},on:{drop:function(e){t.drop2(e)},dragover:function(e){t.dragover2(e)},dragleave:function(e){t.dragleave2(e)}}},["Firster"===t.dragOverEleIndex2?i("i",{staticClass:"fa fa-arrow-right",attrs:{"aria-hidden":"true"}}):t._e()]):t._e(),t._v(" "),i("div",{staticClass:"screening-drag",attrs:{draggable:"true",id:"drager"+a},on:{dragstart:function(e){t.drag2(e)},mouseover:function(t){e.hoverFlag=!0},mouseout:function(t){e.hoverFlag=!1}}},[i("span",{staticClass:"screening-name"},[e.editFlag?i("v-input",{attrs:{maxlength:"15"},nativeOn:{keyup:function(t){e.name=e.name.replace(/[\s]/g,"")}},model:{value:e.name,callback:function(i){t.$set(e,"name",i)},expression:"item.name"}}):t._e(),t._v(" "),e.editFlag?t._e():[t._v(t._s(e.name))]],2),t._v(" "),e.editFlag?i("span",{staticClass:"screening-bars-btn"},[i("v-button",{staticStyle:{height:"33px",padding:"0",width:"80%"},on:{click:function(i){e.name=t.editObj.name,e.editFlag=!1,t.editing=!1}}},[t._v("取消")])],1):t._e(),t._v(" "),e.editFlag?i("span",{staticClass:"screening-bars-btn"},[i("v-button",{staticStyle:{height:"33px",padding:"0",width:"80%"},attrs:{type:"primary"},on:{click:function(i){t.editItem(e,2)}}},[t._v("保存")])],1):t._e(),t._v(" "),e.editFlag?t._e():i("span",{staticClass:"screening-bars",attrs:{title:"按住拖动"}},[i("i",{staticClass:"fa fa-bars",attrs:{"aria-hidden":"true"}})]),t._v(" "),!e.editFlag&&t.$store.state.power.includes("d")?i("span",{directives:[{name:"show",rawName:"v-show",value:e.hoverFlag,expression:"item.hoverFlag"}],staticClass:"screening-bars",attrs:{title:"删除"},on:{click:function(i){t.delItemBef(e,2)}}},[i("i",{staticClass:"fa fa-trash-o",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),!e.editFlag&&t.$store.state.power.includes("d")?i("span",{directives:[{name:"show",rawName:"v-show",value:e.hoverFlag,expression:"item.hoverFlag"}],staticClass:"screening-bars",attrs:{title:"编辑"},on:{click:function(i){t.editItemBef(e,2)}}},[i("i",{staticClass:"fa fa-pencil",attrs:{"aria-hidden":"true"}})]):t._e()]),t._v(" "),i("div",{staticClass:"screening-drop",attrs:{id:"droper"+a},on:{drop:function(e){t.drop2(e)},dragover:function(e){t.dragover2(e)},dragleave:function(e){t.dragleave2(e)}}},[t.dragOverEleIndex2===a?i("i",{staticClass:"fa fa-arrow-right",attrs:{"aria-hidden":"true"}}):t._e()])])})],2):t._e(),t._v(" "),0!==t.contentList.length||0!==t.contentAddList.length||t.dataListLoading?t._e():i("ul",{staticClass:"have-no-data"},[t._v("\n          暂无数据\n        ")]),t._v(" "),0===t.contentList.length&&t.dataListLoading?i("ul",{staticClass:"have-no-data"},[i("v-spin",{staticStyle:{position:"relative",top:"50px"},attrs:{spinning:t.dataListLoading}})],1):t._e()])],1)]),t._v(" "),[i("v-modal",{attrs:{title:t.delTitle,visible:t.delModalVisible,"confirm-loading":t.delModalLoading},on:{ok:function(e){t.delItem()},cancel:function(e){t.cancel("删除"),t.delModalVisible=!1}}},[i("div",{staticStyle:{"text-align":"center",height:"120px","line-height":"120px"}},[t._v("\n        确认删除"+t._s(t.delTitle)+"吗？\n      ")])])]],2)},staticRenderFns:[]};var p={name:"crm-tagSettingDept",data:function(){return{screenHeight:window.innerHeight,vContentHeigth:{height:window.innerHeight-89+"px"},vContentHeigth1:{height:window.innerHeight-185-24+"px"},dragOverEleIndex:"",dragOverEleIndex2:"",groupId:0,contentId:0,dataListLoading:!1,dataList:[],dataAddList:[],contentListLoading:!1,contentList:[],contentAddList:[],editing:!1,delModalVisible:!1,delModalLoading:!1,delObj:{},delType:1,delTitle:"",addModalVisible:!1,addModalLoading:!1,departmentOptions:[],addModel:{name:"",dept:""},deptId:0,deptName:""}},created:function(){this.getDataList(),this.getDeptList()},methods:{getDataList:function(){var t=this;this.dataListLoading=!0,this.axios.post(this.serve.tagGroupList,{talkType:1}).then(function(e){var i=!0,a=!1,n=void 0;try{for(var s,o=e.data.data[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;l.hoverFlag=!1,l.editFlag=!1;var r=!0,d=!1,c=void 0;try{for(var h,p=l.tagContent[Symbol.iterator]();!(r=(h=p.next()).done);r=!0){var u=h.value;u.hoverFlag=!1,u.editFlag=!1}}catch(t){d=!0,c=t}finally{try{!r&&p.return&&p.return()}finally{if(d)throw c}}}}catch(t){a=!0,n=t}finally{try{!i&&o.return&&o.return()}finally{if(a)throw n}}t.dataListLoading=!1,t.dataList=e.data.data,t.groupId=t.dataList.length>0?t.dataList[0].id:0,t.getContentList()}).catch(function(t){return t})},getContentList:function(){if(this.groupId){var t=!0,e=!1,i=void 0;try{for(var a,n=this.dataList[Symbol.iterator]();!(t=(a=n.next()).done);t=!0){var s=a.value;this.groupId===s.id&&(this.contentList=s.tagContent)}}catch(t){e=!0,i=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw i}}}else this.contentList=[]},addItemNo:function(){this.$notification.warning({message:"提示",description:"请先添加标签分组！"})},addItem:function(t){1===t&&(this.editing||0!==this.dataAddList.length||0!==this.contentAddList.length?this.$notification.info({message:"提示",description:"请先保存未完成的标签分组！"}):(this.addModalVisible=!0,this.addModel={name:"",dept:""})),2===t&&(this.editing||0!==this.dataAddList.length||0!==this.contentAddList.length?this.$notification.info({message:"提示",description:"请先保存未完成的标签内容！"}):this.contentAddList.push({name:""}))},saveItem:function(t){var e=this;1===t&&this.axios.post(this.serve.tagGroupAdd,{talkType:1,departmentId:this.deptId,name:this.addModel.name}).then(function(t){e.dataList.push({id:t.data.data,name:e.addModel.name,tagContent:[],editFlag:!1,hoverFlag:!1,editable:!0,departmentName:e.deptName}),e.dataAddList=[],1===e.dataList.length&&(e.groupId=e.dataList[0].id),e.addModalVisible=!1,e.addModel={name:"",dept:""}}).catch(function(t){return t}),2===t&&this.axios.post(this.serve.tagContentAdd,{talkType:1,name:this.contentAddList[0].name,parentId:this.groupId}).then(function(t){e.contentList.push({id:t.data.data,name:e.contentAddList[0].name,editFlag:!1,hoverFlag:!1,editable:!0}),e.contentAddList=[]}).catch(function(t){return t})},editItemBef:function(t,e){this.editing||0!==this.dataAddList.length||0!==this.contentAddList.length?this.$notification.info({message:"提示",description:"请先保存未完成的内容！"}):(this.editing=!0,t.editFlag=!0)},editItem:function(t,e){var i=this;this.editing=!1,t.editFlag=!1,1===e&&this.axios.post(this.serve.tagGroupEdit,{id:t.id,name:t.name}).then(function(t){i.$notification.success({message:"提示",description:"修改成功！"})}).catch(function(t){return t}),2===e&&this.axios.post(this.serve.tagContentEdit,{id:t.id,name:t.name,parentId:this.groupId}).then(function(t){i.$notification.success({message:"提示",description:"修改成功！"})}).catch(function(t){return t})},delItemBef:function(t,e){1===e&&(this.delTitle="标签分组",t.tagContent.length>0)?this.$notification.warning({message:"提示",description:"请先清空分组下内容再删除分组！"}):(2===e&&(this.delTitle="标签内容"),this.delModalVisible=!0,this.delObj=t,this.delType=e)},delItem:function(){var t=this;1===this.delType&&(this.delModalLoading=!0,this.axios.post(this.serve.tagGroupDel,{id:this.delObj.id}).then(function(e){var i=[],a=!0,n=!1,s=void 0;try{for(var o,l=t.dataList[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var r=o.value;r.id!==t.delObj.id&&i.push(r)}}catch(t){n=!0,s=t}finally{try{!a&&l.return&&l.return()}finally{if(n)throw s}}t.dataList=i,t.delModalLoading=!1,t.$notification.success({message:"提示",description:"删除成功！"})}).catch(function(t){return t})),2===this.delType&&this.axios.post(this.serve.tagContentDel,{id:this.delObj.id}).then(function(e){var i=[],a=!0,n=!1,s=void 0;try{for(var o,l=t.contentList[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var r=o.value;r.id!==t.delObj.id&&i.push(r)}}catch(t){n=!0,s=t}finally{try{!a&&l.return&&l.return()}finally{if(n)throw s}}t.contentList=i,t.delModalLoading=!1}).catch(function(t){return t}),this.delModalVisible=!1},cancel:function(){this.delModalVisible=!1,this.dataAddList=[],this.contentAddList=[]},popupContainerAdd:function(){return document.getElementById("tree-select-container-add")},treeClick:function(t){var e=this;t?(this.saleList=[],this.sale="",t.has_auth?(this.deptId=t.id,this.deptName=t.name):(this.$notification.warning({message:"提示",description:"没有该部门的权限。"}),setTimeout(function(){e.$(".ant-select-selection__rendered").find("span")[0].innerHTML=""},100),this.deptId="",this.deptName="")):setTimeout(function(){var t=e.$(".ant-select-selection__rendered").find("span")[0];e.$(".ant-select-search__field__placeholder")[0].style.display="none",t.style.display="",t.innerHTML=e.deptName,e.departmentOptions=e.myTool.setSelect(e.departmentOptions,e.deptId)},10)},getDeptList:function(){var t=this,e=new URLSearchParams;this.axios.get(this.serve.deptList,e).then(function(e){t.treeData=e.data.data,t.getSelectTreeData()}).catch(function(t){return t})},getSelectTreeData:function(){var t=JSON.parse(JSON.stringify(this.treeData));this.departmentOptions=this.myTool.deepClone(t),this.getDeptItemId(this.departmentOptions)},getDeptItemId:function(t){t[0]&&!t[0].children?this.deptId=t[0].id:this.getDeptItemId(t[0].children)},drag:function(t){t.dataTransfer.setData("dragObj",t.target.id)},dragover:function(t){t.preventDefault(),"First"===t.target.id.split("drop")[1]?this.dragOverEleIndex="First":this.dragOverEleIndex=t.target.id.split("drop")[1]/1},dragleave:function(t){t.preventDefault(),this.dragOverEleIndex=""},drop:function(t){var e=this;t.preventDefault();var i=t.dataTransfer.getData("dragObj");this.adjustmentOrder(i,t.target.id),this.dragOverEleIndex="";var a=[],n=!0,s=!1,o=void 0;try{for(var l,r=this.dataList[Symbol.iterator]();!(n=(l=r.next()).done);n=!0){var d=l.value;a.push(d.id)}}catch(t){s=!0,o=t}finally{try{!n&&r.return&&r.return()}finally{if(s)throw o}}this.axios.post(this.serve.tagOrder,{id:a}).then(function(t){e.$notification.success({message:"提示",description:"顺序调整成功！"})}).catch(function(t){return t})},adjustmentOrder:function(t,e){var i=t.split("drag")[1]/1,a=e.split("drop")[1];if("First"===a)this.dataList.unshift(this.dataList[i]),this.dataList.splice(i+1,1);else if(i>(a/=1)){var n=[];n=(n=(n=(n=n.concat(this.dataList.slice(0,a+1))).concat(this.dataList.slice(i,i+1))).concat(this.dataList.slice(a+1,i))).concat(this.dataList.slice(i+1,this.dataList.length)),this.dataList=n}else if(i<a){var s=[];s=(s=(s=(s=s.concat(this.dataList.slice(0,i))).concat(this.dataList.slice(i+1,a+1))).concat(this.dataList.slice(i,i+1))).concat(this.dataList.slice(a+1,this.dataList.length)),this.dataList=s}},drag2:function(t){t.dataTransfer.setData("dragObj2",t.target.id)},dragover2:function(t){t.preventDefault(),"Firster"===t.target.id.split("droper")[1]?this.dragOverEleIndex2="Firster":this.dragOverEleIndex2=t.target.id.split("droper")[1]/1},dragleave2:function(t){t.preventDefault(),this.dragOverEleIndex2=""},drop2:function(t){var e=this;t.preventDefault();var i=t.dataTransfer.getData("dragObj2");this.adjustmentOrder2(i,t.target.id),this.dragOverEleIndex2="";var a=[],n=!0,s=!1,o=void 0;try{for(var l,r=this.contentList[Symbol.iterator]();!(n=(l=r.next()).done);n=!0){var d=l.value;a.push(d.id)}}catch(t){s=!0,o=t}finally{try{!n&&r.return&&r.return()}finally{if(s)throw o}}this.axios.post(this.serve.tagOrder,{id:a}).then(function(t){e.$notification.success({message:"提示",description:"顺序调整成功！"})}).catch(function(t){return t})},adjustmentOrder2:function(t,e){var i=t.split("drager")[1]/1,a=e.split("droper")[1];if("Firster"===a)this.contentList.unshift(this.contentList[i]),this.contentList.splice(i+1,1);else if(i>(a/=1)){var n=[];n=(n=(n=(n=n.concat(this.contentList.slice(0,a+1))).concat(this.contentList.slice(i,i+1))).concat(this.contentList.slice(a+1,i))).concat(this.contentList.slice(i+1,this.contentList.length)),this.contentList=n}else if(i<a){var s=[];s=(s=(s=(s=s.concat(this.contentList.slice(0,i))).concat(this.contentList.slice(i+1,a+1))).concat(this.contentList.slice(i,i+1))).concat(this.contentList.slice(a+1,this.contentList.length)),this.contentList=s}}},watch:{screenHeight:function(t){this.screenHeight=t,this.vContentHeigth={height:t-89+"px"},this.vContentHeigth1={height:t-185-24+"px"}}},mounted:function(){var t=this;window.onresize=function(){return t.screenHeight=window.innerHeight,t.vContentHeigth={height:window.innerHeight-89+"px"},void(t.vContentHeigth1={height:window.innerHeight-185-24+"px"})}}},u={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"setting-left"},[i("div",{staticClass:"setting-head"},[t._v("\n      标签分组\n      "),i("v-button",{staticStyle:{float:"right","margin-top":"12px"},attrs:{type:"primary"},on:{click:function(e){t.addItem(1)}}},[t._v("添加分组")])],1),t._v(" "),i("div",{staticClass:"setting-body",style:t.vContentHeigth1},[i("el-scrollbar",[!t.dataListLoading&&(t.dataAddList.length>0||t.dataList.length>0)?i("ul",{staticClass:"screening-ul"},[t._l(t.dataList,function(e,a){return i("li",{key:e.id},[0===a?i("div",{staticClass:"screening-drop",attrs:{id:"dropFirst"},on:{drop:function(e){t.drop(e)},dragover:function(e){t.dragover(e)},dragleave:function(e){t.dragleave(e)}}},["First"===t.dragOverEleIndex?i("i",{staticClass:"fa fa-arrow-right",attrs:{"aria-hidden":"true"}}):t._e()]):t._e(),t._v(" "),i("div",{staticClass:"screening-drag",class:{"li-select":e.id===t.groupId},attrs:{draggable:"true",id:"drag"+a},on:{dragstart:function(e){t.drag(e)},mouseover:function(t){e.hoverFlag=!0},mouseout:function(t){e.hoverFlag=!1}}},[i("span",{staticClass:"screening-name",on:{click:function(i){t.groupId=e.id,t.getContentList()}}},[e.editFlag?i("v-input",{attrs:{maxlength:"15"},model:{value:e.name,callback:function(i){t.$set(e,"name",i)},expression:"item.name"}}):t._e(),t._v(" "),e.editFlag?t._e():[t._v(t._s(e.name)+" (所属部门:"+t._s(e.departmentName)+")")]],2),t._v(" "),e.editFlag?i("span",{staticClass:"screening-bars-btn"},[i("v-button",{staticStyle:{height:"33px",padding:"0",width:"80%"},on:{click:function(i){e.editFlag=!1,t.editing=!1}}},[t._v("取消")])],1):t._e(),t._v(" "),e.editFlag?i("span",{staticClass:"screening-bars-btn"},[i("v-button",{staticStyle:{height:"33px",padding:"0",width:"80%"},attrs:{type:"primary"},on:{click:function(i){t.editItem(e,1)}}},[t._v("保存")])],1):t._e(),t._v(" "),e.editFlag?t._e():i("span",{staticClass:"screening-bars",attrs:{title:"按住拖动"}},[i("i",{staticClass:"fa fa-bars",attrs:{"aria-hidden":"true"}})]),t._v(" "),!e.editFlag&&e.editable?i("span",{directives:[{name:"show",rawName:"v-show",value:e.hoverFlag,expression:"item.hoverFlag"}],staticClass:"screening-bars",attrs:{title:"删除"},on:{click:function(i){t.delItemBef(e,1)}}},[i("i",{staticClass:"fa fa-trash-o",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),!e.editFlag&&e.editable?i("span",{directives:[{name:"show",rawName:"v-show",value:e.hoverFlag,expression:"item.hoverFlag"}],staticClass:"screening-bars",attrs:{title:"编辑"},on:{click:function(i){t.editItemBef(e,1)}}},[i("i",{staticClass:"fa fa-pencil",attrs:{"aria-hidden":"true"}})]):t._e()]),t._v(" "),i("div",{staticClass:"screening-drop",attrs:{id:"drop"+a},on:{drop:function(e){t.drop(e)},dragover:function(e){t.dragover(e)},dragleave:function(e){t.dragleave(e)}}},[t.dragOverEleIndex===a?i("i",{staticClass:"fa fa-arrow-right",attrs:{"aria-hidden":"true"}}):t._e()])])}),t._v(" "),t._l(t.dataAddList,function(e){return t.dataAddList.length>0?i("li",{key:e.id},[i("div",{staticClass:"screening-drag"},[i("span",{staticClass:"screening-name"},[i("v-input",{attrs:{maxlength:"15"},model:{value:e.name,callback:function(i){t.$set(e,"name",i)},expression:"item.name"}})],1),t._v(" "),i("span",{staticClass:"screening-bars-btn"},[i("v-button",{staticStyle:{height:"33px",padding:"0",width:"80%"},on:{click:function(e){t.cancel()}}},[t._v("取消")])],1),t._v(" "),i("span",{staticClass:"screening-bars-btn"},[i("v-button",{staticStyle:{height:"33px",padding:"0",width:"80%"},attrs:{type:"primary"},on:{click:function(e){t.saveItem(1)}}},[t._v("保存")])],1)])]):t._e()})],2):t._e(),t._v(" "),0!==t.dataList.length||0!==t.dataAddList.length||t.dataListLoading?t._e():i("ul",{staticClass:"have-no-data"},[t._v("\n          暂无数据\n        ")]),t._v(" "),0===t.dataList.length&&t.dataListLoading?i("ul",{staticClass:"have-no-data"},[i("v-spin",{staticStyle:{position:"relative",top:"50px"},attrs:{spinning:t.dataListLoading}})],1):t._e()])],1)]),t._v(" "),i("div",{staticClass:"setting-right"},[i("div",{staticClass:"setting-head"},[t._v("\n      标签内容\n      "),0===t.dataList.length?i("v-button",{staticStyle:{float:"right","margin-top":"12px",height:"33px",padding:"0 27px"},on:{click:function(e){t.addItemNo()}}},[t._v("添加标签")]):t._e(),t._v(" "),t.dataList.length>0?i("v-button",{staticStyle:{float:"right","margin-top":"12px"},attrs:{type:"primary"},on:{click:function(e){t.addItem(2)}}},[t._v("添加标签")]):t._e()],1),t._v(" "),i("div",{staticClass:"setting-body",style:t.vContentHeigth1},[i("el-scrollbar",[(t.contentList.length>0||t.contentAddList.length>0)&&!t.dataListLoading?i("ul",{staticClass:"screening-ul"},[t._l(t.contentList,function(e,a){return i("li",{key:e.id},[0===a?i("div",{staticClass:"screening-drop",attrs:{id:"droperFirster"},on:{drop:function(e){t.drop2(e)},dragover:function(e){t.dragover2(e)},dragleave:function(e){t.dragleave2(e)}}},["Firster"===t.dragOverEleIndex2?i("i",{staticClass:"fa fa-arrow-right",attrs:{"aria-hidden":"true"}}):t._e()]):t._e(),t._v(" "),i("div",{staticClass:"screening-drag",attrs:{draggable:"true",id:"drager"+a},on:{dragstart:function(e){t.drag2(e)},mouseover:function(t){e.hoverFlag=!0},mouseout:function(t){e.hoverFlag=!1}}},[i("span",{staticClass:"screening-name"},[e.editFlag?i("v-input",{attrs:{maxlength:"15"},model:{value:e.name,callback:function(i){t.$set(e,"name",i)},expression:"item.name"}}):t._e(),t._v(" "),e.editFlag?t._e():[t._v(t._s(e.name))]],2),t._v(" "),e.editFlag?i("span",{staticClass:"screening-bars-btn"},[i("v-button",{staticStyle:{height:"33px",padding:"0",width:"80%"},on:{click:function(i){e.editFlag=!1,t.editing=!1}}},[t._v("取消")])],1):t._e(),t._v(" "),e.editFlag?i("span",{staticClass:"screening-bars-btn"},[i("v-button",{staticStyle:{height:"33px",padding:"0",width:"80%"},attrs:{type:"primary"},on:{click:function(i){t.editItem(e,2)}}},[t._v("保存")])],1):t._e(),t._v(" "),e.editFlag?t._e():i("span",{staticClass:"screening-bars",attrs:{title:"按住拖动"}},[i("i",{staticClass:"fa fa-bars",attrs:{"aria-hidden":"true"}})]),t._v(" "),!e.editFlag&&e.editable?i("span",{directives:[{name:"show",rawName:"v-show",value:e.hoverFlag,expression:"item.hoverFlag"}],staticClass:"screening-bars",attrs:{title:"删除"},on:{click:function(i){t.delItemBef(e,2)}}},[i("i",{staticClass:"fa fa-trash-o",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),!e.editFlag&&e.editable?i("span",{directives:[{name:"show",rawName:"v-show",value:e.hoverFlag,expression:"item.hoverFlag"}],staticClass:"screening-bars",attrs:{title:"编辑"},on:{click:function(i){t.editItemBef(e,2)}}},[i("i",{staticClass:"fa fa-pencil",attrs:{"aria-hidden":"true"}})]):t._e()]),t._v(" "),i("div",{staticClass:"screening-drop",attrs:{id:"droper"+a},on:{drop:function(e){t.drop2(e)},dragover:function(e){t.dragover2(e)},dragleave:function(e){t.dragleave2(e)}}},[t.dragOverEleIndex2===a?i("i",{staticClass:"fa fa-arrow-right",attrs:{"aria-hidden":"true"}}):t._e()])])}),t._v(" "),t._l(t.contentAddList,function(e){return t.contentAddList.length>0?i("li",{key:e.id},[i("div",{staticClass:"screening-drag"},[i("span",{staticClass:"screening-name"},[i("v-input",{attrs:{maxlength:"15"},model:{value:e.name,callback:function(i){t.$set(e,"name",i)},expression:"item.name"}})],1),t._v(" "),i("span",{staticClass:"screening-bars-btn"},[i("v-button",{staticStyle:{height:"33px",padding:"0",width:"80%"},on:{click:function(e){t.cancel()}}},[t._v("取消")])],1),t._v(" "),i("span",{staticClass:"screening-bars-btn"},[i("v-button",{staticStyle:{height:"33px",padding:"0",width:"80%"},attrs:{type:"primary"},on:{click:function(e){t.saveItem(2)}}},[t._v("保存")])],1)])]):t._e()})],2):t._e(),t._v(" "),0!==t.contentList.length||0!==t.contentAddList.length||t.dataListLoading?t._e():i("ul",{staticClass:"have-no-data"},[t._v("\n          暂无数据\n        ")]),t._v(" "),0===t.contentList.length&&t.dataListLoading?i("ul",{staticClass:"have-no-data"},[i("v-spin",{staticStyle:{position:"relative",top:"50px"},attrs:{spinning:t.dataListLoading}})],1):t._e()])],1)]),t._v(" "),[i("v-modal",{attrs:{title:"添加分组",visible:t.addModalVisible,"confirm-loading":t.addModalLoading},on:{ok:function(e){t.saveItem(1)},cancel:function(e){t.cancel("添加"),t.addModalVisible=!1}}},[i("div",{staticStyle:{"text-align":"center",height:"120px"}},[i("div",{staticClass:"modal-container",staticStyle:{"margin-top":"15px"}},[i("span",{staticClass:"modal-span"},[t._v("       部门")]),t._v(" "),i("v-tree-select",{staticClass:"modal-input",staticStyle:{width:"232px","text-align":"left",height:"auto"},attrs:{data:t.departmentOptions,"popup-container":t.popupContainerAdd,allowClear:!1,placeholder:"请选择部门"},on:{select:t.treeClick},model:{value:t.addModel.dept,callback:function(e){t.$set(t.addModel,"dept",e)},expression:"addModel.dept"}}),t._v(" "),i("div",{staticStyle:{position:"relative","margin-left":"155px"},attrs:{id:"tree-select-container-add"}})],1),t._v(" "),i("div",{staticClass:"modal-container",staticStyle:{"margin-top":"30px"}},[i("span",{staticClass:"modal-span"},[t._v("分组名称")]),t._v(" "),i("v-input",{staticStyle:{width:"232px"},attrs:{placeholder:"输入分组名称",maxlength:"15"},model:{value:t.addModel.name,callback:function(e){t.$set(t.addModel,"name",e)},expression:"addModel.name"}})],1)])])],t._v(" "),[i("v-modal",{attrs:{title:t.delTitle,visible:t.delModalVisible,"confirm-loading":t.delModalLoading},on:{ok:function(e){t.delItem()},cancel:function(e){t.cancel("删除"),t.delModalVisible=!1}}},[i("div",{staticStyle:{"text-align":"center",height:"120px","line-height":"120px"}},[t._v("\n        确认删除"+t._s(t.delTitle)+"吗？\n      ")])])]],2)},staticRenderFns:[]};var v={name:"crm-tagSetting",components:{TagSettingAll:i("VU/8")(c,h,!1,function(t){i("gUvX")},"data-v-f7f95a98",null).exports,TagSettingDept:i("VU/8")(p,u,!1,function(t){i("T2Nq")},"data-v-40e86b0c",null).exports},data:function(){return{screenHeight:window.innerHeight,vContentHeigth:{height:window.innerHeight-89+"px"},vContentHeigth1:{height:window.innerHeight-185+"px"},activeBtn:1,deptShow:!1}},created:function(){},methods:{},watch:{screenHeight:function(t){this.screenHeight=t,this.vContentHeigth={height:t-89+"px"},this.vContentHeigth1={height:t-185+"px"}}},mounted:function(){var t=this;window.onresize=function(){return t.screenHeight=window.innerHeight,t.vContentHeigth={height:window.innerHeight-89+"px"},void(t.vContentHeigth1={height:window.innerHeight-185+"px"})}}},g={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tag-setting-container crm-drg-drop",style:this.vContentHeigth},[e("tag-setting-all",{directives:[{name:"show",rawName:"v-show",value:1===this.activeBtn,expression:"activeBtn === 1"}]}),this._v(" "),this.deptShow?e("tag-setting-dept",{directives:[{name:"show",rawName:"v-show",value:2===this.activeBtn,expression:"activeBtn === 2"}]}):this._e()],1)},staticRenderFns:[]};var m=i("VU/8")(v,g,!1,function(t){i("qW/z")},"data-v-5042fc44",null).exports,f={name:"crm-speechSettingAll",data:function(){return{screenHeight:window.innerHeight,vContentHeigth:{height:window.innerHeight-89+"px"},vContentHeigth1:{height:window.innerHeight-185-24+"px"},activeBtn:1,dragOverEleIndex:"",dragOverEleIndex2:"",groupId:0,contentId:0,dataListLoading:!1,dataList:[],dataAddList:[],contentListLoading:!1,contentList:[],editing:!1,delModalVisible:!1,delModalLoading:!1,delObj:{},delType:1,delTitle:"",addModalVisible:!1,addModalLoading:!1,addModalTitle:"添加话术",typeOptions:[{value:1,label:"文本"},{value:2,label:"链接"},{value:3,label:"图片"},{value:4,label:"文件"}],addModal:{type:1,title:"",content:"",url:"",fileUrl:"",fileName:""},name:"file",action:"/smf/crm/ossUpload",defaultFileList:[],editObj:{}}},created:function(){this.getDataList()},methods:{getDataList:function(){var t=this;this.dataListLoading=!0,this.axios.post(this.serve.talkGroupList,{talkType:0,salesId:""}).then(function(e){var i=!0,a=!1,n=void 0;try{for(var s,o=e.data.data[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;l.hoverFlag=!1,l.editFlag=!1;var r=!0,d=!1,c=void 0;try{for(var h,p=l.dialogPolicys[Symbol.iterator]();!(r=(h=p.next()).done);r=!0){var u=h.value;u.hoverFlag=!1,u.editFlag=!1}}catch(t){d=!0,c=t}finally{try{!r&&p.return&&p.return()}finally{if(d)throw c}}}}catch(t){a=!0,n=t}finally{try{!i&&o.return&&o.return()}finally{if(a)throw n}}t.dataListLoading=!1,t.dataList=e.data.data,t.groupId=t.dataList.length>0?t.dataList[0].id:0,t.getContentList()}).catch(function(t){return t})},getContentList:function(){if(this.groupId){var t=!0,e=!1,i=void 0;try{for(var a,n=this.dataList[Symbol.iterator]();!(t=(a=n.next()).done);t=!0){var s=a.value;this.groupId===s.id&&(this.contentList=s.dialogPolicys)}}catch(t){e=!0,i=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw i}}}else this.contentList=[]},onChange:function(t){this.defaultFileList=[],this.defaultFileList.push(t.file),"uploading"!==t.file.status&&(this.editing=!0),"done"===t.file.status?(this.editing=!0,this.addModal.fileUrl=t.file.response.data.url,this.addModal.fileName=t.file.name,console.log(t)):"error"===t.file.status&&(this.editing=!1,this.defaultFileList=[])},addItemNo:function(){this.$notification.warning({message:"提示",description:"请先添加话术分组！"})},addItem:function(t){1===t&&(this.editing||0!==this.dataAddList.length?this.$notification.info({message:"提示",description:"请先保存未完成的话术分组！"}):this.dataAddList.push({name:""})),2===t&&(this.editing||0!==this.dataAddList.length?this.$notification.info({message:"提示",description:"请先保存未完成的话术内容！"}):(this.defaultFileList=[],this.addModalTitle="添加话术",this.addModalVisible=!0,this.addModal={type:1,title:"",content:"",url:"",fileUrl:"",fileName:""}))},saveItem:function(t){var e=this;if(1===t&&(this.dataAddList[0].name?this.axios.post(this.serve.talkGroupAdd,{talkType:0,departmentId:"",name:this.dataAddList[0].name}).then(function(t){e.dataList.unshift({id:t.data.data,name:e.dataAddList[0].name,dialogPolicys:[],editFlag:!1,hoverFlag:!1,editable:!0}),e.dataAddList=[],1===e.dataList.length&&(e.groupId=e.dataList[0].id)}).catch(function(t){return t}):this.$notification.warning({message:"提示",description:"请确保信息填写完整"})),2===t&&"添加话术"===this.addModalTitle)if(1===this.addModal.type&&this.addModal.content.length>0||2===this.addModal.type&&this.addModal.title.length>0&&this.addModal.content.length>0&&this.addModal.url.length>0&&this.addModal.fileUrl.length>0||3===this.addModal.type&&this.addModal.fileUrl.length>0||4===this.addModal.type&&this.addModal.fileUrl.length>0){this.editing=!1,this.addModalVisible=!1;var i={talkType:0,parentId:this.groupId,type:this.addModal.type,title:this.addModal.title,content:this.addModal.content,url:this.addModal.url,fileName:this.addModal.fileName,fileUrl:this.addModal.fileUrl};this.axios.post(this.serve.talkContentAdd,i).then(function(t){i.id=t.data.data,i.hoverFlag=!1,i.editFlag=!1,i.editable=!0,e.contentList.unshift(i)}).catch(function(t){return t})}else this.$notification.warning({message:"提示",description:"请确保信息填写完整"});2===t&&"编辑话术"===this.addModalTitle&&(1===this.addModal.type&&this.addModal.content.length>0||2===this.addModal.type&&this.addModal.title.length>0&&this.addModal.content.length>0&&this.addModal.url.length>0&&this.addModal.fileUrl.length>0||3===this.addModal.type&&this.addModal.fileUrl.length>0||4===this.addModal.type&&this.addModal.fileUrl.length>0?(this.editing=!1,this.addModalVisible=!1,this.axios.post(this.serve.talkContentEdit,this.addModal).then(function(t){e.$notification.success({message:"提示",description:"修改成功！"})}).catch(function(t){return t})):this.$notification.warning({message:"提示",description:"请确保信息填写完整"}))},editItemBef:function(t,e){this.editing||0!==this.dataAddList.length?this.$notification.info({message:"提示",description:"请先保存未完成的内容！"}):(this.editing=!0,2===e?(this.addModalTitle="编辑话术",this.addModalVisible=!0,this.addModal=t,this.editObj=JSON.parse(JSON.stringify(t))):(this.editObj.name=t.name,t.editFlag=!0))},editItem:function(t,e){var i=this;1===e&&(t.name?(this.editing=!1,t.editFlag=!1,this.axios.post(this.serve.talkGroupEdit,{talkType:0,id:t.id,name:t.name}).then(function(t){i.$notification.success({message:"提示",description:"修改成功！"})}).catch(function(t){return t})):this.$notification.info({message:"提示",description:"请先保存未完成的内容！"}))},delItemBef:function(t,e){1===e&&(this.delTitle="标签分组",t.dialogPolicys.length>0)?this.$notification.warning({message:"提示",description:"请先清空分组下内容再删除分组！"}):(2===e&&(this.delTitle="话术内容"),this.delModalVisible=!0,this.delObj=t,this.delType=e)},delItem:function(){var t=this;1===this.delType&&(this.delModalLoading=!0,this.axios.post(this.serve.talkGroupDel,{talkType:0,id:this.delObj.id}).then(function(e){var i=[],a=!0,n=!1,s=void 0;try{for(var o,l=t.dataList[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var r=o.value;r.id!==t.delObj.id&&i.push(r)}}catch(t){n=!0,s=t}finally{try{!a&&l.return&&l.return()}finally{if(n)throw s}}t.dataList=i,t.delModalLoading=!1}).catch(function(t){return t})),2===this.delType&&(this.delModalLoading=!0,this.axios.post(this.serve.talkContentDel,{talkType:0,id:this.delObj.id}).then(function(e){var i=[],a=!0,n=!1,s=void 0;try{for(var o,l=t.contentList[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var r=o.value;r.id!==t.delObj.id&&i.push(r)}}catch(t){n=!0,s=t}finally{try{!a&&l.return&&l.return()}finally{if(n)throw s}}t.contentList=i,t.delModalLoading=!1;var d=!0,c=!1,h=void 0;try{for(var p,u=t.dataList[Symbol.iterator]();!(d=(p=u.next()).done);d=!0){var v=p.value;v.id===t.groupId&&(v.dialogPolicys=t.contentList)}}catch(t){c=!0,h=t}finally{try{!d&&u.return&&u.return()}finally{if(c)throw h}}}).catch(function(t){return t})),this.delModalVisible=!1},cancel:function(t){if(this.delModalVisible=!1,this.dataAddList=[],"add"===t){var e=!0,i=!1,a=void 0;try{for(var n,s=this.contentList[Symbol.iterator]();!(e=(n=s.next()).done);e=!0){var o=n.value;o.id===this.editObj.id&&(o.type=this.editObj.type,o.title=this.editObj.title,o.content=this.editObj.content,o.url=this.editObj.url,o.fileUrl=this.editObj.fileUrl,o.fileName=this.editObj.fileName)}}catch(t){i=!0,a=t}finally{try{!e&&s.return&&s.return()}finally{if(i)throw a}}}},addModalTypeChange:function(){this.addModal.fileName="",this.addModal.fileUrl=""},drag:function(t){t.dataTransfer.setData("dragObj",t.target.id)},dragover:function(t){t.preventDefault(),"First"===t.target.id.split("drop")[1]?this.dragOverEleIndex="First":this.dragOverEleIndex=t.target.id.split("drop")[1]/1},dragleave:function(t){t.preventDefault(),this.dragOverEleIndex=""},drop:function(t){var e=this;t.preventDefault();var i=t.dataTransfer.getData("dragObj");this.adjustmentOrder(i,t.target.id),this.dragOverEleIndex="",console.log(i),console.log(t);var a=[],n=!0,s=!1,o=void 0;try{for(var l,r=this.dataList[Symbol.iterator]();!(n=(l=r.next()).done);n=!0){var d=l.value;a.push(d.id)}}catch(t){s=!0,o=t}finally{try{!n&&r.return&&r.return()}finally{if(s)throw o}}this.axios.post(this.serve.talkOrder,{talkType:0,id:a}).then(function(t){e.$notification.success({message:"提示",description:"顺序调整成功！"})}).catch(function(t){return t})},adjustmentOrder:function(t,e){var i=t.split("drag")[1]/1,a=e.split("drop")[1];if("First"===a)this.dataList.unshift(this.dataList[i]),this.dataList.splice(i+1,1);else if(i>(a/=1)){var n=[];n=(n=(n=(n=n.concat(this.dataList.slice(0,a+1))).concat(this.dataList.slice(i,i+1))).concat(this.dataList.slice(a+1,i))).concat(this.dataList.slice(i+1,this.dataList.length)),this.dataList=n}else if(i<a){var s=[];s=(s=(s=(s=s.concat(this.dataList.slice(0,i))).concat(this.dataList.slice(i+1,a+1))).concat(this.dataList.slice(i,i+1))).concat(this.dataList.slice(a+1,this.dataList.length)),this.dataList=s}},drag2:function(t){t.dataTransfer.setData("dragObj2",t.target.id)},dragover2:function(t){t.preventDefault(),"Firster"===t.target.id.split("droper")[1]?this.dragOverEleIndex2="Firster":this.dragOverEleIndex2=t.target.id.split("droper")[1]/1},dragleave2:function(t){t.preventDefault(),this.dragOverEleIndex2=""},drop2:function(t){t.preventDefault();var e=t.dataTransfer.getData("dragObj2");this.adjustmentOrder2(e,t.target.id),this.dragOverEleIndex2="",console.log(e),console.log(t)},adjustmentOrder2:function(t,e){var i=t.split("drager")[1]/1,a=e.split("droper")[1];if("Firster"===a)this.contentList.unshift(this.contentList[i]),this.contentList.splice(i+1,1);else if(i>(a/=1)){var n=[];n=(n=(n=(n=n.concat(this.contentList.slice(0,a+1))).concat(this.contentList.slice(i,i+1))).concat(this.contentList.slice(a+1,i))).concat(this.contentList.slice(i+1,this.contentList.length)),this.contentList=n}else if(i<a){var s=[];s=(s=(s=(s=s.concat(this.contentList.slice(0,i))).concat(this.contentList.slice(i+1,a+1))).concat(this.contentList.slice(i,i+1))).concat(this.contentList.slice(a+1,this.contentList.length)),this.contentList=s}}},watch:{screenHeight:function(t){this.screenHeight=t,this.vContentHeigth={height:t-89+"px"},this.vContentHeigth1={height:t-185-23+"px"}}},mounted:function(){var t=this;window.onresize=function(){return t.screenHeight=window.innerHeight,t.vContentHeigth={height:window.innerHeight-89+"px"},void(t.vContentHeigth1={height:window.innerHeight-185-24+"px"})}}},y={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"setting-left"},[i("div",{staticClass:"setting-head"},[t._v("\n      话术分组\n      "),t.$store.state.power.includes("d")?i("v-button",{staticStyle:{float:"right","margin-top":"12px"},attrs:{type:"primary"},on:{click:function(e){t.addItem(1)}}},[t._v("添加分组")]):t._e()],1),t._v(" "),i("div",{staticClass:"setting-body",style:t.vContentHeigth1},[i("el-scrollbar",[!t.dataListLoading&&(t.dataAddList.length>0||t.dataList.length>0)?i("ul",{staticClass:"screening-ul"},[t._l(t.dataAddList,function(e){return t.dataAddList.length>0?i("li",{key:e.id,staticStyle:{"margin-top":"20px"}},[i("div",{staticClass:"screening-drag"},[i("span",{staticClass:"screening-name"},[i("v-input",{attrs:{maxlength:"15"},nativeOn:{keyup:function(t){e.name=e.name.replace(/[\s]/g,"")}},model:{value:e.name,callback:function(i){t.$set(e,"name",i)},expression:"item.name"}})],1),t._v(" "),i("span",{staticClass:"screening-bars-btn"},[i("v-button",{staticStyle:{height:"33px",padding:"0",width:"80%"},on:{click:function(e){t.cancel()}}},[t._v("取消")])],1),t._v(" "),i("span",{staticClass:"screening-bars-btn"},[i("v-button",{staticStyle:{height:"33px",padding:"0",width:"80%"},attrs:{type:"primary"},on:{click:function(e){t.saveItem(1)}}},[t._v("保存")])],1)])]):t._e()}),t._v(" "),t._l(t.dataList,function(e,a){return i("li",{key:e.id},[0===a?i("div",{staticClass:"screening-drop",attrs:{id:"dropFirst"},on:{drop:function(e){t.drop(e)},dragover:function(e){t.dragover(e)},dragleave:function(e){t.dragleave(e)}}},["First"===t.dragOverEleIndex?i("i",{staticClass:"fa fa-arrow-right",attrs:{"aria-hidden":"true"}}):t._e()]):t._e(),t._v(" "),i("div",{staticClass:"screening-drag",class:{"li-select":e.id===t.groupId},attrs:{draggable:"true",id:"drag"+a},on:{dragstart:function(e){t.drag(e)},mouseover:function(t){e.hoverFlag=!0},mouseout:function(t){e.hoverFlag=!1}}},[i("span",{staticClass:"screening-name",on:{click:function(i){t.groupId=e.id,t.getContentList()}}},[e.editFlag?i("v-input",{attrs:{maxlength:"15"},nativeOn:{keyup:function(t){e.name=e.name.replace(/[\s]/g,"")}},model:{value:e.name,callback:function(i){t.$set(e,"name",i)},expression:"item.name"}}):t._e(),t._v(" "),e.editFlag?t._e():[t._v(t._s(e.name))]],2),t._v(" "),e.editFlag?i("span",{staticClass:"screening-bars-btn"},[i("v-button",{staticStyle:{height:"33px",padding:"0",width:"80%"},on:{click:function(i){e.name=t.editObj.name,e.editFlag=!1,t.editing=!1}}},[t._v("取消")])],1):t._e(),t._v(" "),e.editFlag?i("span",{staticClass:"screening-bars-btn"},[i("v-button",{staticStyle:{height:"33px",padding:"0",width:"80%"},attrs:{type:"primary"},on:{click:function(i){t.editItem(e,1)}}},[t._v("保存")])],1):t._e(),t._v(" "),e.editFlag?t._e():i("span",{staticClass:"screening-bars",attrs:{title:"按住拖动"}},[i("i",{staticClass:"fa fa-bars",attrs:{"aria-hidden":"true"}})]),t._v(" "),!e.editFlag&&t.$store.state.power.includes("d")?i("span",{directives:[{name:"show",rawName:"v-show",value:e.hoverFlag,expression:"item.hoverFlag"}],staticClass:"screening-bars",attrs:{title:"删除"},on:{click:function(i){t.delItemBef(e,1)}}},[i("i",{staticClass:"fa fa-trash-o",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),!e.editFlag&&t.$store.state.power.includes("d")?i("span",{directives:[{name:"show",rawName:"v-show",value:e.hoverFlag,expression:"item.hoverFlag"}],staticClass:"screening-bars",attrs:{title:"编辑"},on:{click:function(i){t.editItemBef(e,1)}}},[i("i",{staticClass:"fa fa-pencil",attrs:{"aria-hidden":"true"}})]):t._e()]),t._v(" "),i("div",{staticClass:"screening-drop",attrs:{id:"drop"+a},on:{drop:function(e){t.drop(e)},dragover:function(e){t.dragover(e)},dragleave:function(e){t.dragleave(e)}}},[t.dragOverEleIndex===a?i("i",{staticClass:"fa fa-arrow-right",attrs:{"aria-hidden":"true"}}):t._e()])])})],2):t._e(),t._v(" "),0!==t.dataList.length||0!==t.dataAddList.length||t.dataListLoading?t._e():i("ul",{staticClass:"have-no-data"},[t._v("\n          暂无数据\n        ")]),t._v(" "),0===t.dataList.length&&t.dataListLoading?i("ul",{staticClass:"have-no-data"},[i("v-spin",{staticStyle:{position:"relative",top:"50px"},attrs:{spinning:t.dataListLoading}})],1):t._e()])],1)]),t._v(" "),i("div",{staticClass:"setting-right"},[i("div",{staticClass:"setting-head"},[t._v("\n      话术内容\n      "),0===t.dataList.length&&t.$store.state.power.includes("d")?i("v-button",{staticStyle:{float:"right","margin-top":"12px",padding:"0 27px",height:"33px"},on:{click:function(e){t.addItemNo()}}},[t._v("添加话术")]):t._e(),t._v(" "),t.dataList.length>0&&t.$store.state.power.includes("d")?i("v-button",{staticStyle:{float:"right","margin-top":"12px"},attrs:{type:"primary"},on:{click:function(e){t.addItem(2)}}},[t._v("添加话术")]):t._e()],1),t._v(" "),i("div",{staticClass:"setting-body",style:t.vContentHeigth1},[i("el-scrollbar",[!t.dataListLoading&&t.contentList.length>0?i("ul",{staticClass:"screening-ul"},t._l(t.contentList,function(e,a){return i("li",{key:e.id},[0===a?i("div",{staticClass:"screening-drop",attrs:{id:"droperFirster"},on:{drop:function(e){t.drop2(e)},dragover:function(e){t.dragover2(e)},dragleave:function(e){t.dragleave2(e)}}},["Firster"===t.dragOverEleIndex2?i("i",{staticClass:"fa fa-arrow-right",attrs:{"aria-hidden":"true"}}):t._e()]):t._e(),t._v(" "),i("div",{staticClass:"screening-drag",staticStyle:{"line-height":"42px",height:"auto","min-height":"42px"},attrs:{draggable:"true",id:"drager"+a},on:{dragstart:function(e){t.drag2(e)},mouseover:function(t){e.hoverFlag=!0},mouseout:function(t){e.hoverFlag=!1}}},[i("span",{staticClass:"screening-name",staticStyle:{cursor:"default",overflow:"hidden",display:"inline-flex"}},[1===e.type?[t._v(t._s(e.content))]:t._e(),t._v(" "),2===e.type?[i("div",{staticClass:"clearfix",staticStyle:{position:"relative",width:"100%"}},[i("div",{staticStyle:{float:"left",width:"55%","margin-right":"5%"}},[i("p",{staticStyle:{height:"42px",overflow:"hidden"},attrs:{title:e.title}},[t._v("标题: "+t._s(e.title))]),t._v(" "),i("p",{staticStyle:{height:"42px",overflow:"hidden"},attrs:{title:e.url}},[t._v("链接: "),i("a",{staticStyle:{"word-break":"break-all"},attrs:{href:e.url,target:"_blank"}},[t._v(t._s(e.url))])]),t._v(" "),i("p",{staticStyle:{"line-height":"24px"}},[t._v("简介: "+t._s(e.content))])]),t._v(" "),i("div",{staticStyle:{width:"40%",position:"absolute",top:"50%",right:"0",transform:"translate(0, -50%)"}},[i("img",{staticStyle:{"max-height":"84px","max-width":"100%","margin-top":"10px"},attrs:{src:e.fileUrl}})])])]:t._e(),t._v(" "),3===e.type?[i("img",{staticStyle:{height:"84px","max-width":"100%","margin-top":"10px"},attrs:{src:e.fileUrl}})]:t._e(),t._v(" "),4===e.type?[i("i",{staticClass:"fa fa-file-text-o",staticStyle:{"font-size":"42px","margin-top":"10px","margin-right":"15px",color:"#4394F7"},attrs:{"aria-hidden":"true"}}),t._v(t._s(e.fileName))]:t._e()],2),t._v(" "),i("span",{staticClass:"screening-bars",attrs:{title:"按住拖动"}},[i("i",{staticClass:"fa fa-bars",attrs:{"aria-hidden":"true"}})]),t._v(" "),t.$store.state.power.includes("d")?i("span",{directives:[{name:"show",rawName:"v-show",value:e.hoverFlag,expression:"item.hoverFlag"}],staticClass:"screening-bars",attrs:{title:"删除"},on:{click:function(i){t.delItemBef(e,2)}}},[i("i",{staticClass:"fa fa-trash-o",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),t.$store.state.power.includes("d")?i("span",{directives:[{name:"show",rawName:"v-show",value:e.hoverFlag,expression:"item.hoverFlag"}],staticClass:"screening-bars",attrs:{title:"编辑"},on:{click:function(i){t.editItemBef(e,2)}}},[i("i",{staticClass:"fa fa-pencil",attrs:{"aria-hidden":"true"}})]):t._e()]),t._v(" "),i("div",{staticClass:"screening-drop",attrs:{id:"droper"+a},on:{drop:function(e){t.drop2(e)},dragover:function(e){t.dragover2(e)},dragleave:function(e){t.dragleave2(e)}}},[t.dragOverEleIndex2===a?i("i",{staticClass:"fa fa-arrow-right",attrs:{"aria-hidden":"true"}}):t._e()])])})):t._e(),t._v(" "),0!==t.contentList.length||t.dataListLoading?t._e():i("ul",{staticClass:"have-no-data"},[t._v("\n          暂无数据\n        ")]),t._v(" "),0===t.contentList.length&&t.dataListLoading?i("ul",{staticClass:"have-no-data"},[i("v-spin",{staticStyle:{position:"relative",top:"50px"},attrs:{spinning:t.dataListLoading}})],1):t._e()])],1)]),t._v(" "),[i("v-modal",{attrs:{title:t.addModalTitle,visible:t.addModalVisible,"confirm-loading":t.addModalLoading},on:{ok:function(e){t.saveItem(2)},cancel:function(e){t.cancel("add"),t.addModalVisible=!1,t.editing=!1}}},[i("div",[i("div",{staticStyle:{"margin-bottom":"10px"}},[i("v-select",{staticStyle:{width:"100%"},attrs:{data:t.typeOptions,allowClear:!1,disabled:t.editing},model:{value:t.addModal.type,callback:function(e){t.$set(t.addModal,"type",e)},expression:"addModal.type"}})],1),t._v(" "),1===t.addModal.type?i("div",[i("v-input",{staticStyle:{width:"100%",resize:"none",height:"240px"},attrs:{type:"textarea",maxlength:"500",placeholder:"输入回复内容"},nativeOn:{keyup:function(e){t.addModal.content=t.addModal.content.replace(/[\s]/g,"")}},model:{value:t.addModal.content,callback:function(e){t.$set(t.addModal,"content",e)},expression:"addModal.content"}})],1):t._e(),t._v(" "),2===t.addModal.type?i("div",{staticClass:"clearfix",staticStyle:{width:"100%",height:"240px"}},[i("div",{staticStyle:{float:"left",width:"60%"}},[i("v-input",{staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{maxlength:"20",placeholder:"输入标题（必填，20字以内）"},nativeOn:{keyup:function(e){t.addModal.title=t.addModal.title.replace(/[\s]/g,"")}},model:{value:t.addModal.title,callback:function(e){t.$set(t.addModal,"title",e)},expression:"addModal.title"}}),t._v(" "),i("v-input",{staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{placeholder:"输入链接地址（必填）"},nativeOn:{keyup:function(e){t.addModal.url=t.addModal.url.replace(/[\s]/g,"")}},model:{value:t.addModal.url,callback:function(e){t.$set(t.addModal,"url",e)},expression:"addModal.url"}}),t._v(" "),i("v-input",{staticStyle:{width:"100%",resize:"none",height:"140px"},attrs:{type:"textarea",placeholder:"输入内容简介（选填，30字以内）",maxlength:"30"},nativeOn:{keyup:function(e){t.addModal.content=t.addModal.content.replace(/[\s]/g,"")}},model:{value:t.addModal.content,callback:function(e){t.$set(t.addModal,"content",e)},expression:"addModal.content"}})],1),t._v(" "),i("div",{staticStyle:{float:"left",width:"35%","margin-left":"5%",height:"160px"}},[i("v-upload",{attrs:{name:t.name,action:t.action,drag:"","file-list":t.defaultFileList,accept:"image/jpeg, image/png"},on:{change:t.onChange}},[t.editing?t._e():i("v-icon",{attrs:{type:"plus"}}),t._v(" "),t.editing?i("img",{staticStyle:{"max-width":"100%","max-height":"158px"},attrs:{src:t.addModal.fileUrl}}):t._e()],1),t._v(" "),i("div",{staticStyle:{height:"65px","line-height":"65px","text-align":"center"}},[t._v("图片限制在5MB以内")])],1)]):t._e(),t._v(" "),3===t.addModal.type?i("div",{staticStyle:{width:"100%",height:"240px"}},[i("v-upload",{attrs:{name:t.name,action:t.action,drag:"","file-list":t.defaultFileList,accept:"image/jpeg, image/png"},on:{change:t.onChange}},[t.editing?t._e():i("v-icon",{attrs:{type:"plus"}},[t._v("添加图片")]),t._v(" "),t.editing?i("img",{staticStyle:{"max-width":"100%","max-height":"238px"},attrs:{src:t.addModal.fileUrl}}):t._e()],1)],1):t._e(),t._v(" "),4===t.addModal.type?i("div",{staticStyle:{width:"100%",height:"240px"}},[i("v-upload",{attrs:{name:t.name,"file-list":t.defaultFileList,action:t.action,drag:"",accept:"application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,\n                    text/plain, application/vnd.ms-powerpoint, application/vnd.openxmlformats-officedocument.presentationml.presentation,\n                    application/msword, application/vnd.openxmlformats-officedocument.wordprocessingml.document,\n                    application/pdf, application/vnd.ms-excel"},on:{change:t.onChange},model:{value:t.addModal.file,callback:function(e){t.$set(t.addModal,"file",e)},expression:"addModal.file"}},[t.editing?t._e():i("v-icon",{attrs:{type:"plus"}},[t._v("添加文件")]),t._v(" "),t.editing?i("span",[t._v(t._s(t.addModal.fileName))]):t._e()],1)],1):t._e()])])],t._v(" "),[i("v-modal",{attrs:{title:t.delTitle,visible:t.delModalVisible,"confirm-loading":t.delModalLoading},on:{ok:function(e){t.delItem()},cancel:function(e){t.cancel("删除"),t.delModalVisible=!1}}},[i("div",{staticStyle:{"text-align":"center",height:"120px","line-height":"120px"}},[t._v("\n        确认删除"+t._s(t.delTitle)+"吗？\n      ")])])]],2)},staticRenderFns:[]};var _=i("VU/8")(f,y,!1,function(t){i("VaWg"),i("4kX5")},"data-v-74141aaf",null).exports,x={name:"crm-speechSettingDept",data:function(){return{screenHeight:window.innerHeight,vContentHeigth:{height:window.innerHeight-89+"px"},vContentHeigth1:{height:window.innerHeight-185-24+"px"},activeBtn:1,dragOverEleIndex:"",dragOverEleIndex2:"",groupId:0,contentId:0,dataListLoading:!1,dataList:[],dataAddList:[],contentListLoading:!1,contentList:[],editing:!1,delModalVisible:!1,delModalLoading:!1,delObj:{},delType:1,delTitle:"",addModalVisible:!1,addModalLoading:!1,addModalTitle:"添加话术",typeOptions:[{value:1,label:"文本"},{value:2,label:"链接"},{value:3,label:"图片"},{value:4,label:"文件"}],addModal:{type:1,title:"",content:"",url:"",fileUrl:"",fileName:""},name:"file",action:"/smf/crm/ossUpload",addGroupModalVisible:!1,addGroupModalLoading:!1,departmentOptions:[],addModel:{name:"",dept:""},deptId:0,deptName:"",defaultFileList:[],editObj:{},departmentId:0,contentEdit:!0}},created:function(){this.getDataList(),this.getDeptList()},methods:{getDataList:function(){var t=this;this.dataListLoading=!0,this.axios.post(this.serve.talkGroupList,{talkType:1,salesId:""}).then(function(e){var i=!0,a=!1,n=void 0;try{for(var s,o=e.data.data[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;l.hoverFlag=!1,l.editFlag=!1;var r=!0,d=!1,c=void 0;try{for(var h,p=l.dialogPolicys[Symbol.iterator]();!(r=(h=p.next()).done);r=!0){var u=h.value;u.hoverFlag=!1,u.editFlag=!1}}catch(t){d=!0,c=t}finally{try{!r&&p.return&&p.return()}finally{if(d)throw c}}}}catch(t){a=!0,n=t}finally{try{!i&&o.return&&o.return()}finally{if(a)throw n}}t.dataListLoading=!1,t.dataList=e.data.data,t.groupId=t.dataList.length>0?t.dataList[0].id:0,t.contentEdit=t.dataList.length>0&&t.dataList[0].editable,t.getContentList()}).catch(function(t){return t})},getContentList:function(){if(this.groupId){var t=!0,e=!1,i=void 0;try{for(var a,n=this.dataList[Symbol.iterator]();!(t=(a=n.next()).done);t=!0){var s=a.value;this.groupId===s.id&&(this.contentList=s.dialogPolicys)}}catch(t){e=!0,i=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw i}}}else this.contentList=[]},onChange:function(t){this.defaultFileList=[],this.defaultFileList.push(t.file),"uploading"!==t.file.status&&(this.editing=!0),"done"===t.file.status?(this.editing=!0,this.addModal.fileUrl=t.file.response.data.url,this.addModal.fileName=t.file.name,console.log(t)):"error"===t.file.status&&(this.editing=!1,this.defaultFileList=[])},addItemNo:function(){this.$notification.warning({message:"提示",description:"请先添加话术分组！"})},addItem:function(t){1===t&&(this.editing||0!==this.dataAddList.length?this.$notification.info({message:"提示",description:"请先保存未完成的话术分组！"}):(this.addGroupModalVisible=!0,this.addModel={name:"",dept:""})),2===t&&(this.editing||0!==this.dataAddList.length?this.$notification.info({message:"提示",description:"请先保存未完成的话术内容！"}):(this.addModalTitle="添加话术",this.addModalVisible=!0,this.addModal={type:1,title:"",content:"",url:"",fileUrl:"",fileName:""}))},saveItem:function(t){var e=this;if(1===t)if(this.deptId&&this.addModel.name){var i=this.serve.talkGroupAdd,a={talkType:1,departmentId:this.deptId,name:this.addModel.name};this.addModel.id&&(i=this.serve.talkGroupEdit,a.id=this.addModel.id),this.axios.post(i,a).then(function(t){e.dataList.unshift({id:t.data.data,name:e.addModel.name,dialogPolicys:[],editFlag:!1,hoverFlag:!1,editable:!0,departmentName:e.deptName,departmentId:e.deptId}),e.dataAddList=[],1===e.dataList.length&&(e.groupId=e.dataList[0].id,e.contentEdit=e.dataList[0].editable),e.addGroupModalVisible=!1,e.addModel.id&&e.getDataList(),e.addModel={name:"",dept:""}}).catch(function(t){return t})}else this.$notification.warning({message:"提示",description:"请确保信息填写完整"});if(2===t&&"添加话术"===this.addModalTitle)if(1===this.addModal.type&&this.addModal.content.length>0||2===this.addModal.type&&this.addModal.title.length>0&&this.addModal.content.length>0&&this.addModal.url.length>0&&this.addModal.fileUrl.length>0||3===this.addModal.type&&this.addModal.fileUrl.length>0||4===this.addModal.type&&this.addModal.fileUrl.length>0){this.editing=!1,this.addModalVisible=!1;var n={talkType:1,parentId:this.groupId,type:this.addModal.type,title:this.addModal.title,content:this.addModal.content,url:this.addModal.url,fileName:this.addModal.fileName,fileUrl:this.addModal.fileUrl};this.axios.post(this.serve.talkContentAdd,n).then(function(t){n.id=t.data.data,n.hoverFlag=!1,n.editFlag=!1,n.editable=!0,e.contentList.unshift(n)}).catch(function(t){return t})}else this.$notification.warning({message:"提示",description:"请确保信息填写完整"});2===t&&"编辑话术"===this.addModalTitle&&(1===this.addModal.type&&this.addModal.content.length>0||2===this.addModal.type&&this.addModal.title.length>0&&this.addModal.content.length>0&&this.addModal.url.length>0&&this.addModal.fileUrl.length>0||3===this.addModal.type&&this.addModal.fileUrl.length>0||4===this.addModal.type&&this.addModal.fileUrl.length>0?(this.editing=!1,this.addModalVisible=!1,this.axios.post(this.serve.talkContentEdit,this.addModal).then(function(t){e.$notification.success({message:"提示",description:"修改成功！"})}).catch(function(t){return t})):this.$notification.warning({message:"提示",description:"请确保信息填写完整"}))},editItemBef:function(t,e){var i=this;this.editing||0!==this.dataAddList.length?this.$notification.info({message:"提示",description:"请先保存未完成的内容！"}):2===e?(this.editing=!0,this.addModalTitle="编辑话术",this.addModalVisible=!0,this.addModal=t,this.editObj=JSON.parse(JSON.stringify(t))):(this.editObj=JSON.parse(JSON.stringify(t)),this.addGroupModalVisible=!0,this.addModel={name:t.name,dept:t.departmentId,id:t.id},setTimeout(function(){var e=i.$(".ant-select-selection__rendered").find("span")[0];i.$(".ant-select-search__field__placeholder")[0].style.display="none",e.style.display="",e.innerHTML=t.departmentName;var a=JSON.parse(JSON.stringify(i.treeData));i.departmentOptions=i.myTool.deepClone(a),i.departmentOptions=i.myTool.setSelect(i.departmentOptions,t.departmentId)},300))},editItem:function(t,e){var i=this;1===e&&(t.name?(this.editing=!1,t.editFlag=!1,this.axios.post(this.serve.talkGroupEdit,{talkType:1,id:t.id,name:t.name}).then(function(t){i.$notification.success({message:"提示",description:"修改成功！"})}).catch(function(t){return t})):this.$notification.info({message:"提示",description:"请先保存未完成的内容！"}))},delItemBef:function(t,e){1===e&&(this.delTitle="标签分组",t.dialogPolicys.length>0)?this.$notification.warning({message:"提示",description:"请先清空分组下内容再删除分组！"}):(2===e&&(this.delTitle="话术内容"),this.delModalVisible=!0,this.delObj=t,this.delType=e)},delItem:function(){var t=this;1===this.delType&&(this.delModalLoading=!0,this.axios.post(this.serve.talkGroupDel,{talkType:1,id:this.delObj.id}).then(function(e){var i=[],a=!0,n=!1,s=void 0;try{for(var o,l=t.dataList[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var r=o.value;r.id!==t.delObj.id&&i.push(r)}}catch(t){n=!0,s=t}finally{try{!a&&l.return&&l.return()}finally{if(n)throw s}}t.dataList=i,t.delModalLoading=!1}).catch(function(t){return t})),2===this.delType&&(this.delModalLoading=!0,this.axios.post(this.serve.talkContentDel,{talkType:1,id:this.delObj.id}).then(function(e){var i=[],a=!0,n=!1,s=void 0;try{for(var o,l=t.contentList[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var r=o.value;r.id!==t.delObj.id&&i.push(r)}}catch(t){n=!0,s=t}finally{try{!a&&l.return&&l.return()}finally{if(n)throw s}}t.contentList=i,t.delModalLoading=!1;var d=!0,c=!1,h=void 0;try{for(var p,u=t.dataList[Symbol.iterator]();!(d=(p=u.next()).done);d=!0){var v=p.value;v.id===t.groupId&&(v.dialogPolicys=t.contentList)}}catch(t){c=!0,h=t}finally{try{!d&&u.return&&u.return()}finally{if(c)throw h}}}).catch(function(t){return t})),this.delModalVisible=!1},cancel:function(t){if(this.delModalVisible=!1,this.dataAddList=[],"add"===t){var e=!0,i=!1,a=void 0;try{for(var n,s=this.contentList[Symbol.iterator]();!(e=(n=s.next()).done);e=!0){var o=n.value;o.id===this.editObj.id&&(o.type=this.editObj.type,o.title=this.editObj.title,o.content=this.editObj.content,o.url=this.editObj.url,o.fileUrl=this.editObj.fileUrl,o.fileName=this.editObj.fileName)}}catch(t){i=!0,a=t}finally{try{!e&&s.return&&s.return()}finally{if(i)throw a}}}},popupContainerAdd:function(){return document.getElementById("tree-select-container-add")},treeClick:function(t){var e=this;t?(this.saleList=[],this.sale="",t.has_auth?(this.deptId=t.id,this.deptName=t.name):(this.$notification.warning({message:"提示",description:"没有该部门的权限。"}),setTimeout(function(){e.$(".ant-select-selection__rendered").find("span")[0].innerHTML=""},100),this.deptId="",this.deptName="")):setTimeout(function(){var t=e.$(".ant-select-selection__rendered").find("span")[0];e.$(".ant-select-search__field__placeholder")[0].style.display="none",t.style.display="",t.innerHTML=e.deptName,e.departmentOptions=e.myTool.setSelect(e.departmentOptions,e.deptId)},10)},getDeptList:function(){var t=this,e=new URLSearchParams;this.axios.get(this.serve.deptList,e).then(function(e){t.treeData=e.data.data,t.getSelectTreeData()}).catch(function(t){return t})},getSelectTreeData:function(){var t=JSON.parse(JSON.stringify(this.treeData));this.departmentOptions=this.myTool.deepClone(t),this.getDeptItemId(this.departmentOptions)},getDeptItemId:function(t){t[0]&&!t[0].children?this.deptId=t[0].id:this.getDeptItemId(t[0].children)},addModalTypeChange:function(){this.addModal.fileName="",this.addModal.fileUrl=""},drag:function(t){t.dataTransfer.setData("dragObj",t.target.id)},dragover:function(t){t.preventDefault(),"First"===t.target.id.split("drop")[1]?this.dragOverEleIndex="First":this.dragOverEleIndex=t.target.id.split("drop")[1]/1},dragleave:function(t){t.preventDefault(),this.dragOverEleIndex=""},drop:function(t){var e=this;t.preventDefault();var i=t.dataTransfer.getData("dragObj");this.adjustmentOrder(i,t.target.id),this.dragOverEleIndex="",console.log(i),console.log(t);var a=[],n=!0,s=!1,o=void 0;try{for(var l,r=this.dataList[Symbol.iterator]();!(n=(l=r.next()).done);n=!0){var d=l.value;a.push(d.id)}}catch(t){s=!0,o=t}finally{try{!n&&r.return&&r.return()}finally{if(s)throw o}}this.axios.post(this.serve.talkOrder,{talkType:1,id:a}).then(function(t){e.$notification.success({message:"提示",description:"顺序调整成功！"})}).catch(function(t){return t})},adjustmentOrder:function(t,e){var i=t.split("drag")[1]/1,a=e.split("drop")[1];if("First"===a)this.dataList.unshift(this.dataList[i]),this.dataList.splice(i+1,1);else if(i>(a/=1)){var n=[];n=(n=(n=(n=n.concat(this.dataList.slice(0,a+1))).concat(this.dataList.slice(i,i+1))).concat(this.dataList.slice(a+1,i))).concat(this.dataList.slice(i+1,this.dataList.length)),this.dataList=n}else if(i<a){var s=[];s=(s=(s=(s=s.concat(this.dataList.slice(0,i))).concat(this.dataList.slice(i+1,a+1))).concat(this.dataList.slice(i,i+1))).concat(this.dataList.slice(a+1,this.dataList.length)),this.dataList=s}},drag2:function(t){t.dataTransfer.setData("dragObj2",t.target.id)},dragover2:function(t){t.preventDefault(),"Firster"===t.target.id.split("droper")[1]?this.dragOverEleIndex2="Firster":this.dragOverEleIndex2=t.target.id.split("droper")[1]/1},dragleave2:function(t){t.preventDefault(),this.dragOverEleIndex2=""},drop2:function(t){t.preventDefault();var e=t.dataTransfer.getData("dragObj2");this.adjustmentOrder2(e,t.target.id),this.dragOverEleIndex2="",console.log(e),console.log(t)},adjustmentOrder2:function(t,e){var i=t.split("drager")[1]/1,a=e.split("droper")[1];if("Firster"===a)this.contentList.unshift(this.contentList[i]),this.contentList.splice(i+1,1);else if(i>(a/=1)){var n=[];n=(n=(n=(n=n.concat(this.contentList.slice(0,a+1))).concat(this.contentList.slice(i,i+1))).concat(this.contentList.slice(a+1,i))).concat(this.contentList.slice(i+1,this.contentList.length)),this.contentList=n}else if(i<a){var s=[];s=(s=(s=(s=s.concat(this.contentList.slice(0,i))).concat(this.contentList.slice(i+1,a+1))).concat(this.contentList.slice(i,i+1))).concat(this.contentList.slice(a+1,this.contentList.length)),this.contentList=s}}},watch:{screenHeight:function(t){this.screenHeight=t,this.vContentHeigth={height:t-89+"px"},this.vContentHeigth1={height:t-185-23+"px"}}},mounted:function(){var t=this;window.onresize=function(){return t.screenHeight=window.innerHeight,t.vContentHeigth={height:window.innerHeight-89+"px"},void(t.vContentHeigth1={height:window.innerHeight-185-24+"px"})}}},b={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"setting-left"},[i("div",{staticClass:"setting-head"},[t._v("\n      话术分组\n      "),i("v-button",{staticStyle:{float:"right","margin-top":"12px"},attrs:{type:"primary"},on:{click:function(e){t.addItem(1)}}},[t._v("添加分组")])],1),t._v(" "),i("div",{staticClass:"setting-body",style:t.vContentHeigth1},[i("el-scrollbar",[!t.dataListLoading&&(t.dataAddList.length>0||t.dataList.length>0)?i("ul",{staticClass:"screening-ul"},[t._l(t.dataList,function(e,a){return i("li",{key:e.id},[0===a?i("div",{staticClass:"screening-drop",attrs:{id:"dropFirst"},on:{drop:function(e){t.drop(e)},dragover:function(e){t.dragover(e)},dragleave:function(e){t.dragleave(e)}}},["First"===t.dragOverEleIndex?i("i",{staticClass:"fa fa-arrow-right",attrs:{"aria-hidden":"true"}}):t._e()]):t._e(),t._v(" "),i("div",{staticClass:"screening-drag",class:{"li-select":e.id===t.groupId},attrs:{draggable:"true",id:"drag"+a},on:{dragstart:function(e){t.drag(e)},mouseover:function(t){e.hoverFlag=!0},mouseout:function(t){e.hoverFlag=!1}}},[i("span",{staticClass:"screening-name",on:{click:function(i){t.groupId=e.id,t.getContentList()}}},[e.editFlag?i("v-input",{attrs:{maxlength:"15"},model:{value:e.name,callback:function(i){t.$set(e,"name",i)},expression:"item.name"}}):t._e(),t._v(" "),e.editFlag?t._e():[t._v(t._s(e.name)+" (所属部门:"+t._s(e.departmentName)+")")]],2),t._v(" "),e.editFlag?i("span",{staticClass:"screening-bars-btn"},[i("v-button",{staticStyle:{height:"33px",padding:"0",width:"80%"},on:{click:function(i){e.editFlag=!1,t.editing=!1}}},[t._v("取消")])],1):t._e(),t._v(" "),e.editFlag?i("span",{staticClass:"screening-bars-btn"},[i("v-button",{staticStyle:{height:"33px",padding:"0",width:"80%"},attrs:{type:"primary"},on:{click:function(i){t.editItem(e,1)}}},[t._v("保存")])],1):t._e(),t._v(" "),e.editFlag?t._e():i("span",{staticClass:"screening-bars",attrs:{title:"按住拖动"}},[i("i",{staticClass:"fa fa-bars",attrs:{"aria-hidden":"true"}})]),t._v(" "),!e.editFlag&&e.editable?i("span",{directives:[{name:"show",rawName:"v-show",value:e.hoverFlag,expression:"item.hoverFlag"}],staticClass:"screening-bars",attrs:{title:"删除"},on:{click:function(i){t.delItemBef(e,1)}}},[i("i",{staticClass:"fa fa-trash-o",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),!e.editFlag&&e.editable?i("span",{directives:[{name:"show",rawName:"v-show",value:e.hoverFlag,expression:"item.hoverFlag"}],staticClass:"screening-bars",attrs:{title:"编辑"},on:{click:function(i){t.editItemBef(e,1)}}},[i("i",{staticClass:"fa fa-pencil",attrs:{"aria-hidden":"true"}})]):t._e()]),t._v(" "),i("div",{staticClass:"screening-drop",attrs:{id:"drop"+a},on:{drop:function(e){t.drop(e)},dragover:function(e){t.dragover(e)},dragleave:function(e){t.dragleave(e)}}},[t.dragOverEleIndex===a?i("i",{staticClass:"fa fa-arrow-right",attrs:{"aria-hidden":"true"}}):t._e()])])}),t._v(" "),t._l(t.dataAddList,function(e){return t.dataAddList.length>0?i("li",{key:e.id},[i("div",{staticClass:"screening-drag"},[i("span",{staticClass:"screening-name"},[i("v-input",{attrs:{maxlength:"15"},model:{value:e.name,callback:function(i){t.$set(e,"name",i)},expression:"item.name"}})],1),t._v(" "),i("span",{staticClass:"screening-bars-btn"},[i("v-button",{staticStyle:{height:"33px",padding:"0",width:"80%"},on:{click:function(e){t.cancel()}}},[t._v("取消")])],1),t._v(" "),i("span",{staticClass:"screening-bars-btn"},[i("v-button",{staticStyle:{height:"33px",padding:"0",width:"80%"},attrs:{type:"primary"},on:{click:function(e){t.saveItem(1)}}},[t._v("保存")])],1)])]):t._e()})],2):t._e(),t._v(" "),0!==t.dataList.length||0!==t.dataAddList.length||t.dataListLoading?t._e():i("ul",{staticClass:"have-no-data"},[t._v("\n          暂无数据\n        ")]),t._v(" "),0===t.dataList.length&&t.dataListLoading?i("ul",{staticClass:"have-no-data"},[i("v-spin",{staticStyle:{position:"relative",top:"50px"},attrs:{spinning:t.dataListLoading}})],1):t._e()])],1)]),t._v(" "),i("div",{staticClass:"setting-right"},[i("div",{staticClass:"setting-head"},[t._v("\n      话术内容\n      "),0===t.dataList.length&&t.contentEdit?i("v-button",{staticStyle:{float:"right","margin-top":"12px",padding:"0 27px",height:"33px"},on:{click:function(e){t.addItemNo()}}},[t._v("添加话术")]):t._e(),t._v(" "),t.dataList.length>0&&t.contentEdit?i("v-button",{staticStyle:{float:"right","margin-top":"12px"},attrs:{type:"primary"},on:{click:function(e){t.addItem(2)}}},[t._v("添加话术")]):t._e()],1),t._v(" "),i("div",{staticClass:"setting-body",style:t.vContentHeigth1},[i("el-scrollbar",[!t.dataListLoading&&t.contentList.length>0?i("ul",{staticClass:"screening-ul"},t._l(t.contentList,function(e,a){return i("li",{key:e.id},[0===a?i("div",{staticClass:"screening-drop",attrs:{id:"droperFirster"},on:{drop:function(e){t.drop2(e)},dragover:function(e){t.dragover2(e)},dragleave:function(e){t.dragleave2(e)}}},["Firster"===t.dragOverEleIndex2?i("i",{staticClass:"fa fa-arrow-right",attrs:{"aria-hidden":"true"}}):t._e()]):t._e(),t._v(" "),i("div",{staticClass:"screening-drag",staticStyle:{"line-height":"42px",height:"auto","min-height":"42px"},attrs:{draggable:"true",id:"drager"+a},on:{dragstart:function(e){t.drag2(e)},mouseover:function(t){e.hoverFlag=!0},mouseout:function(t){e.hoverFlag=!1}}},[i("span",{staticClass:"screening-name",staticStyle:{cursor:"default",overflow:"hidden",display:"inline-flex"}},[1===e.type?[t._v(t._s(e.content))]:t._e(),t._v(" "),2===e.type?[i("div",{staticClass:"clearfix",staticStyle:{position:"relative",width:"100%"}},[i("div",{staticStyle:{float:"left",width:"55%","margin-right":"5%"}},[i("p",{staticStyle:{height:"42px",overflow:"hidden"},attrs:{title:e.title}},[t._v("标题: "+t._s(e.title))]),t._v(" "),i("p",{staticStyle:{height:"42px",overflow:"hidden"},attrs:{title:e.url}},[t._v("链接: "),i("a",{staticStyle:{"word-break":"break-all"},attrs:{href:e.url,target:"_blank"}},[t._v(t._s(e.url))])]),t._v(" "),i("p",{staticStyle:{"line-height":"24px"}},[t._v("简介: "+t._s(e.content))])]),t._v(" "),i("div",{staticStyle:{width:"40%",position:"absolute",top:"50%",right:"0",transform:"translate(0, -50%)"}},[i("img",{staticStyle:{"max-height":"84px","max-width":"100%","margin-top":"10px"},attrs:{src:e.fileUrl}})])])]:t._e(),t._v(" "),3===e.type?[i("img",{staticStyle:{height:"84px","max-width":"100%","margin-top":"10px"},attrs:{src:e.fileUrl}})]:t._e(),t._v(" "),4===e.type?[i("i",{staticClass:"fa fa-file-text-o",staticStyle:{"font-size":"42px","margin-top":"10px","margin-right":"15px",color:"#4394F7"},attrs:{"aria-hidden":"true"}}),t._v(t._s(e.fileName))]:t._e()],2),t._v(" "),i("span",{staticClass:"screening-bars",attrs:{title:"按住拖动"}},[i("i",{staticClass:"fa fa-bars",attrs:{"aria-hidden":"true"}})]),t._v(" "),e.editable?i("span",{directives:[{name:"show",rawName:"v-show",value:e.hoverFlag,expression:"item.hoverFlag"}],staticClass:"screening-bars",attrs:{title:"删除"},on:{click:function(i){t.delItemBef(e,2)}}},[i("i",{staticClass:"fa fa-trash-o",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),e.editable?i("span",{directives:[{name:"show",rawName:"v-show",value:e.hoverFlag,expression:"item.hoverFlag"}],staticClass:"screening-bars",attrs:{title:"编辑"},on:{click:function(i){t.editItemBef(e,2)}}},[i("i",{staticClass:"fa fa-pencil",attrs:{"aria-hidden":"true"}})]):t._e()]),t._v(" "),i("div",{staticClass:"screening-drop",attrs:{id:"droper"+a},on:{drop:function(e){t.drop2(e)},dragover:function(e){t.dragover2(e)},dragleave:function(e){t.dragleave2(e)}}},[t.dragOverEleIndex2===a?i("i",{staticClass:"fa fa-arrow-right",attrs:{"aria-hidden":"true"}}):t._e()])])})):t._e(),t._v(" "),0!==t.contentList.length||t.dataListLoading?t._e():i("ul",{staticClass:"have-no-data"},[t._v("\n          暂无数据\n        ")]),t._v(" "),0===t.contentList.length&&t.dataListLoading?i("ul",{staticClass:"have-no-data"},[i("v-spin",{staticStyle:{position:"relative",top:"50px"},attrs:{spinning:t.dataListLoading}})],1):t._e()])],1)]),t._v(" "),[i("v-modal",{attrs:{title:t.addModalTitle,visible:t.addModalVisible,"confirm-loading":t.addModalLoading},on:{ok:function(e){t.saveItem(2)},cancel:function(e){t.cancel("add"),t.addModalVisible=!1,t.editing=!1}}},[i("div",[i("div",{staticStyle:{"margin-bottom":"10px"}},[i("v-select",{staticStyle:{width:"100%"},attrs:{data:t.typeOptions,allowClear:!1,disabled:t.editing},model:{value:t.addModal.type,callback:function(e){t.$set(t.addModal,"type",e)},expression:"addModal.type"}})],1),t._v(" "),1===t.addModal.type?i("div",[i("v-input",{staticStyle:{width:"100%",resize:"none",height:"240px"},attrs:{type:"textarea",maxlength:"500",placeholder:"输入回复内容"},nativeOn:{keyup:function(e){t.addModal.content=t.addModal.content.replace(/[\s]/g,"")}},model:{value:t.addModal.content,callback:function(e){t.$set(t.addModal,"content",e)},expression:"addModal.content"}})],1):t._e(),t._v(" "),2===t.addModal.type?i("div",{staticClass:"clearfix",staticStyle:{width:"100%",height:"240px"}},[i("div",{staticStyle:{float:"left",width:"60%"}},[i("v-input",{staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{maxlength:"20",placeholder:"输入标题（必填，20字以内）"},nativeOn:{keyup:function(e){t.addModal.title=t.addModal.title.replace(/[\s]/g,"")}},model:{value:t.addModal.title,callback:function(e){t.$set(t.addModal,"title",e)},expression:"addModal.title"}}),t._v(" "),i("v-input",{staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{placeholder:"输入链接地址（必填）"},nativeOn:{keyup:function(e){t.addModal.url=t.addModal.url.replace(/[\s]/g,"")}},model:{value:t.addModal.url,callback:function(e){t.$set(t.addModal,"url",e)},expression:"addModal.url"}}),t._v(" "),i("v-input",{staticStyle:{width:"100%",resize:"none",height:"140px"},attrs:{type:"textarea",placeholder:"输入内容简介（选填，30字以内）",maxlength:"30"},nativeOn:{keyup:function(e){t.addModal.content=t.addModal.content.replace(/[\s]/g,"")}},model:{value:t.addModal.content,callback:function(e){t.$set(t.addModal,"content",e)},expression:"addModal.content"}})],1),t._v(" "),i("div",{staticStyle:{float:"left",width:"35%","margin-left":"5%",height:"160px"}},[i("v-upload",{attrs:{name:t.name,action:t.action,drag:"","file-list":t.defaultFileList,accept:"image/jpeg, image/png"},on:{change:t.onChange}},[t.editing?t._e():i("v-icon",{attrs:{type:"plus"}}),t._v(" "),t.editing?i("img",{staticStyle:{"max-width":"100%","max-height":"158px"},attrs:{src:t.addModal.fileUrl}}):t._e()],1),t._v(" "),i("div",{staticStyle:{height:"65px","line-height":"65px","text-align":"center"}},[t._v("图片限制在5MB以内")])],1)]):t._e(),t._v(" "),3===t.addModal.type?i("div",{staticStyle:{width:"100%",height:"240px"}},[i("v-upload",{attrs:{name:t.name,action:t.action,drag:"","file-list":t.defaultFileList,accept:"image/jpeg, image/png"},on:{change:t.onChange}},[t.editing?t._e():i("v-icon",{attrs:{type:"plus"}},[t._v("添加图片")]),t._v(" "),t.editing?i("img",{staticStyle:{"max-width":"100%","max-height":"238px"},attrs:{src:t.addModal.fileUrl}}):t._e()],1)],1):t._e(),t._v(" "),4===t.addModal.type?i("div",{staticStyle:{width:"100%",height:"240px"}},[i("v-upload",{attrs:{name:t.name,action:t.action,"file-list":t.defaultFileList,drag:"",accept:"application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,\n                    text/plain, application/vnd.ms-powerpoint, application/vnd.openxmlformats-officedocument.presentationml.presentation,\n                    application/msword, application/vnd.openxmlformats-officedocument.wordprocessingml.document,\n                    application/pdf, application/vnd.ms-excel"},on:{change:t.onChange},model:{value:t.addModal.file,callback:function(e){t.$set(t.addModal,"file",e)},expression:"addModal.file"}},[t.editing?t._e():i("v-icon",{attrs:{type:"plus"}},[t._v("添加文件")]),t._v(" "),t.editing?i("span",[t._v(t._s(t.addModal.fileName))]):t._e()],1)],1):t._e()])])],t._v(" "),[i("v-modal",{attrs:{title:"添加分组",visible:t.addGroupModalVisible,"confirm-loading":t.addGroupModalLoading},on:{ok:function(e){t.saveItem(1)},cancel:function(e){t.cancel("添加"),t.addGroupModalVisible=!1}}},[i("div",{staticStyle:{"text-align":"center",height:"120px"}},[i("div",{staticClass:"modal-container",staticStyle:{"margin-top":"15px"}},[i("span",{staticClass:"modal-span"},[t._v("       部门")]),t._v(" "),i("v-tree-select",{staticClass:"modal-input",staticStyle:{width:"232px","text-align":"left",height:"auto"},attrs:{data:t.departmentOptions,"popup-container":t.popupContainerAdd,allowClear:!1,placeholder:"请选择部门"},on:{select:t.treeClick},model:{value:t.addModel.dept,callback:function(e){t.$set(t.addModel,"dept",e)},expression:"addModel.dept"}}),t._v(" "),i("div",{staticStyle:{position:"relative","margin-left":"155px"},attrs:{id:"tree-select-container-add"}})],1),t._v(" "),i("div",{staticClass:"modal-container",staticStyle:{"margin-top":"30px"}},[i("span",{staticClass:"modal-span"},[t._v("分组名称")]),t._v(" "),i("v-input",{staticStyle:{width:"232px"},attrs:{placeholder:"输入分组名称",maxlength:"15"},nativeOn:{keyup:function(e){t.addModel.name=t.addModel.name.replace(/[\s]/g,"")}},model:{value:t.addModel.name,callback:function(e){t.$set(t.addModel,"name",e)},expression:"addModel.name"}})],1)])])],t._v(" "),[i("v-modal",{attrs:{title:t.delTitle,visible:t.delModalVisible,"confirm-loading":t.delModalLoading},on:{ok:function(e){t.delItem()},cancel:function(e){t.cancel("删除"),t.delModalVisible=!1}}},[i("div",{staticStyle:{"text-align":"center",height:"120px","line-height":"120px"}},[t._v("\n        确认删除"+t._s(t.delTitle)+"吗？\n      ")])])]],2)},staticRenderFns:[]};var w=i("VU/8")(x,b,!1,function(t){i("jDob")},"data-v-0dcd0905",null).exports,S={name:"crm-speechSettingPerson",components:{yhqDept:a.a},data:function(){return{screenHeight:window.innerHeight,vContentHeigth1:{height:window.innerHeight-185-24-42+"px"},groupId:0,dataList:[],dataListLoading:!1,contentList:[],contentListLoading:!1}},created:function(){},methods:{getDataList:function(t){var e=this;this.dataListLoading=!0,this.axios.post(this.serve.talkGroupList,{talkType:2,salesId:t}).then(function(t){var i=!0,a=!1,n=void 0;try{for(var s,o=t.data.data[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;l.hoverFlag=!1,l.editFlag=!1;var r=!0,d=!1,c=void 0;try{for(var h,p=l.dialogPolicys[Symbol.iterator]();!(r=(h=p.next()).done);r=!0){var u=h.value;u.hoverFlag=!1,u.editFlag=!1}}catch(t){d=!0,c=t}finally{try{!r&&p.return&&p.return()}finally{if(d)throw c}}}}catch(t){a=!0,n=t}finally{try{!i&&o.return&&o.return()}finally{if(a)throw n}}e.dataListLoading=!1,e.dataList=t.data.data,e.groupId=e.dataList.length>0?e.dataList[0].id:0,e.getContentList()}).catch(function(t){return t})},getContentList:function(){if(this.groupId){var t=!0,e=!1,i=void 0;try{for(var a,n=this.dataList[Symbol.iterator]();!(t=(a=n.next()).done);t=!0){var s=a.value;this.groupId===s.id&&(this.contentList=s.dialogPolicys)}}catch(t){e=!0,i=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw i}}}else this.contentList=[]},deptSelectEvent1:function(t,e){t.isDept||this.getDataList(t.sales_id)}},watch:{screenHeight:function(t){this.screenHeight=t,this.vContentHeigth1={height:t-185-24-42+"px"}}},mounted:function(){var t=this;window.onresize=function(){return t.screenHeight=window.innerHeight,void(t.vContentHeigth1={height:window.innerHeight-185-24-42+"px"})}}},C={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"clearfix"},[i("yhq-dept",{staticStyle:{float:"left","margin-bottom":"10px"},on:{deptSelectEvent:t.deptSelectEvent1}})],1),t._v(" "),i("div",{staticClass:"setting-left"},[i("div",{staticClass:"setting-head"},[t._v("\n      话术分组\n    ")]),t._v(" "),i("div",{staticClass:"setting-body",style:t.vContentHeigth1},[i("el-scrollbar",[t.dataList.length>0&&!t.dataListLoading?i("ul",{staticClass:"screening-ul"},t._l(t.dataList,function(e){return i("li",{key:e.id,staticStyle:{"margin-top":"20px"}},[i("div",{staticClass:"screening-drag",class:{"li-select":e.id===t.groupId}},[i("span",{staticClass:"screening-name",on:{click:function(i){t.groupId=e.id,t.getContentList()}}},[t._v(t._s(e.name))])])])})):t._e(),t._v(" "),0!==t.dataList.length||t.dataListLoading?t._e():i("ul",{staticClass:"have-no-data"},[t._v("\n          暂无数据\n        ")]),t._v(" "),0===t.dataList.length&&t.dataListLoading?i("ul",{staticClass:"have-no-data"},[i("v-spin",{staticStyle:{position:"relative",top:"50px"},attrs:{spinning:t.dataListLoading}})],1):t._e()])],1)]),t._v(" "),i("div",{staticClass:"setting-right"},[i("div",{staticClass:"setting-head"},[t._v("\n      话术内容\n    ")]),t._v(" "),i("div",{staticClass:"setting-body",style:t.vContentHeigth1},[i("el-scrollbar",[t.contentList.length>0&&!t.dataListLoading?i("ul",{staticClass:"screening-ul"},t._l(t.contentList,function(e){return i("li",{key:e.id,staticStyle:{"margin-top":"20px"}},[i("div",{staticClass:"screening-drag",staticStyle:{"line-height":"42px",height:"auto","min-height":"42px"}},[i("span",{staticClass:"screening-name",staticStyle:{cursor:"default",overflow:"hidden",display:"inline-flex"}},[1===e.type?[t._v(t._s(e.content))]:t._e(),t._v(" "),2===e.type?[i("div",{staticClass:"clearfix",staticStyle:{position:"relative",width:"100%"}},[i("div",{staticStyle:{float:"left",width:"55%","margin-right":"5%"}},[i("p",{staticStyle:{height:"42px",overflow:"hidden"},attrs:{title:e.title}},[t._v("标题: "+t._s(e.title))]),t._v(" "),i("p",{staticStyle:{height:"42px",overflow:"hidden"},attrs:{title:e.url}},[t._v("链接: "),i("a",{staticStyle:{"word-break":"break-all"},attrs:{href:e.url,target:"_blank"}},[t._v(t._s(e.url))])]),t._v(" "),i("p",{staticStyle:{"line-height":"24px"}},[t._v("简介: "+t._s(e.content))])]),t._v(" "),i("div",{staticStyle:{width:"40%",position:"absolute",top:"50%",right:"0",transform:"translate(0, -50%)"}},[i("img",{staticStyle:{"max-height":"84px","max-width":"100%","margin-top":"10px"},attrs:{src:e.fileUrl}})])])]:t._e(),t._v(" "),3===e.type?[i("img",{staticStyle:{height:"84px","max-width":"100%","margin-top":"10px"},attrs:{src:e.fileUrl}})]:t._e(),t._v(" "),4===e.type?[i("i",{staticClass:"fa fa-file-text-o",staticStyle:{"font-size":"42px","margin-top":"10px","margin-right":"15px",color:"#4394F7"},attrs:{"aria-hidden":"true"}}),t._v(t._s(e.fileName))]:t._e()],2)])])})):t._e(),t._v(" "),0!==t.contentList.length||t.dataListLoading?t._e():i("ul",{staticClass:"have-no-data"},[t._v("\n          暂无数据\n        ")]),t._v(" "),0===t.contentList.length&&t.dataListLoading?i("ul",{staticClass:"have-no-data"},[i("v-spin",{staticStyle:{position:"relative",top:"50px"},attrs:{spinning:t.dataListLoading}})],1):t._e()])],1)])])},staticRenderFns:[]};var L={name:"crm-speechSetting",components:{SpeechSettingAll:_,SpeechSettingDept:w,SpeechSettingPerson:i("VU/8")(S,C,!1,function(t){i("9tsS")},"data-v-73ef2e80",null).exports},data:function(){return{screenHeight:window.innerHeight,vContentHeigth:{height:window.innerHeight-89+"px"},activeBtn:1,deptShow:!1,personShow:!1}},created:function(){},methods:{},watch:{screenHeight:function(t){this.screenHeight=t,this.vContentHeigth={height:t-89+"px"}}},mounted:function(){var t=this;window.onresize=function(){return t.screenHeight=window.innerHeight,void(t.vContentHeigth={height:window.innerHeight-89+"px"})}}},k={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tag-setting-container crm-drg-drop",style:t.vContentHeigth},[i("div",{staticClass:"clearfix talk-title"},[i("div",{staticClass:"talk-title-btn-left",class:{"talk-title-btn-active":1===t.activeBtn},on:{click:function(e){t.activeBtn=1}}},[t._v("公司话术")]),t._v(" "),i("div",{staticClass:"talk-title-btn-right",class:{"talk-title-btn-active":2===t.activeBtn},staticStyle:{"border-radius":"0"},on:{click:function(e){t.activeBtn=2,t.deptShow=!0}}},[t._v("部门话术")]),t._v(" "),i("div",{staticClass:"talk-title-btn-right",class:{"talk-title-btn-active":3===t.activeBtn},on:{click:function(e){t.activeBtn=3,t.personShow=!0}}},[t._v("个人话术")])]),t._v(" "),i("speech-setting-all",{directives:[{name:"show",rawName:"v-show",value:1===t.activeBtn,expression:"activeBtn===1"}]}),t._v(" "),t.deptShow?i("speech-setting-dept",{directives:[{name:"show",rawName:"v-show",value:2===t.activeBtn,expression:"activeBtn===2"}]}):t._e(),t._v(" "),t.personShow?i("speech-setting-person",{directives:[{name:"show",rawName:"v-show",value:3===t.activeBtn,expression:"activeBtn===3"}]}):t._e()],1)},staticRenderFns:[]};var T={name:"crm-screeningConditions",data:function(){return{dataListLoading:!1,dataList:[],dragOverEleIndex:"",editType:!1,adminFlag:!0}},created:function(){this.adminFlag=!this.$store.state.power.includes("d"),this.getDataList()},methods:{getDataList:function(){var t=this;this.dataListLoading=!0,this.axios.post(this.serve.conditionList,{}).then(function(e){t.dataListLoading=!1,t.dataList=e.data.data}).catch(function(t){return t})},edit:function(){this.editType=!0},save:function(){var t=this,e=[],i=!0,a=!1,n=void 0;try{for(var s,o=this.dataList[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;e.push({fieldId:l.fieldId,checked:l.checked})}}catch(t){a=!0,n=t}finally{try{!i&&o.return&&o.return()}finally{if(a)throw n}}this.axios.post(this.serve.conditionSave,{fields:e}).then(function(e){t.editType=!1,t.getDataList()}).catch(function(t){return t})},cancel:function(){this.editType=!1,this.getDataList()},drag:function(t){t.dataTransfer.setData("dragObj",t.target.id)},dragover:function(t){t.preventDefault(),"First"===t.target.id.split("drop")[1]?this.dragOverEleIndex="First":this.dragOverEleIndex=t.target.id.split("drop")[1]/1},dragleave:function(t){t.preventDefault(),this.dragOverEleIndex=""},drop:function(t){t.preventDefault();var e=t.dataTransfer.getData("dragObj");this.adjustmentOrder(e,t.target.id),this.dragOverEleIndex=""},adjustmentOrder:function(t,e){var i=t.split("drag")[1]/1,a=e.split("drop")[1];if("First"===a)this.dataList.unshift(this.dataList[i]),this.dataList.splice(i+1,1);else if(i>(a/=1)){var n=[];n=(n=(n=(n=n.concat(this.dataList.slice(0,a+1))).concat(this.dataList.slice(i,i+1))).concat(this.dataList.slice(a+1,i))).concat(this.dataList.slice(i+1,this.dataList.length)),this.dataList=n}else if(i<a){var s=[];s=(s=(s=(s=s.concat(this.dataList.slice(0,i))).concat(this.dataList.slice(i+1,a+1))).concat(this.dataList.slice(i,i+1))).concat(this.dataList.slice(a+1,this.dataList.length)),this.dataList=s}console.log(this.dataList)}}},M={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"clearfix screening-title"},[i("span",{staticClass:"screening-title1"},[t._v("筛选条件")]),t._v(" "),t.editType?t._e():i("span",{staticClass:"screening-title2"},[t._v("选中的条件将作为客户端软件客户列表的默认筛选条件")]),t._v(" "),t.editType?t._e():i("v-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(e){t.edit()}}},[t._v("编辑")]),t._v(" "),t.editType?i("v-button",{staticStyle:{float:"right",height:"33px",padding:"0 27px","margin-left":"15px"},on:{click:function(e){t.cancel()}}},[t._v("取消")]):t._e(),t._v(" "),t.editType?i("v-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(e){t.save()}}},[t._v("保存")]):t._e()],1),t._v(" "),t.editType?t._e():i("ul",{staticClass:"screening-ul"},t._l(t.dataList,function(e,a){return t.editType||!t.editType&&e.checked?i("li",{key:e.fieldId},[0===a?i("div",{staticClass:"screening-drop"}):t._e(),t._v(" "),i("div",{staticClass:"screening-drag",class:{"li-select":e.checked},staticStyle:{"padding-left":"15px"}},[t._v("\n        "+t._s(e.fieldName)+" (所属部门:"+t._s(e.departmentName)+")\n      ")]),t._v(" "),i("div",{staticClass:"screening-drop"})]):t._e()})),t._v(" "),t.editType||0!==t.dataList.length||t.dataListLoading?t._e():i("ul",{staticClass:"have-no-data"},[t._v("\n    暂无数据\n  ")]),t._v(" "),!t.editType&&0===t.dataList.length&&t.dataListLoading?i("ul",{staticClass:"have-no-data"},[i("v-spin",{staticStyle:{position:"relative",top:"50px"},attrs:{spinning:t.dataListLoading}})],1):t._e(),t._v(" "),t.editType&&t.adminFlag?i("ul",{staticClass:"screening-ul"},t._l(t.dataList,function(e,a){return t.editType||!t.editType&&e.checked?i("li",{key:e.fieldId},[0===a?i("div",{staticClass:"screening-drop",attrs:{id:"dropFirst"},on:{drop:function(e){t.drop(e)},dragover:function(e){t.dragover(e)},dragleave:function(e){t.dragleave(e)}}},["First"===t.dragOverEleIndex?i("i",{staticClass:"fa fa-arrow-right",attrs:{"aria-hidden":"true"}}):t._e()]):t._e(),t._v(" "),i("div",{staticClass:"screening-drag",class:{"li-select":e.checked},attrs:{draggable:"true",id:"drag"+a},on:{dragstart:function(e){t.drag(e)}}},[i("span",{staticClass:"screening-name",on:{click:function(t){e.checked=!e.checked}}},[t._v(t._s(e.fieldName)+" (所属部门:"+t._s(e.departmentName)+")")]),t._v(" "),t._m(0,!0)]),t._v(" "),i("div",{staticClass:"screening-drop",attrs:{id:"drop"+a},on:{drop:function(e){t.drop(e)},dragover:function(e){t.dragover(e)},dragleave:function(e){t.dragleave(e)}}},[t.dragOverEleIndex===a?i("i",{staticClass:"fa fa-arrow-right",attrs:{"aria-hidden":"true"}}):t._e()])]):t._e()})):t._e(),t._v(" "),t.editType&&!t.adminFlag?i("ul",{staticClass:"screening-ul"},t._l(t.dataList,function(e,a){return t.editType||!t.editType&&e.checked?i("li",{key:e.fieldId},[0===a?i("div",{staticClass:"screening-drop"}):t._e(),t._v(" "),i("div",{staticClass:"screening-drag",class:{"li-select":e.checked}},[e.editable?i("span",{staticClass:"screening-name",on:{click:function(t){e.checked=!e.checked}}},[t._v(t._s(e.fieldName)+" (所属部门:"+t._s(e.departmentName)+")")]):t._e(),t._v(" "),e.editable?t._e():i("span",{staticClass:"screening-name"},[t._v(t._s(e.fieldName)+" (所属部门:"+t._s(e.departmentName)+")")])]),t._v(" "),i("div",{staticClass:"screening-drop"})]):t._e()})):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"screening-bars",attrs:{title:"按住拖动"}},[e("i",{staticClass:"fa fa-bars",attrs:{"aria-hidden":"true"}})])}]};var F={name:"crm-weChatSetting",data:function(){return{obj:{customerWx:3,staffWx:3},objCopy:{customerWx:3,staffWx:3},btnShowFlag:!1}},created:function(){this.initData()},methods:{initData:function(){var t=this;this.axios.post(this.serve.getWeChatSettings,{}).then(function(e){t.objCopy.customerWx=e.data.data.customerWx,t.objCopy.staffWx=e.data.data.staffWx,t.obj.customerWx=e.data.data.customerWx,t.obj.staffWx=e.data.data.staffWx}).catch(function(t){return t})},save:function(){var t=this;console.log(this.obj),this.axios.post(this.serve.setWeChatSettings,this.obj).then(function(e){t.objCopy.customerWx=t.obj.customerWx,t.objCopy.staffWx=t.obj.staffWx,t.$notification.info({message:"提示",description:"设置成功！"}),t.btnShowFlag=!1}).catch(function(t){return t})},cannel:function(){this.obj.customerWx=this.objCopy.customerWx,this.obj.staffWx=this.objCopy.staffWx,this.$notification.info({message:"提示",description:"已重置！"})}},watch:{obj:{handler:function(t,e){this.obj.customerWx/1==this.objCopy.customerWx/1&&this.obj.staffWx/1==this.objCopy.staffWx/1?this.btnShowFlag=!1:this.btnShowFlag=!0},deep:!0}}},D={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{"padding-top":"30px","padding-left":"50px"}},[i("div",{staticClass:"set-items clearfix"},[i("div",{staticClass:"items items-name"},[t._v("有效会话设置")]),t._v(" "),i("div",{staticClass:"items items-des"},[t._v("客户发送微信条数")]),t._v(" "),i("div",{staticClass:"items items-item"},[i("v-input",{staticStyle:{width:"80px"},nativeOn:{keyup:function(e){t.obj.customerWx=t.obj.customerWx.replace(/[^\d]/g,"")}},model:{value:t.obj.customerWx,callback:function(e){t.$set(t.obj,"customerWx",e)},expression:"obj.customerWx"}})],1)]),t._v(" "),i("div",{staticClass:"set-items clearfix"},[i("div",{staticClass:"items items-name"}),t._v(" "),i("div",{staticClass:"items items-des"},[t._v("员工发送微信条数")]),t._v(" "),i("div",{staticClass:"items items-item"},[i("v-input",{staticStyle:{width:"80px"},nativeOn:{keyup:function(e){t.obj.staffWx=t.obj.staffWx.replace(/[^\d]/g,"")}},model:{value:t.obj.staffWx,callback:function(e){t.$set(t.obj,"staffWx",e)},expression:"obj.staffWx"}})],1)]),t._v(" "),i("div",{staticStyle:{"margin-top":"50px","margin-left":"120px"}},[i("v-button",{directives:[{name:"show",rawName:"v-show",value:!t.btnShowFlag,expression:"!btnShowFlag"}],staticStyle:{height:"33px",padding:"0 27px"},attrs:{disabled:""}},[t._v("保存")]),t._v(" "),i("v-button",{directives:[{name:"show",rawName:"v-show",value:t.btnShowFlag,expression:"btnShowFlag"}],staticStyle:{height:"33px"},attrs:{type:"primary"},on:{click:function(e){t.save()}}},[t._v("保存")]),t._v(" "),i("v-button",{staticStyle:{height:"33px",padding:"0 27px","margin-left":"50px"},on:{click:function(e){t.cannel()}}},[t._v("取消")])],1)])},staticRenderFns:[]};var I={name:"crm",components:{CrmCustomerManage:o,CrmCustomerField:d,CrmTagSetting:m,CrmTagSpeechSetting:i("VU/8")(L,k,!1,function(t){i("diVq")},"data-v-15ea3657",null).exports,CrmScreeningConditions:i("VU/8")(T,M,!1,function(t){i("ph0l")},"data-v-03d408a1",null).exports,CrmWeChatSetting:i("VU/8")(F,D,!1,function(t){i("cvpm")},"data-v-7032032c",null).exports},data:function(){return{screenHeight:window.innerHeight,vContentHeigth:{height:window.innerHeight-68+"px"},activeTab:1,tabAct:[!0,!1,!1,!1,!1,!1]}},created:function(){},methods:{activeTabChange:function(t){this.activeTab=t,this.tabAct[t-1]=!0}},watch:{screenHeight:function(t){this.screenHeight=t,this.vContentHeigth={height:t-68+"px"}}},mounted:function(){var t=this;window.onresize=function(){return t.screenHeight=window.innerHeight,void(t.vContentHeigth={height:window.innerHeight-68+"px"})}}},A={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"v-container bg-color"},[i("div",{staticClass:"header"},[i("div",{staticClass:"common-title"},[i("span",{staticClass:"content-option",class:{active:1===t.activeTab},on:{click:function(e){t.activeTabChange(1)}}},[t._v("客户管理")]),t._v(" "),i("span",{staticClass:"content-option",class:{active:2===t.activeTab},on:{click:function(e){t.activeTabChange(2)}}},[t._v("客户字段")]),t._v(" "),i("span",{staticClass:"content-option",class:{active:3===t.activeTab},on:{click:function(e){t.activeTabChange(3)}}},[t._v("话术设置")]),t._v(" "),i("span",{staticClass:"content-option",class:{active:4===t.activeTab},on:{click:function(e){t.activeTabChange(4)}}},[t._v("标签设置")]),t._v(" "),i("span",{staticClass:"content-option",class:{active:5===t.activeTab},on:{click:function(e){t.activeTabChange(5)}}},[t._v("筛选条件")])])]),t._v(" "),t.tabAct[0]?i("div",{directives:[{name:"show",rawName:"v-show",value:1===t.activeTab,expression:"activeTab === 1"}],staticClass:"crm-contianer",staticStyle:{"padding-right":"0"},style:t.vContentHeigth},[i("crm-customerManage")],1):t._e(),t._v(" "),t.tabAct[1]?i("div",{directives:[{name:"show",rawName:"v-show",value:2===t.activeTab,expression:"activeTab === 2"}],staticClass:"crm-contianer",style:t.vContentHeigth},[i("crm-customerField")],1):t._e(),t._v(" "),t.tabAct[2]?i("div",{directives:[{name:"show",rawName:"v-show",value:3===t.activeTab,expression:"activeTab === 3"}],staticClass:"crm-contianer",style:t.vContentHeigth},[i("crm-tag-speech-setting")],1):t._e(),t._v(" "),t.tabAct[3]?i("div",{directives:[{name:"show",rawName:"v-show",value:4===t.activeTab,expression:"activeTab === 4"}],staticClass:"crm-contianer",style:t.vContentHeigth},[i("crm-tag-setting")],1):t._e(),t._v(" "),t.tabAct[4]?i("div",{directives:[{name:"show",rawName:"v-show",value:5===t.activeTab,expression:"activeTab === 5"}],staticClass:"crm-contianer",style:t.vContentHeigth},[i("crm-screeningConditions")],1):t._e(),t._v(" "),t.tabAct[5]?i("div",{directives:[{name:"show",rawName:"v-show",value:6===t.activeTab,expression:"activeTab === 6"}],staticClass:"crm-contianer",style:t.vContentHeigth},[i("crm-we-chat-setting")],1):t._e()])},staticRenderFns:[]};var N=i("VU/8")(I,A,!1,function(t){i("I1KV")},"data-v-222e3452",null);e.default=N.exports},bP6Y:function(t,e){},cEGa:function(t,e){},cvpm:function(t,e){},d1M0:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={name:"yhq-voice",props:["src","multi","thumbnail","title","mode","preload","ui"],created:function(){},mounted:function(){},methods:{positionClick:function(){this.$refs.audio.currentTime=this.position/1,this.$refs.audio.play()},onTime:function(){this.position=this.$refs.audio.currentTime},onData:function(){this.$refs.audio&&(this.total=this.$refs.audio.duration,this.$emit("load"))},onPlay:function(){this.playing=!0,this.$emit("play")},onPause:function(){this.playing=!1,this.$emit("pause")},onWait:function(){this.waiting=!0,this.$emit("buffer")},onAbort:function(){this.aborted=!0,this.$emit("error"),console.log("abort: ",11)},onReady:function(){this.waiting=this.aborted=!1},toggle:function(){this.playing?this.$refs.audio.pause():(this.$refs.audio.currentTime=this.position/1,this.$refs.audio.play())},hms:function(t){var e=new Date(null);return e.setSeconds(t),e.toISOString().substr(14,5)}},data:function(){return{total:0,position:0,audio:null,playing:!1,loaded:!1,waiting:!1,aborted:!1}},computed:{classes:function(){return this.ui&&this.ui.classes||{}},icons:function(){return this.ui&&this.ui.icons||{}},labels:function(){return this.ui&&this.ui.labels||{}},pos:function(){return this.hms(this.position)},tots:function(){return this.hms(this.total)}},watch:{playing:function(){this.waiting=this.aborted=!1},position:function(t,e){this.waiting=this.aborted=!1,Math.abs(t-e)>1&&(this.$refs.audio.currentTime=t/1)},src:function(){this.loaded=this.waiting=this.aborted=this.playing=!1}}},n={render:function(){var t,e,i,a,n,s,o,l,r,d,c=this,h=c.$createElement,p=c._self._c||h;return p("div",{class:{"inline-block":"mini"===c.mode}},["mini"===c.mode?p("div",[c.aborted?p("i",{staticClass:"fa fa-fw fa-warning text-danger",class:(t={},t[c.icons.size||"fa-lg"]=!0,t),attrs:{title:"加载失败"}}):c.waiting?p("i",{staticClass:"fa fa-fw fa-spin fa-spinner",class:(e={},e[c.icons.size||"fa-lg"]=!0,e)}):p("a",{class:(i={},i[c.classes.btn]=!0,i),attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),c.toggle(t)}}},[c.playing?p("span",[p("i",{staticClass:"fa fa-fw",class:(a={},a[c.icons.pause||"fa-pause"]=!0,a[c.icons.size||"fa-lg"]=!0,a)}),c._v(" "+c._s(c.labels.pause))]):p("span",[p("i",{staticClass:"fa fa-fw",class:(n={},n[c.icons.play||"fa-play"]=!0,n[c.icons.size||"fa-lg"]=!0,n)}),c._v(" "+c._s(c.labels.play))])])]):p("div",{staticClass:"flex-fit"},[c.thumbnail?p("div",{staticClass:"thumb"},[p("vue2-cover-image",{attrs:{src:c.thumbnail,height:"54px",width:"54px"}})],1):c._e(),c._v(" "),p("div",{staticClass:"song-title"},[c.title?p("div",{staticStyle:{margin:"0 0 10px"}},[p("b",[c._v(c._s(c.title))])]):c._e(),c._v(" "),p("div",{staticClass:"flex-fit"},[p("span",[c.aborted?p("i",{staticClass:"fa fa-fw fa-warning text-danger",class:(s={},s[c.icons.size||"fa-lg"]=!0,s),attrs:{title:"加载失败"}}):c.waiting?p("i",{staticClass:"fa fa-fw fa-spin fa-spinner",class:(o={},o[c.icons.size||"fa-lg"]=!0,o)}):p("a",{class:(l={},l[c.classes.btn]=!0,l),attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),c.toggle(t)}}},[c.playing?p("span",[p("i",{staticClass:"fa fa-fw",class:(r={},r[c.icons.pause||"fa-pause"]=!0,r[c.icons.size||"fa-lg"]=!0,r)}),c._v(" "+c._s(c.labels.pause))]):p("span",[p("i",{staticClass:"fa fa-fw",class:(d={},d[c.icons.play||"fa-play"]=!0,d[c.icons.size||"fa-lg"]=!0,d)}),c._v(" "+c._s(c.labels.play))])])]),c._v(" "),p("input",{directives:[{name:"model",rawName:"v-model",value:c.position,expression:"position"}],staticStyle:{display:"inline-block"},attrs:{type:"range",min:"0",max:c.total,step:"any",disabled:c.aborted},domProps:{value:c.position},on:{click:function(t){t.preventDefault(),c.positionClick()},__r:function(t){c.position=t.target.value}}})])])]),c._v(" "),p("audio",{ref:"audio",attrs:{src:c.src,preload:c.preload||"metadata",autoplay:!0},on:{play:c.onPlay,ended:c.onPause,pause:c.onPause,loadeddata:c.onData,loadedmetadata:c.onData,timeupdate:c.onTime,waiting:c.onWait,stalled:c.onWait,canPlay:c.onReady,error:c.onAbort}},[c._v("\n    您的浏览器不支持语言播放，请更换谷歌浏览器。\n  ")])])},staticRenderFns:[]};var s={name:"chart",components:{yhqVoice:i("VU/8")(a,n,!1,function(t){i("Xfwo")},"data-v-18b8333c",null).exports,yhqDept:i("X9GB").a},data:function(){return{statisticsColumns:[{id:1,nameTh:"销售单元",nameTd:"user"},{id:2,nameTh:"总数",nameTd:"callOutTotal",name:"呼出总数",sortFlag:1},{id:3,nameTh:"接通数",nameTd:"callOutConnectNum",name:"呼出接通数",sortFlag:0},{id:4,nameTh:"接通率",nameTd:"callOutConnectRate",name:"呼出接通率",sortFlag:0},{id:5,nameTh:"总数",nameTd:"callInTotal",name:"呼入总数",sortFlag:0},{id:6,nameTh:"接通数",nameTd:"callInConnectNum",name:"呼入接通数",sortFlag:0},{id:7,nameTh:"接通率",nameTd:"callInConnectRate",name:"呼入接通率",sortFlag:0},{id:8,nameTh:"总数",nameTd:"callTotal",name:"呼出+呼入总数",sortFlag:0},{id:9,nameTh:"接通数",nameTd:"callConnectNum",name:"呼出+呼入接通数",sortFlag:0},{id:10,nameTh:"接通率",nameTd:"callConnectRate",name:"呼出+呼入接通率",sortFlag:0},{id:11,nameTh:"呼出",nameTd:"callOutTimeTotal",name:"呼出时长",sortFlag:0},{id:12,nameTh:"呼出平均",nameTd:"callOutTimeAvg",name:"呼出平均时长",sortFlag:0},{id:13,nameTh:"呼入",nameTd:"callInTimeTotal",name:"呼入时长",sortFlag:0},{id:14,nameTh:"呼入平均",nameTd:"callInTimeAvg",name:"呼入平均时长",sortFlag:0},{id:15,nameTh:"总时长",nameTd:"callTimeTotal",name:"总时长",sortFlag:0},{id:16,nameTh:"总平均",nameTd:"callTimeAvg",name:"总平均时长",sortFlag:0}],detailColumns:[{id:1,nameTh:"销售姓名",nameTd:"username",name:"销售姓名",sortFlag:0},{id:2,nameTh:"部门",nameTd:"deptName",name:"部门",sortFlag:0},{id:3,nameTh:"客户名称",nameTd:"contact_name",name:"客户名称",sortFlag:0},{id:4,nameTh:"客户电话",nameTd:"contact_phone",name:"客户电话",sortFlag:0},{id:5,nameTh:"通话类型",nameTd:"call_type",name:"通话类型",sortFlag:0,hoverFlag:!1,clickFlag:!1},{id:6,nameTh:"开始时间",nameTd:"start_time",name:"开始时间",sortFlag:1},{id:7,nameTh:"通话时长",nameTd:"duration_str",name:"通话时长",sortFlag:0,hoverFlag:!1,clickFlag:!1},{id:8,nameTh:"操作",nameTd:"operation",name:"操作",sortFlag:0,width:"220px"}],detailModalColumns:[{id:1,nameTh:"客户名称",nameTd:"contact_name",name:"客户名称",sortFlag:0},{id:2,nameTh:"客户电话",nameTd:"contact_phone",name:"客户电话",sortFlag:0},{id:3,nameTh:"通话类型",nameTd:"call_type",name:"通话类型",sortFlag:0,hoverFlag:!1,clickFlag:!1},{id:4,nameTh:"开始时间",nameTd:"start_time",name:"开始时间",sortFlag:1},{id:5,nameTh:"通话时长",nameTd:"duration_str",name:"通话时长",sortFlag:0,hoverFlag:!1,clickFlag:!1},{id:6,nameTh:"操作",nameTd:"operation",name:"操作",sortFlag:0,width:"220px"}],maxRange:90,isIE:!1,viewBox1Style:{},viewBox2Style:{},viewBox3Style:{},viewBox1Flag:!1,viewBox2Flag:!1,viewBox3Flag:!1,viewBox3ConditionStyle:{},screenHeight:window.innerHeight,vContentHeigth:{minHeight:window.innerHeight-446+"px"},vContentHeigth3:{minHeight:window.innerHeight-121+"px"},activeTab:1,deptData:[],xAxisData:[],chartData:[],totalData1:[],totalData2:[],mydata1:[],mydata2:[],mydata3:[],mydata1Loading:!1,mydata2Loading:!1,mydata3Loading:!1,pageNo1:1,pageNo2:1,pageNo3:1,total1:0,total2:0,total3:0,activeFlag1:3,activeFlag2:2,activeFlag3:2,rangeDate1:["",""],rangeDate2:["",""],rangeDate3:["",""],treeList1:[],departmentOptions1:[],saleList1:[],deptName1:"",dept1:"",sale1:"",treeList2:[],departmentOptions2:[],saleList2:[],deptName2:"",dept2:"",sale2:"",sale4:"",sortField2:"callOutTotal",sortDir2:"desc",treeList3:[],departmentOptions3:[],saleList3:[],deptName3:"",dept3:"",sale3:"",sortField3:"start_time",sortDir3:"desc",checkAllFlag:!1,mydata3AllIds:[],mydata3SelectIds:[],breadcrumb:[],sortTip2:{id:2,nameTh:"总数",nameTd:"callOutTotal",name:"呼出总数",sortFlag:1},sortTip3:{id:6,nameTh:"开始时间",nameTd:"start_time",name:"开始时间",sortFlag:1},sortTip3_callType:"",sortTip3_dur:"",chartFieldList:[],chartField:13,searchValue:"",searchValueFlag:!1,callyType_1:!0,callyType_2:!0,callyType_3:!0,callyType_4:!0,duration_min:"",duration_max:"",callTypes:"",detailModalVisible:!1,detailModalLoading:!1,detailModalTitle:"",detailModalStyle:{},sortField4:"start_time",sortDir4:"desc",callTypes4:"",duration_min4:"",duration_max4:"",callyType4_1:!0,callyType4_2:!0,callyType4_3:!0,callyType4_4:!0,total4:0,pageNo4:1,mydata4:[],sortTip4:{id:7,nameTh:"开始时间",nameTd:"start_time",name:"开始时间",sortFlag:1},sortTip4_callType:"",sortTip4_dur:"",mydata4Loading:!1,checkAllFlag4:!1,mydata4AllIds:[],mydata4SelectIds:[]}},created:function(){navigator.userAgent.indexOf("Trident")>-1&&(this.isIE=!0),this.getChartFieldList();var t=this.myTool.timeFormat(new Date),e=this.myTool.timeFormat(new Date(Math.round((new Date).getTime()-25056e5))),i=window.innerHeight-180+"px";this.detailModalStyle={height:i},this.rangeDate1=[e,t],this.rangeDate2=[t,t];var a=this.myTool.timeFormat(new Date);this.rangeDate3=[a+" 00:00",a+" 23:59"],this.getTrendData(),this.getAnalysisData(),this.getDetailData(),this.getDeptList()},methods:{getTrendData:function(){var t=this,e=new URLSearchParams;return e.append("start_date",this.rangeDate1[0]),e.append("end_date",this.rangeDate1[1]),e.append("user_id",this.sale1),e.append("department_id",this.dept1),this.mydata1Loading=!0,this.axios.post(this.serve.voiceCallDateList,e).then(function(e){t.mydata1Loading=!1,t.mydata1=e.data.data,t.totalData1=e.data.data,t.total1=e.data.data.length,t.initChartBefore(e.data.data),t.initChart(t.chartData[t.chartField])}).catch(function(t){return t})},getAnalysisData:function(){var t=this,e=new URLSearchParams;return e.append("start_date",this.rangeDate2[0]),e.append("end_date",this.rangeDate2[1]),e.append("department_id",this.dept2),e.append("sort_field",this.sortField2),e.append("sort_dir",this.sortDir2),this.mydata2Loading=!0,this.axios.post(this.serve.voiceCallDeptList,e).then(function(e){t.mydata2Loading=!1,t.mydata2=[];for(var i=0;i<e.data.data.length;i++){var a=e.data.data[i];a.userName?a.user=a.userName:a.user=a.deptName,i<30&&t.mydata2.push(a)}t.totalData2=e.data.data,t.total2=e.data.data.length,setTimeout(function(){t.total2>0&&(t.$el.querySelector(".content-pagination2 .ant-pagination-simple-pager input").value=t.pageNo2)},300)}).catch(function(t){return t})},getDetailDataModal:function(){var t=this,e=new URLSearchParams;return e.append("start_date",this.rangeDate2[0]+" 00:00"),e.append("end_date",this.rangeDate2[1]+" 23:59"),e.append("department_id",this.dept2),e.append("user_id",this.sale4),e.append("sort_field",this.sortField4),e.append("sort_dir",this.sortDir4),e.append("callTypes",this.callTypes4),e.append("duration_min",this.duration_min4),e.append("duration_max",this.duration_max4),e.append("page",this.pageNo4),e.append("keyword",""),this.mydata4Loading=!0,this.axios.post(this.serve.voiceCallList,e).then(function(e){t.mydata4Loading=!1,t.mydata4=[],t.total4=e.data.data.totalCount,e.data.data.pageSize=t.pageSize,e.data.data.pageNo=e.data.data.currentPage,setTimeout(function(){t.total4>0&&(t.$el.querySelector(".content-pagination4 .ant-pagination-simple-pager input").value=t.pageNo4)},300),t.checkAllFlag4=!1,t.mydata4AllIds=[],t.mydata4SelectIds=[];var i=!0,a=!1,n=void 0;try{for(var s,o=e.data.data.result[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;l.checked=!1,l.showAudioFalg=!1,l.file&&t.mydata4AllIds.push(l.id)}}catch(t){a=!0,n=t}finally{try{!i&&o.return&&o.return()}finally{if(a)throw n}}t.mydata4=e.data.data.result}).catch(function(t){return t})},getDetailData:function(){var t=this,e=new URLSearchParams;return e.append("start_date",this.rangeDate3[0]),e.append("end_date",this.rangeDate3[1]),e.append("department_id",this.dept3),e.append("user_id",this.sale3),e.append("sort_field",this.sortField3),e.append("sort_dir",this.sortDir3),e.append("callTypes",this.callTypes),e.append("duration_min",this.duration_min),e.append("duration_max",this.duration_max),e.append("page",this.pageNo3),e.append("keyword",this.searchValue),this.mydata3Loading=!0,this.axios.post(this.serve.voiceCallList,e).then(function(e){t.mydata3Loading=!1,t.mydata3=[],t.total3=e.data.data.totalCount,e.data.data.pageSize=t.pageSize,e.data.data.pageNo=e.data.data.currentPage,setTimeout(function(){t.total3>0&&(t.$el.querySelector(".content-pagination3 .ant-pagination-simple-pager input").value=t.pageNo3)},300),t.checkAllFlag=!1,t.mydata3AllIds=[],t.mydata3SelectIds=[];var i=!0,a=!1,n=void 0;try{for(var s,o=e.data.data.result[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;l.checked=!1,l.showAudioFalg=!1,l.file&&t.mydata3AllIds.push(l.id)}}catch(t){a=!0,n=t}finally{try{!i&&o.return&&o.return()}finally{if(a)throw n}}t.mydata3=e.data.data.result}).catch(function(t){return t})},popupContainer4:function(){return document.getElementById("tree-select-container4")},getDeptList:function(){var t=this,e=new URLSearchParams;this.axios.get(this.serve.deptAuthorList,e).then(function(e){t.deptData=e.data.data}).catch(function(t){return t})},deptSelectEvent1:function(t,e){t.isDept?(this.dept1=t.id,this.sale1=""):(this.dept1=t.department_id,this.sale1=t.sales_id),this.pageNo1=1,this.getTrendData()},deptSelectEvent2:function(t,e){this.breadcrumb=[];for(var i=0;i<e.length;i++){var a=e[i];a.isDept&&this.breadcrumb.push(a)}t.isDept?(this.dept2=t.id,this.sale2=""):(this.dept2=t.department_id,this.sale2=t.sales_id),this.pageNo2=1,this.sale2?(t.userId=t.sales_id,t.deptName=t.department_name,t.userName=t.username,this.deptDrilling(t)):this.getAnalysisData()},deptInitEvent2:function(t){this.breadcrumb=t},deptSelectEvent3:function(t,e){t.isDept?(this.dept3=t.id,this.sale3=""):(this.dept3=t.department_id,this.sale3=t.sales_id),this.pageNo3=1,this.getDetailData()},changePageNo4:function(t){this.pageNo4=t,this.getDetailDataModal()},changePageNo:function(t){var e=this;if(2===this.activeTab){this.pageNo2=t,this.mydata2=[];for(var i=30*(this.pageNo2-1);i<30*this.pageNo2;i++)this.totalData2[i]&&this.mydata2.push(this.totalData2[i]);setTimeout(function(){e.mydata2.length>0&&(e.$el.querySelector(".content-pagination1 .ant-pagination-simple-pager input").value=e.pageNo2)},300)}else this.pageNo3=t,this.getDetailData()},dateChange2:function(t){this.activeFlag2=t;var e=void 0;if(1===t)e=this.myTool.timeFormat(new Date(Math.round((new Date).getTime()-864e5))),this.rangeDate2=[e,e],this.timeConfirm();else if(2===t)e=this.myTool.timeFormat(new Date),this.rangeDate2=[e,e],this.timeConfirm();else if(3===t){var i=this;setTimeout(function(){i.$refs.content2.click()},10)}},dateChange3:function(t){this.activeFlag3=t;var e=void 0;if(1===t)e=this.myTool.timeFormat(new Date(Math.round((new Date).getTime()-864e5))),this.rangeDate3=[e+" 00:00",e+" 23:59"],this.timeConfirm();else if(2===t)e=this.myTool.timeFormat(new Date),this.rangeDate3=[e+" 00:00",e+" 23:59"],this.timeConfirm();else if(3===t){var i=this;setTimeout(function(){i.$refs.content3.click()},10)}},timeConfirm:function(){1===this.activeTab?(this.pageNo1=1,this.getTrendData()):2===this.activeTab?(this.pageNo2=1,this.getAnalysisData()):(this.pageNo3=1,this.getDetailData())},exportData:function(){if(1===this.activeTab){var t="/phone/date/export?department_id="+this.dept1+"&user_id="+this.sale1+"&start_date="+this.rangeDate1[0]+"&end_date="+this.rangeDate1[1];window.open(t,"_blank")}else if(2===this.activeTab){var e="/phone/dept/export?department_id="+this.dept2+"&start_date="+this.rangeDate2[0]+"&end_date="+this.rangeDate2[1]+"&sort_field="+this.sortField2+"&sort_dir="+this.sortDir2;window.open(e,"_blank")}else{var i="/phone/export?page="+this.pageNo3+"&start_date="+this.rangeDate3[0]+"&end_date="+this.rangeDate3[1]+"&department_id="+this.dept3+"&user_id="+this.sale3+"&sort_field="+this.sortField3+"&sort_dir="+this.sortDir3+"&callTypes="+this.callTypes+"&duration_min="+this.duration_min+"&duration_max="+this.duration_max+"&keyword="+this.searchValue;window.open(i,"_blank")}},downloadAll:function(){var t="/phone/down?downIds="+this.mydata3SelectIds.toString();window.open(t,"_blank")},downloadFile:function(t){var e="/phone/down?downIds="+t.id;window.open(e,"_blank")},deptDrilling:function(t){t.userId?(this.detailModalTitle=t.deptName+"-"+t.userName,this.callTypes4="",this.sortTip4_callType="",this.callyType4_1=!0,this.callyType4_2=!0,this.callyType4_3=!0,this.callyType4_4=!0,this.sortTip4_dur="",this.duration_min4="",this.duration_max4="",this.detailModalVisible=!0,this.sortTip4={id:6,nameTh:"开始时间",nameTd:"start_time",name:"开始时间",sortFlag:1},this.sortField4="start_time",this.sortDir4="desc",this.detailModalColumns=[{id:1,nameTh:"客户名称",nameTd:"contact_name",name:"客户名称",sortFlag:0},{id:2,nameTh:"客户电话",nameTd:"contact_phone",name:"客户电话",sortFlag:0},{id:3,nameTh:"通话类型",nameTd:"call_type",name:"通话类型",sortFlag:0,hoverFlag:!1,clickFlag:!1},{id:4,nameTh:"开始时间",nameTd:"start_time",name:"开始时间",sortFlag:1},{id:5,nameTh:"通话时长",nameTd:"duration_str",name:"通话时长",sortFlag:0,hoverFlag:!1,clickFlag:!1},{id:6,nameTh:"操作",nameTd:"operation",name:"操作",sortFlag:0,width:"220px"}],this.sale4=t.userId,this.getDetailDataModal()):(this.$refs.yhqDept2.reverseSet(t),this.dept2=t.deptId,this.deptName2=t.deptName,this.pageNo2=1,this.getAnalysisData(),this.breadcrumb.push({id:this.dept2,name:this.deptName2}))},backToDept:function(t){this.$refs.yhqDept2.reverseSet(t),this.dept2=t.id,this.deptName2=t.name,this.pageNo2=1,this.getAnalysisData();for(var e=[],i=0;i<=this.breadcrumb.length&&(e.push(this.breadcrumb[i]),this.breadcrumb[i].id!==t.id);i++);this.breadcrumb=e},initChartBefore:function(t){var e=[],i=[],a=[],n=[],s=[],o=[],l=[],r=[],d=[],c=[],h=[],p=[],u=[],v=[],g=[];this.xAxisData=[],this.chartData=[];var m=!0,f=!1,y=void 0;try{for(var _,x=t[Symbol.iterator]();!(m=(_=x.next()).done);m=!0){var b=_.value;this.xAxisData.push(b.date);var w=(b.callOutConnectRate.split("%")[0]/100).toFixed(3)/1,S=(b.callInConnectRate.split("%")[0]/100).toFixed(3)/1,C=(b.callConnectRate.split("%")[0]/100).toFixed(3)/1;e.push(b.callOutTotal),i.push(b.callOutConnectNum),a.push(w),n.push(b.callInTotal),s.push(b.callInConnectNum),o.push(S),l.push(b.callTotal),r.push(b.callConnectNum),d.push(C),c.push(b.callOutTimeTotal/1),h.push(b.callOutTimeAvg/1),p.push(b.callInTimeTotal/1),u.push(b.callInTimeAvg/1),v.push(b.callTimeTotal/1),g.push(b.callTimeAvg/1)}}catch(t){f=!0,y=t}finally{try{!m&&x.return&&x.return()}finally{if(f)throw y}}this.xAxisData.reverse(),this.chartData.push(e.reverse()),this.chartData.push(i.reverse()),this.chartData.push(a.reverse()),this.chartData.push(n.reverse()),this.chartData.push(s.reverse()),this.chartData.push(o.reverse()),this.chartData.push(l.reverse()),this.chartData.push(r.reverse()),this.chartData.push(d.reverse()),this.chartData.push(c.reverse()),this.chartData.push(h.reverse()),this.chartData.push(p.reverse()),this.chartData.push(u.reverse()),this.chartData.push(v.reverse()),this.chartData.push(g.reverse())},initChart:function(t){var e=this.xAxisData.length,i=0;i=e<17?0:e<40?30:45;var a=this.chartField,n=this.chartFieldList;this.echarts.init(document.getElementById("myChart")).setOption({legend:{data:[]},tooltip:{formatter:function(t){if(t[0]){var e=t[0].name,i=!0,s=!1,o=void 0;try{for(var l,r=t[Symbol.iterator]();!(i=(l=r.next()).done);i=!0){var d=l.value;if(2===a||5===a||8===a){var c=(100*d.value).toFixed(1)/1;e+="<br/>"+d.marker+n[a].label+": "+c+"%"}else if(a>9){var h=d.value,p=parseInt(h/86400),u=parseInt(h%86400/3600),v=parseInt(h%86400%3600/60),g=parseInt(h%86400%3600%60),m="";p>0&&(m+=p+"天"),u>0&&(m+=u+"小时"),v>0&&(m+=v+"分钟"),g>0&&(m+=g+"秒"),0===m.length&&(m="0秒"),e+="<br/>"+d.marker+n[a].label+": "+m}else e+="<br/>"+d.marker+n[a].label+": "+d.value}}catch(t){s=!0,o=t}finally{try{!i&&r.return&&r.return()}finally{if(s)throw o}}return e}return""},trigger:"axis"},xAxis:{boundaryGap:!1,data:this.xAxisData,axisLabel:{rotate:i},splitLine:{show:!0}},yAxis:{splitLine:{show:!0}},series:[{name:this.chartFieldList[this.chartField].label,type:"line",symbol:"none",data:t}]}),this.scrollPage()},contentChange:function(t){this.activeTab=t,this.scrollPage()},getChartFieldList:function(){var t=0,e=!0,i=!1,a=void 0;try{for(var n,s=this.statisticsColumns[Symbol.iterator]();!(e=(n=s.next()).done);e=!0){var o=n.value;o.id>1&&(this.chartFieldList.push({id:t,value:t,label:o.name}),t++)}}catch(t){i=!0,a=t}finally{try{!e&&s.return&&s.return()}finally{if(i)throw a}}this.chartField=this.chartFieldList[13].value},changeChartField:function(t){this.initChart(this.chartData[this.chartField])},sortDate2:function(t,e){switch(this.sortTip2&&this.sortTip2.name!==t.name&&(this.statisticsColumns[this.sortTip2.id-1].sortFlag=0),0===t.sortFlag?t.sortFlag=1:1===t.sortFlag?t.sortFlag=2:2===t.sortFlag&&(t.sortFlag=1),this.sortTip2=t,this.sortField2=t.nameTd,t.sortFlag){case 1:this.sortDir2="desc";break;case 2:this.sortDir2="asc";break;default:this.sortField2="",this.sortDir2=""}this.getAnalysisData()},sortDate3:function(t,e){switch(this.sortTip3&&this.sortTip3.name!==t.name&&(this.detailColumns[this.sortTip3.id-1].sortFlag=0),0===t.sortFlag?t.sortFlag=1:1===t.sortFlag?t.sortFlag=2:2===t.sortFlag&&(t.sortFlag=1),this.sortTip3=t,this.sortField3=t.nameTd,t.sortFlag){case 1:this.sortDir3="desc";break;case 2:this.sortDir3="asc";break;default:this.sortField3="",this.sortDir3=""}this.getDetailData()},sortDate4:function(t,e){switch(this.sortTip4&&this.sortTip4.name!==t.name&&(this.detailModalColumns[this.sortTip4.id-1].sortFlag=0),0===t.sortFlag?t.sortFlag=1:1===t.sortFlag?t.sortFlag=2:2===t.sortFlag&&(t.sortFlag=1),this.sortTip4=t,this.sortField4=t.nameTd,t.sortFlag){case 1:this.sortDir4="desc";break;case 2:this.sortDir4="asc";break;default:this.sortField4="",this.sortDir4=""}this.getDetailDataModal()},playAudio:function(t,e){if(1===e){var i=!0,a=!1,n=void 0;try{for(var s,o=this.mydata3[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){s.value.showAudioFalg=!1}}catch(t){a=!0,n=t}finally{try{!i&&o.return&&o.return()}finally{if(a)throw n}}t.showAudioFalg=!0}else t.showAudioFalg=!1},clearSearchValue:function(){this.searchValue="",this.blurSearch()},blurSearch:function(){if(this.searchValueFlag&&0===this.searchValue.length){this.searchValueFlag=!1,this.callTypes="",this.sortTip3_callType="",this.callyType_1=!0,this.callyType_2=!0,this.callyType_3=!0,this.callyType_4=!0,this.sortTip3_dur="",this.duration_min="",this.duration_max="",this.sortTip3={id:6,nameTh:"开始时间",nameTd:"start_time",name:"开始时间",sortFlag:1},this.sortField3="start_time",this.sortDir3="desc",this.detailColumns=[{id:1,nameTh:"销售姓名",nameTd:"username",name:"销售姓名",sortFlag:0},{id:2,nameTh:"部门",nameTd:"deptName",name:"部门",sortFlag:0},{id:3,nameTh:"客户名称",nameTd:"contact_name",name:"客户名称",sortFlag:0},{id:4,nameTh:"客户电话",nameTd:"contact_phone",name:"客户电话",sortFlag:0},{id:5,nameTh:"通话类型",nameTd:"call_type",name:"通话类型",sortFlag:0,hoverFlag:!1,clickFlag:!1},{id:6,nameTh:"开始时间",nameTd:"start_time",name:"开始时间",sortFlag:1},{id:7,nameTh:"通话时长",nameTd:"duration_str",name:"通话时长",sortFlag:0,hoverFlag:!1,clickFlag:!1},{id:8,nameTh:"操作",nameTd:"operation",name:"操作",sortFlag:0,width:"220px"}],this.pageNo3=1,this.activeFlag3=2;var t=this.myTool.timeFormat(new Date);this.rangeDate3=[t+" 00:00",t+" 23:59"],this.getDetailData()}},keyupSearch:function(t){this.searchValue=this.searchValue.trimEnd();var e=!0,i=!1,a=void 0;try{for(var n,s=["(",")","<",">","%","[","]",";","`"][Symbol.iterator]();!(e=(n=s.next()).done);e=!0){var o=n.value;this.searchValue.includes(o)&&(this.searchValue=this.searchValue.replace(o,""),this.$notification.warning({message:"提示",description:"请勿输入特殊字符：( ) < > % [ ] ; 空格等"}))}}catch(t){i=!0,a=t}finally{try{!e&&s.return&&s.return()}finally{if(i)throw a}}13===t.keyCode&&(this.getDetailData(),this.searchValueFlag=!0)},showCondition:function(t,e){if(t.clickFlag=!0,3===this.activeTab){var i=document.querySelector("#viewBox3").getBoundingClientRect();this.viewBox3ConditionStyle={},this.viewBox3Flag&&(this.viewBox3ConditionStyle={top:111-i.top+"px"})}},callyTypeChange:function(t){t=!t},callyTypeSure:function(t){t.clickFlag=!1;var e=[],i=[];this.callyType_1&&(e.push("呼出"),i.push(1)),this.callyType_2&&(e.push("呼入"),i.push(2)),this.callyType_3&&(e.push("呼出未接"),i.push(3)),this.callyType_4&&(e.push("呼入未接"),i.push(4)),this.callTypes=i.join(","),this.sortTip3_callType=e.join(", "),this.getDetailData()},closesortTip3_callType:function(){this.callTypes="",this.sortTip3_callType="",this.callyType_1=!0,this.callyType_2=!0,this.callyType_3=!0,this.callyType_4=!0,this.getDetailData()},durationSure:function(t){this.duration_min||this.duration_max?(this.duration_min&&this.duration_max&&(this.duration_min<=this.duration_max?(this.sortTip3_dur=this.duration_min+"~"+this.duration_max,t.clickFlag=!1,this.getDetailData()):this.$notification.warning({message:"提示",description:"请输入正确通话时长区间"})),this.duration_min&&!this.duration_max&&(this.sortTip3_dur="> "+this.duration_min,t.clickFlag=!1,this.getDetailData()),!this.duration_min&&this.duration_max&&(this.sortTip3_dur="< "+this.duration_max,t.clickFlag=!1,this.getDetailData())):this.$notification.warning({message:"提示",description:"请输入正确通话时长区间"})},closesortTip3_dur:function(){this.sortTip3_dur="",this.duration_min="",this.duration_max="",this.getDetailData()},checkAll:function(){if(this.checkAllFlag=!this.checkAllFlag,this.checkAllFlag){this.mydata3SelectIds=JSON.parse(JSON.stringify(this.mydata3AllIds));var t=!0,e=!1,i=void 0;try{for(var a,n=this.mydata3[Symbol.iterator]();!(t=(a=n.next()).done);t=!0){a.value.checked=!0}}catch(t){e=!0,i=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw i}}}else{this.mydata3SelectIds=[];var s=!0,o=!1,l=void 0;try{for(var r,d=this.mydata3[Symbol.iterator]();!(s=(r=d.next()).done);s=!0){r.value.checked=!1}}catch(t){o=!0,l=t}finally{try{!s&&d.return&&d.return()}finally{if(o)throw l}}}},clickRow:function(t){if(t.file){if(t.checked=!t.checked,t.checked)this.mydata3SelectIds.push(t.id);else for(var e=0;e<this.mydata3SelectIds.length;e++)this.mydata3SelectIds[e]===t.id&&this.mydata3SelectIds.splice(e,1);this.mydata3SelectIds.length===this.mydata3AllIds.length&&(this.checkAllFlag=!0),this.mydata3SelectIds.length<this.mydata3AllIds.length&&(this.checkAllFlag=!1)}},checkAll4:function(){if(this.checkAllFlag4=!this.checkAllFlag4,this.checkAllFlag4){this.mydata4SelectIds=JSON.parse(JSON.stringify(this.mydata4AllIds));var t=!0,e=!1,i=void 0;try{for(var a,n=this.mydata4[Symbol.iterator]();!(t=(a=n.next()).done);t=!0){a.value.checked=!0}}catch(t){e=!0,i=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw i}}}else{this.mydata4SelectIds=[];var s=!0,o=!1,l=void 0;try{for(var r,d=this.mydata4[Symbol.iterator]();!(s=(r=d.next()).done);s=!0){r.value.checked=!1}}catch(t){o=!0,l=t}finally{try{!s&&d.return&&d.return()}finally{if(o)throw l}}}},clickRow4:function(t){if(t.file){if(t.checked=!t.checked,t.checked)this.mydata4SelectIds.push(t.id);else for(var e=0;e<this.mydata4SelectIds.length;e++)this.mydata4SelectIds[e]===t.id&&this.mydata4SelectIds.splice(e,1);this.mydata4SelectIds.length===this.mydata4AllIds.length&&(this.checkAllFlag4=!0),this.mydata4SelectIds.length<this.mydata4AllIds.length&&(this.checkAllFlag4=!1)}},callyTypeSure4:function(t){t.clickFlag=!1;var e=[],i=[];this.callyType4_1&&(e.push("呼出"),i.push(1)),this.callyType4_2&&(e.push("呼入"),i.push(2)),this.callyType4_3&&(e.push("呼出未接"),i.push(3)),this.callyType4_4&&(e.push("呼入未接"),i.push(4)),this.callTypes4=i.join(","),this.sortTip4_callType=e.join(", "),this.getDetailDataModal()},durationSure4:function(t){this.duration_min4||this.duration_max4?(this.duration_min4&&this.duration_max4&&(this.duration_min4<=this.duration_max4?(this.sortTip4_dur=this.duration_min4+"~"+this.duration_max4,t.clickFlag=!1,this.getDetailDataModal()):this.$notification.warning({message:"提示",description:"请输入正确通话时长区间"})),this.duration_min4&&!this.duration_max4&&(this.sortTip4_dur="> "+this.duration_min4,t.clickFlag=!1,this.getDetailDataModal()),!this.duration_min4&&this.duration_max4&&(this.sortTip4_dur="< "+this.duration_max4,t.clickFlag=!1,this.getDetailDataModal())):this.$notification.warning({message:"提示",description:"请输入正确通话时长区间"})},closesortTip4_callType:function(){this.callTypes4="",this.sortTip4_callType="",this.callyType4_1=!0,this.callyType4_2=!0,this.callyType4_3=!0,this.callyType4_4=!0,this.getDetailDataModal()},closesortTip4_dur:function(){this.sortTip4_dur="",this.duration_min4="",this.duration_max4="",this.getDetailDataModal()},downloadAll4:function(){var t="/phone/down?downIds="+this.mydata4SelectIds.toString();window.open(t,"_blank")},downloadFile4:function(t){var e="/phone/down?downIds="+t.id;window.open(e,"_blank")},playAudio4:function(t,e){if(1===e){var i=!0,a=!1,n=void 0;try{for(var s,o=this.mydata4[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){s.value.showAudioFalg=!1}}catch(t){a=!0,n=t}finally{try{!i&&o.return&&o.return()}finally{if(a)throw n}}t.showAudioFalg=!0}else t.showAudioFalg=!1},scrollPage:function(){var t=this;setTimeout(function(){var e=document.querySelector(".phone-call .el-scrollbar__wrap");e&&e.addEventListener("scroll",function(){if(1===t.activeTab){var e=document.querySelector("#viewBox1").getBoundingClientRect();t.viewBox1Style={width:e.width-20+"px"},e.top<=101?t.viewBox1Flag=!0:t.viewBox1Flag=!1}if(2===t.activeTab){var i=document.querySelector("#viewBox2").getBoundingClientRect();t.viewBox2Style={width:i.width-20+"px"},i.top<=101?t.viewBox2Flag=!0:t.viewBox2Flag=!1}if(3===t.activeTab){var a=document.querySelector("#viewBox3").getBoundingClientRect();t.viewBox3Style={width:a.width-20+"px"},a.top<=101?t.viewBox3Flag=!0:t.viewBox3Flag=!1}})},300)},myChartResize:function(t){var e=this;1===this.activeTab&&setTimeout(function(){e.echarts.init(document.getElementById("myChart")).resize()},t)}},watch:{screenHeight:function(t){this.screenHeight=t,this.vContentHeigth={minHeight:t-446+"px"},this.vContentHeigth3={minHeight:t-121+"px"}}},computed:{collapsed:function(){return this.myChartResize(500),this.$store.state.collapsed}},mounted:function(){var t=this;window.onresize=function(){return t.screenHeight=window.innerHeight,t.vContentHeigth={minHeight:window.innerHeight-446+"px"},void(t.vContentHeigth3={minHeight:window.innerHeight-121+"px"})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"v-container bg-color phone-call"},[a("div",{staticClass:"header v-home"},[a("div",{staticClass:"common-title"},[a("span",{staticClass:"content-option",class:{active:1===t.activeTab},on:{click:function(e){t.contentChange(1),t.myChartResize(50)}}},[t._v("走势")]),t._v(" "),a("span",{staticClass:"content-option",class:{active:2===t.activeTab},on:{click:function(e){t.contentChange(2)}}},[t._v("分析")]),t._v(" "),a("span",{staticClass:"content-option",class:{active:3===t.activeTab},on:{click:function(e){t.contentChange(3)}}},[t._v("详单")]),t._v(" "),a("span",{staticStyle:{color:"white"}},[t._v(t._s(t.collapsed))])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.activeTab,expression:"activeTab === 1"}],staticClass:"time time-panel clearfix tree-select-container1"},[a("div",{directives:[{name:"show",rawName:"v-show",value:3===t.activeFlag1,expression:"activeFlag1===3"}],staticStyle:{float:"left","margin-left":"10px"}},[a("v-date-picker",{ref:"content1",attrs:{range:"",maxRange:t.maxRange},on:{confirm:function(e){t.timeConfirm()}},model:{value:t.rangeDate1,callback:function(e){t.rangeDate1=e},expression:"rangeDate1"}})],1),t._v(" "),a("v-button",{attrs:{type:"primary"},on:{click:t.exportData}},[t._v("导出")]),t._v(" "),a("yhq-dept",{attrs:{deptData:t.deptData,deptDataFlag:!0},on:{deptSelectEvent:t.deptSelectEvent1}})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2===t.activeTab,expression:"activeTab === 2"}],staticClass:"time time-panel clearfix tree-select-container2"},[a("span",{staticClass:"time-option",class:{"time-active":2===t.activeFlag2},on:{click:function(e){t.dateChange2(2)}}},[t._v("今日")]),t._v(" "),a("span",{staticClass:"time-option",class:{"time-active":1===t.activeFlag2},on:{click:function(e){t.dateChange2(1)}}},[t._v("昨日")]),t._v(" "),a("span",{staticClass:"time-option",class:{"time-active":3===t.activeFlag2},on:{click:function(e){t.dateChange2(3)}}},[t._v("自定义时间段")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:3===t.activeFlag2,expression:"activeFlag2===3"}],staticStyle:{float:"left"}},[a("v-date-picker",{ref:"content2",attrs:{range:"",maxRange:t.maxRange},on:{confirm:function(e){t.timeConfirm()}},model:{value:t.rangeDate2,callback:function(e){t.rangeDate2=e},expression:"rangeDate2"}})],1),t._v(" "),a("v-button",{attrs:{type:"primary"},on:{click:t.exportData}},[t._v("导出")]),t._v(" "),a("yhq-dept",{ref:"yhqDept2",attrs:{deptData:t.deptData,deptDataFlag:!0,leafClickFlag:!0},on:{deptSelectEvent:t.deptSelectEvent2,deptInitEvent:t.deptInitEvent2}})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:3===t.activeTab,expression:"activeTab === 3"}],staticClass:"time time-panel clearfix tree-select-container3"},[a("span",{staticClass:"time-option",class:{"time-active":2===t.activeFlag3},on:{click:function(e){t.dateChange3(2)}}},[t._v("今日")]),t._v(" "),a("span",{staticClass:"time-option",class:{"time-active":1===t.activeFlag3},on:{click:function(e){t.dateChange3(1)}}},[t._v("昨日")]),t._v(" "),a("span",{staticClass:"time-option",class:{"time-active":3===t.activeFlag3},on:{click:function(e){t.dateChange3(3)}}},[t._v("自定义时间段")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:3===t.activeFlag3,expression:"activeFlag3===3"}],staticStyle:{float:"left"}},[t.isIE?a("el-date-picker",{attrs:{type:"datetimerange","value-format":"yyyy-MM-dd HH:mm",clearable:!1,"range-separator":"~","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:function(e){t.timeConfirm()}},model:{value:t.rangeDate3,callback:function(e){t.rangeDate3=e},expression:"rangeDate3"}}):t._e(),t._v(" "),t.isIE?t._e():a("v-date-picker",{ref:"content3",attrs:{range:"",maxRange:t.maxRange,"show-time":""},on:{confirm:function(e){t.timeConfirm()}},model:{value:t.rangeDate3,callback:function(e){t.rangeDate3=e},expression:"rangeDate3"}})],1),t._v(" "),a("v-button",{attrs:{type:"primary"},on:{click:t.exportData}},[t._v("导出")]),t._v(" "),a("yhq-dept",{attrs:{deptData:t.deptData,deptDataFlag:!0},on:{deptSelectEvent:t.deptSelectEvent3}}),t._v(" "),a("v-select",{directives:[{name:"show",rawName:"v-show",value:!(0===t.searchValue.length&&!t.searchValueFlag),expression:"!(searchValue.length === 0 && !searchValueFlag)"}],staticClass:"modal-input",attrs:{allowClear:!1,disabled:"",data:t.saleList3,placeholder:"请选择销售用户"},model:{value:t.sale3,callback:function(e){t.sale3=e},expression:"sale3"}}),t._v(" "),a("v-select",{directives:[{name:"show",rawName:"v-show",value:!(0===t.searchValue.length&&!t.searchValueFlag),expression:"!(searchValue.length === 0 && !searchValueFlag)"}],staticClass:"modal-input",staticStyle:{width:"232px","text-align":"left",height:"auto"},attrs:{allowClear:!1,disabled:"",placeholder:t.deptName3}})],1)]),t._v(" "),a("el-scrollbar",[a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.activeTab,expression:"activeTab === 1"}],staticStyle:{height:"100%"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.viewBox1Flag,expression:"viewBox1Flag"}],staticClass:"ant-table ant-table-large ant-table-bordered",staticStyle:{width:"100%",height:"74px",position:"absolute",left:"10px","z-index":"999"},style:t.viewBox1Style},[a("table",{staticClass:"ant-table-content"},[a("thead",{staticClass:"ant-table-thead"},[a("tr",[a("th",{attrs:{rowspan:"2"}},[t._v("日期")]),t._v(" "),a("th",{attrs:{colspan:"3"}},[t._v("呼出")]),t._v(" "),a("th",{attrs:{colspan:"3"}},[t._v("呼入")]),t._v(" "),a("th",{attrs:{colspan:"3"}},[t._v("呼出+呼入")]),t._v(" "),a("th",{attrs:{colspan:"6"}},[t._v("时长")])]),t._v(" "),a("tr",t._l(t.statisticsColumns,function(e,i){return i>0?a("th",{key:e.id},[t._v(t._s(e.nameTh))]):t._e()}))]),t._v(" "),a("tbody",{staticClass:"ant-table-tbody",staticStyle:{"z-index":"-1",visibility:"hidden"}},t._l(t.mydata1,function(e){return t.mydata1.length>0&&!t.mydata1Loading?a("tr",{key:e.id,staticClass:"ant-table-row"},[a("td",[t._v(t._s(e.date))]),t._v(" "),a("td",[t._v(t._s(e.callOutTotal))]),t._v(" "),a("td",[t._v(t._s(e.callOutConnectNum))]),t._v(" "),a("td",[t._v(t._s(e.callOutConnectRate))]),t._v(" "),a("td",[t._v(t._s(e.callInTotal))]),t._v(" "),a("td",[t._v(t._s(e.callInConnectNum))]),t._v(" "),a("td",[t._v(t._s(e.callInConnectRate))]),t._v(" "),a("td",[t._v(t._s(e.callTotal))]),t._v(" "),a("td",[t._v(t._s(e.callConnectNum))]),t._v(" "),a("td",[t._v(t._s(e.callConnectRate))]),t._v(" "),a("td",[t._v(t._s(t._f("second")(e.callOutTimeTotal)))]),t._v(" "),a("td",[t._v(t._s(t._f("second")(e.callOutTimeAvg)))]),t._v(" "),a("td",[t._v(t._s(t._f("second")(e.callInTimeTotal)))]),t._v(" "),a("td",[t._v(t._s(t._f("second")(e.callInTimeAvg)))]),t._v(" "),a("td",[t._v(t._s(t._f("second")(e.callTimeTotal)))]),t._v(" "),a("td",[t._v(t._s(t._f("second")(e.callTimeAvg)))])]):t._e()}))])]),t._v(" "),a("div",{staticClass:"v-content",staticStyle:{"margin-bottom":"5px",position:"relative",overflow:"visible"}},[a("v-select",{staticStyle:{width:"132px",position:"absolute",right:"115px",top:"10px","z-index":"1050"},attrs:{placeholder:"请选择查看参数","popup-container":t.popupContainer4,allowClear:!1,data:t.chartFieldList},on:{change:t.changeChartField},model:{value:t.chartField,callback:function(e){t.chartField=e},expression:"chartField"}}),t._v(" "),a("div",{staticStyle:{position:"relative",float:"right",top:"32px"},attrs:{id:"tree-select-container4"}}),t._v(" "),a("div",{style:{width:"100%",height:"300px"},attrs:{id:"myChart"}})],1),t._v(" "),a("div",{staticClass:"v-content ant-table ant-table-large ant-table-bordered",staticStyle:{height:"auto"},style:t.vContentHeigth,attrs:{id:"viewBox1"}},[a("table",{staticClass:"ant-table-content"},[a("thead",{staticClass:"ant-table-thead"},[a("tr",[a("th",{attrs:{rowspan:"2"}},[t._v("日期")]),t._v(" "),a("th",{attrs:{colspan:"3"}},[t._v("呼出")]),t._v(" "),a("th",{attrs:{colspan:"3"}},[t._v("呼入")]),t._v(" "),a("th",{attrs:{colspan:"3"}},[t._v("呼出+呼入")]),t._v(" "),a("th",{attrs:{colspan:"6"}},[t._v("时长")])]),t._v(" "),a("tr",t._l(t.statisticsColumns,function(e,i){return i>0?a("th",{key:e.id},[t._v(t._s(e.nameTh))]):t._e()}))]),t._v(" "),a("tbody",{staticClass:"ant-table-tbody"},[t._l(t.mydata1,function(e){return t.mydata1.length>0&&!t.mydata1Loading?a("tr",{key:e.id,staticClass:"ant-table-row"},[a("td",[t._v(t._s(e.date))]),t._v(" "),a("td",[t._v(t._s(e.callOutTotal))]),t._v(" "),a("td",[t._v(t._s(e.callOutConnectNum))]),t._v(" "),a("td",[t._v(t._s(e.callOutConnectRate))]),t._v(" "),a("td",[t._v(t._s(e.callInTotal))]),t._v(" "),a("td",[t._v(t._s(e.callInConnectNum))]),t._v(" "),a("td",[t._v(t._s(e.callInConnectRate))]),t._v(" "),a("td",[t._v(t._s(e.callTotal))]),t._v(" "),a("td",[t._v(t._s(e.callConnectNum))]),t._v(" "),a("td",[t._v(t._s(e.callConnectRate))]),t._v(" "),a("td",[t._v(t._s(t._f("second")(e.callOutTimeTotal)))]),t._v(" "),a("td",[t._v(t._s(t._f("second")(e.callOutTimeAvg)))]),t._v(" "),a("td",[t._v(t._s(t._f("second")(e.callInTimeTotal)))]),t._v(" "),a("td",[t._v(t._s(t._f("second")(e.callInTimeAvg)))]),t._v(" "),a("td",[t._v(t._s(t._f("second")(e.callTimeTotal)))]),t._v(" "),a("td",[t._v(t._s(t._f("second")(e.callTimeAvg)))])]):t._e()}),t._v(" "),0!==t.mydata1.length||t.mydata1Loading?t._e():a("tr",[a("td",{attrs:{colspan:"16"}},[t._v("暂无数据")])]),t._v(" "),t.mydata1Loading?a("tr",[a("td",{attrs:{colspan:"16"}},[a("v-spin",{attrs:{spinning:t.mydata1Loading}})],1)]):t._e()],2)])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2===t.activeTab,expression:"activeTab === 2"}],staticClass:"v-content",staticStyle:{height:"100%",padding:"0"},style:t.vContentHeigth3},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.viewBox2Flag,expression:"viewBox2Flag"}],staticClass:"ant-table ant-table-large ant-table-bordered",staticStyle:{width:"100%",height:"74px",position:"absolute",left:"10px","z-index":"999"},style:t.viewBox2Style},[a("table",{staticClass:"ant-table-content"},[a("thead",{staticClass:"ant-table-thead"},[a("tr",[a("th",{attrs:{rowspan:"2"}},[t._v("销售单元")]),t._v(" "),a("th",{attrs:{colspan:"3"}},[t._v("呼出")]),t._v(" "),a("th",{attrs:{colspan:"3"}},[t._v("呼入")]),t._v(" "),a("th",{attrs:{colspan:"3"}},[t._v("呼出+呼入")]),t._v(" "),a("th",{attrs:{colspan:"6"}},[t._v("时长")])]),t._v(" "),a("tr",t._l(t.statisticsColumns,function(e,i){return i>0?a("th",{key:e.id,staticStyle:{cursor:"pointer",width:"6.2%"},on:{click:function(a){t.sortDate2(e,i)}}},[t._v("\n              "+t._s(e.nameTh)+"\n              "),1===e.sortFlag?a("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[a("i",{staticClass:"fa fa-long-arrow-down",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),2===e.sortFlag?a("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[a("i",{staticClass:"fa fa-long-arrow-up",attrs:{"aria-hidden":"true"}})]):t._e()]):t._e()}))]),t._v(" "),a("tbody",{staticClass:"ant-table-tbody",staticStyle:{"z-index":"-1",visibility:"hidden"}},[t._l(t.mydata2,function(e){return t.mydata2.length>0&&!t.mydata2Loading?a("tr",{key:e.id,staticClass:"ant-table-row"},[a("td",{staticClass:"user-field",on:{click:function(i){t.deptDrilling(e)}}},[t._v(t._s(e.user))]),t._v(" "),a("td",[t._v(t._s(e.callOutTotal))]),t._v(" "),a("td",[t._v(t._s(e.callOutConnectNum))]),t._v(" "),a("td",[t._v(t._s(e.callOutConnectRate))]),t._v(" "),a("td",[t._v(t._s(e.callInTotal))]),t._v(" "),a("td",[t._v(t._s(e.callInConnectNum))]),t._v(" "),a("td",[t._v(t._s(e.callInConnectRate))]),t._v(" "),a("td",[t._v(t._s(e.callTotal))]),t._v(" "),a("td",[t._v(t._s(e.callConnectNum))]),t._v(" "),a("td",[t._v(t._s(e.callConnectRate))]),t._v(" "),a("td",[t._v(t._s(t._f("second")(e.callOutTimeTotal)))]),t._v(" "),a("td",[t._v(t._s(t._f("second")(e.callOutTimeAvg)))]),t._v(" "),a("td",[t._v(t._s(t._f("second")(e.callInTimeTotal)))]),t._v(" "),a("td",[t._v(t._s(t._f("second")(e.callInTimeAvg)))]),t._v(" "),a("td",[t._v(t._s(t._f("second")(e.callTimeTotal)))]),t._v(" "),a("td",[t._v(t._s(t._f("second")(e.callTimeAvg)))])]):t._e()}),t._v(" "),0!==t.mydata2.length||t.mydata2Loading?t._e():a("tr",[a("td",{attrs:{colspan:"16"}},[t._v("暂无数据")])]),t._v(" "),t.mydata2Loading?a("tr",[a("td",{attrs:{colspan:"16"}},[a("v-spin",{attrs:{spinning:t.mydata2Loading}})],1)]):t._e()],2)])]),t._v(" "),a("div",{staticClass:"v-content ant-table ant-table-large ant-table-bordered",staticStyle:{height:"auto"},style:t.vContentHeigth,attrs:{id:"viewBox2"}},[a("v-breadcrumb",{staticStyle:{"margin-bottom":"15px"},attrs:{separator:">"}},t._l(t.breadcrumb,function(e){return a("v-breadcrumb-item",{key:e.id,staticStyle:{cursor:"pointer"}},[a("span",{on:{click:function(i){t.backToDept(e)}}},[t._v(t._s(e.name))])])})),t._v(" "),a("table",{staticClass:"ant-table-content"},[a("thead",{staticClass:"ant-table-thead"},[a("tr",[a("th",{attrs:{rowspan:"2"}},[t._v("销售单元")]),t._v(" "),a("th",{attrs:{colspan:"3"}},[t._v("呼出")]),t._v(" "),a("th",{attrs:{colspan:"3"}},[t._v("呼入")]),t._v(" "),a("th",{attrs:{colspan:"3"}},[t._v("呼出+呼入")]),t._v(" "),a("th",{attrs:{colspan:"6"}},[t._v("时长")])]),t._v(" "),a("tr",t._l(t.statisticsColumns,function(e,i){return i>0?a("th",{key:e.id,staticStyle:{cursor:"pointer",width:"6.2%"},on:{click:function(a){t.sortDate2(e,i)}}},[t._v("\n              "+t._s(e.nameTh)+"\n              "),1===e.sortFlag?a("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[a("i",{staticClass:"fa fa-long-arrow-down",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),2===e.sortFlag?a("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[a("i",{staticClass:"fa fa-long-arrow-up",attrs:{"aria-hidden":"true"}})]):t._e()]):t._e()}))]),t._v(" "),a("tbody",{staticClass:"ant-table-tbody"},[t._l(t.mydata2,function(e){return t.mydata2.length>0&&!t.mydata2Loading?a("tr",{key:e.id,staticClass:"ant-table-row"},[a("td",{staticClass:"user-field",on:{click:function(i){t.deptDrilling(e)}}},[t._v(t._s(e.user))]),t._v(" "),a("td",[t._v(t._s(e.callOutTotal))]),t._v(" "),a("td",[t._v(t._s(e.callOutConnectNum))]),t._v(" "),a("td",[t._v(t._s(e.callOutConnectRate))]),t._v(" "),a("td",[t._v(t._s(e.callInTotal))]),t._v(" "),a("td",[t._v(t._s(e.callInConnectNum))]),t._v(" "),a("td",[t._v(t._s(e.callInConnectRate))]),t._v(" "),a("td",[t._v(t._s(e.callTotal))]),t._v(" "),a("td",[t._v(t._s(e.callConnectNum))]),t._v(" "),a("td",[t._v(t._s(e.callConnectRate))]),t._v(" "),a("td",[t._v(t._s(t._f("second")(e.callOutTimeTotal)))]),t._v(" "),a("td",[t._v(t._s(t._f("second")(e.callOutTimeAvg)))]),t._v(" "),a("td",[t._v(t._s(t._f("second")(e.callInTimeTotal)))]),t._v(" "),a("td",[t._v(t._s(t._f("second")(e.callInTimeAvg)))]),t._v(" "),a("td",[t._v(t._s(t._f("second")(e.callTimeTotal)))]),t._v(" "),a("td",[t._v(t._s(t._f("second")(e.callTimeAvg)))])]):t._e()}),t._v(" "),0!==t.mydata2.length||t.mydata2Loading?t._e():a("tr",[a("td",{attrs:{colspan:"16"}},[t._v("暂无数据")])]),t._v(" "),t.mydata2Loading?a("tr",[a("td",{attrs:{colspan:"16"}},[a("v-spin",{attrs:{spinning:t.mydata2Loading}})],1)]):t._e()],2)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.total2>0,expression:"total2>0"}],staticClass:"clearfix content-pagination2",staticStyle:{"margin-top":"30px"}},[a("div",{staticStyle:{float:"right",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(e){t.pageNo2=Math.ceil(t.total2/t.pageSize),t.changePageNo}}},[t._v("尾页")]),t._v(" "),a("div",{staticStyle:{float:"right"}},[a("v-pagination",{attrs:{value:t.pageNo2,total:t.total2,pageSize:t.pageSize,"show-quick-jumper":"",simple:""},on:{change:t.changePageNo}})],1),t._v(" "),a("div",{staticStyle:{float:"right",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(e){t.pageNo2=1,t.changePageNo}}},[t._v("首页")])])],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:3===t.activeTab,expression:"activeTab === 3"}],staticClass:"v-content",staticStyle:{padding:"0",height:"100%"},style:t.vContentHeigth3},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.viewBox3Flag,expression:"viewBox3Flag"}],staticClass:"ant-table ant-table-large ant-table-bordered",staticStyle:{width:"100%",height:"57px",position:"absolute",left:"10px","z-index":"999"},style:t.viewBox3Style},[a("table",{staticClass:"ant-table-content",staticStyle:{overflow:"visible"}},[a("thead",{staticClass:"ant-table-thead"},[a("tr",[a("th",{staticStyle:{padding:"16px 8px",width:"32px",cursor:"auto"}},[a("span",{on:{click:t.checkAll}},[t.checkAllFlag?t._e():a("img",{attrs:{src:i("1x9i")}}),t._v(" "),t.checkAllFlag?a("img",{attrs:{src:i("DTRI")}}):t._e()])]),t._v(" "),a("th",{staticStyle:{padding:"16px 8px",width:"10%"}},[t._v("\n              "+t._s(t.detailColumns[0].nameTh)+"\n            ")]),t._v(" "),a("th",{staticStyle:{padding:"16px 8px",width:"10%"}},[t._v("\n              "+t._s(t.detailColumns[1].nameTh)+"\n            ")]),t._v(" "),a("th",{staticStyle:{padding:"16px 8px",width:"10%"}},[t._v("\n              "+t._s(t.detailColumns[2].nameTh)+"\n            ")]),t._v(" "),a("th",{staticStyle:{padding:"16px 8px",width:"10%"}},[t._v("\n              "+t._s(t.detailColumns[3].nameTh)+"\n            ")]),t._v(" "),a("th",{staticStyle:{width:"220px",position:"relative"},on:{mouseover:function(e){t.detailColumns[4].hoverFlag=!0},mouseout:function(e){t.detailColumns[4].hoverFlag=!1}}},[a("span",[t._v(t._s(t.detailColumns[4].nameTh))]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.detailColumns[4].hoverFlag,expression:"detailColumns[4].hoverFlag"}],staticClass:"detai-condetion",on:{click:function(e){t.showCondition(t.detailColumns[4],4)}}},[a("i",{staticClass:"fa fa-chevron-circle-down",attrs:{"aria-hidden":"true"}})])]),t._v(" "),a("th",{staticStyle:{padding:"16px 8px",cursor:"pointer",width:"20%"},on:{click:function(e){t.sortDate3(t.detailColumns[5],5)}}},[t._v("\n              "+t._s(t.detailColumns[5].nameTh)+"\n              "),t.sortDir3?t._e():a("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[a("i",{staticClass:"fa fa-long-arrow-down",attrs:{"aria-hidden":"true"}})]),t._v(" "),1===t.detailColumns[5].sortFlag?a("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[a("i",{staticClass:"fa fa-long-arrow-down",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),2===t.detailColumns[5].sortFlag?a("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[a("i",{staticClass:"fa fa-long-arrow-up",attrs:{"aria-hidden":"true"}})]):t._e()]),t._v(" "),a("th",{staticStyle:{width:"180px",position:"relative",padding:"16px 8px"},on:{mouseover:function(e){t.detailColumns[6].hoverFlag=!0},mouseout:function(e){t.detailColumns[6].hoverFlag=!1}}},[a("span",{staticStyle:{cursor:"pointer"},on:{click:function(e){t.sortDate3(t.detailColumns[6],6)}}},[t._v(t._s(t.detailColumns[6].nameTh))]),t._v(" "),1===t.detailColumns[6].sortFlag?a("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[a("i",{staticClass:"fa fa-long-arrow-down",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),2===t.detailColumns[6].sortFlag?a("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[a("i",{staticClass:"fa fa-long-arrow-up",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.detailColumns[6].hoverFlag,expression:"detailColumns[6].hoverFlag"}],staticClass:"detai-condetion",staticStyle:{"margin-left":"15px"},on:{click:function(e){t.showCondition(t.detailColumns[6],6)}}},[a("i",{staticClass:"fa fa-chevron-circle-down",attrs:{"aria-hidden":"true"}})])]),t._v(" "),a("th",{staticStyle:{padding:"16px 8px",width:"15%"}},[t._v("\n              "+t._s(t.detailColumns[7].nameTh)+"\n            ")])])]),t._v(" "),a("tbody",{staticClass:"ant-table-tbody",staticStyle:{"z-index":"-1",visibility:"hidden"}},[t._l(t.mydata3,function(e){return t.mydata3.length>0&&!t.mydata3Loading?a("tr",{key:e.id,staticClass:"ant-table-row"},[a("td",{staticStyle:{width:"32px","text-align":"center"}},[a("div",{on:{click:function(i){t.clickRow(e)}}},[!e.checked&&e.file?a("img",{attrs:{src:i("1x9i")}}):t._e(),t._v(" "),e.checked&&e.file?a("img",{attrs:{src:i("DTRI")}}):t._e(),t._v(" "),e.file?t._e():a("img",{staticStyle:{cursor:"no-drop"},attrs:{src:i("Gi4w")}})])]),t._v(" "),a("td",[t._v(t._s(e.username))]),t._v(" "),a("td",[t._v(t._s(e.deptName))]),t._v(" "),a("td",[t._v(t._s(e.contact_name))]),t._v(" "),a("td",[t._v(t._s(e.contact_phone))]),t._v(" "),a("td",{staticStyle:{width:"220px"}},[t._v(t._s(e.call_type))]),t._v(" "),a("td",[t._v(t._s(e.start_time))]),t._v(" "),a("td",{staticStyle:{width:"180px"}},[t._v(t._s(e.duration_str))]),t._v(" "),a("td",{staticStyle:{width:"220px",padding:"10px 8px"}},[a("div",{staticStyle:{"text-align":"center",color:"#666",position:"relative"}},[!e.showAudioFalg&&e.file?a("span",{staticClass:"operation",on:{click:function(i){t.playAudio(e,1)}}},[t._v("播放")]):t._e(),t._v(" "),!e.showAudioFalg&&e.file?a("span",{staticClass:"operation",on:{click:function(i){t.downloadFile(e)}}},[t._v("下载")]):t._e(),t._v(" "),a("div",{staticClass:"clearfix"},[a("div",{staticStyle:{width:"88%",float:"left"}}),t._v(" "),a("div",{staticStyle:{width:"12%",float:"left"}},[e.showAudioFalg?a("v-button",{staticClass:"close-btn",attrs:{type:"ghost",shape:"circle-outline",icon:"close"},on:{click:function(i){t.playAudio(e,2)}}}):t._e()],1)])])])]):t._e()}),t._v(" "),0!==t.mydata3.length||t.mydata3Loading?t._e():a("tr",[a("td",{attrs:{colspan:"9"}},[t._v("暂无数据")])]),t._v(" "),t.mydata3Loading?a("tr",[a("td",{attrs:{colspan:"9"}},[a("v-spin",{attrs:{spinning:t.mydata3Loading}})],1)]):t._e()],2)])]),t._v(" "),a("div",{staticStyle:{height:"auto"},attrs:{id:"viewBox3"}},[a("div",{staticClass:"v-content ant-table ant-table-large ant-table-bordered",staticStyle:{height:"auto"},style:t.vContentHeigth3},[a("div",[0===t.mydata3SelectIds.length?a("div",[t.sortTip3_callType.length>0?a("div",{staticClass:"sort-container",staticStyle:{"margin-right":"15px"}},[t._v("\n                通话类型："),a("span",{staticStyle:{color:"#4394F7"}},[t._v(t._s(t.sortTip3_callType))]),t._v(" "),a("span",{staticClass:"sort-container-btn",on:{click:function(e){t.closesortTip3_callType()}}},[t._v("×")])]):t._e(),t._v(" "),t.sortTip3_dur.length>0?a("div",{staticClass:"sort-container"},[t._v("\n                通话时长(秒)："),a("span",{staticStyle:{color:"#4394F7"}},[t._v(t._s(t.sortTip3_dur))]),t._v(" "),a("span",{staticClass:"sort-container-btn",on:{click:function(e){t.closesortTip3_dur()}}},[t._v("×")])]):t._e()]):t._e(),t._v(" "),a("div",{staticStyle:{float:"right","margin-bottom":"10px",position:"relative"}},[a("v-input",{staticClass:"input-box",staticStyle:{width:"200px","padding-right":"28px"},attrs:{placeholder:"销售姓名/客户电话/销售ID"},nativeOn:{keyup:function(e){t.keyupSearch(e)},blur:function(e){t.blurSearch()}},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}}),t._v(" "),0===t.searchValue.length?a("v-icon",{staticStyle:{position:"absolute",right:"10px",top:"12px","font-size":"14px",color:"#d9d9d9"},attrs:{type:"search"}}):t._e(),t._v(" "),t.searchValue.length>0?a("span",{staticStyle:{position:"absolute",right:"10px",top:"7px","font-size":"14px",color:"#d9d9d9",cursor:"pointer"},on:{click:function(e){t.clearSearchValue()}}},[a("v-icon",{attrs:{type:"close"}})],1):t._e()],1)]),t._v(" "),t.mydata3SelectIds.length>0?a("div",{staticStyle:{"line-height":"32px"}},[t._v("\n            已选择"+t._s(t.mydata3SelectIds.length)+"条\n                |    \n            "),a("v-button",{on:{click:t.downloadAll}},[t._v("下载")])],1):t._e(),t._v(" "),a("table",{staticClass:"ant-table-content",staticStyle:{overflow:"visible"}},[a("thead",{staticClass:"ant-table-thead"},[a("tr",[a("th",{staticStyle:{padding:"16px 8px",width:"32px",cursor:"auto"}},[a("span",{on:{click:t.checkAll}},[t.checkAllFlag?t._e():a("img",{attrs:{src:i("1x9i")}}),t._v(" "),t.checkAllFlag?a("img",{attrs:{src:i("DTRI")}}):t._e()])]),t._v(" "),a("th",{staticStyle:{padding:"16px 8px",width:"10%"}},[t._v("\n                "+t._s(t.detailColumns[0].nameTh)+"\n              ")]),t._v(" "),a("th",{staticStyle:{padding:"16px 8px",width:"10%"}},[t._v("\n                "+t._s(t.detailColumns[1].nameTh)+"\n              ")]),t._v(" "),a("th",{staticStyle:{padding:"16px 8px",width:"10%"}},[t._v("\n                "+t._s(t.detailColumns[2].nameTh)+"\n              ")]),t._v(" "),a("th",{staticStyle:{padding:"16px 8px",width:"10%"}},[t._v("\n                "+t._s(t.detailColumns[3].nameTh)+"\n              ")]),t._v(" "),a("th",{staticStyle:{width:"220px",position:"relative"},on:{mouseover:function(e){t.detailColumns[4].hoverFlag=!0},mouseout:function(e){t.detailColumns[4].hoverFlag=!1}}},[a("span",[t._v(t._s(t.detailColumns[4].nameTh))]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.detailColumns[4].hoverFlag,expression:"detailColumns[4].hoverFlag"}],staticClass:"detai-condetion",on:{click:function(e){t.showCondition(t.detailColumns[4],4)}}},[a("i",{staticClass:"fa fa-chevron-circle-down",attrs:{"aria-hidden":"true"}})]),t._v(" "),t.detailColumns[4].clickFlag?a("div",{staticClass:"ant-modal-wrap",on:{click:function(e){t.detailColumns[4].clickFlag=!1,t.detailColumns[4].hoverFlag=!1}}}):t._e(),t._v(" "),t.detailColumns[4].clickFlag?a("div",{staticClass:"condition-container",style:t.viewBox3ConditionStyle},[a("div",[a("i",{staticClass:"fa fa-filter",attrs:{"aria-hidden":"true"}}),t._v("  筛选")]),t._v(" "),a("div",{staticClass:"condition-container-content"},[a("p",[a("v-checkbox",{on:{click:function(e){t.callyTypeChange(t.callyType_1)}},model:{value:t.callyType_1,callback:function(e){t.callyType_1=e},expression:"callyType_1"}},[t._v("呼出")])],1),t._v(" "),a("p",[a("v-checkbox",{on:{click:function(e){t.callyTypeChange(t.callyType_2)}},model:{value:t.callyType_2,callback:function(e){t.callyType_2=e},expression:"callyType_2"}},[t._v("呼入")])],1),t._v(" "),a("p",[a("v-checkbox",{on:{click:function(e){t.callyTypeChange(t.callyType_3)}},model:{value:t.callyType_3,callback:function(e){t.callyType_3=e},expression:"callyType_3"}},[t._v("呼出未接")])],1),t._v(" "),a("p",[a("v-checkbox",{on:{click:function(e){t.callyTypeChange(t.callyType_4)}},model:{value:t.callyType_4,callback:function(e){t.callyType_4=e},expression:"callyType_4"}},[t._v("呼入未接")])],1)]),t._v(" "),a("div",{staticClass:"clearfix condition-container-footer"},[a("v-button",{staticStyle:{float:"left",left:"10px",width:"56px",padding:"0 15px",height:"28px"},attrs:{type:"primary"},on:{click:function(e){t.callyTypeSure(t.detailColumns[4]),t.detailColumns[4].hoverFlag=!1}}},[t._v("确定")]),t._v(" "),a("v-button",{staticStyle:{float:"left",left:"10px"},on:{click:function(e){t.detailColumns[4].clickFlag=!1,t.detailColumns[4].hoverFlag=!1}}},[t._v("取消")])],1)]):t._e()]),t._v(" "),a("th",{staticStyle:{padding:"16px 8px",cursor:"pointer",width:"20%"},on:{click:function(e){t.sortDate3(t.detailColumns[5],5)}}},[t._v("\n                "+t._s(t.detailColumns[5].nameTh)+"\n                "),t.sortDir3?t._e():a("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[a("i",{staticClass:"fa fa-long-arrow-down",attrs:{"aria-hidden":"true"}})]),t._v(" "),1===t.detailColumns[5].sortFlag?a("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[a("i",{staticClass:"fa fa-long-arrow-down",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),2===t.detailColumns[5].sortFlag?a("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[a("i",{staticClass:"fa fa-long-arrow-up",attrs:{"aria-hidden":"true"}})]):t._e()]),t._v(" "),a("th",{staticStyle:{width:"180px",position:"relative",padding:"16px 8px"},on:{mouseover:function(e){t.detailColumns[6].hoverFlag=!0},mouseout:function(e){t.detailColumns[6].hoverFlag=!1}}},[a("span",{staticStyle:{cursor:"pointer"},on:{click:function(e){t.sortDate3(t.detailColumns[6],6)}}},[t._v(t._s(t.detailColumns[6].nameTh))]),t._v(" "),1===t.detailColumns[6].sortFlag?a("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[a("i",{staticClass:"fa fa-long-arrow-down",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),2===t.detailColumns[6].sortFlag?a("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[a("i",{staticClass:"fa fa-long-arrow-up",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.detailColumns[6].hoverFlag,expression:"detailColumns[6].hoverFlag"}],staticClass:"detai-condetion",staticStyle:{"margin-left":"15px"},on:{click:function(e){t.showCondition(t.detailColumns[6],6)}}},[a("i",{staticClass:"fa fa-chevron-circle-down",attrs:{"aria-hidden":"true"}})]),t._v(" "),t.detailColumns[6].clickFlag?a("div",{staticClass:"ant-modal-wrap",on:{click:function(e){t.detailColumns[6].clickFlag=!1,t.detailColumns[6].hoverFlag=!1}}}):t._e(),t._v(" "),t.detailColumns[6].clickFlag?a("div",{staticClass:"condition-container",staticStyle:{width:"270px",height:"160px"},style:t.viewBox3ConditionStyle},[a("div",[a("i",{staticClass:"fa fa-filter",attrs:{"aria-hidden":"true"}}),t._v("  筛选")]),t._v(" "),a("div",{staticClass:"condition-container-content"},[a("p",[t._v("通话时长(秒)")]),t._v(" "),a("p",[a("v-input-number",{attrs:{min:1,max:86400},model:{value:t.duration_min,callback:function(e){t.duration_min=e},expression:"duration_min"}}),t._v(" 秒 至 "),a("v-input-number",{attrs:{min:1,max:86400},model:{value:t.duration_max,callback:function(e){t.duration_max=e},expression:"duration_max"}}),t._v(" 秒")],1),t._v(" "),a("p")]),t._v(" "),a("div",{staticClass:"clearfix condition-container-footer",staticStyle:{"padding-left":"126px"}},[a("v-button",{staticStyle:{float:"left",left:"10px",width:"56px",padding:"0 15px",height:"28px"},attrs:{type:"primary"},on:{click:function(e){t.durationSure(t.detailColumns[6]),t.detailColumns[6].hoverFlag=!1}}},[t._v("确定")]),t._v(" "),a("v-button",{staticStyle:{float:"left",left:"10px"},on:{click:function(e){t.detailColumns[6].clickFlag=!1,t.detailColumns[6].hoverFlag=!1}}},[t._v("取消")])],1)]):t._e()]),t._v(" "),a("th",{staticStyle:{padding:"16px 8px",width:"15%"}},[t._v("\n                "+t._s(t.detailColumns[7].nameTh)+"\n              ")])])]),t._v(" "),a("tbody",{staticClass:"ant-table-tbody"},[t._l(t.mydata3,function(e){return t.mydata3.length>0&&!t.mydata3Loading?a("tr",{key:e.id,staticClass:"ant-table-row"},[a("td",{staticStyle:{width:"32px","text-align":"center"}},[a("div",{on:{click:function(i){t.clickRow(e)}}},[!e.checked&&e.file?a("img",{attrs:{src:i("1x9i")}}):t._e(),t._v(" "),e.checked&&e.file?a("img",{attrs:{src:i("DTRI")}}):t._e(),t._v(" "),e.file?t._e():a("img",{staticStyle:{cursor:"no-drop"},attrs:{src:i("Gi4w")}})])]),t._v(" "),a("td",[t._v(t._s(e.username))]),t._v(" "),a("td",[t._v(t._s(e.deptName))]),t._v(" "),a("td",[t._v(t._s(e.contact_name))]),t._v(" "),a("td",[t._v(t._s(e.contact_phone))]),t._v(" "),a("td",{staticStyle:{width:"220px"}},[t._v(t._s(e.call_type))]),t._v(" "),a("td",[t._v(t._s(e.start_time))]),t._v(" "),a("td",{staticStyle:{width:"180px"}},[t._v(t._s(e.duration_str))]),t._v(" "),a("td",{staticStyle:{width:"220px",padding:"10px 8px"}},[a("div",{staticStyle:{"text-align":"center",color:"#666",position:"relative"}},[!e.showAudioFalg&&e.file?a("span",{staticClass:"operation",on:{click:function(i){t.playAudio(e,1)}}},[t._v("播放")]):t._e(),t._v(" "),!e.showAudioFalg&&e.file?a("span",{staticClass:"operation",on:{click:function(i){t.downloadFile(e)}}},[t._v("下载")]):t._e(),t._v(" "),a("div",{staticClass:"clearfix"},[a("div",{staticStyle:{width:"88%",float:"left"}},[e.showAudioFalg?a("yhq-voice",{attrs:{src:e.file,multi:!0,mode:"big"}}):t._e()],1),t._v(" "),a("div",{staticStyle:{width:"12%",float:"left"}},[e.showAudioFalg?a("v-button",{staticClass:"close-btn",attrs:{type:"ghost",shape:"circle-outline",icon:"close"},on:{click:function(i){t.playAudio(e,2)}}}):t._e()],1)])])])]):t._e()}),t._v(" "),0!==t.mydata3.length||t.mydata3Loading?t._e():a("tr",[a("td",{attrs:{colspan:"9"}},[t._v("暂无数据")])]),t._v(" "),t.mydata3Loading?a("tr",[a("td",{attrs:{colspan:"9"}},[a("v-spin",{attrs:{spinning:t.mydata3Loading}})],1)]):t._e()],2)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.total3>0,expression:"total3>0"}],staticClass:"clearfix content-pagination3",staticStyle:{"margin-top":"30px"}},[a("div",{staticStyle:{float:"right",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(e){t.pageNo3=Math.ceil(t.total3/t.pageSize),t.changePageNo}}},[t._v("尾页")]),t._v(" "),a("div",{staticStyle:{float:"right"}},[a("v-pagination",{attrs:{value:t.pageNo3,total:t.total3,pageSize:t.pageSize,"show-quick-jumper":"",simple:""},on:{change:t.changePageNo}})],1),t._v(" "),a("div",{staticStyle:{float:"right",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(e){t.pageNo3=1,t.changePageNo}}},[t._v("首页")])])])])])]),t._v(" "),[a("v-modal",{attrs:{title:t.detailModalTitle,visible:t.detailModalVisible,wrapClassName:"v-no-modal-footer v-no-modal-padding","confirm-loading":t.detailModalLoading,width:1200},on:{ok:function(e){t.detailModalVisible=!1},cancel:function(e){t.detailModalVisible=!1}}},[a("div",{staticStyle:{padding:"0"},style:t.detailModalStyle},[a("el-scrollbar",[a("div",{staticStyle:{height:"auto",padding:"0","padding-right":"12px"}},[a("div",{staticClass:"ant-table ant-table-large ant-table-bordered",staticStyle:{height:"auto",padding:"0","min-height":"380px"}},[a("div",{staticStyle:{height:"42px",width:"100%"}},[0===t.mydata4SelectIds.length?a("div",[t.sortTip4_callType.length>0?a("div",{staticClass:"sort-container",staticStyle:{"margin-right":"15px"}},[t._v("\n                  通话类型："),a("span",{staticStyle:{color:"#4394F7"}},[t._v(t._s(t.sortTip4_callType))]),t._v(" "),a("span",{staticClass:"sort-container-btn",on:{click:function(e){t.closesortTip4_callType()}}},[t._v("×")])]):t._e(),t._v(" "),t.sortTip4_dur.length>0?a("div",{staticClass:"sort-container"},[t._v("\n                  通话时长(秒)："),a("span",{staticStyle:{color:"#4394F7"}},[t._v(t._s(t.sortTip4_dur))]),t._v(" "),a("span",{staticClass:"sort-container-btn",on:{click:function(e){t.closesortTip4_dur()}}},[t._v("×")])]):t._e()]):t._e(),t._v(" "),t.mydata4SelectIds.length>0?a("div",{staticStyle:{"line-height":"32px"}},[t._v("\n                已选择"+t._s(t.mydata4SelectIds.length)+"条\n                    |    \n                "),a("v-button",{on:{click:t.downloadAll4}},[t._v("下载")])],1):t._e()]),t._v(" "),a("table",{staticClass:"ant-table-content",staticStyle:{overflow:"visible"}},[a("thead",{staticClass:"ant-table-thead"},[a("tr",[a("th",{staticStyle:{padding:"16px 8px",width:"32px",cursor:"auto"}},[a("span",{on:{click:t.checkAll4}},[t.checkAllFlag4?t._e():a("img",{attrs:{src:i("1x9i")}}),t._v(" "),t.checkAllFlag4?a("img",{attrs:{src:i("DTRI")}}):t._e()])]),t._v(" "),a("th",{staticStyle:{padding:"16px 8px",width:"10%"}},[t._v("\n                  "+t._s(t.detailModalColumns[0].nameTh)+"\n                ")]),t._v(" "),a("th",{staticStyle:{padding:"16px 8px",width:"10%"}},[t._v("\n                  "+t._s(t.detailModalColumns[1].nameTh)+"\n                ")]),t._v(" "),a("th",{staticStyle:{width:"220px",position:"relative"},on:{mouseover:function(e){t.detailModalColumns[2].hoverFlag=!0},mouseout:function(e){t.detailModalColumns[2].hoverFlag=!1}}},[a("span",[t._v(t._s(t.detailModalColumns[2].nameTh))]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.detailModalColumns[2].hoverFlag,expression:"detailModalColumns[2].hoverFlag"}],staticClass:"detai-condetion",on:{click:function(e){t.showCondition(t.detailModalColumns[2],2)}}},[a("i",{staticClass:"fa fa-chevron-circle-down",attrs:{"aria-hidden":"true"}})]),t._v(" "),t.detailModalColumns[2].clickFlag?a("div",{staticClass:"ant-modal-wrap",on:{click:function(e){t.detailModalColumns[2].clickFlag=!1,t.detailModalColumns[2].hoverFlag=!1}}}):t._e(),t._v(" "),t.detailModalColumns[2].clickFlag?a("div",{staticClass:"condition-container"},[a("div",[a("i",{staticClass:"fa fa-filter",attrs:{"aria-hidden":"true"}}),t._v("  筛选")]),t._v(" "),a("div",{staticClass:"condition-container-content"},[a("p",[a("v-checkbox",{on:{click:function(e){t.callyTypeChange(t.callyType4_1)}},model:{value:t.callyType4_1,callback:function(e){t.callyType4_1=e},expression:"callyType4_1"}},[t._v("呼出")])],1),t._v(" "),a("p",[a("v-checkbox",{on:{click:function(e){t.callyTypeChange(t.callyType4_2)}},model:{value:t.callyType4_2,callback:function(e){t.callyType4_2=e},expression:"callyType4_2"}},[t._v("呼入")])],1),t._v(" "),a("p",[a("v-checkbox",{on:{click:function(e){t.callyTypeChange(t.callyType4_3)}},model:{value:t.callyType4_3,callback:function(e){t.callyType4_3=e},expression:"callyType4_3"}},[t._v("呼出未接")])],1),t._v(" "),a("p",[a("v-checkbox",{on:{click:function(e){t.callyTypeChange(t.callyType4_4)}},model:{value:t.callyType4_4,callback:function(e){t.callyType4_4=e},expression:"callyType4_4"}},[t._v("呼入未接")])],1)]),t._v(" "),a("div",{staticClass:"clearfix condition-container-footer"},[a("v-button",{staticStyle:{float:"left",left:"10px",width:"56px",padding:"0 15px",height:"28px"},attrs:{type:"primary"},on:{click:function(e){t.callyTypeSure4(t.detailModalColumns[2]),t.detailModalColumns[2].hoverFlag=!1}}},[t._v("确定")]),t._v(" "),a("v-button",{staticStyle:{float:"left",left:"10px"},on:{click:function(e){t.detailModalColumns[2].clickFlag=!1,t.detailModalColumns[2].hoverFlag=!1}}},[t._v("取消")])],1)]):t._e()]),t._v(" "),a("th",{staticStyle:{padding:"16px 8px",cursor:"pointer",width:"20%"},on:{click:function(e){t.sortDate4(t.detailModalColumns[3],3)}}},[t._v("\n                  "+t._s(t.detailModalColumns[3].nameTh)+"\n                  "),t.sortDir4?t._e():a("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[a("i",{staticClass:"fa fa-long-arrow-down",attrs:{"aria-hidden":"true"}})]),t._v(" "),1===t.detailModalColumns[3].sortFlag?a("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[a("i",{staticClass:"fa fa-long-arrow-down",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),2===t.detailModalColumns[3].sortFlag?a("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[a("i",{staticClass:"fa fa-long-arrow-up",attrs:{"aria-hidden":"true"}})]):t._e()]),t._v(" "),a("th",{staticStyle:{width:"180px",position:"relative",padding:"16px 8px"},on:{mouseover:function(e){t.detailModalColumns[4].hoverFlag=!0},mouseout:function(e){t.detailModalColumns[4].hoverFlag=!1}}},[a("span",{staticStyle:{cursor:"pointer"},on:{click:function(e){t.sortDate4(t.detailModalColumns[4],4)}}},[t._v(t._s(t.detailModalColumns[4].nameTh))]),t._v(" "),1===t.detailModalColumns[4].sortFlag?a("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[a("i",{staticClass:"fa fa-long-arrow-down",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),2===t.detailModalColumns[4].sortFlag?a("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[a("i",{staticClass:"fa fa-long-arrow-up",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.detailModalColumns[4].hoverFlag,expression:"detailModalColumns[4].hoverFlag"}],staticClass:"detai-condetion",staticStyle:{"margin-left":"20px"},on:{click:function(e){t.showCondition(t.detailModalColumns[4],4)}}},[a("i",{staticClass:"fa fa-chevron-circle-down",attrs:{"aria-hidden":"true"}})]),t._v(" "),t.detailModalColumns[4].clickFlag?a("div",{staticClass:"ant-modal-wrap",on:{click:function(e){t.detailModalColumns[4].clickFlag=!1,t.detailModalColumns[4].hoverFlag=!1}}}):t._e(),t._v(" "),t.detailModalColumns[4].clickFlag?a("div",{staticClass:"condition-container",staticStyle:{width:"270px",height:"160px"}},[a("div",[a("i",{staticClass:"fa fa-filter",attrs:{"aria-hidden":"true"}}),t._v("  筛选")]),t._v(" "),a("div",{staticClass:"condition-container-content"},[a("p",[t._v("通话时长(秒)")]),t._v(" "),a("p",[a("v-input-number",{attrs:{min:1,max:86400},model:{value:t.duration_min4,callback:function(e){t.duration_min4=e},expression:"duration_min4"}}),t._v(" 秒 至 "),a("v-input-number",{attrs:{min:1,max:86400},model:{value:t.duration_max4,callback:function(e){t.duration_max4=e},expression:"duration_max4"}}),t._v(" 秒")],1),t._v(" "),a("p")]),t._v(" "),a("div",{staticClass:"clearfix condition-container-footer",staticStyle:{"padding-left":"126px"}},[a("v-button",{staticStyle:{float:"left",left:"10px",width:"56px",padding:"0 15px",height:"28px"},attrs:{type:"primary"},on:{click:function(e){t.durationSure4(t.detailModalColumns[4]),t.detailModalColumns[4].hoverFlag=!1}}},[t._v("确定")]),t._v(" "),a("v-button",{staticStyle:{float:"left",left:"10px"},on:{click:function(e){t.detailModalColumns[4].clickFlag=!1,t.detailModalColumns[4].hoverFlag=!1}}},[t._v("取消")])],1)]):t._e()]),t._v(" "),a("th",{staticStyle:{padding:"16px 8px",width:"15%"}},[t._v("\n                  "+t._s(t.detailModalColumns[5].nameTh)+"\n                ")])])]),t._v(" "),a("tbody",{staticClass:"ant-table-tbody"},[t._l(t.mydata4,function(e){return t.mydata4.length>0&&!t.mydata4Loading?a("tr",{key:e.id,staticClass:"ant-table-row"},[a("td",{staticStyle:{width:"32px","text-align":"center"}},[a("div",{on:{click:function(i){t.clickRow4(e)}}},[!e.checked&&e.file?a("img",{attrs:{src:i("1x9i")}}):t._e(),t._v(" "),e.checked&&e.file?a("img",{attrs:{src:i("DTRI")}}):t._e(),t._v(" "),e.file?t._e():a("img",{staticStyle:{cursor:"no-drop"},attrs:{src:i("Gi4w")}})])]),t._v(" "),a("td",[t._v(t._s(e.contact_name))]),t._v(" "),a("td",[t._v(t._s(e.contact_phone))]),t._v(" "),a("td",{staticStyle:{width:"220px"}},[t._v(t._s(e.call_type))]),t._v(" "),a("td",[t._v(t._s(e.start_time))]),t._v(" "),a("td",{staticStyle:{width:"180px"}},[t._v(t._s(e.duration_str))]),t._v(" "),a("td",{staticStyle:{width:"220px"}},[a("div",{staticStyle:{"text-align":"center",color:"#666",position:"relative"}},[!e.showAudioFalg&&e.file?a("span",{staticClass:"operation",on:{click:function(i){t.playAudio4(e,1)}}},[t._v("播放")]):t._e(),t._v(" "),!e.showAudioFalg&&e.file?a("span",{staticClass:"operation",on:{click:function(i){t.downloadFile4(e)}}},[t._v("下载")]):t._e(),t._v(" "),a("div",{staticClass:"clearfix"},[a("div",{staticStyle:{width:"88%",float:"left"}},[e.showAudioFalg?a("yhq-voice",{staticStyle:{width:"88%"},attrs:{src:e.file,multi:!0,mode:"big"}}):t._e()],1),t._v(" "),a("div",{staticStyle:{width:"12%",float:"left"}},[e.showAudioFalg?a("v-button",{staticClass:"close-btn",attrs:{type:"ghost",shape:"circle-outline",icon:"close"},on:{click:function(i){t.playAudio4(e,2)}}}):t._e()],1)])])])]):t._e()}),t._v(" "),0!==t.mydata4.length||t.mydata4Loading?t._e():a("tr",[a("td",{attrs:{colspan:"9"}},[t._v("暂无数据")])]),t._v(" "),t.mydata4Loading?a("tr",[a("td",{attrs:{colspan:"9"}},[a("v-spin",{attrs:{spinning:t.mydata4Loading}})],1)]):t._e()],2)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.total4>0,expression:"total4>0"}],staticClass:"clearfix content-pagination4",staticStyle:{"margin-top":"30px"}},[a("div",{staticStyle:{float:"right",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(e){t.pageNo4=Math.ceil(t.total4/t.pageSize),t.changePageNo4}}},[t._v("尾页")]),t._v(" "),a("div",{staticStyle:{float:"right"}},[a("v-pagination",{attrs:{value:t.pageNo4,total:t.total4,pageSize:t.pageSize,"show-quick-jumper":"",simple:""},on:{change:t.changePageNo4}})],1),t._v(" "),a("div",{staticStyle:{float:"right",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(e){t.pageNo4=1,t.changePageNo4}}},[t._v("首页")])])])])])],1)])]],2)},staticRenderFns:[]};var l=i("VU/8")(s,o,!1,function(t){i("UJSb"),i("CvV4")},"data-v-332e64b9",null);e.default=l.exports},diVq:function(t,e){},gUvX:function(t,e){},gbOE:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={name:"zTree",props:["treeData"],data:function(){return{treeObj:"",setting:{view:{addHoverDom:this.addHoverDom,removeHoverDom:this.removeHoverDom,showTitle:!1,showLine:!1,showIcon:!1},edit:{enable:!1,editNameSelectAll:!0,showRemoveBtn:!1,showRenameBtn:!1},data:{simpleData:{enable:!0}},callback:{beforeClick:this.beforeClick,onClick:this.clickLeaf}},screenHeight:window.innerHeight,vContentHeigth:{minHeight:window.innerHeight-134+"px"}}},methods:{initTree:function(t){var e=this;this.$.fn.zTree.init(this.$("#zTree"),this.setting,t),this.treeObj=this.$.fn.zTree.getZTreeObj("zTree");var i=this.treeObj.getNodes();this.treeObj.expandNode(i[0],!0,!1,!1),setTimeout(function(){var t=e.treeObj.getNodes();t.length>0&&e.treeObj.selectNode(t[0])},100)},addNodes:function(t,e){this.treeObj.addNodes(t,e)},updateNode:function(t){this.treeObj.updateNode(t)},removeNode:function(t){this.treeObj.removeNode(t),this.treeObj.selectNode(this.treeObj.getNodes()[0])},settingClick:function(t,e,i,a){1===a&&this.$emit("openAddDeptModal",i,"add"),2===a&&this.$emit("openAddDeptModal",i,"edit"),3===a&&this.$emit("openDelDeptModal",i),t[0].classList.add("settinghide")},addHoverDom:function(t,e){if("未绑定微信"!==e.name&&"群聊助手"!==e.name&&1===e.can_modify){var i=this.$,a=i("#"+e.tId+"_span");if(e.editNameFlag||i("#settingBtn_"+e.tId).length>0)return;var n="";n+="<span class='button setting' id='settingBtn_"+e.tId+"' onfocus='this.blur();'>",n+="<div class='setting-container settinghide'>",n+="<div class='setting_1' style='border-bottom: 1px solid #E4E4E4;height: 40px;line-height: 40px;'>新建下级部门</div>",n+="<div class='setting_2'>修改名称</div>",0!==e.parent_id&&(n+="<div class='setting_3'>删除部门</div>"),n+="</div>",n+="</span>",a.after(n);var s=i("#settingBtn_"+e.tId);if(s){var o=i("#settingBtn_"+e.tId).find(".setting_1"),l=i("#settingBtn_"+e.tId).find(".setting_2"),r=i("#settingBtn_"+e.tId).find(".setting_3"),d=this;s.on("click",function(){return d.showSetting(s[0].childNodes,t,e),!1}),o.on("click",function(){return d.settingClick(s[0].childNodes,t,e,1),!1}),l.on("click",function(){return d.settingClick(s[0].childNodes,t,e,2),!1}),r.on("click",function(){return d.settingClick(s[0].childNodes,t,e,3),!1})}}},removeHoverDom:function(t,e){var i=this.$;i("#settingBtn_"+e.tId).find(".setting-containe").addClass("settinghide"),i("#settingBtn_"+e.tId).unbind().remove()},showSetting:function(t,e,i){i.has_auth?t&&t[0]&&t[0].className.includes("setting-container")&&(t[0].className.includes("settinghide")?(t[0].classList.remove("settinghide"),this.treeObj.getSelectedNodes()[0].id!==i.id&&(this.treeObj.selectNode(i),this.$emit("getSaleList",i))):t[0].classList.add("settinghide")):this.$notification.warning({message:"提示",description:"没有该部门的权限。"})},beforeClick:function(t,e){return!!e.has_auth||(this.$notification.warning({message:"提示",description:"没有该部门的权限。"}),!1)},clickLeaf:function(t,e,i){this.$emit("getSaleList",i)}},mounted:function(){var t=this;window.onresize=function(){return t.screenHeight=window.innerHeight,void(t.vContentHeigth={minHeight:window.innerHeight-134+"px"})}},watch:{screenHeight:function(t){this.screenHeight=t,this.vContentHeigth={minHeight:t-134+"px"}}}},n={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{style:this.vContentHeigth,attrs:{id:"zTree"}},[this._v("\n  "+this._s(this.treeData)+"\n")])},staticRenderFns:[]};var s={name:"sale",components:{ZTree:i("VU/8")(a,n,!1,function(t){i("/Y2M")},"data-v-1722e3e9",null).exports},data:function(){return{loadData:function(t){var e=this,i=this.$parent.$parent,a=new URLSearchParams;return a.append("department_id",i.department_id),a.append("filter",i.searchValue),a.append("page",t.pageNo),this.axios.post(this.serve.saleList,a).then(function(a){var n=a.data.data;i.dataIdList=[],i.saleSelect=[];var s=!0,o=!1,l=void 0;try{for(var r,d=n.result[Symbol.iterator]();!(s=(r=d.next()).done);s=!0){var c=r.value;c.hover=!1,c.checked=!1,c.department_name!==e.salesSpe1&&c.department_name!==e.salesSpe2&&i.dataIdList.push(c.id);c.myStatus=["禁用","启用中"][c.status];var h=!0,p=!1,u=void 0;try{for(var v,g=c.wxInfos[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var m=v.value;m.userName=c.username,m.myWxId=m.alias?m.alias:m.wxId}}catch(t){p=!0,u=t}finally{try{!h&&g.return&&g.return()}finally{if(p)throw u}}}}catch(t){o=!0,l=t}finally{try{!s&&d.return&&d.return()}finally{if(o)throw l}}return i.total=n.totalCount,n.pageSize=i.pageSize,n.pageNo=n.currentPage,setTimeout(function(){i.total>0&&(document.getElementsByClassName("ant-pagination-simple-pager")[0].children[0].value=t.pageNo)},300),i.mydata=n.result,n})},columns:[{title:"checkbox",field:"checkbox",width:"32px"},{title:"销售姓名",field:"username"},{title:"销售ID",field:"sales_id"},{title:"部门",field:"department_name"},{title:"状态",field:"myStatus"},{title:"操作",field:"operation",width:"300px"}],mydata:[],dataIdList:[],screenHeight:window.innerHeight,vContentHeigth:{height:window.innerHeight-124+"px"},vContentHeigthEdit:{height:window.innerHeight-324+29+"px"},detailModalStyle:{height:window.innerHeight-180+"px"},inputList:[],addModalVisible:!1,addModalLoading:!1,delModalVisible:!1,delModalLoading:!1,delObj:{},resetModalVisible:!1,resetModalLoading:!1,resetObj:{},forbidModalVisible:!1,forbidModalLoading:!1,forbidObj:{},openStartModalVisible:!1,openStartModalLoading:!1,startObj:{},sensitive:"",pageNo:1,total:0,userName:"",userId:"",dept:"",sale:"",searchValue:"",departmentOptions:[],radioType:1,manageModalVisible:!1,manageModalLoading:!1,manageModalFlag:1,deptItemName:"",department_name:"",department_id:0,isLeaf:!1,deptItemId:0,roleItems:0,allDeptChecked:!1,indeterminateDept:!0,allRoleChecked:!1,indeterminateRole:!0,showTree:!0,treeDataLoading:!1,treeData:"",treeDataCopy:[],formData:"",fileName:"",importResData:{},imprtModalVisible1:!1,imprtModalLoading1:!1,imprtModalVisible:!1,imprtModalLoading:!1,imprtObj:{},addDeptModalVisible:!1,addDeptModalLoading:!1,addDeptObj:{},deptModalTitle:"添加部门",departmentName:"",delDeptModalVisible:!1,delDeptModalLoading:!1,delDeptObj:{},saleSelect:[],channel:0,selectName:"",wxIds:[],wxIdsListAll:[],wxIdsList:[],wxIdsListLoading:!1,selectNameClick:!1,wxNUmObj:{},saleCheck:{},bindModalVisible:!1,bindModalLoading:!1,untieModalVisible:!1,untieModalLoading:!1,sales_id:0,bindTip:"",untieTip:"",untieObj:{},untieIndex:0,wxIdsClass:{height:"50px"},checkAllFlag:!1,weChatVisible:!1,weChatLoading:!1,timeIndex:0}},created:function(){var t=this;this.$store.state.power.includes("b")&&(this.channel=1,this.columns=[{title:"checkbox",field:"checkbox",width:"32px"},{title:"销售姓名",field:"username"},{title:"销售ID",field:"sales_id"},{title:"部门",field:"department_name"},{title:"微信号",field:"wxInfos",width:"400px"},{title:"操作",field:"operation",width:"120px"}]),setTimeout(function(){t.getDeptList()},100)},methods:{popupContainer:function(){return document.getElementById("tree-select-container")},popupContainerEdit:function(){return document.getElementById("tree-select-container-edit")},popupContainerEdit1:function(){return document.getElementById("tree-select-container-edit1")},treeClick:function(t){var e=this;t?t.has_auth?t.children?(this.$notification.warning({message:"提示",description:"只能选取叶子节点"}),setTimeout(function(){e.$(".ant-select-selection__rendered").find("span")[0].innerHTML=""},100),this.deptItemId="",this.deptItemName=""):(this.deptItemId=t.id,this.deptItemName=t.name,this.departmentOptions=this.myTool.setSelect(this.departmentOptions,this.deptItemId)):(this.$notification.warning({message:"提示",description:"没有该部门的权限。"}),setTimeout(function(){e.$(".ant-select-selection__rendered").find("span")[0].innerHTML=""},100),this.deptItemId="",this.deptItemName=""):setTimeout(function(){var t=e.$(".ant-select-selection__rendered").find("span")[0];e.$(".ant-select-search__field__placeholder")[0].style.display="none",t.style.display="",t.innerHTML=e.deptItemName,e.departmentOptions=e.myTool.setSelect(e.departmentOptions,e.deptItemId)},10)},getDeptList:function(){var t=this;this.showTree=!0;var e=new URLSearchParams;this.treeDataLoading=!0,this.axios.get(this.serve.deptList,e).then(function(e){t.treeData=e.data.data,t.department_id=t.treeData[0].id,t.department_name=t.treeData[0].name,t.isLeaf=t.treeData[0].children.length<=0,t.showTree=!0,t.$refs.zTree.initTree(t.treeData),t.treeDataLoading=!1,t.getSelectTreeData()}).catch(function(t){return t})},getDeptItemId:function(t){t[0]&&!t[0].children?this.deptItemId=t[0].id:this.getDeptItemId(t[0].children)},getSelectTreeData:function(){var t=JSON.parse(JSON.stringify(this.treeData));this.departmentOptions=this.myTool.deepCloneForSales(t),this.getDeptItemId(this.departmentOptions)},changePageNo:function(t){this.pageNo=t,this.$refs.xtable.goto(t)},searchData:function(){this.pageNo=1,this.$refs.xtable.reload()},keyupSearch:function(t){this.searchValue=this.searchValue.trimEnd();var e=!0,i=!1,a=void 0;try{for(var n,s=["(",")","<",">","%","[","]",";","`"][Symbol.iterator]();!(e=(n=s.next()).done);e=!0){var o=n.value;this.searchValue.includes(o)&&(this.searchValue=this.searchValue.replace(o,""),this.$notification.warning({message:"提示",description:"请勿输入特殊字符：( ) < > % [ ] ; 空格等"}))}}catch(t){i=!0,a=t}finally{try{!e&&s.return&&s.return()}finally{if(i)throw a}}13===t.keyCode&&this.searchData()},checkAll:function(){if(this.checkAllFlag=!this.checkAllFlag,this.checkAllFlag){this.saleSelect=JSON.parse(JSON.stringify(this.dataIdList));var t=!0,e=!1,i=void 0;try{for(var a,n=this.mydata[Symbol.iterator]();!(t=(a=n.next()).done);t=!0){a.value.checked=!0}}catch(t){e=!0,i=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw i}}}else{this.saleSelect=[];var s=!0,o=!1,l=void 0;try{for(var r,d=this.mydata[Symbol.iterator]();!(s=(r=d.next()).done);s=!0){r.value.checked=!1}}catch(t){o=!0,l=t}finally{try{!s&&d.return&&d.return()}finally{if(o)throw l}}}},clickRow:function(t){if("群聊助手"!==t.item.department_name&&"未绑定微信"!==t.item.department_name){if(t.item.checked=!t.item.checked,t.item.checked)this.saleSelect.push(t.item.id);else for(var e=0;e<this.saleSelect.length;e++)this.saleSelect[e]===t.item.id&&this.saleSelect.splice(e,1);this.saleSelect.length===this.dataIdList.length&&(this.checkAllFlag=!0),this.saleSelect.length<this.dataIdList.length&&(this.checkAllFlag=!1)}},openImprtModal:function(){this.imprtModalVisible=!0,this.imprtModalLoading=!1,this.imprtObj="",this.fileName=""},openExprtModal:function(){var t=this.serve.saleExport+"?department_id="+this.department_id;window.open(t,"target")},downloadWrongData:function(){var t=this;this.imprtModalLoading1=!0;var e=this.serve.saleRecord+"?recordId="+this.importResData.recordId;window.open(e,"target"),setTimeout(function(){t.importResData={},t.imprtModalLoading1=!1,t.imprtModalVisible1=!1},300)},importSales:function(){var t=this;this.imprtModalLoading=!0,this.axios.post(this.serve.saleImport,this.formData).then(function(e){t.searchData(),t.importResData=e.data.data,t.formData=new FormData,t.imprtModalLoading=!1,t.imprtModalVisible=!1,t.imprtModalVisible1=!0}).catch(function(t){return t})},downLoadTemplate:function(){window.open("http://hujing-public.oss-cn-beijing.aliyuncs.com/api/user_list_template.xlsx","target")},selectFile:function(){document.getElementById("selectFile").click()},fileChange:function(t){var e=t.target.files[0];this.formData=new FormData,this.formData.append("file",e),e.size>4194304?this.$notification.warning({message:"提示",description:"文件不能不超过4M，请重新选择"}):this.fileName=e.name},openAddUserModal:function(){this.addModalVisible=!0,this.addModalLoading=!1,this.userName="",this.userId="",this.deptItemId=this.departmentOptions[0]?this.departmentOptions[0].value:0;var t=void 0;t=this.treeDataCopy.length>0?JSON.parse(JSON.stringify(this.treeDataCopy)):JSON.parse(JSON.stringify(this.treeData)),this.departmentOptions=this.myTool.deepCloneForSales(t),this.departmentOptions=this.myTool.setSelect(this.departmentOptions,this.deptItemId)},openDelModal:function(t){this.delModalVisible=!0,this.delModalLoading=!1,t&&(this.delObj=t)},openResetModal:function(t){this.resetModalVisible=!0,this.resetModalLoading=!1,t&&(this.resetObj=t)},openForbidModal:function(t){this.forbidModalVisible=!0,this.forbidModalLoading=!1,t&&(this.forbidObj=t)},openStartModal:function(t){this.openStartModalVisible=!0,this.openStartModalLoading=!1,t&&(this.startObj=t)},changeDepartment:function(){var t=this;if(this.deptItemId){var e=[];this.userName?e.push(this.userId):e=this.saleSelect;var i=new URLSearchParams;i.append("ids","["+e+"]"),i.append("department_id",this.deptItemId),i.append("department_name",this.deptItemName),i.append("name",this.userName),this.manageModalLoading=!0,this.axios.post(this.serve.saleChangeDept,i).then(function(e){0===t.channel&&(t.userName=""),t.pageNo=1,t.$refs.xtable.reload(),t.manageModalVisible=!1,t.manageModalLoading=!1,t.$notification.success({message:"提示",description:"更改成功"})}).catch(function(e){return t.manageModalVisible=!1,t.manageModalLoading=!1,e})}else this.$notification.warning({message:"提示",description:"请确保信息填写完整"})},addUser:function(){var t=this;if(this.userName&&this.userId&&this.department_id){this.addModalLoading=!0;var e=new URLSearchParams;e.append("username",this.userName),e.append("user_id",this.userId),e.append("department_id",this.department_id),e.append("department_name",this.department_name),this.axios.post(this.serve.saleAdd,e).then(function(e){t.pageNo=1,t.$refs.xtable.reload(),t.addModalVisible=!1,t.addModalLoading=!1,t.$notification.success({message:"提示",description:"添加用户成功"})}).catch(function(e){return t.addModalVisible=!1,t.addModalLoading=!1,e})}else this.$notification.warning({message:"提示",description:"请确保信息填写完整"})},openManageModal:function(t){var e=this,i=void 0;i=this.treeDataCopy.length>0?JSON.parse(JSON.stringify(this.treeDataCopy)):JSON.parse(JSON.stringify(this.treeData)),this.departmentOptions=this.myTool.deepCloneForSales(i),t?(this.manageModalVisible=!0,this.manageModalFlag=1,this.deptItemId=t.department_id,this.deptItemName=t.department_name,this.userId=t.id,this.sales_id=t.sales_id,this.userName=t.username,this.departmentOptions=this.myTool.setSelect(this.departmentOptions,this.deptItemId),setTimeout(function(){var t=e.$(".ant-select-selection__rendered").find("span")[0];e.$(".ant-select-search__field__placeholder")[0].style.display="none",t.style.display="",t.innerHTML=e.deptItemName},30)):(this.manageModalVisible=!0,this.manageModalFlag=2,this.deptItemId="",this.deptItemName="",this.userId="",this.userName="")},openWeChatModal:function(t){this.selectName="",this.wxIdsList=[],this.selectNameClick=!1,this.saleCheck=t,this.wxIds=t.wxInfos,this.sales_name=t.username,this.sales_id=t.sales_id,this.weChatVisible=!0},deleteSale:function(t){var e=this;t=this.delObj;var i=new URLSearchParams,a=[];t.id?a.push(t.id):a=this.saleSelect,i.append("ids","["+a+"]"),this.delModalLoading=!0,this.axios.post(this.serve.saleDel,i).then(function(t){e.saleSelect=[],e.delObj={},e.pageNo=1,e.$refs.xtable.reload(),e.delModalVisible=!1,e.delModalLoading=!1,e.$notification.success({message:"提示",description:"删除成功"})}).catch(function(t){return e.delModalVisible=!1,e.delModalLoading=!1,t})},resetPassword:function(t){var e=this;t=this.resetObj;var i=new URLSearchParams,a=[];t.id?a.push(t.id):a=this.saleSelect,i.append("ids","["+a+"]"),i.append("password","123456"),this.resetModalLoading=!0,this.axios.post(this.serve.saleResetPassword,i).then(function(t){e.saleSelect=[],e.resetObj={},e.pageNo=1,e.$refs.xtable.reload(),e.resetModalVisible=!1,e.resetModalLoading=!1,e.$notification.success({message:"提示",description:"密码重置成功,新密码：123456"})}).catch(function(t){return e.resetModalVisible=!1,e.resetModalLoading=!1,t})},forbidUser:function(t){var e=this;t=this.forbidObj;var i=new URLSearchParams,a=[];t.id?a.push(t.id):a=this.saleSelect,i.append("ids","["+a+"]"),i.append("status",0),this.forbidModalLoading=!0,this.axios.post(this.serve.saleChangeStatus,i).then(function(t){e.saleSelect=[],e.forbidObj={},e.pageNo=1,e.$refs.xtable.reload(),e.forbidModalVisible=!1,e.forbidModalLoading=!1,e.$notification.success({message:"提示",description:"禁用用户成功"})}).catch(function(t){return e.forbidModalVisible=!1,e.forbidModalLoading=!1,t})},startUser:function(t){var e=this;t=this.startObj;var i=new URLSearchParams,a=[];t.id?a.push(t.id):a=this.saleSelect,i.append("ids","["+a+"]"),i.append("status",1),this.openStartModalLoading=!0,this.axios.post(this.serve.saleChangeStatus,i).then(function(t){e.saleSelect=[],e.startObj={},e.pageNo=1,e.$refs.xtable.reload(),e.openStartModalVisible=!1,e.openStartModalLoading=!1,e.$notification.success({message:"提示",description:"启用用户成功"})}).catch(function(t){return e.openStartModalVisible=!1,e.openStartModalLoading=!1,t})},cancel:function(t){"新建销售用户"===t&&(this.addModalLoading||(this.addModalVisible=!1)),"编辑"===t&&(this.manageModalLoading||(this.manageModalVisible=!1)),"重置密码"===t&&(this.resetModalLoading||(this.resetModalVisible=!1)),"启用"===t&&(this.openStartModalLoading||(this.openStartModalVisible=!1)),"禁用"===t&&(this.forbidModalLoading||(this.forbidModalVisible=!1)),"删除销售"===t&&(this.delModalLoading||(this.delModalVisible=!1))},openAddDeptModal:function(t,e){this.addDeptObj=t,"edit"===e?(this.deptModalTitle="编辑部门",this.departmentName=this.addDeptObj.name):(this.deptModalTitle="添加部门",this.departmentName=""),this.addDeptModalVisible=!0,this.addDeptModalLoading=!1},addDepartment:function(){var t=this;if(this.departmentName)if("添加部门"===this.deptModalTitle){this.addDeptModalLoading=!0;var e=new URLSearchParams;e.append("pid",this.addDeptObj.id),e.append("name",this.departmentName),this.axios.post(this.serve.deptAdd,e).then(function(e){t.getDeptListCopy(),e.data.data.has_auth=!0,e.data.data.children=[],t.$refs.zTree.addNodes(t.addDeptObj,e.data.data),t.addDeptModalVisible=!1,t.addDeptModalLoading=!1,t.$notification.success({message:"提示",description:"添加成功"})}).catch(function(e){return t.addDeptModalVisible=!1,t.addDeptModalLoading=!1,e})}else{this.addDeptModalLoading=!0;var i=new URLSearchParams;i.append("id",this.addDeptObj.id),i.append("name",this.departmentName),this.axios.post(this.serve.deptUpdate,i).then(function(e){t.getDeptListCopy(),t.addDeptObj.name=t.departmentName,t.$refs.zTree.updateNode(t.addDeptObj),t.addDeptModalVisible=!1,t.addDeptModalLoading=!1,t.$notification.success({message:"提示",description:"修改成功"})}).catch(function(e){return t.addDeptModalVisible=!1,t.addDeptModalLoading=!1,e})}else this.$notification.warning({message:"提示",description:"请确保信息填写完整"})},openDelDeptModal:function(t){this.delDeptObj=t,this.delDeptModalVisible=!0,this.delDeptModalLoading=!1},deleteDepartment:function(){var t=this;this.delDeptModalLoading=!0;var e=new URLSearchParams;e.append("id",this.delDeptObj.id),this.axios.post(this.serve.deptDel,e).then(function(e){t.getDeptListCopy(),t.$refs.zTree.removeNode(t.delDeptObj),t.department_id=t.departmentOptions[0].id,t.searchData(),t.delDeptModalVisible=!1,t.delDeptModalLoading=!1,t.$notification.success({message:"提示",description:"删除成功"})}).catch(function(e){return t.delDeptModalVisible=!1,t.delDeptModalLoading=!1,e})},getSaleList:function(t){t.has_auth?(this.department_id=t.id,this.department_name=t.name,this.isLeaf=t.children.length<=0,this.searchData()):this.$notification.warning({message:"提示",description:"没有该部门的权限。"})},getDeptListCopy:function(){var t=this,e=new URLSearchParams;this.axios.get(this.serve.deptList,e).then(function(e){t.treeDataCopy=e.data.data}).catch(function(t){return t})},addWxIdToUser:function(t){this.wxNUmObj=t,t.userName?(this.bindModalVisible=!0,this.bindModalLoading=!1,this.bindTip=t.myWxId+" 已经绑定 "+t.userName+" ，确定操作将解绑原有关系"):this.bindModalLoading||this.addWxIdToUserOk()},addWxIdToUserOk:function(){var t=this;this.timeIndex&&(console.log(111111111111),clearInterval(this.timeIndex));var e=new URLSearchParams;e.append("id",this.wxNUmObj.id),e.append("user_id",this.sales_id),this.bindModalLoading=!0,this.axios.post(this.serve.addWxToUser,e).then(function(e){t.wxNUmObj.userId=t.saleCheck.userId,t.wxNUmObj.userName=t.saleCheck.username,t.wxNUmObj.status="拷贝中",t.wxIds.push(t.wxNUmObj);var i=[],a=!0,n=!1,s=void 0;try{for(var o,l=t.wxIdsList[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var r=o.value;r.id!==t.wxNUmObj.id&&i.push(r)}}catch(t){n=!0,s=t}finally{try{!a&&l.return&&l.return()}finally{if(n)throw s}}t.timeIndex=setInterval(function(){t.getWxIds()},2e3),t.wxIdsList=i,t.bindModalVisible=!1,t.bindModalLoading=!1,t.$notification.success({message:"提示",description:"绑定成功。"}),t.pageNo=1,t.$refs.xtable.reload()}).catch(function(e){return t.$notification.error({message:"提示",description:e.message}),e})},onOpenClose:function(t,e){this.untieModalVisible=!0,this.untieModalLoading=!1,this.untieTip="解绑后，此微信号信息将不统计在 "+this.saleCheck.username+" 名下",this.untieObj=t,this.untieIndex=e},onClose:function(){var t=this,e=new URLSearchParams;e.append("username",this.untieObj.myWxId),this.untieModalLoading=!0,this.axios.post(this.serve.delWxFromUser,e).then(function(e){t.wxIds.splice(t.untieIndex,1);var i=!0,a=!1,n=void 0;try{for(var s,o=t.wxIdsListAll[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;l.myWxId===t.untieObj.myWxId&&(l.userId="",l.userName="")}}catch(t){a=!0,n=t}finally{try{!i&&o.return&&o.return()}finally{if(a)throw n}}t.untieModalVisible=!1,t.untieModalLoading=!1,t.$notification.success({message:"提示",description:"解绑成功。"}),t.pageNo=1,t.$refs.xtable.reload()}).catch(function(e){return t.$notification.error({message:"提示",description:e.message}),e})},getWxIds:function(){var t=this,e=new URLSearchParams;e.append("user_id",this.sales_id),this.axios.post(this.serve.wxIdsOkList,e).then(function(e){var i=!0,a=!0,n=!1,s=void 0;try{for(var o,l=e.data.data[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var r=o.value;r.myWxId=r.alias?r.alias:r.wxId,"完成"!==r.status&&(i=!1)}}catch(t){n=!0,s=t}finally{try{!a&&l.return&&l.return()}finally{if(n)throw s}}i&&clearInterval(t.timeIndex),t.wxIds=e.data.data}).catch(function(t){return t})},searchWxNo:function(t){13===t.keyCode&&this.selectName.length>0&&(this.selectNameClick=!0,this.getSearchWxIds()),0===this.selectName.length&&(this.selectNameClick=!1)},getSearchWxIds:function(){var t=this;this.wxIdsList=[],this.wxIdsListLoading=!0;var e=new URLSearchParams;e.append("filter",this.selectName),e.append("user_id",this.sales_id),this.axios.post(this.serve.wxIdsList,e).then(function(e){t.wxIdsListLoading=!1;var i=!0,a=!1,n=void 0;try{for(var s,o=e.data.data[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;l.myWxId=l.alias?l.alias:l.wxId}}catch(t){a=!0,n=t}finally{try{!i&&o.return&&o.return()}finally{if(a)throw n}}t.wxIdsList=e.data.data}).catch(function(t){return t})},wxIdsMouseOver:function(t,e){if(!t.item.hover){var i=71*t.item.wxInfos.length+30;i>385&&(i=385);var a=e.clientX+5,n=e.clientY;t.index>5&&(n=e.clientY-40*t.item.wxInfos.length),this.wxIdsClass={height:i+"px",position:"fixed",left:a+"px",top:n-50+"px"},t.item.hover=!0}}},mounted:function(){var t=this;window.onresize=function(){return t.screenHeight=window.innerHeight,t.vContentHeigth={height:window.innerHeight-124+"px"},t.vContentHeigthEdit={height:window.innerHeight-324+29+"px"},void(t.detailModalStyle={height:window.innerHeight-180+"px"})}},watch:{screenHeight:function(t){this.screenHeight=t,this.vContentHeigth={height:t-124+"px"},this.vContentHeigthEdit={height:t-324+29+"px"},this.detailModalStyle={height:t-180+"px"}}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"v-container yhq-sale-page"},[a("div",{staticClass:"header"},[a("div",{staticClass:"common-title"},[t._v("销售用户管理")]),t._v(" "),0===t.saleSelect.length?a("div",{staticClass:"clearfix",staticStyle:{"margin-top":"23px"}},[a("div",{staticClass:"panel-box",staticStyle:{float:"right"}},[t.$store.state.power.includes(7)&&!t.isLeaf&&t.department_name!==t.salesSpe1&&t.department_name!==t.salesSpe2?a("v-button",{staticStyle:{"margin-right":"10px"},attrs:{title:"请选中叶子部门，然后添加",type:"primary",disabled:"disabled"}},[t._v("添加")]):t._e(),t._v(" "),t.$store.state.power.includes(7)&&t.isLeaf&&t.department_name!==t.salesSpe1&&t.department_name!==t.salesSpe2?a("v-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary"},on:{click:t.openAddUserModal}},[t._v("添加")]):t._e(),t._v(" "),t.$store.state.power.includes(7)&&t.department_name!==t.salesSpe1&&t.department_name!==t.salesSpe2?a("v-button",{staticStyle:{"margin-right":"10px",padding:"0 27px",height:"33px"},on:{click:t.openImprtModal}},[t._v("导入")]):t._e(),t._v(" "),t.$store.state.power.includes(7)&&t.department_name!==t.salesSpe1&&t.department_name!==t.salesSpe2?a("v-button",{staticStyle:{"margin-right":"10px",padding:"0 27px",height:"33px"},on:{click:t.openExprtModal}},[t._v("导出")]):t._e(),t._v(" "),a("v-input",{staticClass:"input-box",staticStyle:{width:"200px"},attrs:{placeholder:"销售姓名/销售ID/部门名称"},nativeOn:{keyup:function(e){t.keyupSearch(e)}},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}}),t._v(" "),a("v-button",{staticStyle:{padding:"0 27px",height:"33px"},on:{click:t.searchData}},[t._v("搜索")])],1)]):t._e(),t._v(" "),t.saleSelect.length>0?a("div",{staticClass:"clearfix",staticStyle:{"margin-top":"23px"}},[a("div",{staticClass:"panel-box",staticStyle:{float:"left","padding-left":"21%"}},[t._v("\n        已选择"+t._s(t.saleSelect.length)+"条\n        "),t.$store.state.power.includes(7)?a("v-button",{staticStyle:{"margin-left":"10px",padding:"0 27px",height:"33px"},on:{click:function(e){t.openManageModal()}}},[t._v("更改部门")]):t._e(),t._v(" "),t.$store.state.power.includes(7)&&0===t.channel?a("v-button",{staticStyle:{"margin-left":"10px",padding:"0 27px",height:"33px"},on:{click:function(e){t.openResetModal()}}},[t._v("重置密码")]):t._e(),t._v(" "),t.$store.state.power.includes(7)&&0===t.channel?a("v-button",{staticStyle:{"margin-left":"10px",padding:"0 27px",height:"33px"},on:{click:function(e){t.openStartModal()}}},[t._v("启用")]):t._e(),t._v(" "),t.$store.state.power.includes(7)&&0===t.channel?a("v-button",{staticStyle:{"margin-left":"10px",padding:"0 27px",height:"33px"},on:{click:function(e){t.openForbidModal()}}},[t._v("禁用")]):t._e(),t._v(" "),t.$store.state.power.includes(7)?a("v-button",{staticStyle:{"margin-left":"10px",padding:"0 27px",height:"33px"},on:{click:function(e){t.openDelModal()}}},[t._v("删除")]):t._e()],1)]):t._e()]),t._v(" "),a("div",{staticClass:"v-content",staticStyle:{padding:"0"}},[a("div",{staticClass:"ztree",staticStyle:{height:"auto",width:"20%",float:"left"},style:t.vContentHeigth},[a("el-scrollbar",[t.treeDataLoading?a("div",{staticClass:"have-no-data"},[a("v-spin",{staticStyle:{position:"relative",top:"50px"},attrs:{spinning:t.treeDataLoading}})],1):t._e(),t._v(" "),a("z-tree",{ref:"zTree",attrs:{treeData:t.treeData},on:{getSaleList:t.getSaleList,openAddDeptModal:t.openAddDeptModal,openDelDeptModal:t.openDelDeptModal}})],1)],1),t._v(" "),a("div",{staticStyle:{height:"auto",width:"5px",float:"left","background-color":"#ECECEC"},style:t.vContentHeigth}),t._v(" "),a("div",{staticStyle:{height:"auto",width:"79%",float:"right","padding-top":"10px","padding-bottom":"10px"},style:t.vContentHeigth},[a("el-scrollbar",[a("v-data-table",{ref:"xtable",staticStyle:{"padding-right":"10px"},attrs:{data:t.loadData,columns:t.columns,"page-num":t.pageNo,pagination:!1,"current-data":t.mydata,emptyText:"暂无数据",bordered:""},on:{"update:currentData":function(e){t.mydata=e}},scopedSlots:t._u([{key:"th",fn:function(e){return[a("div",{staticStyle:{"text-align":"center",color:"#000"}},["operation"==e.column.field?a("span",[t._v("操作")]):"checkbox"==e.column.field?a("span",{staticStyle:{width:"32px",cursor:"auto"},on:{click:t.checkAll}},[t.checkAllFlag?t._e():a("img",{attrs:{src:i("1x9i")}}),t._v(" "),t.checkAllFlag?a("img",{attrs:{src:i("DTRI")}}):t._e()]):a("span",{domProps:{innerHTML:t._s(e.title)}})])]}},{key:"td",fn:function(e){return["operation"===e.column.field?a("div",{staticStyle:{"text-align":"center",color:"#666"}},[e.item.department_name!==t.salesSpe1&&e.item.department_name!==t.salesSpe2?a("span",{staticClass:"operation",attrs:{type:"ghost"},on:{click:function(i){t.openManageModal(e.item)}}},[t._v("编辑")]):t._e(),t._v(" "),e.item.department_name!==t.salesSpe1&&e.item.department_name!==t.salesSpe2?a("span",{staticClass:"operation",attrs:{type:"ghost"},on:{click:function(i){t.openWeChatModal(e.item)}}},[t._v("微信")]):t._e(),t._v(" "),0===t.channel?a("span",{staticClass:"operation",on:{click:function(i){t.openResetModal(e.item)}}},[t._v("重置密码")]):t._e(),t._v(" "),1===e.item.status&&0===t.channel?a("span",{staticClass:"operation",on:{click:function(i){t.openForbidModal(e.item)}}},[t._v("禁用")]):t._e(),t._v(" "),0===e.item.status&&0===t.channel?a("span",{staticClass:"operation",on:{click:function(i){t.openStartModal(e.item)}}},[t._v("启用")]):t._e(),t._v(" "),e.item.department_name!==t.salesSpe1&&e.item.department_name!==t.salesSpe2?a("span",{staticClass:"operation",on:{click:function(i){t.openDelModal(e.item)}}},[t._v("删除")]):t._e(),t._v(" "),e.item.department_name===t.salesSpe1||e.item.department_name===t.salesSpe2?a("span",{staticStyle:{"margin-right":"20px",color:"#999"},attrs:{type:"ghost"}},[t._v("编辑")]):t._e(),t._v(" "),e.item.department_name===t.salesSpe1||e.item.department_name===t.salesSpe2?a("span",{staticStyle:{"margin-right":"20px",color:"#999"},attrs:{type:"ghost"}},[t._v("微信")]):t._e(),t._v(" "),e.item.department_name===t.salesSpe1||e.item.department_name===t.salesSpe2?a("span",{staticStyle:{"margin-right":"20px",color:"#999"},attrs:{type:"ghost"}},[t._v("删除")]):t._e()]):"checkbox"==e.column.field?a("div",{staticStyle:{width:"32px","text-align":"center"},on:{click:function(i){t.clickRow(e)}}},[e.item.checked||e.item.department_name===t.salesSpe1||e.item.department_name===t.salesSpe2?t._e():a("img",{attrs:{src:i("1x9i")}}),t._v(" "),e.item.checked&&e.item.department_name!==t.salesSpe1&&e.item.department_name!==t.salesSpe2?a("img",{attrs:{src:i("DTRI")}}):t._e(),t._v(" "),e.item.department_name===t.salesSpe1||e.item.department_name===t.salesSpe2?a("img",{staticStyle:{cursor:"no-drop"},attrs:{src:i("Gi4w")}}):t._e()]):"status"===e.column.field&&0===t.channel?a("div",{staticStyle:{"text-align":"center",color:"#666"},domProps:{innerHTML:t._s(e.content)}}):"username"!==e.column.field&&"department_name"!==e.column.field||1!==t.channel?"wxInfos"===e.column.field&&1===t.channel&&1===e.content.length?a("div",{staticClass:"wx-infos-container"},[a("div",{staticStyle:{display:"inline-block"},on:{mouseenter:function(i){t.wxIdsMouseOver(e,i)},mouseleave:function(t){e.item.hover=!1}}},[t._l(e.content,function(e,i){return a("p",{key:e.id},[i<2?a("span",[t._v(t._s(e.myWxId))]):t._e()])}),t._v(" "),!0===e.item.hover?a("div",{staticClass:"wx-num-hover-container",style:t.wxIdsClass},[a("el-scrollbar",t._l(e.content,function(e){return a("div",{key:e.id,staticClass:"clearfix wx-num-hover-li wx-num-hover-li-no-boorder"},[a("div",{staticStyle:{float:"left"}},[a("img",{staticStyle:{width:"36px",height:"36px"},attrs:{src:e.headImg}})]),t._v(" "),a("div",{staticStyle:{float:"left","margin-left":"12px",width:"130px",overflow:"hidden"}},[a("p",{staticStyle:{"line-height":"18px",height:"18px"}},[t._v(t._s(e.nickName))]),t._v(" "),a("p",{staticStyle:{"line-height":"18px",height:"18px"}},[t._v(t._s(e.myWxId))])])])}))],1):t._e()],2)]):"wxInfos"===e.column.field&&1===t.channel&&e.content.length>1?a("div",{staticClass:"wx-infos-container"},[a("div",{staticStyle:{display:"inline-block"},on:{mouseenter:function(i){t.wxIdsMouseOver(e,i)},mouseleave:function(t){e.item.hover=!1}}},[t._l(e.content,function(i,n){return n<3?a("p",{key:i.id},[n<2?a("span",[t._v(t._s(i.myWxId))]):t._e(),t._v(" "),1===n&&e.content.length>2?a("span",[t._v("等"+t._s(e.content.length)+"个")]):t._e()]):t._e()}),t._v(" "),!0===e.item.hover?a("div",{staticClass:"wx-num-hover-container",style:t.wxIdsClass},[a("el-scrollbar",t._l(e.content,function(e){return a("div",{key:e.id,staticClass:"clearfix wx-num-hover-li wx-num-hover-li-no-boorder"},[a("div",{staticStyle:{float:"left"}},[a("img",{staticStyle:{width:"36px",height:"36px"},attrs:{src:e.headImg}})]),t._v(" "),a("div",{staticStyle:{float:"left","margin-left":"12px",width:"130px",overflow:"hidden"}},[a("p",{staticStyle:{"line-height":"18px",height:"18px"}},[t._v(t._s(e.nickName))]),t._v(" "),a("p",{staticStyle:{"line-height":"18px",height:"18px"}},[t._v(t._s(e.myWxId))])])])}))],1):t._e()],2)]):"wxInfos"===e.column.field&&1===t.channel&&0===e.content.length?a("div",{staticStyle:{"text-align":"center",color:"#666",height:"36px","line-height":"36px"}},[t._v("\n            暂无数据\n          ")]):a("div",{staticStyle:{"text-align":"center",color:"#666"},domProps:{innerHTML:t._s(e.content)}}):a("div",{staticStyle:{"text-align":"center",color:"#666"},attrs:{title:e.content}},[t._v(t._s(t._f("intercept")(e.content)))])]}}])}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],staticClass:"clearfix",staticStyle:{"margin-top":"30px","padding-right":"10px"}},[a("div",{staticStyle:{float:"right",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(e){t.pageNo=Math.ceil(t.total/t.pageSize)}}},[t._v("尾页")]),t._v(" "),a("div",{staticStyle:{float:"right"}},[a("v-pagination",{attrs:{value:t.pageNo,total:t.total,pageSize:t.pageSize,"show-quick-jumper":"",simple:""},on:{change:t.changePageNo}})],1),t._v(" "),a("div",{staticStyle:{float:"right",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(e){t.pageNo=1}}},[t._v("首页")])])],1)],1)]),t._v(" "),[a("v-modal",{attrs:{title:"微信",visible:t.weChatVisible,"confirm-loading":t.weChatLoading,wrapClassName:"v-no-modal-footer v-no-modal-padding",width:1200},on:{ok:function(e){t.cancel("微信"),t.weChatVisible=!1},cancel:function(e){t.cancel("微信"),t.weChatVisible=!1}}},[a("div",{staticClass:"v-content",style:t.detailModalStyle},[a("el-scrollbar",[a("div",{staticClass:"modal-container"},[a("span",{staticClass:"modal-span",staticStyle:{"text-align":"right"}},[t._v("添加   ")]),t._v(" "),a("v-input",{staticClass:"modal-input",attrs:{placeholder:"搜索微信号/微信昵称",maxlength:"50"},nativeOn:{keyup:function(e){t.searchWxNo(e)}},model:{value:t.selectName,callback:function(e){t.selectName=e},expression:"selectName"}}),t._v(" "),0===t.selectName.length?a("v-icon",{staticStyle:{position:"relative",left:"-24px"},attrs:{type:"search"}}):t._e(),t._v(" "),t.selectName.length>0?a("span",{staticStyle:{position:"relative",left:"-24px",cursor:"pointer"},on:{click:function(e){t.selectName="",t.wxIdsList=[],t.selectNameClick=!1}}},[a("v-icon",{attrs:{type:"close"}})],1):t._e()],1),t._v(" "),t.selectName.length>0&&t.selectNameClick?a("div",{staticClass:"ul-container",staticStyle:{width:"100%","padding-left":"75px","padding-top":"15px","padding-right":"15px"}},[a("ul",{staticClass:"wx-no-ul clearfix"},[a("li",{staticStyle:{width:"10%"}},[t._v("头像")]),t._v(" "),a("li",{staticStyle:{width:"30%"}},[t._v("微信号")]),t._v(" "),a("li",{staticStyle:{width:"30%"}},[t._v("微信昵称")]),t._v(" "),a("li",{staticStyle:{width:"20%"}},[t._v("绑定对象")]),t._v(" "),a("li",{staticStyle:{width:"10%"}},[t._v("操作")])]),t._v(" "),t._l(t.wxIdsList,function(e){return!t.wxIdsListLoading&&t.wxIdsList.length>0?a("ul",{key:e.id,staticClass:"wx-no-ul-data clearfix"},[a("li",{staticStyle:{width:"10%"}},[a("img",{staticStyle:{width:"36px",height:"36px","margin-top":"2px"},attrs:{src:e.headImg}})]),t._v(" "),a("li",{staticStyle:{width:"30%"}},[t._v(t._s(e.myWxId))]),t._v(" "),a("li",{staticStyle:{width:"30%"}},[t._v(t._s(e.nickName))]),t._v(" "),a("li",{staticStyle:{width:"20%"}},[t._v(t._s(e.userName))]),t._v(" "),a("li",{staticClass:"lzp-operation-color",staticStyle:{width:"10%"},on:{click:function(i){t.addWxIdToUser(e)}}},[t._v("绑定")])]):t._e()}),t._v(" "),t.wxIdsListLoading||0!==t.wxIdsList.length?t._e():a("ul",{staticClass:"wx-no-ul-data clearfix",staticStyle:{border:"1px solid #e9e9e9","line-height":"40px","text-align":"center"}},[t._v("\n              暂无数据\n            ")]),t._v(" "),t.wxIdsListLoading?a("ul",{staticClass:"wx-no-ul-data clearfix",staticStyle:{border:"1px solid #e9e9e9","line-height":"40px","text-align":"center"}},[a("v-spin",{attrs:{spinning:t.wxIdsListLoading}})],1):t._e()],2):t._e(),t._v(" "),a("div",{staticClass:"ul-container",staticStyle:{width:"100%","padding-left":"75px","padding-top":"15px","padding-right":"15px",position:"relative","margin-top":"15px"}},[a("span",{staticStyle:{position:"absolute",left:"24px",top:"15px"}},[t._v("已绑定   ")]),t._v(" "),a("ul",{staticClass:"wx-no-ul clearfix"},[a("li",{staticStyle:{width:"10%"}},[t._v("头像")]),t._v(" "),a("li",{staticStyle:{width:"23%"}},[t._v("微信号")]),t._v(" "),a("li",{staticStyle:{width:"22%"}},[t._v("微信昵称")]),t._v(" "),a("li",{staticStyle:{width:"20%"}},[t._v("绑定对象")]),t._v(" "),a("li",{staticStyle:{width:"15%"}},[t._v("绑定状态")]),t._v(" "),a("li",{staticStyle:{width:"10%"}},[t._v("操作")])]),t._v(" "),t._l(t.wxIds,function(e,i){return t.wxIds.length>0?a("ul",{key:e.id,staticClass:"wx-no-ul-data clearfix"},[a("li",{staticStyle:{width:"10%"}},[a("img",{staticStyle:{width:"36px",height:"36px","margin-top":"2px"},attrs:{src:e.headImg}})]),t._v(" "),a("li",{staticStyle:{width:"23%"}},[t._v(t._s(e.myWxId))]),t._v(" "),a("li",{staticStyle:{width:"22%"}},[t._v(t._s(e.nickName))]),t._v(" "),a("li",{staticStyle:{width:"20%"}},[t._v(t._s(t.sales_name))]),t._v(" "),a("li",{staticStyle:{width:"15%"}},[t._v(t._s(e.status))]),t._v(" "),"完成"===e.status?a("li",{staticClass:"lzp-operation-color",staticStyle:{width:"10%"},on:{click:function(a){t.onOpenClose(e,i)}}},[t._v("\n                解绑\n              ")]):t._e(),t._v(" "),"完成"!==e.status?a("li",{staticClass:"lzp-operation-color",staticStyle:{width:"10%",cursor:"default"}}):t._e()]):t._e()}),t._v(" "),0===t.wxIds.length?a("ul",{staticClass:"wx-no-ul-data clearfix",staticStyle:{border:"1px solid #e9e9e9","line-height":"40px","text-align":"center"}},[t._v("\n              暂无数据\n            ")]):t._e()],2)])],1)])],t._v(" "),[a("v-modal",{attrs:{title:"添加销售用户",visible:t.addModalVisible,"confirm-loading":t.addModalLoading},on:{ok:function(e){t.addUser()},cancel:function(e){t.cancel("新建销售用户")}}},[a("div",{staticStyle:{"text-align":"center"}},[a("div",{staticClass:"modal-container"},[a("span",{staticClass:"modal-span"},[t._v("销售姓名")]),t._v(" "),a("v-input",{staticClass:"modal-input",attrs:{placeholder:"销售姓名,不超过20个字符",maxlength:"20"},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}})],1),t._v(" "),a("div",{staticClass:"modal-container"},[a("span",{staticClass:"modal-span"},[t._v("销售ID")]),t._v(" "),a("v-input",{staticClass:"modal-input",attrs:{placeholder:"销售ID,建议用员工的手机号或邮箱",maxlength:"50"},model:{value:t.userId,callback:function(e){t.userId=e},expression:"userId"}})],1),t._v(" "),a("div",{staticClass:"modal-container"},[a("span",{staticClass:"modal-span"},[t._v("部门")]),t._v(" "),a("v-input",{staticClass:"modal-input",attrs:{disabled:!0,placeholder:"部门"},model:{value:t.department_name,callback:function(e){t.department_name=e},expression:"department_name"}})],1)])])],t._v(" "),[a("v-modal",{attrs:{title:"编辑",visible:t.manageModalVisible,"confirm-loading":t.manageModalLoading},on:{ok:function(e){t.changeDepartment()},cancel:function(e){t.cancel("编辑")}}},[a("div",{staticStyle:{"text-align":"center"}},[1===t.manageModalFlag?a("div",{staticClass:"modal-container"},[a("span",{staticClass:"modal-span"},[t._v("销售ID")]),t._v(" "),a("v-input",{staticClass:"modal-input",attrs:{disabled:"",placeholder:"销售ID",maxlength:"20"},model:{value:t.sales_id,callback:function(e){t.sales_id=e},expression:"sales_id"}})],1):t._e(),t._v(" "),1===t.manageModalFlag?a("div",{staticClass:"modal-container"},[a("span",{staticClass:"modal-span"},[t._v("销售姓名")]),t._v(" "),a("v-input",{staticClass:"modal-input",attrs:{placeholder:"销售姓名,不超过20个字符",maxlength:"20"},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}})],1):t._e(),t._v(" "),a("div",{staticClass:"modal-container"},[a("span",{staticClass:"modal-span"},[t._v("部门")]),t._v(" "),a("v-tree-select",{staticClass:"modal-input",staticStyle:{width:"232px","text-align":"left"},attrs:{data:t.departmentOptions,"popup-container":t.popupContainerEdit,allowClear:!1,placeholder:"请选择部门"},on:{select:t.treeClick},model:{value:t.deptItemId,callback:function(e){t.deptItemId=e},expression:"deptItemId"}}),t._v(" "),a("div",{staticStyle:{position:"relative","margin-left":"160px"},attrs:{id:"tree-select-container-edit"}})],1)])])],t._v(" "),[a("v-modal",{attrs:{title:"删除销售",visible:t.delModalVisible,"confirm-loading":t.delModalLoading},on:{ok:function(e){t.deleteSale()},cancel:function(e){t.cancel("删除销售")}}},[a("div",{staticStyle:{"text-align":"center",height:"120px","line-height":"120px"}},[t._v("\n        确认删除销售吗？\n      ")])])],t._v(" "),[a("v-modal",{attrs:{title:"重置密码",visible:t.resetModalVisible,"confirm-loading":t.resetModalLoading},on:{ok:function(e){t.resetPassword()},cancel:function(e){t.cancel("重置密码")}}},[a("div",{staticStyle:{"text-align":"center",height:"120px","line-height":"120px"}},[t._v("\n        确认重置密码吗？\n      ")])])],t._v(" "),[a("v-modal",{attrs:{title:"禁用",visible:t.forbidModalVisible,"confirm-loading":t.forbidModalLoading},on:{ok:function(e){t.forbidUser()},cancel:function(e){t.cancel("禁用")}}},[a("div",{staticStyle:{"text-align":"center",height:"120px","line-height":"120px"}},[t._v("\n        确认禁用该用户吗？\n      ")])])],t._v(" "),[a("v-modal",{attrs:{title:"启用",visible:t.openStartModalVisible,"confirm-loading":t.openStartModalLoading},on:{ok:function(e){t.startUser()},cancel:function(e){t.cancel("启用")}}},[a("div",{staticStyle:{"text-align":"center",height:"120px","line-height":"120px"}},[t._v("\n        确认启用用户吗？\n      ")])])],t._v(" "),[a("v-modal",{attrs:{title:t.deptModalTitle,visible:t.addDeptModalVisible,"confirm-loading":t.addDeptModalLoading},on:{ok:function(e){t.addDepartment()},cancel:function(e){t.cancel("添加部门"),t.addDeptModalVisible=!1}}},[a("div",{staticStyle:{"text-align":"center"}},[a("v-input",{staticClass:"modal-input",attrs:{placeholder:"请在此输入部门",maxlength:"30"},model:{value:t.departmentName,callback:function(e){t.departmentName=e},expression:"departmentName"}})],1)])],t._v(" "),[a("v-modal",{attrs:{title:"删除部门",visible:t.delDeptModalVisible,"confirm-loading":t.delDeptModalLoading},on:{ok:function(e){t.deleteDepartment()},cancel:function(e){t.cancel("删除部门"),t.delDeptModalVisible=!1}}},[a("div",{staticStyle:{"text-align":"center",height:"120px","line-height":"120px"}},[t._v("\n        确认删除该部门吗？\n      ")])])],t._v(" "),[a("v-modal",{attrs:{title:"绑定微信号",visible:t.bindModalVisible,"confirm-loading":t.bindModalLoading},on:{ok:function(e){t.addWxIdToUserOk()},cancel:function(e){t.cancel("绑定微信号"),t.bindModalVisible=!1}}},[a("div",{staticStyle:{"text-align":"center",height:"120px","line-height":"120px"}},[t._v("\n        "+t._s(t.bindTip)+"\n      ")])])],t._v(" "),[a("v-modal",{attrs:{title:"解绑微信号",visible:t.untieModalVisible,"confirm-loading":t.untieModalLoading},on:{ok:function(e){t.onClose()},cancel:function(e){t.cancel("解绑微信号"),t.untieModalVisible=!1}}},[a("div",{staticStyle:{"text-align":"center",height:"120px","line-height":"120px"}},[t._v("\n        "+t._s(t.untieTip)+"\n      ")])])],t._v(" "),[a("v-modal",{attrs:{title:"导入销售用户",visible:t.imprtModalVisible,"confirm-loading":t.imprtModalLoading},on:{ok:function(e){t.importSales()},cancel:function(e){t.cancel("导入销售用户"),t.imprtModalVisible=!1}}},[a("div",{staticStyle:{"padding-left":"40px"}},[a("div",{staticClass:"modal-container"},[a("div",{staticStyle:{"font-size":"14px"}},[a("v-icon",{staticStyle:{"font-size":"20px"},attrs:{type:"cloud-download-o"}}),t._v(" 下载模版")],1),t._v(" "),a("p",{staticStyle:{"line-height":"32px","padding-left":"28px"}},[t._v("为提高导入的成功率，请下载并使用系统提供的模版")]),t._v(" "),a("v-button",{staticStyle:{padding:"0 27px",height:"33px","margin-top":"10px","margin-left":"28px"},on:{click:function(e){t.downLoadTemplate()}}},[t._v("下载模版")])],1),t._v(" "),a("div",{staticClass:"modal-container"},[a("div",{staticStyle:{"font-size":"14px"}},[a("v-icon",{staticStyle:{"font-size":"20px"},attrs:{type:"cloud-upload-o"}}),t._v(" 上传文件")],1),t._v(" "),a("p",{staticStyle:{"line-height":"32px","padding-left":"28px"}},[t._v("仅支持xlsx、xls、csv.文件大小4M")]),t._v(" "),a("v-input",{staticClass:"modal-input",staticStyle:{"margin-left":"28px","line-height":"31px",height:"31px",width:"184px"},attrs:{placeholder:""},model:{value:t.fileName,callback:function(e){t.fileName=e},expression:"fileName"}}),t._v(" "),a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{name:"file",type:"file",id:"selectFile",accept:"application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel"},on:{change:function(e){t.fileChange(e)}}}),t._v(" "),a("v-button",{staticStyle:{padding:"0 27px",height:"33px","margin-top":"10px"},on:{click:function(e){t.selectFile()}}},[t._v("选择文件")])],1)])])],t._v(" "),[a("v-modal",{staticClass:"v-no-modal-footer",attrs:{title:"导入完成",visible:t.imprtModalVisible1},on:{cancel:function(e){t.imprtModalVisible1=!1}}},[a("div",{staticStyle:{"text-align":"center"}},[a("div",{staticClass:"modal-container"},[a("div",{staticStyle:{"font-size":"24px","line-height":"60px"}},[a("v-icon",{attrs:{type:"check-circle-o"}}),t._v(" 导入完成")],1),t._v(" "),a("p",{staticStyle:{"line-height":"60px"}},[t._v("共有"+t._s(t.importResData.totalCount)+"条数据，导入成功"+t._s(t.importResData.successCount)+"条，失败"+t._s(t.importResData.errorCount)+"条")])]),t._v(" "),a("div",{staticClass:"modal-container"},[0===t.importResData.errorCount?a("v-button",{staticStyle:{padding:"0 27px",height:"33px"},attrs:{type:"primary"},on:{click:function(e){t.imprtModalVisible1=!1}}},[t._v("关闭")]):t._e(),t._v(" "),t.importResData.errorCount>0?a("v-button",{staticStyle:{padding:"0 27px",height:"33px"},attrs:{type:"primary"},on:{click:function(e){t.downloadWrongData()}}},[t._v("下载问题数据")]):t._e()],1)])])]],2)},staticRenderFns:[]};var l=i("VU/8")(s,o,!1,function(t){i("LEXV"),i("s7Ij")},"data-v-23ca9437",null);e.default=l.exports},jDob:function(t,e){},jrgc:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAAENElEQVRogd3bXYjUVRjH8c+M6zquWipJSAaTplAb2xvkTYUIMQu9UK5ddFEo1VVReLnLEhKUV96slyXby0WY6EUE7RKEVDcFlcZaF760YCaSabovropMF2dsx92ZndmZ85/Z9QsDw3/+5zy/h+fM+Z/znOefyufzIrMAHdiI+7AWq7Gs8IGRwucMTuJ3/IBfcT2mmFQkB1vRiefwOG6rsZ9L+B5fYABX6xVWr4Mr8Cq2F77H5AL6sbfwvSZqdXAx3sJrWFKr8SoZw4fow+XZNq7FwafwHtbMtmGdnEYPvp5No9k4uAjvCMOxmfTjXVyp5uZqHbwTn+KB2nVFZQgv42ylG6txcC0+w93164rKKbwkPGbKUsnBrDBl3xFNVlzOCY+m4XI3pGdovBqfm7vOEbTtF7SWpFwEW/GlufOfq8QQnlFiYVAugjvNH+cIWneW+qGUgzlsS1BMUmwTtN/E1CG6FN8Jj4X5yFk8KSzkMT2Cb5q/zhG0v1F8oTiCK/Cj5NeWSTOGxxQW6MURbMTCuREsEXY4mIzgQvyClU0SFZvzeBjXbkRws1vHOYIvm5kcoluTsNLZ2bni2LFjC5Louwq2EhxsxaYkLAwODmY6OjpW9fT0LB0fH08lYWMGNqE1jYckOLlMTEykdu3atay9vX3VwYMHFyVlpwRL8GAajzTC2vDw8IKurq6VDR62j6axrkHG0PBhuy6NexM2Mo0GDtt70xqfPPqfBgzbNWm1J2mjkeCwvT2Vz+f/itjhTaRSqbI77XJks9nru3fvvrhly5aqsmaVmCll0RTy+bx8Ph8ritdaMCrsA5tKJpPJ79ixY6y3t3e0ra0t1onQWAsuarKDuVzuSl9f38UNGzZEPVnCaBp/Ru60arLZ7PUDBw6cHxgYOJ+Ac3A6jeMJdDwjmUwm393dPXL06NG/Y00mZTjeghMJGphGLpeb2LNnz6X169cnEbGpnGjBzw0wFH36r5KfWnBYyGMksqMozI6jvb29YxFnx2oYw5EWIRt8CE/HttDg4TiVQ7h6IyeTE87dbiW2Y7A46XRY/HP2ZjEt6XQNHzdPT3Q+EXy6ZRO/G4Uo3rTYviCUbMx3+hWcY/rhyzJ8a/6eT1Q8fBlBdyMVRaZHkXOU3g8OYF9D5MRlH76aerHcEfZiofigPWFRsfgNzypRCVVuR38ZryCxdEZEzgg1MyXLvGZKWZwR8vvnEhAVi3/QJWgtSaWczDCeF4pu5hqn8IIZamSoLul0Uii2GapfUzSGBE0VN+vVZtXOCn/iubAg7xe0VKxTo/Zyyvdx12wb1kni5ZTFLMbbwll4Iwpi9woFseOzbRyjpPl1oQhneT0dleBffIQPNKGkeSoLhTPxF/GEyer62TIiFCLtxzcKW556iOVgMcWvFdyPe4RqwOVoE0SPCxE6hz9MvlZwROTXCv4DBQ1WKU7aWkwAAAAASUVORK5CYII="},l6k8:function(t,e){},n6XQ:function(t,e){},pO7c:function(t,e){},ph0l:function(t,e){},plmt:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={name:"chart",components:{yhqDept:i("X9GB").a},data:function(){return{loadTimeData:function(t){var e=this.$parent.$parent,i=new URLSearchParams;return i.append("start_date",e.rangeDate[0]),i.append("end_date",e.rangeDate[1]),i.append("user_id",e.sale),i.append("department_id",e.dept),this.axios.post(this.serve.chartByDate,i).then(function(t){var i={};i.pageNo=e.pageNo,i.pageSize=e.pageSize,i.totalCount=t.data.data.length,i.result=[];for(var a=0;a<30&&a<t.data.data.length;a++)i.result.push(t.data.data[a]);return e.totalData=t.data.data,e.total=t.data.data.length,setTimeout(function(){e.total>0&&(e.$el.querySelector(".content-pagination1 .ant-pagination-simple-pager input").value=e.pageNo)},300),e.initChart(t.data.data),e.scrollPage(),i}).catch(function(t){return t})},loadUserData:function(t){var e=this.$parent.$parent,i=new URLSearchParams;return i.append("start_date",e.rangeDate[0]),i.append("end_date",e.rangeDate[1]),i.append("page",e.pageNo2),i.append("user_id",e.sale2),i.append("department_id",e.dept2),this.axios.post(this.serve.chartByUser,i).then(function(t){var i={};i.pageNo=e.pageNo2,i.pageSize=e.pageSize,i.totalCount=t.data.data.length,i.result=[];for(var a=0;a<30&&a<t.data.data.length;a++)i.result.push(t.data.data[a]);e.totalData2=t.data.data,e.total2=t.data.data.length;var n=!0,s=!1,o=void 0;try{for(var l,r=t.data.data[Symbol.iterator]();!(n=(l=r.next()).done);n=!0){var d=l.value;d.departmentName?d.user=d.departmentName:d.user=d.userName}}catch(t){s=!0,o=t}finally{try{!n&&r.return&&r.return()}finally{if(s)throw o}}return setTimeout(function(){e.total2>0&&(e.$el.querySelector(".content-pagination2 .ant-pagination-simple-pager input").value=e.pageNo2)},300),i}).catch(function(t){return t})},timeColumns:[{title:"日期",field:"date",width:"9%"},{title:"添加好友",field:"addFriendCount",width:"7%"},{title:"跟进客户",field:"reFriendCount",width:"7%"},{title:"发送消息",field:"sendMessageCount",width:"7%"},{title:"收到消息",field:"reciveMessageCount",width:"7%"},{title:"收发比",field:"recive_send_rate",width:"7%"},{title:"收消息字数",field:"reciveWordCount",width:"7%"},{title:"0条",field:"zeroRate",width:"7%"},{title:"1-3条",field:"threeRate",width:"7%"},{title:"4-9条",field:"nineRate",width:"7%"},{title:"10条以上",field:"tenRate",width:"7%"}],userColumns:[{title:"销售单元",field:"user",width:"9%"},{title:"添加好友",field:"addFriendCount",width:"7%"},{title:"跟进客户",field:"reFriendCount",width:"7%"},{title:"发送消息",field:"sendMessageCount",width:"7%"},{title:"收到消息",field:"reciveMessageCount",width:"7%"},{title:"收发比",field:"recive_send_rate",width:"7%"},{title:"收消息字数",field:"reciveWordCount",width:"7%"},{title:"0条",field:"zeroRate",width:"7%"},{title:"1-3条",field:"threeRate",width:"7%"},{title:"4-9条",field:"nineRate",width:"7%"},{title:"10条以上",field:"tenRate",width:"7%"}],deptData:[],showOldDoor:!1,viewBox1Style:{},viewBox2Style:{},viewBox1Flag:!1,viewBox2Flag:!1,screenHeight:window.innerHeight,vContentHeigth:{minHeight:window.innerHeight-121+"px"},vContentHeigth1:{minHeight:window.innerHeight-446+"px"},totalData:[],totalData2:[],mydata:[],mydata2:[],activeTab:!0,pageNo:1,total:0,pageNo2:1,total2:0,name:"",activeFlag:4,rangeDate:["",""],departmentOptions:[],dept:"",sale:"",dept2:"",sale2:"",breadcrumb:[],treeList:[]}},created:function(){(window.location.href.includes("duia-srb.aihujing.com")||window.location.href.includes("duia.aihujing.com")||window.location.href.includes("39.106.42.64:9987"))&&(this.showOldDoor=!0);var t=this.myTool.timeFormat(new Date),e=this.myTool.timeFormat(new Date(Math.round((new Date).getTime()-25056e5)));this.rangeDate=[e,t],this.getDeptList()},methods:{getDeptList:function(){var t=this,e=new URLSearchParams;this.axios.get(this.serve.deptAuthorList,e).then(function(e){t.deptData=e.data.data}).catch(function(t){return t})},deptSelectEvent1:function(t,e){t.isDept?(this.dept=t.id,this.sale=""):(this.dept=t.department_id,this.sale=t.sales_id),this.timeConfirm()},deptSelectEvent2:function(t,e){t.isDept?(this.dept2=t.id,this.sale2=""):(this.dept2=t.department_id,this.sale2=t.sales_id),this.timeConfirm()},changePageNo:function(t){var e=this;if(this.activeTab){this.pageNo=t,this.mydata=[];for(var i=30*(this.pageNo-1);i<30*this.pageNo;i++)this.totalData[i]&&this.mydata.push(this.totalData[i]);setTimeout(function(){e.mydata.length>0&&(e.$el.querySelector(".content-pagination1 .ant-pagination-simple-pager input").value=e.pageNo)},300)}else{this.pageNo2=t,this.mydata2=[];for(var a=30*(this.pageNo2-1);a<30*this.pageNo2;a++)this.totalData2[a]&&this.mydata2.push(this.totalData2[a]);setTimeout(function(){e.mydata2.length>0&&(e.$el.querySelector(".content-pagination2 .ant-pagination-simple-pager input").value=e.pageNo2)},300)}},dateChange:function(t){this.activeFlag=t;var e=void 0;if(1===t)e=this.myTool.timeFormat(new Date(Math.round((new Date).getTime()-864e5))),this.rangeDate=[e,e],this.timeConfirm();else if(2===t)e=this.myTool.timeFormat(new Date),this.rangeDate=[e,e],this.timeConfirm();else if(3===t){var i=this;setTimeout(function(){i.$refs.content.click()},10)}else if(4===t){var a=this;setTimeout(function(){a.$refs.conten4.click()},10)}},timeConfirm:function(){this.activeTab?(this.pageNo=1,this.$refs.xtable.reload()):(this.pageNo2=1,this.$refs.xtable2.reload())},exportData:function(){var t=this.rangeDate[0],e=this.rangeDate[1];if(this.activeTab){var i="/analysis/exportAnalysisByDate?user_id="+encodeURI(this.sale)+"&department_id="+encodeURI(this.dept)+"&start_date="+t+"&end_date="+e;window.open(i,"_blank")}else{var a="/analysis/exportAnalysisByUser?user_id="+encodeURI(this.sale)+"&department_id="+encodeURI(this.dept)+"&start_date="+t+"&end_date="+e;window.open(a,"_blank")}},deptDrilling:function(t){t.item.departmentId?(this.dept=t.item.departmentId,this.pageNo2=1,this.$refs.xtable2.reload(),this.breadcrumb.push({id:this.dept,name:"deptName"})):console.log("钻取销售聊天")},backToDept:function(t){this.dept=t.id,this.pageNo2=1,this.$refs.xtable2.reload();for(var e=[],i=0;i<=this.breadcrumb.length&&(e.push(this.breadcrumb[i]),this.breadcrumb[i].id!==t.id);i++);this.breadcrumb=e},initChart:function(t){var e=[],i=[],a=[],n=[],s=[],o=[],l=!0,r=!1,d=void 0;try{for(var c,h=t[Symbol.iterator]();!(l=(c=h.next()).done);l=!0){var p=c.value;e.push(p.date),i.push(p.addFriendCount),a.push(p.reFriendCount),n.push(p.sendMessageCount),s.push(p.reciveMessageCount);var u=(p.recive_send_rate.split("%")[0]/100).toFixed(3)/1;o.push(u)}}catch(t){r=!0,d=t}finally{try{!l&&h.return&&h.return()}finally{if(r)throw d}}var v=[];v.push(i.reverse()),v.push(a.reverse()),v.push(n.reverse()),v.push(s.reverse()),v.push(o.reverse()),e.reverse();var g=e.length,m=0;m=g<17?0:g<40?30:45,this.echarts.init(document.getElementById("myChart")).setOption({legend:{data:["添加好友","跟进客户","发送消息","收到消息","收发比"],selected:{"添加好友":!0,"跟进客户":!1,"发送消息":!1,"收到消息":!1,"收发比":!1}},tooltip:{formatter:function(t){if(t[0]){var e=t[0].name,i=!0,a=!1,n=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;if("收发比"===l.seriesName){var r=(100*l.value).toFixed(1)/1;e+="<br/>"+l.marker+l.seriesName+": "+r+"%"}else e+="<br/>"+l.marker+l.seriesName+": "+l.value}}catch(t){a=!0,n=t}finally{try{!i&&o.return&&o.return()}finally{if(a)throw n}}return e}return""},trigger:"axis"},xAxis:{boundaryGap:!1,data:e,axisLabel:{rotate:m},splitLine:{show:!0}},yAxis:{splitLine:{show:!0}},series:[{name:"添加好友",type:"line",symbol:"none",data:v[0]},{name:"跟进客户",type:"line",symbol:"none",data:v[1]},{name:"发送消息",type:"line",symbol:"none",data:v[2]},{name:"收到消息",type:"line",symbol:"none",data:v[3]},{name:"收发比",type:"line",symbol:"none",data:v[4]}]})},contentChange:function(t){this.activeTab=1===t,this.scrollPage()},scrollPage:function(){var t=this;setTimeout(function(){var e=document.querySelector(".chart-page .el-scrollbar__wrap");e&&e.addEventListener("scroll",function(){if(t.activeTab){var e=document.querySelector("#viewBox1").getBoundingClientRect();t.viewBox1Style={width:e.width-20+"px"},e.top<=101?t.viewBox1Flag=!0:t.viewBox1Flag=!1}if(!t.activeTab){var i=document.querySelector("#viewBox2").getBoundingClientRect();t.viewBox2Style={width:i.width+"px"},i.top<=101?t.viewBox2Flag=!0:t.viewBox2Flag=!1}})},300)}},mounted:function(){var t=this;window.onresize=function(){return t.screenHeight=window.innerHeight,t.vContentHeigth={minHeight:window.innerHeight-121+"px"},void(t.vContentHeigth1={minHeight:window.innerHeight-446+"px"})}},watch:{screenHeight:function(t){this.screenHeight=t,this.vContentHeigth={minHeight:t-121+"px"},this.vContentHeigth1={minHeight:t-446+"px"}},activeTab:function(t){if(this.sale="",this.dept="",t){this.activeFlag=4;var e=this.myTool.timeFormat(new Date),i=this.myTool.timeFormat(new Date(Math.round((new Date).getTime()-2592e6)));this.rangeDate=[i,e]}else{var a=this.myTool.timeFormat(new Date);this.rangeDate=[a,a],this.activeFlag=2}}}},n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"v-container bg-color chart-page"},[i("div",{staticClass:"header v-home"},[i("div",{staticClass:"common-title"},[i("span",{staticClass:"content-option",class:{active:t.activeTab},on:{click:function(e){t.contentChange(1)}}},[t._v("走势")]),t._v(" "),i("span",{staticClass:"content-option",class:{active:!t.activeTab},on:{click:function(e){t.contentChange(2)}}},[t._v("分析")]),t._v(" "),t.showOldDoor?i("v-button",{staticStyle:{float:"right",right:"16px"},on:{click:function(e){t.myFn.goToOldSystem()}}},[t._v("进入旧版")]):t._e()],1),t._v(" "),i("div",{staticClass:"time time-panel clearfix"},[i("div",{directives:[{name:"show",rawName:"v-show",value:4===t.activeFlag&&t.activeTab,expression:"activeFlag===4 && activeTab"}],staticStyle:{float:"left","margin-left":"10px"}},[i("v-date-picker",{ref:"conten4",attrs:{range:""},on:{confirm:function(e){t.timeConfirm()}},model:{value:t.rangeDate,callback:function(e){t.rangeDate=e},expression:"rangeDate"}})],1),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:!t.activeTab,expression:"!activeTab"}],staticClass:"time-option",class:{"time-active":2===t.activeFlag},on:{click:function(e){t.dateChange(2)}}},[t._v("今日")]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:!t.activeTab,expression:"!activeTab"}],staticClass:"time-option",class:{"time-active":1===t.activeFlag},on:{click:function(e){t.dateChange(1)}}},[t._v("昨日")]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:!t.activeTab,expression:"!activeTab"}],staticClass:"time-option",class:{"time-active":3===t.activeFlag},on:{click:function(e){t.dateChange(3)}}},[t._v("自定义时间段")]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:3===t.activeFlag&&!t.activeTab,expression:"activeFlag===3 && !activeTab"}],staticStyle:{float:"left"}},[i("v-date-picker",{ref:"content",attrs:{range:""},on:{confirm:function(e){t.timeConfirm()}},model:{value:t.rangeDate,callback:function(e){t.rangeDate=e},expression:"rangeDate"}})],1),t._v(" "),i("v-button",{attrs:{type:"primary"},on:{click:t.exportData}},[t._v("导出")]),t._v(" "),i("yhq-dept",{directives:[{name:"show",rawName:"v-show",value:t.activeTab,expression:"activeTab"}],attrs:{deptData:t.deptData,deptDataFlag:!0},on:{deptSelectEvent:t.deptSelectEvent1}}),t._v(" "),i("yhq-dept",{directives:[{name:"show",rawName:"v-show",value:!t.activeTab,expression:"!activeTab"}],attrs:{deptData:t.deptData,deptDataFlag:!0},on:{deptSelectEvent:t.deptSelectEvent2}})],1)]),t._v(" "),i("el-scrollbar",[i("div",{directives:[{name:"show",rawName:"v-show",value:t.activeTab,expression:"activeTab"}],staticStyle:{height:"100%"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.viewBox1Flag,expression:"viewBox1Flag"}],staticClass:"ant-table ant-table-large ant-table-bordered",staticStyle:{width:"100%",height:"57px",position:"absolute",left:"10px",top:"0","z-index":"999"},style:t.viewBox1Style},[i("v-data-table",{ref:"xtable",attrs:{data:t.myFn.getNullBack,columns:t.timeColumns,"current-data":t.mydata,"page-num":t.pageNo,pagination:!1,emptyText:"暂无数据",bordered:""},on:{"update:currentData":function(e){t.mydata=e}},scopedSlots:t._u([{key:"th",fn:function(e){return["recive_send_rate"===e.column.field?i("div",{staticStyle:{"text-align":"center",color:"#000"}},[i("span",{domProps:{innerHTML:t._s(e.title)}}),t._v(" \n            "),i("v-icon",{staticStyle:{opacity:"0.2",cursor:"default"},attrs:{title:"收到消息数占发送消息数的百分比",type:"question-circle"}})],1):"zeroRate"===e.column.field?i("div",{staticStyle:{"text-align":"center",color:"#000"}},[i("span",{domProps:{innerHTML:t._s(e.title)}}),t._v(" "),i("v-icon",{staticStyle:{opacity:"0.2",cursor:"default"},attrs:{title:"发送了0条消息的新增客户数占所有新增客户数的百分比",type:"question-circle"}})],1):"pcCount"===e.column.field?i("div",{staticStyle:{"text-align":"center",color:"#000"}},[i("span",{domProps:{innerHTML:t._s(e.title)}}),t._v(" "),i("v-icon",{staticStyle:{opacity:"0.2",cursor:"default"},attrs:{title:"在PC端发送消息和接收消息总数",type:"question-circle"}})],1):i("div",{staticStyle:{"text-align":"center",color:"#000"}},[i("span",{domProps:{innerHTML:t._s(e.title)}})])]}},{key:"td",fn:function(e){return[i("div",{staticStyle:{"text-align":"center",color:"#666"},domProps:{innerHTML:t._s(e.content)}})]}}])})],1),t._v(" "),i("div",{staticClass:"v-content",staticStyle:{"margin-bottom":"5px"}},[i("div",{style:{width:"100%",height:"300px"},attrs:{id:"myChart"}})]),t._v(" "),i("div",{staticClass:"v-content",staticStyle:{height:"auto"},style:t.vContentHeigth1,attrs:{id:"viewBox1"}},[i("v-data-table",{ref:"xtable",attrs:{data:t.loadTimeData,columns:t.timeColumns,"current-data":t.mydata,"page-num":t.pageNo,pagination:!1,emptyText:"暂无数据",bordered:""},on:{"update:currentData":function(e){t.mydata=e}},scopedSlots:t._u([{key:"th",fn:function(e){return["recive_send_rate"===e.column.field?i("div",{staticStyle:{"text-align":"center",color:"#000"}},[i("span",{domProps:{innerHTML:t._s(e.title)}}),t._v(" \n            "),i("v-icon",{staticStyle:{opacity:"0.2",cursor:"default"},attrs:{title:"收到消息数占发送消息数的百分比",type:"question-circle"}})],1):"zeroRate"===e.column.field?i("div",{staticStyle:{"text-align":"center",color:"#000"}},[i("span",{domProps:{innerHTML:t._s(e.title)}}),t._v(" "),i("v-icon",{staticStyle:{opacity:"0.2",cursor:"default"},attrs:{title:"发送了0条消息的新增客户数占所有新增客户数的百分比",type:"question-circle"}})],1):"pcCount"===e.column.field?i("div",{staticStyle:{"text-align":"center",color:"#000"}},[i("span",{domProps:{innerHTML:t._s(e.title)}}),t._v(" "),i("v-icon",{staticStyle:{opacity:"0.2",cursor:"default"},attrs:{title:"在PC端发送消息和接收消息总数",type:"question-circle"}})],1):i("div",{staticStyle:{"text-align":"center",color:"#000"}},[i("span",{domProps:{innerHTML:t._s(e.title)}})])]}},{key:"td",fn:function(e){return[i("div",{staticStyle:{"text-align":"center",color:"#666"},domProps:{innerHTML:t._s(e.content)}})]}}])}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],staticClass:"clearfix content-pagination1",staticStyle:{"margin-top":"30px"}},[i("div",{staticStyle:{float:"right",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(e){t.pageNo=Math.ceil(t.total/t.pageSize),t.changePageNo}}},[t._v("尾页")]),t._v(" "),i("div",{staticStyle:{float:"right"}},[i("v-pagination",{attrs:{value:t.pageNo,total:t.total,pageSize:t.pageSize,"show-quick-jumper":"",simple:""},on:{change:t.changePageNo}})],1),t._v(" "),i("div",{staticStyle:{float:"right",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(e){t.pageNo=1,t.changePageNo}}},[t._v("首页")])])],1)]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.activeTab,expression:"!activeTab"}],staticClass:"v-content",style:t.vContentHeigth},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.viewBox2Flag,expression:"viewBox2Flag"}],staticClass:"ant-table ant-table-large ant-table-bordered",staticStyle:{width:"100%",height:"57px",position:"absolute",left:"10px",top:"0","z-index":"999"},style:t.viewBox2Style},[i("v-data-table",{ref:"xtable2",attrs:{data:t.myFn.getNullBack,columns:t.userColumns,"current-data":t.mydata2,"page-num":t.pageNo2,pagination:!1,emptyText:"暂无数据",bordered:""},on:{"update:currentData":function(e){t.mydata2=e}},scopedSlots:t._u([{key:"th",fn:function(e){return["recive_send_rate"===e.column.field?i("div",{staticStyle:{"text-align":"center",color:"#000"}},[i("span",{domProps:{innerHTML:t._s(e.title)}}),t._v(" \n            "),i("v-icon",{staticStyle:{opacity:"0.2",cursor:"default"},attrs:{title:"收到消息数占发送消息数的百分比",type:"question-circle"}})],1):"zeroRate"===e.column.field?i("div",{staticStyle:{"text-align":"center",color:"#000"}},[i("span",{domProps:{innerHTML:t._s(e.title)}}),t._v(" "),i("v-icon",{staticStyle:{opacity:"0.2",cursor:"default"},attrs:{title:"发送了0条消息的新增客户数占所有新增客户数的百分比",type:"question-circle"}})],1):"pcCount"===e.column.field?i("div",{staticStyle:{"text-align":"center",color:"#000"}},[i("span",{domProps:{innerHTML:t._s(e.title)}}),t._v(" "),i("v-icon",{staticStyle:{opacity:"0.2",cursor:"default"},attrs:{title:"在PC端发送消息和接收消息总数",type:"question-circle"}})],1):i("div",{staticStyle:{"text-align":"center",color:"#000"}},[i("span",{domProps:{innerHTML:t._s(e.title)}})])]}},{key:"td",fn:function(e){return[(e.column.field,i("div",{staticStyle:{"text-align":"center",color:"#666"},domProps:{innerHTML:t._s(e.content)}}))]}}])})],1),t._v(" "),i("div",{staticStyle:{height:"auto"},attrs:{id:"viewBox2"}},[i("v-breadcrumb",{staticStyle:{"margin-bottom":"15px"},attrs:{separator:">"}},t._l(t.breadcrumb,function(e){return i("v-breadcrumb-item",{key:e.id,staticStyle:{cursor:"pointer"}},[i("span",{on:{click:function(i){t.backToDept(e)}}},[t._v(t._s(e.name))])])})),t._v(" "),i("v-data-table",{ref:"xtable2",attrs:{data:t.loadUserData,columns:t.userColumns,"current-data":t.mydata2,"page-num":t.pageNo2,pagination:!1,emptyText:"暂无数据",bordered:""},on:{"update:currentData":function(e){t.mydata2=e}},scopedSlots:t._u([{key:"th",fn:function(e){return["recive_send_rate"===e.column.field?i("div",{staticStyle:{"text-align":"center",color:"#000"}},[i("span",{domProps:{innerHTML:t._s(e.title)}}),t._v(" \n            "),i("v-icon",{staticStyle:{opacity:"0.2",cursor:"default"},attrs:{title:"收到消息数占发送消息数的百分比",type:"question-circle"}})],1):"zeroRate"===e.column.field?i("div",{staticStyle:{"text-align":"center",color:"#000"}},[i("span",{domProps:{innerHTML:t._s(e.title)}}),t._v(" "),i("v-icon",{staticStyle:{opacity:"0.2",cursor:"default"},attrs:{title:"发送了0条消息的新增客户数占所有新增客户数的百分比",type:"question-circle"}})],1):"pcCount"===e.column.field?i("div",{staticStyle:{"text-align":"center",color:"#000"}},[i("span",{domProps:{innerHTML:t._s(e.title)}}),t._v(" "),i("v-icon",{staticStyle:{opacity:"0.2",cursor:"default"},attrs:{title:"在PC端发送消息和接收消息总数",type:"question-circle"}})],1):i("div",{staticStyle:{"text-align":"center",color:"#000"}},[i("span",{domProps:{innerHTML:t._s(e.title)}})])]}},{key:"td",fn:function(e){return[(e.column.field,i("div",{staticStyle:{"text-align":"center",color:"#666"},domProps:{innerHTML:t._s(e.content)}}))]}}])}),t._v(" "),i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:t.total2>0,expression:"total2>0"}],staticClass:"clearfix content-pagination2",staticStyle:{"margin-top":"30px"}},[i("div",{staticStyle:{float:"right",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(e){t.pageNo2=Math.ceil(t.total2/t.pageSize),t.changePageNo}}},[t._v("尾页")]),t._v(" "),i("div",{staticStyle:{float:"right"}},[i("v-pagination",{attrs:{value:t.pageNo2,total:t.total2,pageSize:t.pageSize,"show-quick-jumper":"",simple:""},on:{change:t.changePageNo}})],1),t._v(" "),i("div",{staticStyle:{float:"right",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(e){t.pageNo2=1,t.changePageNo}}},[t._v("首页")])])])],1)])])],1)},staticRenderFns:[]};var s=i("VU/8")(a,n,!1,function(t){i("/BFf")},"data-v-075ecbad",null);e.default=s.exports},"qW/z":function(t,e){},rovC:function(t,e){},s7Ij:function(t,e){},sbUS:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAA5CAYAAABAgbluAAABaklEQVRoge3WzWqDQBDA8XEtHtJazyXYkFufIbc+Rx+2PfkEjTkWCtJmYXEtihLCbC+mNG0+TBizK8z/qC78GGXQy/N82jTNMyJO4AIh4kcYhg9RFH2dck7Udf1yKSQAgDHmTimVFkVxe8o5YYy57wu1L0QcSylTrXXY9YzoE3SksVJqXhRFJ6xNKCBiLKWcd5msVWhb3E725tBDLkA3k0211nuxTkDb4nYbXO+6aQVqjNl5vZ3sQmv9D2sF6nneoduxUmrxd7Iuvfqffm2D0eaak9C2iVIqLctyBGABeuS1b4WIk+Vy+VpV1cjLsmz3l91jq9UK1ut15+eFEG9XPXr2FgQBBEFwypGpy9/oVgyljqHUMZQ6hlLHUOoYSt3Rv6ckSS7hgNlsdvD+YCZq5cf5nAYzUYZSNxgoryfqeD1Rx1DqBgPl9UQdryfqGEodQ6ljKHUMpW5Q0HfbiA59Ct/3H8FtbCaEePoGHdOjFS9r60YAAAAASUVORK5CYII="},tkIx:function(t,e,i){t.exports=i.p+"static/img/default.46d6ea7.jpg"},wUZA:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={name:"home",components:{yhqDept:i("X9GB").a},data:function(){return{loadData:function(t){var e=this.$parent.$parent,i=new URLSearchParams;return i.append("start_date",e.rangeDate[0]+" 00:00:00"),i.append("end_date",e.rangeDate[1]+" 23:59:59"),i.append("user_id",e.sale),i.append("department_id",e.dept),this.axios.post(this.serve.qualitycheck,i).then(function(t){e.totalData=t.data.data,e.yhqSortDate();var i={};i.pageNo=e.pageNo2,i.pageSize=e.pageSize,i.totalCount=t.data.data.length,i.result=[];for(var a=0;a<30&&a<t.data.data.length;a++)i.result.push(t.data.data[a]);return e.total=t.data.data.length,setTimeout(function(){e.total>0&&(document.getElementsByClassName("ant-pagination-simple-pager")[0].children[0].value=e.pageNo)},300),e.scrollPage(),i}).catch(function(t){return t})},columns:[{id:1,title:"销售",field:"userName",width:"8%"},{id:2,title:"部门",field:"departmentName",width:"8%"},{id:3,title:"新增客户",field:"addFriendCount",width:"7%",sortFlag:0},{id:4,title:"跟进客户-新",field:"newFollowCount",width:"8.5%",sortFlag:0},{id:5,title:"总有效沟通",field:"allValidCommunicationCount",width:"8.5%",sortFlag:1},{id:6,title:"有效沟通-新",field:"newValidCommunicationCount",width:"8.5%",sortFlag:0},{id:7,title:"有效沟通-老",field:"oldValidCommunicationCount",width:"8.5%",sortFlag:0},{id:8,title:"删除好友",field:"deleteFriendCount",width:"7%",sortFlag:0},{id:9,title:"拉黑好友",field:"blackFriendCount",width:"7%",sortFlag:0},{id:10,title:"红包",field:"salaryCount",width:"7%",sortFlag:0},{id:11,title:"敏感词",field:"sensitiveWordCount",width:"7%",sortFlag:0},{id:12,title:"朋友圈",field:"circleFriendCount",width:"7%",sortFlag:0},{id:13,title:"操作",field:"operation",width:"8%"}],columns2:[{title:"销售",field:"username",width:"40%"},{title:"部门",field:"department_name",width:"40%"},{title:"操作",field:"operation",width:"20%"}],maxRange:90,showOldDoor:!1,sortTip:{id:5,title:"总有效沟通",field:"allValidCommunicationCount",width:"8.5%",sortFlag:1},sortField:"allValidCommunicationCount",sortDir:1,viewBox1Style:{},viewBox1Flag:!1,viewBox2Style:{},viewBox2Flag:!1,activeTab:1,channelSelect:1,screenHeight:window.innerHeight,vContentHeigth:{minHeight:window.innerHeight-127+"px"},vContentHeigth1:{minHeight:window.innerHeight-127+"px"},detailModalStyle:{height:window.innerHeight-180+"px"},cards:this.myData.cardsList,cardsData:{},addModalVisible:!1,addModalLoading:!1,sensitive:"",pageNo:1,pageNo2:1,pageNo3:1,totalData:[],totalData2:[],mydata:[],total:0,total2:0,total3:0,totalPage3:0,name:"",activeFlag:3,rangeDate:["",""],dataList:[],dataModalLoading:!1,dataModalVisible:!1,departmentOptions:[],saleList:[],deptName:"",dept:"",sale:"",searchValue:"",scrollFlag:!0,bigImgModalVisible:!1,videoModalVisible:!1,chatItem:{},angleStyle:{transform:"rotate(0deg)"},angle:0,dataChatList:[],showChatObj:{}}},created:function(){(window.location.href.includes("duia-srb.aihujing.com")||window.location.href.includes("duia.aihujing.com")||window.location.href.includes("39.106.42.64:9987"))&&(this.showOldDoor=!0);var t=this.myTool.timeFormat(new Date);this.rangeDate=[t,t]},methods:{deptSelectEvent:function(t,e){t.isDept?(this.dept=t.id,this.sale=""):(this.dept=t.department_id,this.sale=t.sales_id),this.pageNo=1,this.$refs.xtable.reload()},getCustomerByWxIdList:function(){var t=this;if(this.searchValue){var e=new URLSearchParams;return e.append("wx_id",this.searchValue),e.append("page",this.pageNo2),this.axios.post(this.serve.customerByWxIdList,e).then(function(e){var i={};i.pageNo=t.pageNo2,i.pageSize=t.pageSize,i.totalCount=e.data.data.length,i.result=[];for(var a=0;a<30&&a<e.data.data.length;a++)i.result.push(e.data.data[a]);return t.totalData2=e.data.data,t.total2=e.data.data.length,setTimeout(function(){t.total2>0&&(document.getElementsByClassName("ant-pagination-simple-pager")[1].children[0].value=t.pageNo2)},300),t.dataChatList=i.result,i}).catch(function(t){return t})}return this.myFn.getNullBack()},goToContent:function(t){this.leftNumCount();var e="#/perContent/"+t.userId+"/"+t.userName+"/"+t.departmentName;window.open(e,"_blank")},getCardData:function(){var t=this,e=new URLSearchParams;return e.append("start_time",this.rangeDate[0]+" 00:00:00"),e.append("end_time",this.rangeDate[1]+" 23:59:59"),e.append("user_id",this.sale),e.append("dept_id",this.dept),this.axios.post(this.serve.homeCardData,e).then(function(e){t.cardsData=e.data.data,t.cards[0].num=t.cardsData.sensitiveWordTotalCount,t.cards[1].num=t.cardsData.telephoneTotalCount,t.cards[2].num=t.cardsData.salaryTotalCount}).catch(function(t){return t})},changePageNo:function(t){var e=this;if(1===this.activeTab)this.pageNo=t,this.mydata=[],setTimeout(function(){for(var t=30*(e.pageNo-1);t<30*e.pageNo;t++)e.totalData[t]&&e.mydata.push(e.totalData[t])}),setTimeout(function(){e.mydata.length>0&&(document.getElementsByClassName("ant-pagination-simple-pager")[0].children[0].value=e.pageNo)},300);else{this.pageNo2=t,this.dataChatList=[];for(var i=30*(this.pageNo2-1);i<30*this.pageNo2;i++)this.totalData2[i]&&this.dataChatList.push(this.totalData2[i]);setTimeout(function(){e.dataChatList.length>0&&(document.getElementsByClassName("ant-pagination-simple-pager")[1].children[0].value=e.pageNo2)},300)}},dateChange:function(t){this.activeFlag=t;var e=void 0;if(1===t)e=this.myTool.timeFormat(new Date(Math.round((new Date).getTime()-864e5))),this.rangeDate=[e,e],this.timeConfirm();else if(2===t)e=this.myTool.timeFormat(new Date),this.rangeDate=[e,e],this.timeConfirm();else if(3===t){var i=this;setTimeout(function(){i.$refs.content.click()},10)}},timeConfirm:function(){this.leftNumCount(),this.pageNo=1,this.$refs.xtable.reload()},leftNumCount:function(){var t=[];t.push(this.activeFlag),t.push(this.rangeDate[0]),t.push(this.rangeDate[1]),this.$store.commit("timerange",t.toString())},exportData:function(){var t=this.rangeDate[0]+" 00:00:00",e=this.rangeDate[1]+" 23:59:59",i="/salesinsight/exportQualitycheck?user_id="+encodeURI(this.sale)+"&start_date="+t+"&end_date="+e+"&department_id="+encodeURI(this.dept);window.open(i,"_blank")},contentChange:function(t){this.activeTab=t,this.scrollPage()},scrollPage:function(){var t=this;setTimeout(function(){var e=document.querySelector(".home-page .el-scrollbar__wrap");e&&e.addEventListener("scroll",function(){if(1===t.activeTab){var e=document.querySelector("#viewBox1").getBoundingClientRect();t.viewBox1Style={width:e.width-20+"px"},e.top<=10?t.viewBox1Flag=!0:t.viewBox1Flag=!1}else{var i=document.querySelector("#viewBox2").getBoundingClientRect();t.viewBox2Style={width:i.width-20+"px"},i.top<=10?t.viewBox2Flag=!0:t.viewBox2Flag=!1}})},300)},keyupSearch:function(t){this.searchValue=this.searchValue.trimEnd();var e=!0,i=!1,a=void 0;try{for(var n,s=["(",")","<",">","%","[","]",";","`"][Symbol.iterator]();!(e=(n=s.next()).done);e=!0){var o=n.value;this.searchValue.includes(o)&&(this.searchValue=this.searchValue.replace(o,""),this.$notification.warning({message:"提示",description:"请勿输入特殊字符：( ) < > % [ ] ; 空格等"}))}}catch(t){i=!0,a=t}finally{try{!e&&s.return&&s.return()}finally{if(i)throw a}}13===t.keyCode&&(this.pageNo2=1,this.getCustomerByWxIdList())},showChatListBef:function(t){this.dataModalVisible=!0,this.dataList=[],this.pageNo3=1,this.showChatObj=t,this.showChatList()},showChatList:function(){var t=this;this.dataModalLoading=!0;var e=new URLSearchParams;e.append("page",this.pageNo3),e.append("user_id",this.showChatObj.sales_id),e.append("friend_id",this.showChatObj.friend_id),this.axios.post(this.serve.customerChatList,e).then(function(e){var i=[],a=!0,n=!1,s=void 0;try{for(var o,l=e.data.data.result[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var r=o.value;r.audioPlaying=!1,"49"!==r.type&&"436207665"!==r.type&&"419430449"!==r.type&&"48"!==r.type&&"42"!==r.type&&"43"!==r.type||(0===r.sentence.length||r.sentence.includes("<msg>")?r.type="error":r.sentence=JSON.parse(r.sentence));["1","3","34","43","47","49","436207665","419430449","42","10000"].includes(r.type)&&i.push(r)}}catch(t){n=!0,s=t}finally{try{!a&&l.return&&l.return()}finally{if(n)throw s}}e.data.data.result=i,t.pageNo3=e.data.data.currentPage,t.total3=e.data.data.totalCount,t.totalPage3=e.data.data.totalPage,t.dataList.length>0?t.dataList=t.dataList.concat(e.data.data.result):t.dataList=e.data.data.result,t.dataModalLoading=!1,t.scrollFlag=!0,setTimeout(function(){t.addScrollFn()},500)}).catch(function(t){return t})},addScrollFn:function(){var t=this,e=this,i=navigator.userAgent,a=document.getElementById("viewBox");i.indexOf("Firefox")>-1?setTimeout(function(){a.addEventListener("DOMMouseScroll",function(i){var a=t.$refs.viewBox.wrap;if(i.detail>=0){var n=a.scrollHeight-a.clientHeight-a.scrollTop;Math.abs(n)<=2&&e.scrollFlag&&(e.scrollFlag=!1,e.pageNo3<e.totalPage3&&!e.scrollFlag?(e.pageNo3++,e.showChatList()):e.scrollFlag=!0)}},!1)},500):a.addEventListener("mousewheel",function(t){var i=a;if(t.wheelDelta<0){var n=i.scrollHeight-i.clientHeight-i.scrollTop;Math.abs(n)<=2&&e.scrollFlag&&(e.scrollFlag=!1,e.pageNo3<e.totalPage3&&!e.scrollFlag?(e.pageNo3++,e.showChatList()):e.scrollFlag=!0)}},!1)},showBigImage:function(t){this.angle=0,this.angleStyle={transform:"rotate(0deg)"},this.bigImgModalVisible=!0,this.chatItem=t},videoNoPlay:function(t){this.$notification.warning({message:"提示",description:"该视频无法播放"})},playVoice:function(t){var e=this;(this.chatItem.sentence&&t.sentence&&this.chatItem.sentence!==t.sentence&&(this.chatItem.audioPlaying=!1),this.chatItem=t,this.chatItem.audioPlaying)?(document.getElementById("myAudio").pause(),this.chatItem.audioPlaying=!1):(this.chatItem.audioPlaying=!0,this.chatItem.audioUrl=t.sentence,setTimeout(function(){var t=document.getElementById("myAudio");t.play(),setTimeout(function(){e.stopAudio(t)},300)},300))},stopAudio:function(t){var e=this,i=t.duration+.6;setTimeout(function(){t.ended&&(e.chatItem.audioUrl="",e.chatItem.audioPlaying=!1)},1e3*i)},cancel:function(t){},yhqSortDate:function(){this.totalData.sort(this.yhqSortBy(this.sortField,this.sortDir))},yhqSortBy:function(){var t=this.sortField,e=this.sortDir;return function(i,a){return 1===e?a[t]-i[t]:2===e?i[t]-a[t]:void 0}},sortDate:function(t){t.column.id>2&&t.column.id<13&&(this.sortTip&&this.sortTip.field!==t.column.field&&(this.columns[this.sortTip.id-1].sortFlag=0),0===t.column.sortFlag?t.column.sortFlag=1:1===t.column.sortFlag?t.column.sortFlag=2:2===t.column.sortFlag&&(t.column.sortFlag=1),this.sortTip=t.column,this.sortField=t.column.field,this.sortDir=t.column.sortFlag,this.yhqSortDate(),this.changePageNo(1))}},mounted:function(){var t=this;window.onresize=function(){return t.screenHeight=window.innerHeight,t.vContentHeigth={minHeight:window.innerHeight-127+"px"},t.vContentHeigth1={minHeight:window.innerHeight-127+"px"},void(t.detailModalStyle={height:window.innerHeight-180+"px"})}},watch:{screenHeight:function(t){this.screenHeight=t,this.vContentHeigth={minHeight:t-127+"px"},this.vContentHeigth1={minHeight:t-127+"px"},this.detailModalStyle={height:window.innerHeight-180+"px"}}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"v-container home-page"},[a("el-scrollbar",[a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.activeTab,expression:"activeTab === 1"}]},[a("div",{staticClass:"header v-home"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.viewBox1Flag,expression:"viewBox1Flag"}],staticClass:"ant-table ant-table-large ant-table-bordered",staticStyle:{width:"100%",height:"57px",position:"absolute",left:"10px",top:"0","z-index":"999"},style:t.viewBox1Style},[a("v-data-table",{ref:"xtable",attrs:{data:t.myFn.getNullBack,"current-data":t.mydata,columns:t.columns,"page-num":t.pageNo,pagination:!1,emptyText:"暂无数据",bordered:""},on:{"update:currentData":function(e){t.mydata=e}},scopedSlots:t._u([{key:"th",fn:function(e){return[a("div",{class:{"pointer-class":e.column.id>2&&e.column.id<13},staticStyle:{"text-align":"center",color:"#000"},on:{click:function(i){t.sortDate(e)}}},[a("span",{domProps:{innerHTML:t._s(e.title)}}),t._v(" "),1===e.column.sortFlag?a("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[a("i",{staticClass:"fa fa-long-arrow-down",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),2===e.column.sortFlag?a("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[a("i",{staticClass:"fa fa-long-arrow-up",attrs:{"aria-hidden":"true"}})]):t._e()])]}},{key:"td",fn:function(e){return["operation"==e.column.field?a("div",{staticStyle:{"text-align":"center",color:"#666"}},[e.item.departmentName!==t.salesSpe2?a("span",{staticClass:"lzp-operation-color",on:{click:function(i){t.goToContent(e.item)}}},[t._v("\n              详情\n            ")]):t._e(),t._v(" "),e.item.departmentName===t.salesSpe2?a("span",{staticStyle:{color:"rgb(153, 153, 153)"}},[t._v("\n              详情\n            ")]):t._e()]):"device"===e.column.field?a("div",{staticStyle:{"text-align":"center",color:"gray"}},[e.item.device.includes("android")?a("v-icon",{staticStyle:{color:"#49a9ee","margin-right":"8px","font-size":"24px"},attrs:{type:"mobile"}}):t._e(),t._v(" "),e.item.device.includes("windows")?a("v-icon",{staticStyle:{color:"#49a9ee","font-size":"24px"},attrs:{type:"desktop"}}):t._e(),t._v(" "),e.item.device.includes("android")?t._e():a("v-icon",{staticStyle:{"margin-right":"8px","font-size":"24px"},attrs:{type:"mobile"}}),t._v(" "),e.item.device.includes("windows")?t._e():a("v-icon",{staticStyle:{"font-size":"24px"},attrs:{type:"desktop"}})],1):a("div",{staticStyle:{"text-align":"center",color:"#666"},domProps:{innerHTML:t._s(e.content)}})]}}])})],1),t._v(" "),a("div",{staticClass:"common-title"},[a("span",{staticClass:"content-option",class:{active:1===t.activeTab},on:{click:function(e){t.contentChange(1)}}},[t._v("销售质检")]),t._v(" "),a("span",{staticClass:"content-option",class:{active:2===t.activeTab},on:{click:function(e){t.contentChange(2)}}},[t._v("客户质检")]),t._v(" "),t.showOldDoor?a("v-button",{staticStyle:{float:"right",right:"16px"},on:{click:function(e){t.myFn.goToOldSystem()}}},[t._v("进入旧版")]):t._e()],1),t._v(" "),a("div",{staticClass:"time time-panel clearfix",staticStyle:{"padding-bottom":"10px"}},[a("v-date-picker",{ref:"content",staticStyle:{"margin-left":"10px"},attrs:{range:"",maxRange:t.maxRange},on:{confirm:function(e){t.timeConfirm()}},model:{value:t.rangeDate,callback:function(e){t.rangeDate=e},expression:"rangeDate"}}),t._v(" "),a("v-button",{attrs:{type:"primary"},on:{click:t.exportData}},[t._v("导出")]),t._v(" "),a("yhq-dept",{on:{deptSelectEvent:t.deptSelectEvent}})],1)]),t._v(" "),a("div",{staticClass:"v-content v-no-pr",style:t.vContentHeigth},[a("div",{staticClass:"v-pr",staticStyle:{height:"auto"},attrs:{id:"viewBox1"}},[a("v-data-table",{ref:"xtable",attrs:{data:t.loadData,"current-data":t.mydata,columns:t.columns,"page-num":t.pageNo,pagination:!1,emptyText:"暂无数据",bordered:""},on:{"update:currentData":function(e){t.mydata=e}},scopedSlots:t._u([{key:"th",fn:function(e){return[a("div",{class:{"pointer-class":e.column.id>2&&e.column.id<13},staticStyle:{"text-align":"center",color:"#000"},on:{click:function(i){t.sortDate(e)}}},[a("span",{domProps:{innerHTML:t._s(e.title)}}),t._v(" "),1===e.column.sortFlag?a("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[a("i",{staticClass:"fa fa-long-arrow-down",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),2===e.column.sortFlag?a("span",{staticStyle:{position:"absolute","margin-left":"5px"}},[a("i",{staticClass:"fa fa-long-arrow-up",attrs:{"aria-hidden":"true"}})]):t._e()])]}},{key:"td",fn:function(e){return["operation"==e.column.field?a("div",{staticStyle:{"text-align":"center",color:"#666"}},[e.item.departmentName!==t.salesSpe2?a("span",{staticClass:"lzp-operation-color",on:{click:function(i){t.goToContent(e.item)}}},[t._v("\n              详情\n            ")]):t._e(),t._v(" "),e.item.departmentName===t.salesSpe2?a("span",{staticStyle:{color:"rgb(153, 153, 153)"}},[t._v("\n              详情\n            ")]):t._e()]):"device"===e.column.field?a("div",{staticStyle:{"text-align":"center",color:"gray"}},[e.item.device.includes("android")?a("v-icon",{staticStyle:{color:"#49a9ee","margin-right":"8px","font-size":"24px"},attrs:{type:"mobile"}}):t._e(),t._v(" "),e.item.device.includes("windows")?a("v-icon",{staticStyle:{color:"#49a9ee","font-size":"24px"},attrs:{type:"desktop"}}):t._e(),t._v(" "),e.item.device.includes("android")?t._e():a("v-icon",{staticStyle:{"margin-right":"8px","font-size":"24px"},attrs:{type:"mobile"}}),t._v(" "),e.item.device.includes("windows")?t._e():a("v-icon",{staticStyle:{"font-size":"24px"},attrs:{type:"desktop"}})],1):a("div",{staticStyle:{"text-align":"center",color:"#666"},domProps:{innerHTML:t._s(e.content)}})]}}])}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],staticClass:"clearfix home-page-pagination1",staticStyle:{"margin-top":"30px"}},[a("div",{staticStyle:{float:"right",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(e){t.pageNo=Math.ceil(t.total/t.pageSize)}}},[t._v("尾页")]),t._v(" "),a("div",{staticStyle:{float:"right"}},[a("v-pagination",{attrs:{value:t.pageNo,total:t.total,pageSize:t.pageSize,"show-quick-jumper":"",simple:""},on:{change:t.changePageNo}})],1),t._v(" "),a("div",{staticStyle:{float:"right",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(e){t.pageNo=1}}},[t._v("首页")])])],1)])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2===t.activeTab,expression:"activeTab === 2"}]},[a("div",{staticClass:"header v-home"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.viewBox2Flag,expression:"viewBox2Flag"}],staticClass:"ant-table ant-table-large ant-table-bordered",staticStyle:{width:"100%",height:"57px",position:"absolute",left:"10px",top:"0","z-index":"999"},style:t.viewBox2Style},[a("v-data-table",{ref:"xtable2",attrs:{data:t.getCustomerByWxIdList,"current-data":t.dataChatList,columns:t.columns2,"page-num":t.pageNo2,pagination:!1,emptyText:"暂无数据",bordered:""},on:{"update:currentData":function(e){t.dataChatList=e}},scopedSlots:t._u([{key:"th",fn:function(e){return[a("div",{staticStyle:{"text-align":"center",color:"#000"}},[a("span",{domProps:{innerHTML:t._s(e.title)}})])]}},{key:"td",fn:function(e){return["operation"==e.column.field?a("div",{staticStyle:{"text-align":"center",color:"#666"}},[e.item.department_name!==t.salesSpe2?a("span",{staticClass:"lzp-operation-color",on:{click:function(i){t.showChatListBef(e.item)}}},[t._v("\n                  详情\n                ")]):t._e()]):a("div",{staticStyle:{"text-align":"center",color:"#666"},domProps:{innerHTML:t._s(e.content)}})]}}])})],1),t._v(" "),a("div",{staticClass:"common-title"},[a("span",{staticClass:"content-option",class:{active:1===t.activeTab},on:{click:function(e){t.contentChange(1)}}},[t._v("销售质检")]),t._v(" "),a("span",{staticClass:"content-option",class:{active:2===t.activeTab},on:{click:function(e){t.contentChange(2)}}},[t._v("客户质检")]),t._v(" "),t.showOldDoor?a("v-button",{staticStyle:{float:"right",right:"16px"},on:{click:function(e){t.myFn.goToOldSystem()}}},[t._v("进入旧版")]):t._e()],1),t._v(" "),a("div",{staticClass:"time time-panel clearfix"},[a("v-input",{staticClass:"input-box",staticStyle:{width:"240px","margin-bottom":"10px","margin-left":"10px"},attrs:{placeholder:"输入客户微信号/昵称/备注"},nativeOn:{keyup:function(e){t.keyupSearch(e)}},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}}),t._v(" "),t.searchValue?t._e():a("v-icon",{staticStyle:{position:"relative",left:"-24px"},attrs:{type:"search"}}),t._v(" "),t.searchValue?a("span",{staticStyle:{position:"relative",left:"-24px",cursor:"pointer"},on:{click:function(e){t.searchValue="",t.dataChatList=[]}}},[a("v-icon",{attrs:{type:"close"}})],1):t._e()],1)]),t._v(" "),a("div",{staticClass:"v-content v-no-pr",style:t.vContentHeigth1},[a("div",{staticClass:"v-pr",staticStyle:{height:"auto"},attrs:{id:"viewBox2"}},[a("v-data-table",{ref:"xtable2",attrs:{data:t.getCustomerByWxIdList,"current-data":t.dataChatList,columns:t.columns2,"page-num":t.pageNo2,pagination:!1,emptyText:"暂无数据",bordered:""},on:{"update:currentData":function(e){t.dataChatList=e}},scopedSlots:t._u([{key:"th",fn:function(e){return[a("div",{staticStyle:{"text-align":"center",color:"#000"}},[a("span",{domProps:{innerHTML:t._s(e.title)}})])]}},{key:"td",fn:function(e){return["operation"==e.column.field?a("div",{staticStyle:{"text-align":"center",color:"#666"}},[a("span",{staticClass:"lzp-operation-color",on:{click:function(i){t.showChatListBef(e.item)}}},[t._v("\n                详情\n              ")])]):a("div",{staticStyle:{"text-align":"center",color:"#666"},domProps:{innerHTML:t._s(e.content)}})]}}])}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.total2>0,expression:"total2>0"}],staticClass:"clearfix home-page-pagination2",staticStyle:{"margin-top":"30px"}},[a("div",{staticStyle:{float:"right",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(e){t.pageNo2=Math.ceil(t.total2/t.pageSize)}}},[t._v("尾页")]),t._v(" "),a("div",{staticStyle:{float:"right"}},[a("v-pagination",{attrs:{value:t.pageNo2,total:t.total2,pageSize:t.pageSize,"show-quick-jumper":"",simple:""},on:{change:t.changePageNo}})],1),t._v(" "),a("div",{staticStyle:{float:"right",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(e){t.pageNo2=1}}},[t._v("首页")])])],1)])])]),t._v(" "),[a("div",{staticClass:"addmodal"},[a("v-modal",{attrs:{title:"聊天内容",visible:t.dataModalVisible,wrapClassName:"v-no-modal-footer v-no-modal-padding",width:800},on:{ok:function(e){t.cancel("关闭"),t.dataModalVisible=!1},cancel:function(e){t.cancel("关闭"),t.dataModalVisible=!1}}},[a("div",{ref:"viewBox",staticStyle:{overflow:"auto","padding-right":"15px"},style:t.detailModalStyle,attrs:{id:"viewBox"}},[t.dataModalLoading?a("div",{staticClass:"have-no-data",staticStyle:{position:"absolute",left:"385px","z-index":"999"}},[a("v-spin",{attrs:{spinning:t.dataModalLoading}})],1):t._e(),t._v(" "),0!==t.dataList.length||t.dataModalLoading?t._e():a("div",{staticClass:"have-no-data"},[t._v("暂无数据")]),t._v(" "),t.dataList.length>0&&0===t.channelSelect?a("ul",{staticClass:"chat-content-modal onlyone-div"},t._l(t.dataList,function(e){return a("li",{key:e.id,staticClass:"chat-item-modal clearfix"},["left"===e.author?a("div",{staticClass:"clearfix"},[a("div",{staticClass:"users-dialog-time"},[t._v(t._s(t._f("slice")(e.createTime,[0,16])))]),t._v(" "),a("div",{staticClass:"users-dialog",class:{"dialog-img":"image"===e.type||"voice"===e.type},staticStyle:{float:"left","text-align":"left"}},[a("span",{domProps:{innerHTML:t._s(e.sentence)}})])]):a("div",{staticClass:"clearfix"},[a("div",{staticClass:"sales-dialog-time"},[t._v(t._s(t._f("slice")(e.createTime,[0,16])))]),t._v(" "),a("div",{staticClass:"sales-dialog sales-dialog-font",class:{"dialog-img":"image"===e.type||"voice"===e.type}},[a("span",{domProps:{innerHTML:t._s(e.sentence)}})])])])})):t._e(),t._v(" "),t.dataList.length>0&&1===t.channelSelect?a("ul",{staticClass:"chat-content-modal onlyone-div"},t._l(t.dataList,function(e){return a("li",{key:e.id,staticClass:"chat-item-modal clearfix",staticStyle:{"text-align":"left"}},["left"===e.author?a("div",{staticClass:"clearfix"},[e.headimg&&"10000"!==e.type?a("img",{staticStyle:{float:"left",width:"48px",height:"48px","margin-top":"8px","margin-right":"10px"},attrs:{alt:"头像",src:e.headimg}}):t._e(),t._v(" "),e.headimg||"10000"===e.type?t._e():a("img",{staticStyle:{float:"left",width:"48px",height:"48px","margin-top":"8px","margin-right":"10px"},attrs:{alt:"头像",src:i("tkIx")}}),t._v(" "),"10000"!==e.type?a("div",{staticStyle:{"text-align":"left","line-height":"30px","padding-left":"24px"}},[e.nickName?a("span",[t._v(t._s(e.nickName)+"    ")]):t._e(),t._v(t._s(t._f("slice")(e.createTime,[0,16])))]):t._e(),t._v(" "),a("div",{staticClass:"users-dialog",class:{"dialog-word":"1"===e.type,"dialog-img":"3"===e.type||"43"===e.type,"dialog-voice-two":"34"===e.type,"dialog-money":"436207665"===e.type||"419430449"===e.type,"dialog-share":"49"===e.type||"42"===e.type,"dialog-system-message":"10000"===e.type},staticStyle:{"margin-left":"0"}},["1"===e.type?a("span",{domProps:{innerHTML:t._s(e.sentence)}}):"3"===e.type?a("img",{staticStyle:{"max-width":"100%",cursor:"pointer"},attrs:{src:e.sentence},on:{click:function(i){t.showBigImage(e)}}}):"47"===e.type&&0===e.sentence.indexOf("http")?a("img",{staticStyle:{"max-width":"100%"},attrs:{src:e.sentence}}):"47"===e.type&&-1===e.sentence.indexOf("http")?a("span",[t._v(t._s(e.sentence))]):"34"===e.type?a("span",{class:{"voice-left":!e.audioPlaying,"voice-left-gif":e.audioPlaying},on:{click:function(i){t.playVoice(e)}}},[t._v("\n                                            \n                  ")]):"43"===e.type?a("span",[e.sentence.video_url?a("video",{staticStyle:{width:"100%"},attrs:{src:e.sentence.video_url,controls:"controls"}}):e.sentence.img_url?a("div",{staticStyle:{position:"relative"}},[a("img",{staticStyle:{"max-width":"100%"},attrs:{src:e.sentence.img_url},on:{click:function(e){t.videoNoPlay()}}}),t._v(" "),a("img",{staticStyle:{"max-width":"100%",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},attrs:{src:i("jrgc")},on:{click:function(e){t.videoNoPlay()}}})]):t._e()]):t._e(),t._v(" "),"10000"===e.type?a("span",{staticStyle:{"background-color":"#D4D4D4",padding:"3px 6px","border-radius":"3px"},domProps:{innerHTML:t._s(e.sentence)}}):t._e(),t._v(" "),"436207665"===e.type&&"https://wx.gtimg.com/hongbao/1800/hb.png"===e.sentence.thumburl?a("div",{staticStyle:{width:"350px",height:"134px",position:"relative"}},[a("img",{staticStyle:{position:"absolute",top:"18px",left:"-7px"},attrs:{src:i("T2sH")}}),t._v(" "),a("div",{staticClass:"clearfix",staticStyle:{"background-color":"#FA9C3E",width:"100%","border-radius":"4px 4px 0 0",border:"1px solid #e1e1e1","border-bottom":"none"}},[a("div",{staticStyle:{float:"left",width:"30%",height:"100px","text-align":"center","padding-top":"20px"}},[a("img",{staticStyle:{width:"56px"},attrs:{src:e.sentence.thumburl}})]),t._v(" "),a("div",{staticStyle:{float:"left",width:"70%",height:"100px",color:"white","font-size":"18px","line-height":"32px"}},[a("p",{staticStyle:{"padding-top":"18px",height:"52px",overflow:"hidden"},attrs:{title:e.sentence.des}},[t._v(t._s(e.sentence.des))]),t._v(" "),a("p",{staticStyle:{"font-size":"13px"}},[t._v("领取红包")])])]),t._v(" "),a("div",{staticStyle:{"background-color":"#fff",height:"32px","line-height":"32px","padding-left":"15px","border-radius":"0 0 4px 4px",border:"1px solid #e1e1e1","border-top":"none","font-size":"16px"}},[t._v("\n                      微信红包\n                    ")])]):t._e(),t._v(" "),"436207665"===e.type&&"https://wx.gtimg.com/hongbao/1800/hb.png"!==e.sentence.thumburl?a("div",{staticStyle:{width:"350px",height:"134px",position:"relative"}},[a("img",{staticStyle:{position:"absolute",top:"18px",left:"-7px"},attrs:{src:i("4Ugs")}}),t._v(" "),a("div",{staticClass:"clearfix",staticStyle:{"background-color":"#FFD09C",width:"100%","border-radius":"4px 4px 0 0",border:"1px solid #e1e1e1","border-bottom":"none"}},[a("div",{staticStyle:{float:"left",width:"30%",height:"100px","text-align":"center","padding-top":"20px"}},[a("img",{staticStyle:{width:"56px"},attrs:{src:e.sentence.thumburl}})]),t._v(" "),a("div",{staticStyle:{float:"left",width:"70%",height:"100px",color:"white","font-size":"18px","line-height":"32px"}},[a("p",{staticStyle:{"padding-top":"18px",height:"52px",overflow:"hidden"},attrs:{title:e.sentence.des}},[t._v(t._s(e.sentence.des))]),t._v(" "),a("p",[t._v("红包已被领完")])])]),t._v(" "),a("div",{staticStyle:{"background-color":"#fff",height:"32px","line-height":"32px","padding-left":"15px","border-radius":"0 0 4px 4px",border:"1px solid #e1e1e1","border-top":"none","font-size":"16px"}},[t._v("\n                      微信红包\n                    ")])]):t._e(),t._v(" "),"419430449"===e.type&&e.sentence.paysubtype/1<3?a("div",{staticStyle:{width:"350px",height:"134px",position:"relative"}},[a("img",{staticStyle:{position:"absolute",top:"18px",left:"-7px"},attrs:{src:i("T2sH")}}),t._v(" "),a("div",{staticClass:"clearfix",staticStyle:{"background-color":"#FA9C3E",width:"100%","border-radius":"4px 4px 0 0",border:"1px solid #e1e1e1","border-bottom":"none"}},[a("div",{staticStyle:{float:"left",width:"30%",height:"100px","text-align":"center","padding-top":"20px"}},[a("img",{staticStyle:{width:"56px"},attrs:{src:i("VGpR")}})]),t._v(" "),a("div",{staticStyle:{float:"left",width:"70%",height:"100px",color:"white","font-size":"18px","line-height":"32px"}},[a("p",{staticStyle:{"padding-top":"18px",height:"52px",overflow:"hidden"},attrs:{title:e.sentence.des}},[t._v(t._s(e.sentence.des))]),t._v(" "),a("p",[t._v(t._s(e.sentence.feedesc))])])]),t._v(" "),a("div",{staticStyle:{"background-color":"#fff",height:"32px","line-height":"32px","padding-left":"15px","border-radius":"0 0 4px 4px",border:"1px solid #e1e1e1","border-top":"none","font-size":"16px"}},[t._v("\n                      微信转账\n                    ")])]):t._e(),t._v(" "),"419430449"===e.type&&e.sentence.paysubtype/1>2?a("div",{staticStyle:{width:"350px",height:"134px",position:"relative"}},[a("img",{staticStyle:{position:"absolute",top:"18px",left:"-7px"},attrs:{src:i("4Ugs")}}),t._v(" "),a("div",{staticClass:"clearfix",staticStyle:{"background-color":"#FFD09C",width:"100%","border-radius":"4px 4px 0 0",border:"1px solid #e1e1e1","border-bottom":"none"}},[a("div",{staticStyle:{float:"left",width:"30%",height:"100px","text-align":"center","padding-top":"20px"}},[a("img",{staticStyle:{width:"56px"},attrs:{src:i("M8M4")}})]),t._v(" "),a("div",{staticStyle:{float:"left",width:"70%",height:"100px",color:"white","font-size":"18px","line-height":"32px"}},[a("p",{staticStyle:{"padding-top":"18px"}},[t._v("已收钱")]),t._v(" "),a("p",[t._v(t._s(e.sentence.feedesc))])])]),t._v(" "),a("div",{staticStyle:{"background-color":"#fff",height:"32px","line-height":"32px","padding-left":"15px","border-radius":"0 0 4px 4px",border:"1px solid #e1e1e1","border-top":"none","font-size":"16px"}},[t._v("\n                      微信转账\n                    ")])]):t._e(),t._v(" "),"42"===e.type?a("div",{staticStyle:{width:"350px","min-height":"120px",position:"relative",border:"1px solid #e1e1e1"}},[a("div",{staticStyle:{width:"100%","min-height":"86px","padding-left":"15px","padding-top":"15px"}},[e.sentence.big_headimg?a("img",{staticStyle:{width:"56px"},attrs:{src:e.sentence.big_headimg}}):e.sentence.small_headimg?a("img",{staticStyle:{width:"56px"},attrs:{src:e.sentence.small_headimg}}):a("img",{staticStyle:{width:"56px"},attrs:{src:i("tkIx")}}),t._v(" "),a("span",{staticStyle:{"font-size":"18px",display:"inline-block",float:"right",width:"250px",height:"60px",overflow:"hidden","line-height":"32px"},attrs:{title:e.sentence.nickname}},[t._v("\n                          "+t._s(e.sentence.nickname)+"\n                        ")])]),t._v(" "),a("div",{staticStyle:{"background-color":"#FCFCFC",height:"32px","line-height":"32px","padding-left":"15px","border-radius":"0 0 4px 4px","border-top":"1px solid #e1e1e1","font-size":"14px"}},[t._v("\n                      个人名片\n                    ")])]):t._e(),t._v(" "),"49"===e.type&&5===e.sentence.sub_type?a("div",{staticStyle:{width:"350px","min-height":"80px",position:"relative",border:"1px solid #e1e1e1"}},[a("a",{attrs:{href:e.sentence.redirect_url,target:"_blank"}},[a("div",{staticStyle:{padding:"5px 15px 20px","font-size":"14px","line-height":"24px"}},[t._v("\n                        "+t._s(e.sentence.title)+"\n                      ")]),t._v(" "),e.sentence.img_url?a("div",{staticClass:"clearfix",staticStyle:{width:"100%"}},[a("div",{staticStyle:{float:"left",width:"75%","padding-left":"15px","padding-bottom":"20px"}},[a("p",{staticStyle:{"font-size":"12px",color:"#B1B1B1","word-break":"break-all"}},[t._v(t._s(e.sentence.des))])]),t._v(" "),a("div",{staticStyle:{float:"left",width:"25%","text-align":"center"}},[a("img",{staticStyle:{width:"56px"},attrs:{src:i("sbUS")}})])]):t._e(),t._v(" "),e.sentence.img_url?t._e():a("div",{staticClass:"clearfix",staticStyle:{width:"100%"}},[a("div",{staticStyle:{float:"left",width:"100%",padding:"5px 15px 20px"}},[a("p",{staticStyle:{"font-size":"12px",color:"#B1B1B1","word-break":"break-all"}},[t._v(t._s(e.sentence.des))])])])])]):t._e(),t._v(" "),"49"===e.type&&6===e.sentence.sub_type?a("div",{staticStyle:{width:"350px",height:"114.5px",position:"relative",border:"1px solid #e1e1e1"}},[a("div",{staticClass:"clearfix",staticStyle:{width:"100%"}},[a("div",{staticStyle:{float:"left",width:"75%",height:"114.5px","padding-left":"15px"}},[a("p",{staticStyle:{"padding-top":"28px","font-size":"14px","line-height":"26px","word-break":"break-all"}},[t._v(t._s(e.sentence.title))]),t._v(" "),a("p",{staticStyle:{"font-size":"12px",color:"#B1B1B1","padding-top":"10px","word-break":"break-all"}},[t._v(t._s(e.sentence.des))])]),t._v(" "),a("div",{staticStyle:{float:"left",width:"25%",height:"114.5px","text-align":"center"}},[a("img",{staticStyle:{"padding-top":"17px",width:"56px"},attrs:{src:i("ZZ2p")}})])])]):t._e(),t._v(" "),"49"===e.type&&33===e.sentence.sub_type?a("div",{staticStyle:{width:"350px","min-height":"120px",position:"relative",border:"1px solid #e1e1e1"}},[a("div",{staticStyle:{width:"100%","min-height":"86px","padding-left":"15px"}},[a("p",{staticStyle:{"font-size":"12px",color:"#B1B1B1","padding-top":"5px"}},[t._v(t._s(e.sentence.sourcedisplayname))]),t._v(" "),a("p",{staticStyle:{"padding-top":"5px","font-size":"14px","line-height":"26px","word-break":"break-all"}},[t._v(t._s(e.sentence.title))])]),t._v(" "),a("div",{staticStyle:{"background-color":"#FCFCFC",height:"32px","line-height":"32px","padding-left":"15px","border-radius":"0 0 4px 4px","border-top":"1px solid #e1e1e1","font-size":"12px"}},[a("img",{staticStyle:{"margin-right":"5px",position:"relative",top:"2px"},attrs:{src:i("PRH0")}}),t._v("小程序\n                    ")])]):t._e(),t._v(" "),"49"===e.type&&e.sentence.redirect_url?a("div",{staticStyle:{width:"350px","word-break":"break-all","line-height":"24px","margin-top":"10px"}},[t._v("\n                    链接："),a("a",{attrs:{href:e.sentence.redirect_url,target:"_blank"}},[t._v(t._s(e.sentence.redirect_url))])]):t._e()])]):a("div",{staticClass:"clearfix"},[e.headimg&&"10000"!==e.type?a("img",{staticStyle:{float:"right",width:"48px",height:"48px","margin-top":"8px","margin-left":"10px"},attrs:{alt:"头像",src:e.headimg}}):t._e(),t._v(" "),e.headimg||"10000"===e.type?t._e():a("img",{staticStyle:{float:"right",width:"48px",height:"48px","margin-top":"8px","margin-left":"10px"},attrs:{alt:"头像",src:i("tkIx")}}),t._v(" "),"10000"!==e.type?a("div",{staticStyle:{"text-align":"right","line-height":"30px","padding-right":"24px"}},[t._v(t._s(t._f("slice")(e.createTime,[0,16]))),e.nickName?a("span",[t._v("    "+t._s(e.nickName))]):t._e()]):t._e(),t._v(" "),a("div",{staticClass:"sales-dialog",class:{"dialog-word":"1"===e.type,"dialog-img":"3"===e.type||"43"===e.type,"dialog-voice-two":"34"===e.type,"dialog-money":"436207665"===e.type||"419430449"===e.type,"dialog-share":"49"===e.type||"42"===e.type,"dialog-system-message":"10000"===e.type,"dialog-sales-triangle":"42"===e.type||"49"===e.type}},["1"===e.type?a("span",{domProps:{innerHTML:t._s(e.sentence)}}):"3"===e.type?a("img",{staticStyle:{"max-width":"100%",cursor:"pointer"},attrs:{src:e.sentence},on:{click:function(i){t.showBigImage(e)}}}):"47"===e.type&&0===e.sentence.indexOf("http")?a("img",{staticStyle:{"max-width":"100%"},attrs:{src:e.sentence}}):"47"===e.type&&-1===e.sentence.indexOf("http")?a("span",[t._v(t._s(e.sentence))]):"34"===e.type?a("span",{class:{"voice-right":!e.audioPlaying,"voice-right-gift":e.audioPlaying},on:{click:function(i){t.playVoice(e)}}},[t._v("\n                                            \n                  ")]):"43"===e.type?a("span",[e.sentence.video_url?a("video",{staticStyle:{width:"100%"},attrs:{src:e.sentence.video_url,controls:"controls"}}):e.sentence.img_url?a("div",{staticStyle:{position:"relative"}},[a("img",{staticStyle:{"max-width":"100%"},attrs:{src:e.sentence.img_url},on:{click:function(i){t.videoNoPlay(e)}}}),t._v(" "),a("img",{staticStyle:{"max-width":"100%",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},attrs:{src:i("jrgc")}})]):t._e()]):t._e(),t._v(" "),"10000"===e.type?a("span",{staticStyle:{"background-color":"#D4D4D4",padding:"3px 6px","border-radius":"3px"},domProps:{innerHTML:t._s(e.sentence)}}):t._e(),t._v(" "),"436207665"===e.type&&"https://wx.gtimg.com/hongbao/1800/hb.png"===e.sentence.thumburl?a("div",{staticStyle:{width:"350px",height:"134px",position:"relative"}},[a("img",{staticStyle:{position:"absolute",top:"18px",right:"-7px"},attrs:{src:i("UeBE")}}),t._v(" "),a("div",{staticClass:"clearfix",staticStyle:{"background-color":"#FA9C3E",width:"100%","border-radius":"4px 4px 0 0",border:"1px solid #e1e1e1","border-bottom":"none"}},[a("div",{staticStyle:{float:"left",width:"30%",height:"100px","text-align":"center","padding-top":"20px"}},[a("img",{staticStyle:{width:"56px"},attrs:{src:e.sentence.thumburl}})]),t._v(" "),a("div",{staticStyle:{float:"left",width:"70%",height:"100px",color:"white","font-size":"18px","line-height":"32px"}},[a("p",{staticStyle:{"padding-top":"18px",height:"52px",overflow:"hidden"},attrs:{title:e.sentence.des}},[t._v(t._s(e.sentence.des))]),t._v(" "),a("p",{staticStyle:{"font-size":"13px"}},[t._v("领取红包")])])]),t._v(" "),a("div",{staticStyle:{"background-color":"#fff",height:"32px","line-height":"32px","padding-left":"15px","border-radius":"0 0 4px 4px",border:"1px solid #e1e1e1","border-top":"none","font-size":"16px"}},[t._v("\n                      微信红包\n                    ")])]):t._e(),t._v(" "),"436207665"===e.type&&"https://wx.gtimg.com/hongbao/1800/hb.png"!==e.sentence.thumburl?a("div",{staticStyle:{width:"350px",height:"134px",position:"relative"}},[a("img",{staticStyle:{position:"absolute",top:"18px",right:"-7px"},attrs:{src:i("PGdx")}}),t._v(" "),a("div",{staticClass:"clearfix",staticStyle:{"background-color":"#FFD09C",width:"100%","border-radius":"4px 4px 0 0",border:"1px solid #e1e1e1","border-bottom":"none"}},[a("div",{staticStyle:{float:"left",width:"30%",height:"100px","text-align":"center","padding-top":"20px"}},[a("img",{staticStyle:{width:"56px"},attrs:{src:e.sentence.thumburl}})]),t._v(" "),a("div",{staticStyle:{float:"left",width:"70%",height:"100px",color:"white","font-size":"18px","line-height":"32px"}},[a("p",{staticStyle:{"padding-top":"18px",height:"52px",overflow:"hidden"},attrs:{title:e.sentence.des}},[t._v(t._s(e.sentence.des))]),t._v(" "),a("p",[t._v("红包已被领完")])])]),t._v(" "),a("div",{staticStyle:{"background-color":"#fff",height:"32px","line-height":"32px","padding-left":"15px","border-radius":"0 0 4px 4px",border:"1px solid #e1e1e1","border-top":"none","font-size":"16px"}},[t._v("\n                      微信红包\n                    ")])]):t._e(),t._v(" "),"419430449"===e.type&&e.sentence.paysubtype/1<3?a("div",{staticStyle:{width:"350px",height:"134px",position:"relative"}},[a("img",{staticStyle:{position:"absolute",top:"18px",right:"-7px"},attrs:{src:i("UeBE")}}),t._v(" "),a("div",{staticClass:"clearfix",staticStyle:{"background-color":"#FA9C3E",width:"100%","border-radius":"4px 4px 0 0",border:"1px solid #e1e1e1","border-bottom":"none"}},[a("div",{staticStyle:{float:"left",width:"30%",height:"100px","text-align":"center","padding-top":"20px"}},[a("img",{staticStyle:{width:"56px"},attrs:{src:i("VGpR")}})]),t._v(" "),a("div",{staticStyle:{float:"left",width:"70%",height:"100px",color:"white","font-size":"18px","line-height":"32px"}},[a("p",{staticStyle:{"padding-top":"18px",height:"52px",overflow:"hidden"},attrs:{title:e.sentence.des}},[t._v(t._s(e.sentence.des))]),t._v(" "),a("p",[t._v(t._s(e.sentence.feedesc))])])]),t._v(" "),a("div",{staticStyle:{"background-color":"#fff",height:"32px","line-height":"32px","padding-left":"15px","border-radius":"0 0 4px 4px",border:"1px solid #e1e1e1","border-top":"none","font-size":"16px"}},[t._v("\n                      微信转账\n                    ")])]):t._e(),t._v(" "),"419430449"===e.type&&e.sentence.paysubtype/1>2?a("div",{staticStyle:{width:"350px",height:"134px",position:"relative"}},[a("img",{staticStyle:{position:"absolute",top:"18px",right:"-7px"},attrs:{src:i("PGdx")}}),t._v(" "),a("div",{staticClass:"clearfix",staticStyle:{"background-color":"#FFD09C",width:"100%","border-radius":"4px 4px 0 0",border:"1px solid #e1e1e1","border-bottom":"none"}},[a("div",{staticStyle:{float:"left",width:"30%",height:"100px","text-align":"center","padding-top":"20px"}},[a("img",{staticStyle:{width:"56px"},attrs:{src:i("M8M4")}})]),t._v(" "),a("div",{staticStyle:{float:"left",width:"70%",height:"100px",color:"white","font-size":"18px","line-height":"32px"}},[a("p",{staticStyle:{"padding-top":"18px"}},[t._v("已收钱")]),t._v(" "),a("p",[t._v(t._s(e.sentence.feedesc))])])]),t._v(" "),a("div",{staticStyle:{"background-color":"#fff",height:"32px","line-height":"32px","padding-left":"15px","border-radius":"0 0 4px 4px",border:"1px solid #e1e1e1","border-top":"none","font-size":"16px"}},[t._v("\n                      微信转账\n                    ")])]):t._e(),t._v(" "),"42"===e.type?a("div",{staticStyle:{width:"350px","min-height":"120px",position:"relative",border:"1px solid #e1e1e1","background-color":"white"}},[a("div",{staticStyle:{width:"100%","min-height":"86px","padding-left":"15px","padding-top":"15px"}},[e.sentence.big_headimg?a("img",{staticStyle:{width:"56px"},attrs:{src:e.sentence.big_headimg}}):e.sentence.small_headimg?a("img",{staticStyle:{width:"56px"},attrs:{src:e.sentence.small_headimg}}):a("img",{staticStyle:{width:"56px"},attrs:{src:i("tkIx")}}),t._v(" "),a("span",{staticStyle:{"font-size":"18px",display:"inline-block",float:"right",width:"250px",height:"60px",overflow:"hidden","line-height":"32px"},attrs:{title:e.sentence.nickname}},[t._v("\n                          "+t._s(e.sentence.nickname)+"\n                        ")])]),t._v(" "),a("div",{staticStyle:{"background-color":"#FCFCFC",height:"32px","line-height":"32px","padding-left":"15px","border-radius":"0 0 4px 4px","border-top":"1px solid #e1e1e1","font-size":"14px"}},[t._v("\n                      个人名片\n                    ")])]):t._e(),t._v(" "),"49"===e.type&&5===e.sentence.sub_type?a("div",{staticStyle:{width:"350px","min-height":"80px",position:"relative",border:"1px solid #e1e1e1","background-color":"white"}},[a("a",{attrs:{href:e.sentence.redirect_url,target:"_blank"}},[a("div",{staticStyle:{padding:"5px 15px 20px","font-size":"14px","line-height":"24px"}},[t._v("\n                        "+t._s(e.sentence.title)+"\n                      ")]),t._v(" "),e.sentence.img_url?a("div",{staticClass:"clearfix",staticStyle:{width:"100%"}},[a("div",{staticStyle:{float:"left",width:"75%","padding-left":"15px","padding-bottom":"20px"}},[a("p",{staticStyle:{"font-size":"12px",color:"#B1B1B1","word-break":"break-all"}},[t._v(t._s(e.sentence.des))])]),t._v(" "),a("div",{staticStyle:{float:"left",width:"25%","text-align":"center"}},[a("img",{staticStyle:{width:"56px"},attrs:{src:i("sbUS")}})])]):t._e(),t._v(" "),e.sentence.img_url?t._e():a("div",{staticClass:"clearfix",staticStyle:{width:"100%"}},[a("div",{staticStyle:{float:"left",width:"100%",padding:"5px 15px 20px"}},[a("p",{staticStyle:{"font-size":"12px",color:"#B1B1B1","word-break":"break-all"}},[t._v(t._s(e.sentence.des))])])])])]):t._e(),t._v(" "),"49"===e.type&&6===e.sentence.sub_type?a("div",{staticStyle:{width:"350px",height:"114.5px",position:"relative",border:"1px solid #e1e1e1","background-color":"white"}},[a("div",{staticClass:"clearfix",staticStyle:{width:"100%"}},[a("div",{staticStyle:{float:"left",width:"75%",height:"114.5px","padding-left":"15px"}},[a("p",{staticStyle:{"padding-top":"28px","font-size":"14px","line-height":"26px","word-break":"break-all"}},[t._v(t._s(e.sentence.title))]),t._v(" "),a("p",{staticStyle:{"font-size":"12px",color:"#B1B1B1","padding-top":"10px","word-break":"break-all"}},[t._v(t._s(e.sentence.des))])]),t._v(" "),a("div",{staticStyle:{float:"left",width:"25%",height:"114.5px","text-align":"center"}},[a("img",{staticStyle:{"padding-top":"17px",width:"56px"},attrs:{src:i("ZZ2p")}})])])]):t._e(),t._v(" "),"49"===e.type&&33===e.sentence.sub_type?a("div",{staticStyle:{width:"350px","min-height":"120px",position:"relative",border:"1px solid #e1e1e1","background-color":"white"}},[a("div",{staticStyle:{width:"100%","min-height":"86px","padding-left":"15px"}},[a("p",{staticStyle:{"font-size":"12px",color:"#B1B1B1","padding-top":"5px"}},[t._v(t._s(e.sentence.sourcedisplayname))]),t._v(" "),a("p",{staticStyle:{"padding-top":"5px","font-size":"14px","line-height":"26px","word-break":"break-all"}},[t._v(t._s(e.sentence.title))])]),t._v(" "),a("div",{staticStyle:{"background-color":"#FCFCFC",height:"32px","line-height":"32px","padding-left":"15px","border-radius":"0 0 4px 4px","border-top":"1px solid #e1e1e1","font-size":"12px"}},[a("img",{staticStyle:{"margin-right":"5px",position:"relative",top:"2px"},attrs:{src:i("PRH0")}}),t._v("小程序\n                    ")])]):t._e(),t._v(" "),"49"===e.type&&e.sentence.redirect_url?a("div",{staticStyle:{width:"350px","background-color":"white","word-break":"break-all","line-height":"24px","margin-top":"10px"}},[t._v("\n                    链接："),a("a",{attrs:{href:e.sentence.redirect_url,target:"_blank"}},[t._v(t._s(e.sentence.redirect_url))])]):t._e()])])])})):t._e()])])],1)],t._v(" "),[a("v-modal",{attrs:{"wrap-class-name":"chat-item-container",visible:t.bigImgModalVisible,title:"",wrapClassName:"v-no-modal-footer",width:1e3},on:{cancel:function(e){t.cancel("关闭"),t.bigImgModalVisible=!1}}},[a("div",[a("img",{staticStyle:{"max-width":"100%",display:"block",margin:"0 auto",padding:"40px 5px 10px"},style:t.angleStyle,attrs:{src:t.chatItem.sentence}})])])],t._v(" "),[a("v-modal",{attrs:{"wrap-class-name":"chat-item-container",visible:t.videoModalVisible,title:"",wrapClassName:"v-no-modal-footer",width:1e3},on:{cancel:function(e){t.cancel("关闭"),t.videoModalVisible=!1}}},[a("div",{staticStyle:{padding:"40px 5px 0"}},[a("video",{staticStyle:{width:"100%"},attrs:{src:t.chatItem.sentence,controls:"controls",autoplay:"autoplay"}})])])],t._v(" "),[a("div",{staticStyle:{position:"absolute",left:"-100px",top:"-100px"}},[a("audio",{attrs:{src:t.chatItem.audioUrl,controls:"controls",id:"myAudio"}})])]],2)},staticRenderFns:[]};var s=i("VU/8")(a,n,!1,function(t){i("AlYY")},"data-v-62c17ef7",null);e.default=s.exports},xXpT:function(t,e){}});