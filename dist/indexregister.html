<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>火种教育</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta content="A fully featured admin theme which can be used to build CRM, CMS, etc." name="description" />
    <meta content="Coderthemes" name="author" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- App favicon -->
    <link rel="shortcut icon" href="assets/images/favicon.ico">
    <link rel="stylesheet" href="assets/css/element-ui.css">
    <link href="assets/libs/@mdi/font/css/materialdesignicons.min.css" rel="stylesheet" type="text/css" />
    <link href="assets/libs/dripicons/webfont/webfont.css" rel="stylesheet" type="text/css" />
    <link href="assets/libs/simple-line-icons/css/simple-line-icons.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/app.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/studentArchive.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/fatstyle.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/student.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/index.css" rel="stylesheet" type="text/css" />
    <style>
        body {
            color: black;
        }

        .wrapper {
            padding-top: 60px;
        }

        .navbar-custom .nav-link {
            padding: 0;
            line-height: 60px;
            color: rgba(255, 255, 255, 0.8);
        }

        .el-input__icon {
            line-height: 30px;
        }

        .el-message-box {
            width: 80%
        }

        .form-control-sm {
            padding: 0.375rem 0.75rem;
            font-size: 0.875rem;
            line-height: 1.5;
            border-radius: 0.2rem;
        }

        .navbar-custom {
            border-radius: 0;
            min-height: 60px;
            color: #fff;
            z-index: 2;
        }

        select.form-control:not([size]):not([multiple]) {
            height: auto;
        }

        @media (min-width: 992px) {
            #topnav .topbar-menu {
                padding-bottom: 0;
            }
        }

        /* .el-pagination {
            white-space: nowrap;
            padding: 2px 5px;
            color: #303133;
            overflow: auto;
            font-weight: 700;
        } */

        .el-table td,
        .el-table th {
            text-align: center;
            padding: .2rem 0;
        }

        .el-pagination {
            text-align: center;
            margin: .2rem 0;
        }
    </style>
</head>

<body>

    <!-- Navigation Bar-->
    <header id="topnav">      </header>
    <!-- End Navigation Bar-->


    <div class="wrapper" id="app">
        <div class="container-fluid" style="margin-bottom: 60px">

            <!-- Page title box -->
            <div class="page-title-box" style="    margin-right: -15px;
            margin-left: -15px;">

                <div class="page-title"><i class=" mdi mdi-account"></i> 学员
                    <ul class="row page-ul">
                        <li style="color: #fa6900;
                        border-bottom: 2px solid #fa6900;">学员管理</li>
                        <li onclick="window.location.href='studentNotice.html'">学员通知</li>
                    </ul>
                </div>

            </div>
            <!-- End page title box -->
            <div class="row">
                <div class="col-xl-12">
                    <div class="u-wrap student clear over contentWindow">
                        <div class="body clear curr" style="width: 400%; left: 0%;">

                            <div class="mainbackground fl step2" style="width:25%;">
                                <div class="heading">
                                    <h2 class="h5">选择课程</h2>
                                    <div class="user-infos">
                                        <span class="user_name"></span> <span class="user_mobile"></span>
                                    </div>
                                    <span class="line"></span>
                                </div>
                                <div class="main-content payMasterInfo">
                                    <div class="m-title">
                                        <h2 class="h6">订单信息</h2>
                                    </div>
                                    <ul class="list-infos clear">
                                        <li>
                                            <p class="c">
                                                <span class="c-title">商品类型</span>
                                                <span class="c-content">
                                                    <label for="commodity_type_course"
                                                        style="display: initial;margin-right: 30px;">
                                                        <input id="commodity_type_course" type="radio"
                                                            v-model="sign_info.product_type" name="commodity_type"
                                                            value="课程" @change="inita" checked="checked">课程
                                                    </label>

                                                    <label for="commodity_type_package" style="display: initial;">
                                                        <input id="commodity_type_package" type="radio"
                                                            v-model="sign_info.product_type" name="commodity_type"
                                                            value="课程包" @change="inita">课程包
                                                    </label>

                                                </span>
                                            </p>
                                        </li>
                                        <li>
                                            <p class="c">
                                                <span class="c-title"></span>
                                                <span class="c-content"></span>
                                            </p>
                                        </li>

                                        <div v-show="sign_info.product_type == '课程'" style="display:none">
                                            <li>
                                                <p class="c">
                                                    <span class="c-title">学科</span> <span class="c-content">
                                                        <select name="" v-model="sign_info.project_id" class="itemOne" @change="inita">
                                                            <option value="">请选择</option>
                                                            <option v-for="(item,index) in projects" :value="parseInt(item.pse_id)">{{item.pse_name}}</option>
                                                        </select>
                                                    </span>
                                                </p>
                                            </li>
                                            <li>
                                                <p class="c">
                                                    <span class="c-title">学科小类</span> <span class="c-content">
                                                        <select name="" v-model="sign_info.subject_id" @change="searchClass" class="itemSecond">
                                                            <option value="">请选择</option>
                                                            <option v-for="(item,index) in kemus" :value="parseInt(item.pse_id)">{{item.pse_name}}</option>
                                                        </select>
                                                    </span>
                                                </p>
                                            </li>
                                            <li>
                                                <p class="c">
                                                    <span class="c-title">学习课程</span> <span class="c-content">
                                                        <select name="" v-model="sign_info.course_id" @change="selected" class="classType" style="font-size:1.4rem">
                                                            <option value="">请选择</option>
                                                            <option v-for="(item,index) in kcs" :value="parseInt(item.course_id)" >{{item.course_name}}</option>
                                                        </select>
                                                    </span>
                                                </p>
                                            </li>
                                            <li>
                                                <p class="c">
                                                    <span class="c-title">总 课 时</span> <span
                                                        class="c-content totalClassHour">{{sign_info.total_hours}}</span>
                                                </p>
                                            </li>
                                            <li>
                                                <p class="c">
                                                    <span class="c-title">授课类型</span> <span
                                                        class="c-content resouceType">{{selected_shouke}}</span>
                                                </p>
                                            </li>
                                            <!--  	
                                <li>
                                    <p class="c">
                                        <span class="c-title">是否代报考</span> <i class="iconfont open isAgent" style="font-size:20px;margin:0 10px;">&#xe642;</i><span>否</span>
                                    </p>
                                </li>
                             -->
                                        </div>
                                        <div v-show="sign_info.product_type == '课程包'" style="display:none;">
                                            <li style="width: 100%;">
                                                <p class="c">
                                                    <span class="c-title" style="width: 15%;">项目</span>
                                                    <select name="" v-model="sign_info.project_id" class="itemOne" @change="inita">
                                                        <option value="">请选择</option>
                                                        <option v-for="(item,index) in projects" :value="parseInt(item.pse_id)">{{item.pse_name}}</option>
                                                    </select>
                                                </p>
                                            </li>
                                            <li>
                                                <p class="c">
                                                    <span class="c-title">课程包</span> <span class="c-content">
                                                        <select name="" v-model="sign_info.course_package_id" @change="change_hours" class="itemOne">
                                                            <option value="">请选择</option>
                                                            <option v-for="(item,index) in kcb" :value="parseInt(item.course_package_id)">{{item.cp_name}}</option>
                                                        </select>
                                                    </span>
                                                </p>
                                            </li>
                                            <!-- <li>
                                                <p class="c">
                                                    <span class="c-title">阶段</span>
                                                    <select name="" v-model="sign_info.stage_id" @change="change_hours" class="itemOne">
                                                        <option value="">请选择</option>
                                                        <option v-for="(item,index) in jieduan" :value="parseInt(item.stage_id)">{{item.stage_name}}</option>
                                                    </select>
                                                </p>
                                            </li> -->
                                            <li>
                                                <p class="c">
                                                    <span class="c-title">总 课 时</span> <span
                                                        class="c-content totalClassHour1">{{sign_info.total_hours}}</span>
                                                </p>
                                            </li>
                                        </div>
                                    </ul>
                                </div>
                                <div>
                                    <div class="main-content materialsInfo none" style="display: none">
                                        <div class="m-title">
                                            <h2 class="h6">代报考</h2>
                                        </div>
                                        <div class="m-diy space">
                                            <p class="m-tools">
                                                <span>是否代报考 <i id="dbk" class="iconfont"></i></span> <span>资料是否齐全
                                                    <i id="zlqq" class="iconfont"></i>
                                                </span>
                                            </p>
                                            <div class="m-content materials" style="cursor: pointer;">
                                                <div class="m-c-top clear">
                                                    <p class="m-c-title">资料交接</p>
                                                    <div class="m-c-c">
                                                        <p class="m-c-c-t" id="materials">
                                                            <span class="m-c-c-tt">已交资料</span> <span class="m-c-c-c">
                                                                <em>一寸<i code="EM_INCH1" txt="一寸">0</i></em> <em>二寸<i
                                                                        code="EM_INCH2" txt="二寸">0</i></em> <em>身份证<i
                                                                        code="EM_IDCARD" txt="身份证">0</i></em> <em>学历证<i
                                                                        code="EM_EDUCATION" txt="学历证">0</i></em>
                                                                <em>学位证<i code="EM_DEGREE" txt="学位证">0</i></em>
                                                                <em>证明材料<i code="EM_PROVE" txt="证明材料">0</i></em>
                                                                <em>其他<i id="EM_OTHER" txt="其他">0</i></em>
                                                            </span>
                                                        </p>
                                                        <!-- <p class="m-c-c-t" id="unmaterials">
                                                <span class="m-c-c-tt">未交资料</span> <span class="m-c-c-c">
                                                    <em>一寸<i code="EM_INCH1" txt="一寸">0</i></em> <em>二寸<i code="EM_INCH2" txt="二寸">0</i></em> <em>身份证<i code="EM_IDCARD" txt="身份证">0</i></em> <em>学历证<i code="EM_EDUCATION" txt="学历证">0</i></em>
                                                    <em>学位证<i code="EM_DEGREE" txt="学位证">0</i></em> <em>证明材料<i code="EM_PROVE" txt="证明材料">0</i></em> <em>其他<i id="EM_OTHER" txt="其他">0</i></em>
                                                </span>
                                            </p> -->
                                                    </div>
                                                </div>
                                                <div class="m-c-bottom clear">
                                                    <p class="m-c-title">考务备注</p>
                                                    <p class="m-c-c">
                                                        <textarea name="" id="materialMark"
                                                            placeholder="输入你的备注信息"></textarea>
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="main-content">
                                    <div class="m-title">
                                        <h2 class="h6">应缴费用</h2>
                                    </div>
                                    <ul class="list-infos clear">
                                        <li>
                                            <p class="c">
                                                <span class="c-title">培训费用</span> <span
                                                    class="c-content trainingFee">{{total_price}}</span>
                                            </p>
                                        </li>
                                        <li>
                                            <p class="c">
                                                <span class="c-title">总价</span> <span
                                                    class="c-content totalAmount">{{total_price}}</span>
                                            </p>
                                        </li>
                                    </ul>
                                </div>
                                <div>
                                    <div class="main-content payInfo">
                                        <div class="m-title">
                                            <h2 class="h6">缴费</h2>
                                            <span class="more" style="display:none;">

                                                <b style="color:red;">欠缴</b>
                                                <b class="needPay" style="color:red;">0.00</b>
                                            </span>
                                        </div>
                                        <div class="pay-list clear">
                                            <!-- 
                                <div class="pay-order">
                                    <span><input type="radio" name="payType" value="ALL" checked> 全款</span> 
                                     
                                </div>
                             -->
                                            <div class="pay-list-left">
                                                <p>本期</p>
                                            </div>
                                            <div class="pay-list-right">
                                                <p class="c">
                                                    <span class="p-title">POS：</span> <span class="p-content">￥
                                                        <input id="pos" class="money" v-model="sign_info.pos" type="text" placeholder="输入金额">
                                                    </span>
                                                </p>
                                                <p class="c">
                                                    <span class="p-title">现金：</span> <span class="p-content">￥
                                                        <input id="cash" class="money" v-model="sign_info.cash" type="text" placeholder="输入金额">
                                                    </span>
                                                </p>
                                                <p class="c">
                                                    <span class="p-title">支票：</span> <span class="p-content">￥
                                                        <input id="cheque" class="money" v-model="sign_info.b_check" type="text" placeholder="输入金额">
                                                    </span>
                                                </p>
                                                <p class="c">
                                                    <span class="p-title">转账：</span> <span class="p-content">￥
                                                        <input id="remit" class="money" v-model="sign_info.transfer_accounts" type="text" placeholder="输入金额">
                                                    </span>
                                                </p>
                                            </div>
                                        </div>
                                        <!-- 这里是分期显示的地方 -->
                                        <div class="stageInfo"></div>
                                        <div class="m-bo text-center">
                                            <p class="c">
                                                <span class="p-title">&nbsp;</span> <span class="p-content">
                                                    <!-- <a href="javascript:;" class="btn btn-sm btn-default cancle">返回</a> -->
                                                    <a href="javascript:;"
                                                        class="btn btn-sm btn-primary nextstep" @click="submit_money">确定</a>
                                                </span>
                                            </p>
                                        </div>
                                    </div>
                                    <div>

                                        <!-- 
                        <div class="main-content">
                                <div class="m-content">
                                <p class="c text-center">
                                    <span class="c-title">&nbsp;</span> <span class="c-content">
                                        <a href="javascript:;" class="btn btn-sm btn-default prevstep">上一步</a> 
                                        <a href="javascript:;" class="btn btn-sm btn-default cancle">取消</a> <a
                                        href="javascript:;" class="btn btn-sm btn-primary nextstep">下一步</a>
                                    </span>
                                </p>
                            </div>
                        </div>  -->
                                    </div>
                                </div>
                            </div>
                            <!-- 
                    <div class="mainbackground fl step3" style="width:25%;">
                        <div class="heading">
                            <h2 class="h5">缴费</h2>
                            <div class="user-infos">
                                <span class="user_name"></span> <span class="user_mobile"></span> <span class="user_classType"></span>
                            </div>
                            <span class="line"></span>
                        </div>
                
                        <div class="main-content">
                            <div class="m-title">
                                <h2 class="h6">应缴费用</h2>
                            </div>
                            <ul class="list-infos clear">
                                <li>
                                    <p class='c'>
                                        <span class="c-title">培训费用</span> <span class="c-content trainingFee"></span>
                                    </p>
                                </li>
                                <li class="agentFeeInput none">
                                    <p class='c'>
                                        <span class="c-title">代报考</span> <span class="c-content"> <input
                                            type="text" class="agentFee" value="">
                                        </span>
                                    </p>
                                </li>
                                <li>
                                    <p class='c'>
                                        <span class="c-title">订单总价</span> <span class="c-content totalAmount"></span>
                                    </p>
                                </li>
                            </ul>
                        </div>
                        <div class="main-content payInfo">
                            <div class="m-title">
                                <h2 class="h6">缴费</h2>
                                <span class="more">
                                        
                                       <b style="color:red;">欠缴</b>
                                       <b class="needPay" style="color:red;"></b>
                               </span>
                            </div>
                            <div class="pay-list clear">
                                <div class="pay-order">
                                    <span><input type="radio" name="payType" value="ALL" checked> 全款</span> 
                                     
                                </div>
                                <div class="pay-list-left">
                                    <p>本期</p>
                                </div>
                                <div class="pay-list-right">
                                    <p class="c">
                                        <span class="p-title">POS：</span> <span class="p-content">￥
                                            <input id="pos" class="money" type="text" placeholder="输入金额">
                                        </span>
                                    </p>
                                    <p class="c">
                                        <span class="p-title">现金：</span> <span class="p-content">￥
                                            <input id="cash" class="money" type="text" placeholder="输入金额">
                                        </span>
                                    </p>
                                    <p class="c">
                                        <span class="p-title">支票：</span> <span class="p-content">￥
                                            <input id="cheque" class="money" type="text" placeholder="输入金额">
                                        </span>
                                    </p>
                                    <p class="c">
                                        <span class="p-title">转账：</span> <span class="p-content">￥
                                            <input id="remit" class="money" type="text" placeholder="输入金额">
                                        </span>
                                    </p>
                                </div>
                            </div>  -->
                            <!-- 这里是分期显示的地方 -->
                            <!-- 
                            <div class="stageInfo"></div>
                            <div class="m-bo text-center">
                                <p class="c">
                                    <span class="p-title">&nbsp;</span> <span class="p-content">
                                        <a href="javascript:;" class="btn btn-sm btn-default prevstep">上一步</a> 
                                        <a href="javascript:;" class="btn btn-sm btn-default cancle">返回</a>
                                        <a href="javascript:;" class="btn btn-sm btn-primary nextstep">确定</a> 
                                    </span>
                                </p>
                            </div>
                        </div>
                    </div>  -->
                        </div>
                    </div>
                </div>
            </div>

        </div> <!-- end container -->
    </div>
    <!-- end wrapper -->


    <!-- Footer -->
    <footer class="footer">
        <div class="container-fluid">
            <div class="row">
                <div class="col-12 text-center">
                    2019 © 火种教育
                </div>
            </div>
        </div>
    </footer>
    <!-- End Footer -->


    <!-- /Right-bar -->


    <!-- jQuery  -->
    <script src="assets/libs/jquery/jquery.min.js"></script>
    <script src="assets/js/jquery-1.11.3.min.js"></script>
    <script src="assets/libs/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/libs/jquery-slimscroll/jquery.slimscroll.min.js"></script>
    <script src="assets/libs/datatables.net/js/jquery.dataTables.min.js"></script>
    <script src="assets/libs/datatables.net-bs4/js/dataTables.bootstrap4.min.js"></script>
    <script src="assets/libs/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
    <script src="assets/libs/datatables.net-responsive-bs4/js/responsive.bootstrap4.min.js"></script>
    <script src="assets/libs/datatables.net-buttons/js/dataTables.buttons.min.js" type="text/javascript"></script>
    <script src="assets/libs/datatables.net-buttons/js/buttons.html5.min.js" type="text/javascript"></script>
    <script src="assets/libs/datatables.net-buttons/js/buttons.flash.min.js" type="text/javascript"></script>
    <script src="assets/libs/datatables.net-buttons/js/buttons.print.min.js" type="text/javascript"></script>
    <script src="assets/libs/datatables.net-buttons/js/buttons.colVis.min.js" type="text/javascript"></script>
    <script src="assets/libs/datatables.net-buttons-bs4/js/buttons.bootstrap4.min.js" type="text/javascript"></script>
    <script src="assets/libs/datatables.net-keytable/js/dataTables.keyTable.min.js"></script>
    <script src="assets/libs/datatables.net-select/js/dataTables.select.min.js"></script>
    <script src="assets/js/jquery.core.js"></script>
    <script src="assets/js/jquery.app.js"></script>
    <script src="assets/js/vue.min.js"></script>
    <script src="assets/js/element-ui.js"></script>
    <script>
        function downloadTemplate() {
            var url = './assets/images/学员导入模版.xls';
            window.open(url);
        }
        new Vue({
            el: '#app',
            data() {
                return {
                    currentPage: 1, //初始页
                    activeIndexa: 0,
                    activeIndexb: 0,
                    activeIndexc: 0,
                    pagesize: 10, //    每页的数据
                    model: 0,
                    value1: '',
                    value2: '',
                    projects: [],
                    kemus:[],
                    kcs:[],
                    kcb:[],
                    selected_shouke:'',
                    jieduan:[],
                    total_price:'',
                    total_hours:'',
                    selected_shouke:'',
                    sign_info: {
                                            "stu_ids":'',
                        "course_id":'',
                        // "agreement_status":1,协议签署状态
                        "access_way":"获取课程",
                        "product_type": "课程",
                        "order_status":"已支付",
                        "branch_school_id":1,
                        "order_resource":"线下",
                        "project_id":1,
                        "course_package_id":1,
                        "subject_id":'',
                        'stage_id':'',
                        'total_hours':'2',
                        "pos":0,
                        "cash":0,
                        "b_check":0,
                        "transfer_accounts":0,
                        "budget_way":"线下",
                        "budget_status":0,
                        "refund_payment_money":'',
                    }
                }
            },
            created() {
                let _this = this
                $(document).ready(function(){              $("#topnav").load("header.html");              }); 
                $.ajax({
                    url: 'http://192.168.10.166:8080/pse/queryAllProjectInfo',
                    type: 'get',
                    // contentType: 'application/json',
                    // data: JSON.stringify(_this.stu),
                    dataType: 'json',
                    success: function (data) {
                        console.log(data)
                        _this.projects = data
                        _this.inita()
                        // _this.userList = data
                        // for (let i = 0; i < _this.userList.length; i++) {
                        //     _this.userList[i].fontdesk_account_status = _this.userList[i]
                        //         .fontdesk_account_status == 1 ? '启用' : '禁用'
                        //     _this.userList[i].enrollment_status = _this.userList[i]
                        //         .enrollment_status == 1 ? '已报名' : '未报名'
                        // }
                    },
                    error: function () {

                    }
                })
            },
            methods: {
                active() {
                    this.activeIndexb = 2
                    console.log(1)
                    let _this = this
                    $.ajax({
                        url: './cn.json',
                        type: 'get',
                        // data:'',
                        dataType: 'json',
                        success: function (data) {
                            console.log(1)
                            _this.userList = data
                            // _this.userList = []

                        },
                        error: function () {

                        }
                    })
                },
                selected(){
                    console.log(this.sign_info.course_id)
                    for (let i = 0; i < this.kcs.length; i++) {
                        if(this.sign_info.course_id == this.kcs[i].course_id){
                            this.selected_shouke = this.kcs[i].course_type
                            this.sign_info.total_hours = this.kcs[i].total_hours
                            this.total_price = this.kcs[i].price
                            if(this.kcs[i].agreement_id != '' &&this.kcs[i].agreement_id != null){
                                this.sign_info.agreement_status = 0
                            }else{
                                this.sign_info.agreement_status = 1
                            }
                        }
                        
                    }
                },
                change_hours(){
                    for (let i = 0; i < this.kcb.length; i++) {
                        if(this.sign_info.course_package_id == this.kcb[i].course_package_id){
                            this.sign_info.total_hours = this.kcb[i].total_hours
                            this.total_price = this.kcb[i].favorable_price
                        }
                        
                    }
                },
                submit_money(){
                    _this = this
                    _this.sign_info.refund_payment_money = parseInt(_this.sign_info.pos)+parseInt(_this.sign_info.cash)+parseInt(_this.sign_info.b_check)+parseInt(_this.sign_info.transfer_accounts)
                    _this.sign_info.stu_ids = JSON.parse(localStorage.stu_id)
                    if(_this.sign_info.product_type == "课程"){
                        _this.sign_info.access_way = "获取课程"
                        obj = JSON.parse(JSON.stringify(_this.sign_info))
                        delete obj.course_package_id
                        delete obj.stage_id
                        $.ajax({
                            url: 'http://192.168.10.166:8080/student/plStudentEnrollCourse',
                            type: 'post',
                            contentType: 'application/json',
                            data: JSON.stringify(obj),
                            dataType: 'json',
                            success: function (data) {
                                if(data.code == '200'){
                                    _this.$message.success({
                                    type:"提示",
                                    message:"添加成功"
                                })
                                }else{
                                    _this.$message.error({
                                    type:"提示",
                                    message:"添加失败,有学员已报名该课程"
                                }) 
                                }
                                // _this.userList = data
                                // for (let i = 0; i < _this.userList.length; i++) {
                                //     _this.userList[i].fontdesk_account_status = _this.userList[i]
                                //         .fontdesk_account_status == 1 ? '启用' : '禁用'
                                //     _this.userList[i].enrollment_status = _this.userList[i]
                                //         .enrollment_status == 1 ? '已报名' : '未报名'
                                // }
                            },
                            error: function () {

                            }
                        })
                    }else if(_this.sign_info.product_type == "课程包"){
                        _this.sign_info.access_way = "获取课程包"
                        obj = JSON.parse(JSON.stringify(_this.sign_info))
                        delete obj.subject_id
                        delete obj.course_id
                        delete obj.stage_id
                        $.ajax({
                            url: 'http://192.168.10.166:8080/student/plStudentEnrollCoursePackage',
                            type: 'post',
                            contentType: 'application/json',
                            data: JSON.stringify(obj),
                            dataType: 'json',
                            success: function (data) {
                                console.log(data)
                                if(data.message == 'success'){
                                    _this.$message.success({
                                    type:"提示",
                                    message:"添加成功"
                                })
                                }else{
                                    _this.$message.error({
                                    type:"提示",
                                    message:"添加失败"
                                }) 
                                }
                                
                                // _this.userList = data
                                // for (let i = 0; i < _this.userList.length; i++) {
                                //     _this.userList[i].fontdesk_account_status = _this.userList[i]
                                //         .fontdesk_account_status == 1 ? '启用' : '禁用'
                                //     _this.userList[i].enrollment_status = _this.userList[i]
                                //         .enrollment_status == 1 ? '已报名' : '未报名'
                                // }
                            },
                            error: function () {

                            }
                        })
                    }
                    console.log(obj)
                },
                activea(num) {
                    this.activeIndexa = num
                    this.init()
                    let _this = this
                    $.ajax({
                        url: './cn.json',
                        type: 'get',
                        // data:'',
                        dataType: 'json',
                        success: function (data) {
                            console.log(1)
                            _this.userList = data
                            _this.userList1 = data
                        },
                        error: function () {

                        }
                    })
                },
                init() {
                    this.activeIndexb = 0;
                    this.activeIndexc = 0;
                },
                handleSizeChange: function (size) {
                    this.pagesize = size;
                },
                handleCurrentChange: function (currentPage) {
                    this.currentPage = currentPage;
                },
                flexColumnWidth() {
                    return $('.el-table__header-wrapper').width() / 100 * 25
                },
                flexColumnWidthc() {
                    return $('.el-table__header-wrapper').width() / 100 * 3
                },
                flexColumnWidthd() {
                    return $('.el-table__header-wrapper').width() / 3
                },
                flexColumnWidthe() {
                    return $('.el-table__header-wrapper').width() / 6
                },
                flexColumnWidthf() {
                    return $('.el-table__header-wrapper').width() / 9
                },
                searchClass() {
                    _this = this
                    // obj = {};
                    // if(this.activeIndexb != ""){
                    //     obj.subject_id = _this.activeIndexb
                    // }
                    // if(this.activeIndexb != ""){
                    //     obj.subject_id = _this.activeIndexb
                    // }
                    // if(this.activeIndexb != ""){
                    //     obj.subject_id = _this.activeIndexb
                    // }
                    $.ajax({
                        url: 'http://192.168.10.166:8080/course/selectCourseByProjectAndSubject',
                        type: 'get',
                        // contentType: 'application/json',
                        data: {
                            project_id: _this.sign_info.project_id,
                            subject_id: _this.sign_info.subject_id
                        },
                        dataType: 'json',
                        success: function (data) {
                            console.log(data)
                            _this.kcs = data
                            for (let k = 0; k < _this.kcs.length; k++) {
                                _this.kcs[k].mouse_status = 'false'
                            }
                            _this.sign_info.course_id = ''
                            _this.sign_info.course_type = ""
                            // _this.activeIndexb = _this.kemus[0].pse_id
                            // _this.userList = data
                            // for (let i = 0; i < _this.userList.length; i++) {
                            //     _this.userList[i].fontdesk_account_status = _this.userList[i]
                            //         .fontdesk_account_status == 1 ? '启用' : '禁用'
                            //     _this.userList[i].enrollment_status = _this.userList[i]
                            //         .enrollment_status == 1 ? '已报名' : '未报名'
                            // }
                        },
                        error: function () {

                        }
                    })
                },
                searchJieduan(){
                    $.ajax({
                        url: 'http://192.168.10.166:8080/coursePackage/selectStageByCoursePackageId',
                        type: 'get',
                        // contentType: 'application/json',
                        data: {
                            course_package_id: _this.sign_info.course_package_id
                        },
                        dataType: 'json',
                        success: function (data) {
                            console.log(data)
                            _this.jieduan = data
                        },
                        error: function () {

                        }
                    })
                },
                inita() {
                    _this = this
                    if(this.sign_info.product_type == '课程'){
                        $.ajax({
                            url: 'http://192.168.10.166:8080/pse/selectSubjectByProject',
                            type: 'get',
                            // contentType: 'application/json',
                            data: {
                                project_id: _this.sign_info.project_id
                            },
                            dataType: 'json',
                            success: function (data) {
                                console.log(data)
                                _this.sign_info.subject_id = ""
                                _this.kemus = data
                                // _this.activeIndexb = _this.kemus[0].pse_id
                                // _this.userList = data
                                // for (let i = 0; i < _this.userList.length; i++) {
                                //     _this.userList[i].fontdesk_account_status = _this.userList[i]
                                //         .fontdesk_account_status == 1 ? '启用' : '禁用'
                                //     _this.userList[i].enrollment_status = _this.userList[i]
                                //         .enrollment_status == 1 ? '已报名' : '未报名'
                                // }
                            },
                            error: function () {

                            }
                        })
                    }else if(this.sign_info.product_type == '课程包'){
                        $.ajax({
                            url: 'http://192.168.10.166:8080/coursePackage/selectCourserPackageByProject',
                            type: 'get',
                            // contentType: 'application/json',
                            data: {
                                project_id: _this.sign_info.project_id
                            },
                            dataType: 'json',
                            success: function (data) {
                                console.log(data)
                                _this.kcb = data
                                _this.change_hours()
                                // _this.activeIndexb = _this.kemus[0].pse_id
                                // _this.userList = data
                                // for (let i = 0; i < _this.userList.length; i++) {
                                //     _this.userList[i].fontdesk_account_status = _this.userList[i]
                                //         .fontdesk_account_status == 1 ? '启用' : '禁用'
                                //     _this.userList[i].enrollment_status = _this.userList[i]
                                //         .enrollment_status == 1 ? '已报名' : '未报名'
                                // }
                            },
                            error: function () {

                            }
                        })
                    }
                    
                },
                dangan(scope) {
                    console.log(scope)
                }
            }
        })
    </script>

</body>

</html>