<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>火种教育</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta content="A fully featured admin theme which can be used to build CRM, CMS, etc." name="description" />
    <meta content="Coderthemes" name="author" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- App favicon -->
    <link rel="shortcut icon" href="assets/images/favicon.ico">
    <link rel="stylesheet" href="assets/css/element-ui.css">
    <link href="assets/libs/@mdi/font/css/materialdesignicons.min.css" rel="stylesheet" type="text/css" />
    <link href="assets/libs/dripicons/webfont/webfont.css" rel="stylesheet" type="text/css" />
    <link href="assets/libs/simple-line-icons/css/simple-line-icons.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/app.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/studentArchive.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/fatstyle.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/student.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="./assets/css/manger.css">
    <link href="assets/css/index.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="./kindeditor/themes/default/default.css" />
    <link rel="stylesheet" href="./kindeditor/plugins/code/prettify.css" />
    <style>
        body {
            color: black;
        }

        .wrapper {
            padding-top: 60px;
        }

        .navbar-custom .nav-link {
            padding: 0;
            line-height: 60px;
            color: rgba(255, 255, 255, 0.8);
        }

        .el-input__icon {
            line-height: 30px;
        }

        .el-message-box {
            width: 80%
        }

        .form-control-sm {
            padding: 0.375rem 0.75rem;
            font-size: 0.875rem;
            line-height: 1.5;
        }

        .navbar-custom {
            border-radius: 0;
            min-height: 60px;
            color: #fff;
            z-index: 2;
        }

        select.form-control:not([size]):not([multiple]) {
            height: auto;
        }

        @media (min-width: 992px) {
            #topnav .topbar-menu {
                padding-bottom: 0;
            }
        }

        /* .el-pagination {
            white-space: nowrap;
            padding: 2px 5px;
            color: #303133;
            overflow: auto;
            font-weight: 700;
        } */

        .el-table td,
        .el-table th {
            text-align: center;
            padding: .2rem 0;
        }

        .el-pagination {
            text-align: center;
            margin: .2rem 0;
        }
    </style>
</head>

<body>

    <!-- Navigation Bar-->
    <header id="topnav">      </header>
    <!-- End Navigation Bar-->


    <div class="wrapper" id="app">
        <div class="container-fluid" style="margin-bottom: 60px">

            <!-- Page title box -->
            <div class="page-title-box" style="    margin-right: -15px;
            margin-left: -15px;">

                <div class="page-title"><i class=" mdi mdi-account"></i> 学员
                    <ul class="row page-ul">
                        <li onclick="window.location.href='index.html'">学员管理</li>
                        <li style="color: #fa6900;
                        border-bottom: 2px solid #fa6900;" onclick="window.location.href='studentNotice.html'">学员通知
                        </li>
                    </ul>
                </div>

            </div>
            <!-- End page title box -->
            <div class="row student ">
                <div class="mainbackground" style="width:100%">
                    <div class="heading">
                        <h2 class="h5">新建学员通知</h2>
                        <span class="line"></span>
                    </div>
                    <div class="main-content">
                        <div class="notice-main" style="width: 840px;">
                            <p class="c">
                                <span class="c-title">通知标题：</span> <span class="c-content long">
                                    <input type="text" id="title" v-model="Add_notice.notice_title" maxlength="15">
                                </span>
                                <span style="color:red;">* 最多15个字</span>
                            </p>
                            <p class="c">
                                <span class="c-title">通知方式：</span> <span class="c-content font-style">
                                    <a href="javascript:;" @click="activea(0)"
                                        :class="activeIndexa == 0?'btn btn-mini btn-method btn-primary':'btn btn-mini btn-method btn-default'"
                                        data-type="STUDENT_MESSAGE_MOBILE">短信通知</a> <a @click="activea(1)"
                                        href="javascript:;"
                                        :class="activeIndexa == 1?'btn btn-mini btn-method btn-primary':'btn btn-mini btn-method btn-default'"
                                        data-type="STUDENT_MESSAGE_WEB">站内信通知</a> <a @click="activea(2)"
                                        href="javascript:;"
                                        :class="activeIndexa == 2?'btn btn-mini btn-method btn-primary':'btn btn-mini btn-method btn-default'"
                                        data-type="STUDENT_MESSAGE_EMAIL">邮件通知</a>
                                </span>
                            </p>
                            <p class="c">
                                <span class="c-title">通知类型：</span> <span class="c-content font-style">
                                    <a href="javascript:;" @click="activeb(0)"
                                        :class="activeIndexb == 0?'btn btn-mini btn-method btn-primary':'btn btn-mini btn-method btn-default'"
                                        data-type="STUDENT_MESSAGE_CLASSTYPE">课程通知</a>

                                    <a href="javascript:;" @click="activeb(2)"
                                        :class="activeIndexb == 2?'btn btn-mini btn-method btn-primary':'btn btn-mini btn-method btn-default'"
                                        data-type="STUDENT_MESSAGE_SPECIAL">指定通知</a>


                                    <a href="javascript:;" @click="activeb(4)"
                                        :class="activeIndexb == 4?'btn btn-mini btn-method btn-primary':'btn btn-mini btn-method btn-default'"
                                        data-type="STUDENT_MESSAGE_CLASSPACKAGE">课程包通知</a>

                                    <a href="javascript:;" @click="activeb(5)"
                                        :class="activeIndexb == 5?'btn btn-mini btn-method btn-primary':'btn btn-mini btn-method btn-default'"
                                        data-type="STUDENT_MESSAGE_NOSIGN">未报名学员通知</a>
                                </span>
                            </p>


                            <!-- 课程包 -->
                            <div v-if="activeIndexb == 4">
                                <p class="c sendClassPackage">
                                    <span class="c-title" style="line-height: 31px;">项目：</span>
                                    <span class="c-content"> <select id="one" @change="kcb_changeKemu" v-model="kcb.project_id">
                                            <option v-for="(item,index) in projects" :value="parseInt(item.pse_id)">{{item.pse_name}}</option>
                                        </select>
                                    </span>
                                </p>
                                <p class="c sendClassPackage">
                                    <span class="c-title" id="packageTitle" style="line-height: 31px;">课程包：</span>
                                    <span class="c-content"> 
                                            <select id="two" v-model="kcb.course_package_id"  @change="kcb_changeKecheng">
                                                    <option v-for="(item,index) in kcb_kemus" :value="parseInt(item.course_package_id)">{{item.cp_name}}</option>
                                            </select>
                                    </span>
                                    &nbsp;&nbsp;&nbsp;&nbsp;
                                    <span class="c-title" style="line-height: 31px;">阶段：</span>
                                    <span class="c-content"> 
                                            <select id="two" v-model="kcb.stage_id" @change="kc_give_num">
                                                    <option value="">全部阶段</option>
                                                    <option v-for="(item,index) in kcb_kechengs" :value="parseInt(item.stage_id)">{{item.stage_name}}</option>
                                            </select>
                                    </span>

                                </p>
                                <p class="c sendClassPackage">
                                    <span class="c-title">学员数量：</span>
                                    <span id="num" v-html="kcb_nums">0</span>人&nbsp;&nbsp;&nbsp;&nbsp;
                                    <span class="c-title">发送学员：</span>
                                    <!-- <span class="c-content" id="sendCount" v-html="kcb_nums">0</span>人 -->
                                </p>
                            </div>


                            <!-- 课程 -->
                            <div v-if="activeIndexb == 0">
                                <p class="c sendStuMsg">
                                    <span class="c-title" style="line-height:31px">学科：</span> <span class="c-content">
                                        <select id="one" @change="changeKemu" v-model="kc.project_id">
                                            <option v-for="(item,index) in projects" :value="parseInt(item.pse_id)">{{item.pse_name}}</option>
                                        </select>
                                    </span> <span class="c-title" style="line-height:31px">学科小类：</span> <span
                                        class="c-content">
                                        <select id="two" v-model="kc.subject_id"  @change="changeKecheng">
                                                <option v-for="(item,index) in kemus" :value="parseInt(item.pse_id)">{{item.pse_name}}</option>
                                        </select>
                                    </span>
                                </p>
                                <p class="c sendStuMsg">
                                    <span class="c-title" style="line-height:31px" id="classTitle">课程：</span> <span
                                        class="c-content" style="    margin-right: 24px;">
                                        <select id="two" v-model="kc.course_id" @change="kc_give_num">
                                                <option v-for="(item,index) in kechengs" :value="parseInt(item.course_id)">{{item.course_name}}</option>
                                        </select>
                                    </span>
                                    
                                    <span class="c-title include" style="width: 20px">
                                        <input type="checkbox" v-model="kc.checked" @change="chenge_num()" style="zoom:130%;margin-top: 6px" name="include">
                                    </span>
                                    <span class="include"
                                        style="color: rgb(153, 153, 153)">同时发送给报名包含此课程的课程包的学员</span>

                                </p>
                                <p class="c sendStuMsg">
                                    <span class="c-title">学员数量：</span> <span class="c-content btn-view" v-html="kc_nums">0人</span>
                                    <span class="c-title" style="margin-left: 30px;">发送学员：</span> <span
                                        class="c-content" id="sendStu" v-html="kc_nums">0</span>人
                                </p>
                            </div>




                            <!-- 指定通知 -->
                            <div v-if="activeIndexb == 2">
                                <p class="c phoneHint">
                                    <span class="c-title" style="width: 100px">输入手机号<span class="hintUsername"
                                            style="display: none">/用户名</span>：</span><span class="c-content l-content">
                                        <textarea class="msg-content" id="phone"
                                            onkeyup="javascript:valida();"></textarea>
                                    </span>
                                </p>
                                <p class="c phoneHint">
                                    <span
                                        class="c-title">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                                    <span class="c-content"><span style="color: red; float: right;">手机号<span
                                                class="hintUsername"
                                                style="display: none">/用户名</span>之间用英文的逗号【,】分隔开</span></span>
                                </p>
                                <p class="c emailHint" style="display:none;">
                                    <span class="c-title">输入邮箱：</span><br> <span class="c-content l-content"> <textarea
                                            class="msg-content" id="email" onkeyup="javascript:valida();"></textarea>
                                    </span>
                                </p>
                                <p class="c emailHint" style="display:none;">
                                    <span
                                        class="c-title">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                                    <span class="c-content"><span
                                            style="color: red; float: right;">邮箱之间用英文的逗号【,】分隔开</span></span>
                                </p>
                            </div>

                            <!-- 未报名学员 -->
                            <div v-if="activeIndexb == 5">
                                <p class="c stuGroup">
                                    <span class="c-title">学员数量：</span> <span class="c-content"
                                        id="groupStuCount"  v-html="wbm_nums">2745人</span>
                                    <span class="c-title">发送学员：</span> <span class="c-content"
                                        id="_sendStu"   v-html="wbm_nums">2745</span>人
                                </p>

                            </div>
                            <p class="c emailTitle" v-if="activeIndexa == 2">
                                    <span class="c-title" style="line-height: 36px;">邮件标题：</span> <input id="email_title" type="text" v-model="notice.email_title" maxlength="120">
                                    <span style="color:red;">* 最多120个字</span>
                                </p>
                            <!-- 发送内容 -->
                            <p class="c" style="float:left" v-show="activeIndexa != 0">
                                <span class="c-title">发送内容：</span>
                               <div style="margin-left: 100px; width: 70%;" v-show="activeIndexa != 0">
                                        <textarea id="editor_id" name="content" style="width:100%;height:300px;">
                                            </textarea>
                                </div>
                            </p>
                            <p class="c" style="float:left" v-show="activeIndexa == 0">
                                <span class="c-title">发送内容：</span>
                                <div style="margin-left: 100px; width: 70%;" v-show="activeIndexa == 0">
                                    <textarea style="width:100%;height:300px;" v-model="notice.notice_content">
                                    </textarea>
                                </div>
                            </p>
                            <p></p>
                            <!-- 发送条数 -->
                            <!-- <p class="c zhan">
                                <span class="c-title">消耗短信：</span>
                                <span class="c-content">
                                    <span id="useMsg">0条</span>
                                    <em style="font-size: inherit;color: #999;padding-right:20px;padding-left:20px;">
                                        剩余短信：<span id="Surplus">2316条</span>
                                    </em>
                                    <span style="color: #999; float: right;">
                                        已输入<span id="write" style="color: red">0</span>个字符，剩余可输入 <span
                                            style="color: red" id="hasCounts">494</span> 字符
                                    </span>
                                </span>&nbsp;<br>
                                <span style="color: #999">
                                    计费规则：<span>1、汉字、数字、英文、空格和标点符号都代表一个字符。</span>
                                    <span style="margin-left: 70px">2、手机短信一条为70个字符，内容超过70字符，按照长短信处理，长短信为每条67个字符。</span>
                                    <span style="margin-left: 70px">3、短信内容实际字符数=短信签名字符数(默认6个字符)+短信内容字符数。</span>
                                    <span style="margin-left: 70px">4、单次短信通知内容上限为500字符。</span>
                                </span>
                                <span class="c-content" style="color: red">
                                    备注:短信内容中添加【】符号，易造成短信内容发送不成功。
                                </span>
                                <span class="c-content" style="color: red">
                                    提示:不要包含有微信群，qq群组的信息，也不要包含有微信公众号的链接或者无法打开的链接，否则会因为涉及营销性质而导致短信无法发送。
                                </span>
                            </p>
                            <p class="c use_email" style="display:none;">
                                <span class="c-title">消耗邮件：</span> <span class="c-content"><span
                                        id="useEmailMsg">0</span> <em
                                        style="font-size: inherit;color: #999;padding-right:20px;padding-left:20px;">剩余邮件：<span
                                            id="hasEmail">3001</span></em></span>
                            </p>
                            <p class="c">
                                <input type="text" id="checkcode" name="checkcode" value="" placeholder="图形验证码"
                                    class="code input-sm" maxlength="6">
                                <span class="codeimg" id="codeimg"><img
                                        src="http://manage.yunduoketang.com/captcha?refesh=Thu%20Jul%2018%202019%2015:32:18%20GMT+0800%20(%E4%B8%AD%E5%9B%BD%E6%A0%87%E5%87%86%E6%97%B6%E9%97%B4)"
                                        height="28" width="64" alt="点击刷新验证码" onclick="Form.refreshCaptcha()"></span><img
                                    class="iconfont rf" id="refeshcodeimg"
                                    src="http://manage.yunduoketang.com/images/refresh.png"
                                    style="height: 28px; margin-left: 6px;">
                            </p> -->

                            <p class="text-center" style="margin-top:20px">
                                <a @click="submit_notice" href="javascript:;" class="btn btn-sm btn-primary btn-send">发送通知</a>
                                <a @click="bgun" href="javascript:;" class="btn btn-sm btn-primary btn-send">发送</a>
                            </p>
                        </div>
                    </div>
                </div>
            </div>

        </div> <!-- end container -->
    </div>
    <!-- end wrapper -->


    <!-- Footer -->
    <footer class="footer">
        <div class="container-fluid">
            <div class="row">
                <div class="col-12 text-center">
                    2019 © 火种教育
                </div>
            </div>
        </div>
    </footer>
    <!-- End Footer -->


    <!-- /Right-bar -->


    <!-- jQuery  -->
    <!-- <script src="assets/libs/jquery/jquery.min.js"></script> -->
    <script src="assets/js/jquery-1.11.3.min.js"></script>

    <script src="assets/libs/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/vue.min.js"></script>
    <script src="assets/js/element-ui.js"></script>
    <!-- <script src="assets/js/notice.js"></script> -->
    <script charset="utf-8" src="./kindeditor/kindeditor-all-min.js"></script>
    <script charset="utf-8" src="./kindeditor/lang/zh-CN.js"></script>
    <script charset="utf-8" src="./kindeditor/plugins/code/prettify.js"></script>
    <script type="text/javascript">
        
    </script>
    <script>
// KindEditor.ready(function(K) {
//                 window.editor = K.create('#editor_id');
//         });
        function downloadTemplate() {
            var url = './assets/images/学员导入模版.xls';
            window.open(url);
        }
        new Vue({
            el: '#app',
            data() {
                return {
                    currentPage: 1, //初始页
                    activeIndexa: 0,
                    activeIndexb: 0,
                    pagesize: 10, //    每页的数据
                    model: 0,
                    value1: '',
                    value2: '',
                    projects:[],
                    kemus:[],
                    kcb_kemus:[],
                    kc_nums:0,
                    kcb_nums:0,
                    wbm_nums:0,
                    kechengs:[],
                    kcb_kechengs:[],
                    Add_notice:{
        "notice_title": null, 
        "type_name": null,
        "notice_way": null,
        "user_id": parseInt(JSON.parse(localStorage.login_user_info).user_id),
        "notice_status":null,
        "notice_people_num": null,
        "notice_type": null,
        "project_id":null,
        "subject_id":null,
        "notice_content":null,
        "course_id":null,
        "email_tel":null,
        "course_package_id":null,
        "cp_stage":null,
        "email_title":null
},
notice:{
    email_title:'',
    notice_content:''
},
                    kc:{
                        project_id:'',
                        subject_id:'',
                        course_id:'',
                        checked:false
                    },
                    kcb:{
                        project_id:'',
                        course_package_id:'',
                        stage_id:''
                    }
                }
            },
            created() {
                let _this = this
                $(document).ready(function(){              $("#topnav").load("header.html");              }); 
                KindEditor.ready(function(K) {
                        window.editor = K.create('#editor_id');
                    });
               
                _this.initb()
            },
            methods: {
                activeb(num) {
                    this.activeIndexb = num
                    this.initb()
                },
                kc_give_num(){
                    _this=this
                    console.log(this.kc)
                    switch (_this.activeIndexb) {
                        case 0:
                        obj = {p_id:'',type:'',c_status:''}
                            obj.p_id = _this.kc.course_id
                            obj.type = "课程"
                            obj.c_status =  _this.kc.checked == true?1:0
                            $.ajax({
                            url: 'http://192.168.10.166:8080//student/studentNoticeOfStudentList',
                            type: 'post',
                            contentType: 'application/json',
                            data: JSON.stringify(obj),
                            dataType: 'json',
                            success: function (data) {
                                console.log(data)
                                _this.kc_nums = data.length
                                // _this.userList = data
                                // for (let i = 0; i < _this.userList.length; i++) {
                                //     _this.userList[i].fontdesk_account_status = _this.userList[i]
                                //         .fontdesk_account_status == 1 ? '启用' : '禁用'
                                //     _this.userList[i].enrollment_status = _this.userList[i]
                                //         .enrollment_status == 1 ? '已报名' : '未报名'
                                // }
                            },
                            error: function () {

                            }
                        })
                            break;
                            case 4:
                        obj = {}
                        if(_this.kcb.stage_id == ""){
                            obj.type = "课程包"
                            obj.p_id = _this.kcb.course_package_id
                        }else{
                            obj.type = "阶段"
                            obj.p_id = _this.kcb.stage_id
                        }
                            $.ajax({
                            url: 'http://192.168.10.166:8080//student/studentNoticeOfStudentList',
                            type: 'post',
                            contentType: 'application/json',
                            data: JSON.stringify(obj),
                            dataType: 'json',
                            success: function (data) {
                                console.log(data)
                                _this.kcb_nums = data.length
                                // _this.userList = data
                                // for (let i = 0; i < _this.userList.length; i++) {
                                //     _this.userList[i].fontdesk_account_status = _this.userList[i]
                                //         .fontdesk_account_status == 1 ? '启用' : '禁用'
                                //     _this.userList[i].enrollment_status = _this.userList[i]
                                //         .enrollment_status == 1 ? '已报名' : '未报名'
                                // }
                            },
                            error: function () {

                            }
                        })
                            break;
                            case 5:
                        // obj = {}
                        //     obj.p_id = _this.kc.course_id
                        //     obj.type = "课程"
                        //     obj.c_status =  _this.kc.checked == true?1:0
                            $.ajax({
                            url: 'http://192.168.10.166:8080/student/unEnrollStudentList',
                            type: 'post',
                            // contentType: 'application/json',
                            // data: JSON.stringify(obj),
                            dataType: 'json',
                            success: function (data) {
                                console.log(data)
                                
                                _this.wbm_nums = data.length
                                // _this.userList = data
                                // for (let i = 0; i < _this.userList.length; i++) {
                                //     _this.userList[i].fontdesk_account_status = _this.userList[i]
                                //         .fontdesk_account_status == 1 ? '启用' : '禁用'
                                //     _this.userList[i].enrollment_status = _this.userList[i]
                                //         .enrollment_status == 1 ? '已报名' : '未报名'
                                // }
                            },
                            error: function () {

                            }
                        })
                            break;
                        default:
                            break;
                    }
                },
                submit_notice(){
                    _this = this
                    if(this.Add_notice.notice_title == "" ||this.Add_notice.notice_title ==null  ){
                        _this.$message.info({
                                    type: 'info',
                                    message: '请填写通知标题',
                                    // position: 'bottom-left',
                                    duration: '2000'
                                });
                    }
                        this.Add_notice.user_id=1
                        this.Add_notice.notice_status=1
                    switch (this.activeIndexb) {
                        case 0:
                        if(this.kc.course_id == "" ||this.kc.course_id ==null  ){
                        _this.$message.info({
                                    type: 'info',
                                    message: '请选择课程',
                                    // position: 'bottom-left',
                                    duration: '2000'
                                });
                        }
                        for (let i = 0; i < this.kechengs.length; i++) {
                            if(this.kc.course_id == this.kechengs[i].course_id){
                                this.Add_notice.type_name=this.kechengs[i].course_name
                            }
                        }
                        
                        this.Add_notice.notice_people_num=_this.kc_nums
                        this.Add_notice.notice_type="课程通知"
                        this.Add_notice.project_id=_this.kc.project_id
                        this.Add_notice.subject_id=_this.kc.subject_id
                        this.Add_notice.course_id=_this.kc.course_id
                        this.Add_notice.email_tel=null
                        this.Add_notice.course_package_id=null
                        this.Add_notice.cp_stage=null
                            break;
                        case 1:
                            
                        this.Add_notice.type_name=null
                        this.Add_notice.notice_people_num=null
                        this.Add_notice.notice_type="指定通知"
                        this.Add_notice.project_id=null
                        this.Add_notice.subject_id=null
                        this.Add_notice.course_id=null
                        this.Add_notice.email_tel="13432323232"
                        this.Add_notice.course_package_id=null
                        this.Add_notice.cp_stage=null
                            break;
                        case 4:
                        if(this.kcb.stage_id != "" ){
                            for (let i = 0; i < this.kcb_kechengs.length; i++) {
                                if(this.kcb.stage_id == this.kcb_kechengs[i].stage_id){
                                    this.Add_notice.type_name=this.kcb_kechengs[i].stage_name
                                }
                            }
                        }else{
                        console.log(11222222)
                            for (let i = 0; i < this.kcb_kemus.length; i++) {
                                if(this.kcb.course_package_id == this.kcb_kemus[i].course_package_id){
                                    this.Add_notice.type_name=this.kcb_kemus[i].cp_name
                                }
                            }
                        }
                        this.Add_notice.notice_people_num=_this.kcb_nums
                        this.Add_notice.notice_type="课程包通知"
                        this.Add_notice.project_id=_this.kcb.project_id
                        this.Add_notice.subject_id=null
                        this.Add_notice.course_id=null
                        this.Add_notice.email_tel=null
                        this.Add_notice.course_package_id=_this.kcb.course_package_id
                        this.Add_notice.cp_stage=_this.kcb.stage_id
                            break;
                        case 5:
                        this.Add_notice.type_name=null
                        this.Add_notice.notice_people_num=_this.wbm_nums
                        this.Add_notice.notice_type="未报名学员通知"
                        this.Add_notice.project_id=null
                        this.Add_notice.subject_id=null
                        this.Add_notice.course_id=null
                        this.Add_notice.email_tel=null
                        this.Add_notice.course_package_id=null
                        this.Add_notice.cp_stage=null
                            break;
                        default:
                            break;
                    }
                    switch (this.activeIndexa) {
                        case 0:
                        this.Add_notice.notice_way="短信通知"
                        this.Add_notice.notice_content=this.notice.notice_content
                        this.Add_notice.email_title=null
                            break;
                            case 1:
                            this.Add_notice.notice_way="站内信通知"
                            html = editor.html();

                    // 同步数据后可以直接取得textarea的value
                    editor.sync();
                    html = document.getElementById('editor_id').value; // 原生API
                    // html = K('#editor_id').val(); // KindEditor Node API
                    html = $('#editor_id').val(); // jQuery
                    console.log(html)
                    console.log($('#editor_id'))
                        this.Add_notice.notice_content=html
                        this.Add_notice.email_title=null
                            break;
                            case 2:
                            this.Add_notice.notice_way="邮件通知"
                            html = editor.html();

// 同步数据后可以直接取得textarea的value
editor.sync();
html = document.getElementById('editor_id').value; // 原生API
// html = K('#editor_id').val(); // KindEditor Node API
html = $('#editor_id').val(); // jQuery
console.log(html)
console.log($('#editor_id'))
    this.Add_notice.notice_content=html
                        if(this.notice.email_title == ""){
                            _this.$message.info({
                                    type: 'info',
                                    message: '请输入邮件标题',
                                    // position: 'bottom-left',
                                    duration: '2000'
                                });
                                return
                        }else{

                            this.Add_notice.email_title=this.notice.email_title
                        }
                            break;
                        default:
                            break;
                    }
                    console.log(_this.Add_notice)
                    $.ajax({
                            url: 'http://192.168.10.166:8080/student/addStudentNotice',
                            type: 'post',
                            contentType: 'application/json',
                            data: JSON.stringify(_this.Add_notice),
                            dataType: 'json',
                            success: function (data) {
                                if(data.message == 'success'){
                                    
                                _this.$message.success({
                                    type: 'info',
                                    message: '新建成功',
                                    // position: 'bottom-left',
                                    duration: '2000'
                                });
                                }else{
                                    _this.$message.error({
                                    type: 'info',
                                    message: '新建失败',
                                    // position: 'bottom-left',
                                    duration: '2000'
                                });
                                }
                            },
                            error: function () {
                                _this.$message.error({
                                    type: 'info',
                                    message: '服务器错误',
                                    // position: 'bottom-left',
                                    duration: '2000'
                                });
                            }
                        })
                },
                changeKecheng(){
                    _this = this;
                        // _this.stu.exam_id = ''
                        $.ajax({
                        url: 'http://192.168.10.166:8080/course/selectCourseByProjectAndSubject',
                        type: 'get',
                        // contentType: 'application/json',
                        data: {project_id:_this.kc.project_id,subject_id:_this.kc.subject_id},
                        dataType: 'json',
                        success: function (data) {
                            console.log(data)
                            _this.kechengs = data
                            _this.kc.course_id = _this.kechengs[0].course_id
                            _this.kc_give_num()
                            // _this.userList = data
                            // for (let i = 0; i < _this.userList.length; i++) {
                            //     _this.userList[i].fontdesk_account_status = _this.userList[i]
                            //         .fontdesk_account_status == 1 ? '启用' : '禁用'
                            //     _this.userList[i].enrollment_status = _this.userList[i]
                            //         .enrollment_status == 1 ? '已报名' : '未报名'
                            // }
                        },
                        error: function () {

                        }
                    })
                },
                chenge_num(){
                    this.kc_give_num()
                },
                kcb_changeKecheng(){
                    _this = this;
                        // _this.stu.exam_id = ''
                        $.ajax({
                        url: 'http://192.168.10.166:8080/coursePackage/selectStageByCoursePackageId',
                        type: 'get',
                        // contentType: 'application/json',
                        data: {course_package_id:_this.kcb.course_package_id},
                        dataType: 'json',
                        success: function (data) {
                            console.log(data)
                            _this.kcb_kechengs = data
                            _this.kcb.stage_id = ''
                            
                            _this.kc_give_num()
                            // _this.userList = data
                            // for (let i = 0; i < _this.userList.length; i++) {
                            //     _this.userList[i].fontdesk_account_status = _this.userList[i]
                            //         .fontdesk_account_status == 1 ? '启用' : '禁用'
                            //     _this.userList[i].enrollment_status = _this.userList[i]
                            //         .enrollment_status == 1 ? '已报名' : '未报名'
                            // }
                        },
                        error: function () {

                        }
                    })
                },
                kcb_changeKemu(){
                    _this = this;
                        // _this.stu.exam_id = ''
                        $.ajax({
                        url: 'http://192.168.10.166:8080/coursePackage/selectCourserPackageByProject',
                        type: 'get',
                        // contentType: 'application/json',
                        data: {project_id:_this.kcb.project_id},
                        dataType: 'json',
                        success: function (data) {
                            console.log(data)
                            _this.kcb_kemus = data
                        _this.kcb.course_package_id = _this.kcb_kemus[0].course_package_id
                        _this.kcb_changeKecheng()
                            // _this.userList = data
                            // for (let i = 0; i < _this.userList.length; i++) {
                            //     _this.userList[i].fontdesk_account_status = _this.userList[i]
                            //         .fontdesk_account_status == 1 ? '启用' : '禁用'
                            //     _this.userList[i].enrollment_status = _this.userList[i]
                            //         .enrollment_status == 1 ? '已报名' : '未报名'
                            // }
                        },
                        error: function () {

                        }
                    })
                },
                changeKemu(){
                    _this = this;
                        // _this.stu.exam_id = ''
                        $.ajax({
                        url: 'http://192.168.10.166:8080/pse/selectSubjectByProject',
                        type: 'get',
                        // contentType: 'application/json',
                        data: {project_id:_this.kc.project_id},
                        dataType: 'json',
                        success: function (data) {
                            console.log(data)
                            _this.kemus = data
                        _this.kc.subject_id = _this.kemus[0].pse_id
                        _this.changeKecheng()
                            // _this.userList = data
                            // for (let i = 0; i < _this.userList.length; i++) {
                            //     _this.userList[i].fontdesk_account_status = _this.userList[i]
                            //         .fontdesk_account_status == 1 ? '启用' : '禁用'
                            //     _this.userList[i].enrollment_status = _this.userList[i]
                            //         .enrollment_status == 1 ? '已报名' : '未报名'
                            // }
                        },
                        error: function () {

                        }
                    })
                },
                bgun(){
                   
                    // console.log(1)setTimeout(() => {
                        
                    // }, timeout);
                },
                initb(){
                    _this = this
                    switch (this.activeIndexb) {
                        case 0:
                        $.ajax({
                            url: 'http://192.168.10.166:8080/pse/queryAllProjectInfo',
                            type: 'get',
                            // contentType: 'application/json',
                            // data: JSON.stringify(_this.stu),
                            dataType: 'json',
                            success: function (data) {
                                console.log(data)
                                _this.projects = data
                                _this.kc.project_id = _this.projects[0].pse_id
                                _this.changeKemu()
                                // _this.userList = data
                                // for (let i = 0; i < _this.userList.length; i++) {
                                //     _this.userList[i].fontdesk_account_status = _this.userList[i]
                                //         .fontdesk_account_status == 1 ? '启用' : '禁用'
                                //     _this.userList[i].enrollment_status = _this.userList[i]
                                //         .enrollment_status == 1 ? '已报名' : '未报名'
                                // }
                            },
                            error: function () {

                            }
                        })
                            break;
                            case 4:
                        $.ajax({
                            url: 'http://192.168.10.166:8080/pse/queryAllProjectInfo',
                            type: 'get',
                            // contentType: 'application/json',
                            // data: JSON.stringify(_this.stu),
                            dataType: 'json',
                            success: function (data) {
                                console.log(data)
                                _this.projects = data
                                _this.kcb.project_id = _this.projects[0].pse_id
                                _this.kcb_changeKemu()
                                // _this.userList = data
                                // for (let i = 0; i < _this.userList.length; i++) {
                                //     _this.userList[i].fontdesk_account_status = _this.userList[i]
                                //         .fontdesk_account_status == 1 ? '启用' : '禁用'
                                //     _this.userList[i].enrollment_status = _this.userList[i]
                                //         .enrollment_status == 1 ? '已报名' : '未报名'
                                // }
                            },
                            error: function () {

                            }
                        })
                            break;
                            case 5:
                            _this.kc_give_num()
                            break;
                            
                        default:
                            break;
                    }
                },
                activea(num) {
                    this.activeIndexa = num
                },
                handleSizeChange: function (size) {
                    this.pagesize = size;
                },
                handleCurrentChange: function (currentPage) {
                    this.currentPage = currentPage;
                },
                dangan(scope) {
                    console.log(scope)
                }
            }
        })
    </script>

</body>

</html>