<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>火种教育</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta content="A fully featured admin theme which can be used to build CRM, CMS, etc." name="description" />
    <meta content="Coderthemes" name="author" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- App favicon -->
    <link rel="shortcut icon" href="assets/images/favicon.ico">
    <link rel="stylesheet" href="assets/css/element-ui.css">
    <link href="assets/libs/@mdi/font/css/materialdesignicons.min.css" rel="stylesheet" type="text/css" />
    <link href="assets/libs/dripicons/webfont/webfont.css" rel="stylesheet" type="text/css" />
    <link href="assets/libs/simple-line-icons/css/simple-line-icons.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/app.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/index.css" rel="stylesheet" type="text/css" />
    <style>
        body {
            color: black;
        }

        .wrapper {
            padding-top: 60px;
        }

        .el-message-box1 {
            display: inline-block;
            width: 80%;
            padding-bottom: 10px;
            vertical-align: middle;
            background-color: #fff;
            border-radius: 4px;
            border: 1px solid #ebeef5;
            font-size: 18px;
            -webkit-box-shadow: 0 2px 12px 0 rgba(0, 0, 0, .1);
            box-shadow: 0 2px 12px 0 rgba(0, 0, 0, .1);
            text-align: left;
            overflow: hidden;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
        }

        .el-table__empty-text {
            width: 100%;
            color: #909399;
        }

        body .el-table th.gutter {
            display: table-cell !important;
        }

        .el-table {
            font-size: 12px;
        }

        .navbar-custom .nav-link {
            padding: 0;
            line-height: 60px;
            color: rgba(255, 255, 255, 0.8);
        }

        /* .el-message-box {
            width: 80%
        } */

        .form-control-sm {
            padding: 0.375rem 0.75rem;
            font-size: 0.875rem;
            line-height: 1.5;
            border-radius: 0.2rem;
        }

        .navbar-custom {
            border-radius: 0;
            min-height: 60px;
            color: #fff;
            z-index: 2;
        }

        select.form-control:not([size]):not([multiple]) {
            height: auto;
        }

        @media (min-width: 992px) {
            #topnav .topbar-menu {
                padding-bottom: 0;
            }
        }

        @media (max-width: 700px) {
            .colRow .coll {
                width: 49%;
            }
        }

        .el-pagination {
            white-space: nowrap;
            padding: 2px 5px;
            color: #303133;
            overflow: auto;
            font-weight: 700;
        }

        .el-table td,
        .el-table th {
            text-align: center;
            padding: .1rem 0;
        }

        .el-pagination {
            text-align: center;
            margin: .2rem 0;
        }

        .el-range-editor.el-input__inner {
            width: 100%;
        }
    </style>
</head>

<body>
    <header id="topnav">

    </header>
    <!-- Navigation Bar-->
    <!-- End Navigation Bar-->


    <div class="wrapper" id="app">
        <div class="container-fluid">

            <!-- Page title box -->
            <div class="page-title-box" style="    margin-right: -15px;
            margin-left: -15px;">

                <div class="page-title"><i class=" mdi mdi-account"></i> 学员
                    <ul class="row page-ul">
                        <li style="color: #fa6900;
                        border-bottom: 2px solid #fa6900;">学员管理</li>
                        <li onclick="window.location.href='studentNotice.html'">学员通知</li>
                    </ul>
                </div>

            </div>
            <!-- End page title box -->

            <div class="row" style="background: white">
                <div class="col-xl-12">
                    <div class="heading stuheading">
                        <h2 class="h5">学员列表</h2>
                        <span class="line"></span>
                    </div>
                    <div class="colRow" style="overflow:hidden;margin-bottom:15px">
                        <div class="coll">
                            <input type="text" v-model="stu.tel" placeholder="手机号">
                        </div>
                        <div class="coll">
                            <input type="text" v-model="stu.wechat" placeholder="微信号">
                        </div>
                        <div class="coll">
                            <input type="text" v-model="stu.stu_name" placeholder="姓名">
                        </div>
                        <div class="coll">
                            <input type="text" v-model="stu.nickname" placeholder="昵称">
                        </div>
                        <div class="coll">
                            <input type="text" v-model="stu.ID_number" placeholder="证件号码">
                        </div>
                        <div class="coll">
                            <select name="" v-model="stu.fontdesk_account_status" id="">
                                <option value=null>前台账号状态</option>
                                <option value="1">启用</option>
                                <option value="2">禁用</option>
                            </select>
                        </div>
                        <div class="coll">
                            <select name="" v-model="stu.enrollment_status" id="">
                                <option value=null>报名状态</option>
                                <option value="1">已报名</option>
                                <option value="2">未报名</option>
                            </select>
                        </div>
                        <div class="coll">
                            <select name="" v-model="stu.project_id" @change="select_exams" id="">
                                <option value=null>项目</option>
                                <option v-for="(item,index) in projects" :value="parseInt(item.pse_id)">
                                    {{item.pse_name}}</option>
                            </select>
                        </div>
                        <div class="coll">
                            <select name="" v-model="stu.exam_id" id="">
                                <option value=null>考期</option>
                                <option v-for="(item,index) in exams" :value="parseInt(item.pse_id)">{{item.pse_name}}
                                </option>
                            </select>
                        </div>
                        <template>
                            <div class="block" style="float: left">
                                <el-date-picker v-model="stu.time" type="datetimerange" :picker-options="pickerOptions"
                                    range-separator="至" start-placeholder="开始日期" end-placeholder="结束日期" align="right">
                                </el-date-picker>
                            </div>
                        </template>
                        <button @click="search">搜索</button>
                        <!-- <p class="block"> -->
                        <button @click="piliang_group">批量分组</button>
                        <button @click="registerAll">批量报名</button>
                        <button @click="export_stu">导出用户</button>
                        <!-- <button onclick="window.location.href='indexexport.html'">导入用户</button>
                            <button @click="model=1">添加用户</button> -->
                        <!-- </p> -->
                    </div>
                    <template>
                        <el-table border :data="userList.slice((currentPage-1)*pagesize,currentPage*pagesize)"
                            :data="tableData" style="overflow: auto;" @selection-change="handleSelectionChange">
                            <el-table-column type="selection" :width="flexColumnWidth(4)">
                            </el-table-column>
                            <el-table-column prop="tel" label="手机号" :width="flexColumnWidth(11)"
                                style="text-align: center">
                            </el-table-column>
                            <el-table-column prop="wechat" label="微信号" :width="flexColumnWidth(11)">
                            </el-table-column>
                            <el-table-column prop="stu_name" label="姓名" :width="flexColumnWidth(10)">
                            </el-table-column>
                            <el-table-column prop="nickname" label="昵称" :width="flexColumnWidth(10)">
                            </el-table-column>
                            <el-table-column prop="ID_number" label="证件号码" :width="flexColumnWidth(14)">
                            </el-table-column>
                            <el-table-column prop="create_time" label="创建时间" :width="flexColumnWidth(10)">
                            </el-table-column>
                            <el-table-column prop="fontdesk_account_status" label="前台账号状态" :width="flexColumnWidth(10)">
                            </el-table-column>
                            <el-table-column prop="enrollment_status" label="报名状态" :width="flexColumnWidth(10)">
                            </el-table-column>
                            <el-table-column label="操作" :width="flexColumnWidth(9)">
                                <template slot-scope="scope">
                                    <el-button type="text" size="small" @click="dangan(scope.row)">档案</el-button>
                                    <el-dropdown @command="handleCommand">
                                        <el-button type="text" @click="" size="small">更多</el-button>
                                        <el-dropdown-menu>
                                            <el-dropdown-item command="a" @click.native="review_info(scope.row)">修改信息
                                            </el-dropdown-item>
                                            <el-dropdown-item command="b" @click.native="review(scope.row)">
                                                {{scope.row.fontdesk_account_status == '启用'?'禁用用户':'启用用户'}}
                                            </el-dropdown-item>
                                            <el-dropdown-item command="c" @click.native="reviseA(scope.row)">修改密码
                                            </el-dropdown-item>
                                            <el-dropdown-item @click.native="goYidong(scope.row)">异动
                                            </el-dropdown-item>
                                        </el-dropdown-menu>
                                    </el-dropdown>
                                </template>
                            </el-table-column>
                        </el-table>
                        <el-pagination @size-change="handleSizeChange" @current-change="handleCurrentChange"
                            :current-page="currentPage" :page-sizes="[5, 10, 20, 40]" :page-size="pagesize"
                            layout="total, sizes, prev, pager, next, jumper" :total="userList.length">
                        </el-pagination>
                    </template>
                </div>
            </div>

        </div> <!-- end container -->
        <div class="v-modal" v-show="model != 0 " tabindex="0" style="z-index: 2000;display: none"></div>
        <div tabindex="-1" v-show="model == 1" role="dialog" aria-modal="true" aria-label="HTML 片段"
            class="el-message-box__wrapper" style="overflow: auto;z-index: 2001;display: none">
            <div class="el-message-box1" style="
             overflow: auto;
         ">
                <div class="el-message-box__header">
                    <div class="el-message-box__title">
                        <span>修改用户</span>
                    </div>
                    <button type="button" aria-label="Close" @click="model = 0" class="el-message-box__headerbtn"><i
                            class="el-message-box__close el-icon-close"></i></button>
                </div>
                <div class="el-message-box__content">
                    <div class="el-message-box__message">
                        <p> </p>
                        <div class="">
                            <div class="content-wrapper" style="background: white">

                                <form class="form-sample">
                                    <div class="row">
                                        <div class="col-md-3" style="padding-left: 1.5rem;padding-right: 1.5rem;">
                                            <div class="form-group">
                                                <label>*手机号：</label>
                                                <input v-model="stu_info.tel" type="text"
                                                    class="form-control form-control-sm" />
                                            </div>
                                        </div>
                                        <div class="col-md-3" style="padding-left: 1.5rem;padding-right: 1.5rem;">
                                            <div class="form-group">
                                                <label>*姓名：</label>
                                                <input v-model="stu_info.stu_name" type="text"
                                                    class="form-control form-control-sm" />
                                            </div>
                                        </div>
                                        <div class="col-md-3" style="padding-left: 1.5rem;padding-right: 1.5rem;">
                                            <div class="form-group">
                                                <label>性别：</label>
                                                <select v-model="stu_info.sex" class="form-control payway">
                                                    <option value="男">男</option>
                                                    <option value="女">女</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-3" style="padding-left: 1.5rem;padding-right: 1.5rem;">
                                            <div class="form-group">
                                                <label>证件类型：</label>
                                                <select v-model="stu_info.ID_type" class="form-control payway">
                                                    <option value="">请选择</option>
                                                    <option value="身份证">身份证</option>
                                                    <option value="护照">护照</option>
                                                    <option value="港澳通行证">港澳通行证</option>
                                                    <option value="台胞证">台胞证</option>
                                                    <option value="军官证">军官证</option>
                                                    <option value="士官证">士官证</option>
                                                    <option value="未确定证件">未确定证件</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-3" style="padding-left: 1.5rem;padding-right: 1.5rem;">
                                            <div class="form-group">
                                                <label>证件号码：</label>
                                                <input v-model="stu_info.ID_number" type="text"
                                                    class="form-control form-control-sm" />
                                            </div>
                                        </div>
                                        <div class="col-md-3" style="padding-left: 1.5rem;padding-right: 1.5rem;">
                                            <div class="form-group">
                                                <label>出生日期：</label>
                                                <el-date-picker
      v-model="stu_info.birthday"
      type="date"
      placeholder="选择日期">
    </el-date-picker>
                                            </div>
                                        </div>
                                        <div class="col-md-3" style="padding-left: 1.5rem;padding-right: 1.5rem;">
                                            <div class="form-group">
                                                <label>户口所在地：</label>
                                                <input v-model="stu_info.hukou_address" type="text"
                                                    class="form-control form-control-sm" />
                                            </div>
                                        </div>
                                        <div class="col-md-3" style="padding-left: 1.5rem;padding-right: 1.5rem;">
                                            <div class="form-group">
                                                <label>年龄：</label>
                                                <input v-model="stu_info.age" type="text"
                                                    class="form-control form-control-sm" />
                                            </div>
                                        </div>
                                        <div class="col-md-3" style="padding-left: 1.5rem;padding-right: 1.5rem;">
                                            <div class="form-group">
                                                <label>最高学历：</label>
                                                <select v-model="stu_info.education" class="form-control payway">
                                                    <option value="">请选择</option>
                                                    <option value="大专以下">大专以下</option>
                                                    <option value="大专">大专</option>
                                                    <option value="本科">本科</option>
                                                    <option value="研究生">研究生</option>
                                                    <option value="博士生及以上">博士生及以上</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-3" style="padding-left: 1.5rem;padding-right: 1.5rem;">
                                            <div class="form-group">
                                                <label>办公电话：</label>
                                                <input v-model="stu_info.office_tel" type="text"
                                                    class="form-control form-control-sm" />
                                            </div>
                                        </div>
                                        <div class="col-md-3" style="padding-left: 1.5rem;padding-right: 1.5rem;">
                                            <div class="form-group">
                                                <label>紧急联系人：</label>
                                                <input v-model="stu_info.urgent_people" type="text"
                                                    class="form-control form-control-sm" />
                                            </div>
                                        </div>
                                        <div class="col-md-3" style="padding-left: 1.5rem;padding-right: 1.5rem;">
                                            <div class="form-group">
                                                <label>紧急联系人电话：</label>
                                                <input v-model="stu_info.urgent_people_tel" type="text"
                                                    class="form-control form-control-sm" />
                                            </div>
                                        </div>
                                        <div class="col-md-3" style="padding-left: 1.5rem;padding-right: 1.5rem;">
                                            <div class="form-group">
                                                <label>邮箱：</label>
                                                <input v-model="stu_info.email" type="text"
                                                    class="form-control form-control-sm" />
                                            </div>
                                        </div>
                                        <div class="col-md-3" style="padding-left: 1.5rem;padding-right: 1.5rem;">
                                            <div class="form-group">
                                                <label>QQ号：</label>
                                                <input v-model="stu_info.qq" type="text"
                                                    class="form-control form-control-sm" />
                                            </div>
                                        </div>
                                        <div class="col-md-3" style="padding-left: 1.5rem;padding-right: 1.5rem;">
                                            <div class="form-group">
                                                <label>微信：</label>
                                                <input v-model="stu_info.wechat" type="text"
                                                    class="form-control form-control-sm" />
                                            </div>
                                        </div>
                                        <div class="col-md-3" style="padding-left: 1.5rem;padding-right: 1.5rem;">
                                            <div class="form-group">
                                                <label>地址：</label>
                                                <select v-model="stu_info.province" class="form-control payway">
                                                    <option value="">请选择省</option>
                                                    <option value="广东">广东</option>
                                                    <option value="湖北">湖北</option>
                                                    <option value="四川">四川</option>
                                                    <option value="北京">北京</option>
                                                    <option value="上海">上海</option>
                                                    <option value="天津">天津</option>
                                                    <option value="重庆">重庆</option>
                                                    <option value="贵州">贵州</option>
                                                    <option value="云南">云南</option>
                                                    <option value="西藏">西藏</option>
                                                    <option value="河南">河南</option>
                                                    <option value="湖南">湖南</option>
                                                    <option value="广西">广西</option>
                                                    <option value="陕西">陕西</option>
                                                    <option value="甘肃">甘肃</option>
                                                    <option value="青海">青海</option>
                                                    <option value="宁夏">宁夏</option>
                                                    <option value="新疆">新疆</option>
                                                    <option value="河北">河北</option>
                                                    <option value="山西">山西</option>
                                                    <option value="内蒙古">内蒙古</option>
                                                    <option value="江苏">江苏</option>
                                                    <option value="浙江">浙江</option>
                                                    <option value="安徽">安徽</option>
                                                    <option value="福建">福建</option>
                                                    <option value="江西">江西</option>
                                                    <option value="山东">山东</option>
                                                    <option value="辽宁">辽宁</option>
                                                    <option value="吉林">吉林</option>
                                                    <option value="黑龙江">黑龙江</option>
                                                    <option value="海南">海南</option>
                                                    <option value="台湾">台湾</option>
                                                    <option value="香港">香港</option>
                                                    <option value="澳门">澳门</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-3" style="padding-left: 1.5rem;padding-right: 1.5rem;">
                                            <div class="form-group">
                                                <label>详细信息（地址）：</label>
                                                <input v-model="stu_info.detail_address" type="text"
                                                    class="form-control form-control-sm" />
                                            </div>
                                        </div>
                                        <div class="col-md-3" style="padding-left: 1.5rem;padding-right: 1.5rem;">
                                            <div class="form-group">
                                                <label>备注：</label>
                                                <input v-model="stu_info.remarks" type="text"
                                                    class="form-control form-control-sm" />
                                            </div>
                                        </div>
                                        <div class="col-md-3" style="padding-left: 1.5rem;padding-right: 1.5rem;">
                                            <div class="form-group">
                                                <label>项目：</label>
                                                <select v-model="stu_info.project_id" @change="selectInfo_exams"
                                                    class="form-control payway">
                                                    <option value="">请选择</option>
                                                    <option v-for="(item,index) in projects"
                                                        :value="parseInt(item.pse_id)">{{item.pse_name}}</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-3" style="padding-left: 1.5rem;padding-right: 1.5rem;">
                                            <div class="form-group">
                                                <label>考期：</label>
                                                <select v-model="stu_info.exam_id" class="form-control payway">
                                                    <option value="">请选择</option>
                                                    <option v-for="(item,index) in stuInfo_exams"
                                                        :value="parseInt(item.pse_id)">{{item.pse_name}}</option>
                                                </select>
                                            </div>
                                        </div>

                                    </div>
                                    <input type="button" @click="submit_review" class="btn btn-gradient-primary mr-2"
                                        style="float: right;    background-color: #0af;
                                                        border: 1px solid #0af;
                                        border: 0;
                                        -webkit-transition: opacity 0.3s ease;
                                        -moz-transition: opacity 0.3s ease;
                                        -ms-transition: opacity 0.3s ease;
                                        -o-transition: opacity 0.3s ease;
                                        transition: opacity 0.3s ease;
                                        color: white;" value="提交">
                                </form>

                            </div>
                        </div>
                        <p></p>
                    </div>
                    <div class="el-message-box__input" style="display: none;">
                        <div class="el-input">
                            <input type="text" autocomplete="off" />
                        </div>
                        <div class="el-message-box__errormsg" style="visibility: hidden;"></div>
                    </div>
                </div>
                <!-- <div class="el-message-box__btns">
            <button type="button" class="el-button el-button--default el-button--small el-button--primary "><span> 确定 </span></button>
           </div> -->
            </div>
        </div>
        <div tabindex="-1" v-show="model == 2" role="dialog" aria-modal="true" aria-label="HTML 片段"
            class="el-message-box__wrapper" style="overflow: auto;z-index: 2001;display: none">
            <div class="el-message-box1" style="
             overflow: auto;
         ">
                <div class="el-message-box__header">
                    <div class="el-message-box__title">
                        <span>添加用户</span>
                    </div>
                    <button type="button" aria-label="Close" @click="model = 0" class="el-message-box__headerbtn"><i
                            class="el-message-box__close el-icon-close"></i></button>
                </div>
                <div class="el-message-box__content">
                    <div class="el-message-box__message">
                        <p> </p>
                        <div class="">
                            <div class="content-wrapper" style="background: white">

                                <form class="form-sample">
                                    <div class="row">
                                        <div class="col-md-3" style="padding-left: 1.5rem;padding-right: 1.5rem;">
                                            <div class="form-group">
                                                <label>项目：</label>
                                                <select class="form-control payway" @change="piliang_project"
                                                    v-model="piliang.project_id">
                                                    <option value="">请选择</option>
                                                    <option v-for="(item,index) in projects"
                                                        :value="parseInt(item.pse_id)">{{item.pse_name}}</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-3" style="padding-left: 1.5rem;padding-right: 1.5rem;">
                                            <div class="form-group">
                                                <label>考期：</label>
                                                <select class="form-control payway" v-model="piliang.exam_id">
                                                    <option value="">请选择</option>
                                                    <option v-for="(item,index) in piliang_exams"
                                                        :value="parseInt(item.pse_id)">{{item.pse_name}}</option>
                                                </select>
                                            </div>
                                        </div>

                                    </div>
                                    <input type="button" @click="submit_project" class="btn btn-gradient-primary mr-2"
                                        style="float: right;    background-color: #0af;
                                                        border: 1px solid #0af;
                                        border: 0;
                                        -webkit-transition: opacity 0.3s ease;
                                        -moz-transition: opacity 0.3s ease;
                                        -ms-transition: opacity 0.3s ease;
                                        -o-transition: opacity 0.3s ease;
                                        transition: opacity 0.3s ease;
                                        color: white;" value="提交">
                                </form>

                            </div>
                        </div>
                        <p></p>
                    </div>
                </div>
                <!-- <div class="el-message-box__btns">
            <button type="button" class="el-button el-button--default el-button--small el-button--primary "><span> 确定 </span></button>
           </div> -->
            </div>
        </div>
        <div tabindex="-1" v-show="model == 3" role="dialog" aria-modal="true" aria-label="HTML 片段"
            class="el-message-box__wrapper" style="overflow: auto;z-index: 2001;display: none">
            <div class="el-message-box" style="
             overflow: auto;
         ">
                <div class="el-message-box__header">
                    <div class="el-message-box__title">
                        <span>修改密码</span>
                    </div>
                    <button type="button" aria-label="Close" @click="model = 0" class="el-message-box__headerbtn"><i
                            class="el-message-box__close el-icon-close"></i></button>
                </div>
                <div class="el-message-box__content">
                    <div class="el-message-box__message">
                        <p> </p>
                        <div class="">
                            <div class="content-wrapper" style="background: white">

                                <form class="form-sample">
                                    <div class="row">
                                        <div class="col-md-12" style="padding-left: 1.5rem;padding-right: 1.5rem;">
                                            <div class="form-group">
                                                <label>输入新的密码：</label>
                                                <input type="text" class="form-control form-control-sm"
                                                    v-model="revise_pwd.stu_pass" />
                                            </div>
                                        </div>
                                    </div>
                                    <input type="button" @click="revise" class="btn btn-gradient-primary mr-2" style="float: right;    background-color: #0af;
                                                        border: 1px solid #0af;
                                        border: 0;
                                        -webkit-transition: opacity 0.3s ease;
                                        -moz-transition: opacity 0.3s ease;
                                        -ms-transition: opacity 0.3s ease;
                                        -o-transition: opacity 0.3s ease;
                                        transition: opacity 0.3s ease;
                                        color: white;" value="提交">
                                </form>

                            </div>
                        </div>
                        <p></p>
                    </div>
                </div>
                <!-- <div class="el-message-box__btns">
            <button type="button" class="el-button el-button--default el-button--small el-button--primary "><span> 确定 </span></button>
           </div> -->
            </div>
        </div>
    </div>
    <!-- end wrapper -->


    <!-- Footer -->
    <footer class="footer">
        <div class="container-fluid">
            <div class="row">
                <div class="col-12 text-center">
                    2019 © 火种教育
                </div>
            </div>
        </div>
    </footer>
    <!-- End Footer -->


    <!-- /Right-bar -->


    <!-- jQuery  -->
    <script src="assets/libs/jquery/jquery.min.js"></script>
    <script src="assets/js/jquery-1.11.3.min.js"></script>
    <script src="assets/libs/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/libs/jquery-slimscroll/jquery.slimscroll.min.js"></script>
    <script src="assets/libs/datatables.net/js/jquery.dataTables.min.js"></script>
    <script src="assets/libs/datatables.net-bs4/js/dataTables.bootstrap4.min.js"></script>
    <script src="assets/libs/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
    <script src="assets/libs/datatables.net-responsive-bs4/js/responsive.bootstrap4.min.js"></script>
    <script src="assets/libs/datatables.net-buttons/js/dataTables.buttons.min.js" type="text/javascript"></script>
    <script src="assets/libs/datatables.net-buttons/js/buttons.html5.min.js" type="text/javascript"></script>
    <script src="assets/libs/datatables.net-buttons/js/buttons.flash.min.js" type="text/javascript"></script>
    <script src="assets/libs/datatables.net-buttons/js/buttons.print.min.js" type="text/javascript"></script>
    <script src="assets/libs/datatables.net-buttons/js/buttons.colVis.min.js" type="text/javascript"></script>
    <script src="assets/libs/datatables.net-buttons-bs4/js/buttons.bootstrap4.min.js" type="text/javascript"></script>
    <script src="assets/libs/datatables.net-keytable/js/dataTables.keyTable.min.js"></script>
    <script src="assets/libs/datatables.net-select/js/dataTables.select.min.js"></script>
    <script src="assets/js/jquery.core.js"></script>
    <script src="assets/js/jquery.app.js"></script>
    <script src="assets/js/vue.min.js"></script>
    <script src="assets/js/element-ui.js"></script>
    <script>
        function downloadTemplate() {
            var url = './assets/images/学员导入模版.xls';
            window.open(url);
        }
        new Vue({
            el: '#app',
            data() {
                return {
                    userList: [],
                    //修改密码
                    revise_pwd: {
                        stu_id: '',
                        stu_pass: ''
                    },
                    currentPage: 1, //初始页
                    activeIndexa: 0,
                    pagesize: 10, //    每页的数据
                    model: 0,
                    multipleSelection1: [],
                    piliang: {
                        'project_id': '',
                        'exam_id': '',
                        'stu_ids': ''
                    },
                    stu: {
                        'tel': '',
                        'wechat': '',
                        'stu_name': '',
                        'nickname': '',
                        'ID_number': '',
                        'fontdesk_account_status': 'null',
                        'enrollment_status': 'null',
                        'project_id': 'null',
                        'exam_id': 'null',
                        'time': ''
                    },
                    stu_info: {
                        "birthday": "1997-02-01",
                        "qq": "2623000107",
                        "education": "研究生",
                        "city": "哈尔滨市",
                        "urgent_people_tel": "13251699597",
                        "sex": "女",
                        "county": "香坊区",
                        "wechat": "11111",
                        "stu_id": 1,
                        "urgent_people": "爱玲",
                        "ID_number": "230827199702014827",
                        "province": "黑龙江省",
                        "project_id": "注册消防工程师考试",
                        "office_tel": "0451-88888",
                        "stu_name": "秀秀秀",
                        "tel": "18800428784",
                        "age": null,
                        "hukou_address": "黑龙江省双鸭山市",
                        "remarks": null,
                        "email": "2623000107@qq.com",
                        "ID_type": "身份证",
                        "exam_id": "定金班"
                    },
                    answer: {
                        mobile1: 'hehe',
                        ask_time: '2014-08-20 09:20:10',
                        tea_name: '江山',
                        submit_name: '江山',
                        bigproblem: '你为什么',
                        problem_note: '召唤师可从以下28名LPL候选人中，选出两名选手参加2018全明星赛。在投票截止之后，得票最高的两名候选人将代表LPL赛区参加本次全明星赛。投票期间，每个QQ号只能投一次票，且游戏等级需满31级及以上。在投票结束后，2018全明星赛组委会在综合投票情况后会在全球候选人范围内额外选出4名选手参加本次全明星赛！',
                        smallproblem: '不说话',
                        annex: 'aaa.jpg',
                        process_note: '1323232323',
                        process_status: '已处理',
                    },
                    pickerOptions: {
                        shortcuts: [{
                            text: '最近一周',
                            onClick(picker) {
                                const end = new Date();
                                const start = new Date();
                                start.setTime(start.getTime() - 3600 * 1000 * 24 * 7);
                                picker.$emit('pick', [start, end]);
                            }
                        }, {
                            text: '最近一个月',
                            onClick(picker) {
                                const end = new Date();
                                const start = new Date();
                                start.setTime(start.getTime() - 3600 * 1000 * 24 * 30);
                                picker.$emit('pick', [start, end]);
                            }
                        }, {
                            text: '最近三个月',
                            onClick(picker) {
                                const end = new Date();
                                const start = new Date();
                                start.setTime(start.getTime() - 3600 * 1000 * 24 * 90);
                                picker.$emit('pick', [start, end]);
                            }
                        }]
                    },
                    value2: '',
                    projects: [{
                        "fid": 0,
                        "pse_id": 1,
                        "pse_type": 1,
                        "pse_name": "基金"
                    }, {
                        "fid": 0,
                        "pse_id": 2,
                        "pse_type": 1,
                        "pse_name": "注册消防工程师考试"
                    }, {
                        "fid": 0,
                        "pse_id": 10,
                        "pse_type": 1,
                        "pse_name": "测试插入"
                    }],
                    exams: [],
                    stuInfo_exams: [],
                    piliang_exams: [],
                }
            },
            created() {
                let _this = this
                $(document).ready(function () {
                    $("#topnav").load("./header.html");
                });
                var json = JSON.stringify(this.stu);
                obj = JSON.parse(JSON.stringify(this.stu))
                obj.enrollment_status = parseInt(obj.enrollment_status)
                obj.fontdesk_account_status = parseInt(obj.fontdesk_account_status)
                obj.project_id = parseInt(obj.project_id)
                console.log(json)
                _this = this
                if (obj.time != '') {
                    obj.begin_time = this.getNowFormatDate(obj.time[0])
                    obj.end_time = this.getNowFormatDate(obj.time[1])
                }
                this.select_exams();
                obj.exam_id = parseInt(obj.exam_id)
                $.ajax({
                    url: 'http://192.168.10.166:8080/pse/queryAllProjectInfo',
                    type: 'get',
                    // contentType: 'application/json',
                    // data: JSON.stringify(_this.stu),
                    dataType: 'json',
                    success: function (data) {
                        console.log(data)
                        _this.projects = data
                        // _this.userList = data
                        // for (let i = 0; i < _this.userList.length; i++) {
                        //     _this.userList[i].fontdesk_account_status = _this.userList[i]
                        //         .fontdesk_account_status == 1 ? '启用' : '禁用'
                        //     _this.userList[i].enrollment_status = _this.userList[i]
                        //         .enrollment_status == 1 ? '已报名' : '未报名'
                        // }
                    },
                    error: function () {

                    }
                })
                $.ajax({
                    url: 'http://192.168.10.166:8080/student/studentSearchBox',
                    type: 'post',
                    contentType: 'application/json',
                    data: JSON.stringify(obj),
                    dataType: 'json',
                    success: function (data) {
                        console.log(1)
                        _this.userList = data
                        for (let i = 0; i < _this.userList.length; i++) {
                            _this.userList[i].fontdesk_account_status = _this.userList[i]
                                .fontdesk_account_status == 1 ? '启用' : '禁用'
                            _this.userList[i].enrollment_status = _this.userList[i]
                                .enrollment_status == 1 ? '已报名' : '未报名'
                        }
                    },
                    error: function () {

                    }
                })
            },
            methods: {
                //导出用户
                export_stu() {
                    _this = this
                    $.ajax({
                        url: 'http://192.168.10.166:8080/Ex/Ex',
                        type: 'post',
                        contentType: 'application/json',
                        data: JSON.stringify({
                            operation: '导出学员数据【'+_this.userList.length+'】条',
                            user_id: JSON.parse(localStorage.login_user_info).user_id,
                        }),
                        dataType: 'json',
                        success: function (data) {
                            console.log(data)
                            // _this.userList = data
                            // for (let i = 0; i < _this.userList.length; i++) {
                            //     _this.userList[i].fontdesk_account_status = _this.userList[i]
                            //         .fontdesk_account_status == 1 ? '启用' : '禁用'
                            //     _this.userList[i].enrollment_status = _this.userList[i]
                            //         .enrollment_status == 1 ? '已报名' : '未报名'
                            // }
                        },
                        error: function () {

                        }
                    })
                    str = "手机号,微信号,姓名,昵称,证件号码,创建时间,前台账号状态,报名状态" + '\r\n'
                    for (let k = 0; k < _this.userList.length; k++) {

                        stra = ""
                        stra += _this.userList[k].tel + ','
                        stra += _this.userList[k].wechat + ','
                        stra += _this.userList[k].stu_name + ','
                        stra += _this.userList[k].nickname + ','
                        stra += _this.userList[k].ID_number + ','
                        stra += _this.userList[k].create_time + ','
                        stra += _this.userList[k].fontdesk_account_status + ','
                        stra += _this.userList[k].enrollment_status + ','
                        str += stra + '\r\n';
                        // const element = array[k];

                    }
                    console.log(str)
                    var fileName = "";
                    fileName += "学员信息表".replace(/ /g, "_");
                    var uri = 'data:text/csv;charset=utf-8,\uFEFF' + encodeURI(str);
                    var link = document.createElement("a");
                    link.href = uri;
                    link.style = "visibility:hidden";
                    link.download = fileName + ".CSV";
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                },
                select_exams() {
                    _this = this;
                    _this.stu.exam_id = null
                    $.ajax({
                        url: 'http://192.168.10.166:8080/pse/selectExamByProject',
                        type: 'get',
                        // contentType: 'application/json',
                        data: {
                            project_id: _this.stu.project_id
                        },
                        dataType: 'json',
                        success: function (data) {
                            console.log(data)
                            _this.exams = data
                            // _this.userList = data
                            // for (let i = 0; i < _this.userList.length; i++) {
                            //     _this.userList[i].fontdesk_account_status = _this.userList[i]
                            //         .fontdesk_account_status == 1 ? '启用' : '禁用'
                            //     _this.userList[i].enrollment_status = _this.userList[i]
                            //         .enrollment_status == 1 ? '已报名' : '未报名'
                            // }
                        },
                        error: function () {

                        }
                    })
                },
                piliang_project() {
                    _this = this;
                    // _this.stu_info.exam_id = ''
                    $.ajax({
                        url: 'http://192.168.10.166:8080/pse/selectExamByProject',
                        type: 'get',
                        // contentType: 'application/json',
                        data: {
                            project_id: _this.piliang.project_id
                        },
                        dataType: 'json',
                        success: function (data) {
                            console.log(data)
                            _this.piliang_exams = data
                            // _this.userList = data
                            // for (let i = 0; i < _this.userList.length; i++) {
                            //     _this.userList[i].fontdesk_account_status = _this.userList[i]
                            //         .fontdesk_account_status == 1 ? '启用' : '禁用'
                            //     _this.userList[i].enrollment_status = _this.userList[i]
                            //         .enrollment_status == 1 ? '已报名' : '未报名'
                            // }
                        },
                        error: function () {

                        }
                    })
                },
                selectInfo_exams() {
                    _this = this;
                    // _this.stu_info.exam_id = ''
                    $.ajax({
                        url: 'http://192.168.10.166:8080/pse/selectExamByProject',
                        type: 'get',
                        // contentType: 'application/json',
                        data: {
                            project_id: _this.stu_info.project_id
                        },
                        dataType: 'json',
                        success: function (data) {
                            console.log(data)
                            _this.stuInfo_exams = data
                            lock = true
                            _this.stuInfo_exams.map((item) => {
                                if (item.pse_id == _this.stu_info.exam_id) {
                                    lock = false
                                }
                            })
                            if (lock == true) {
                                _this.stu_info.exam_id = ''
                            }
                            // _this.stu_info.exam_id = ''
                            // _this.userList = data
                            // for (let i = 0; i < _this.userList.length; i++) {
                            //     _this.userList[i].fontdesk_account_status = _this.userList[i]
                            //         .fontdesk_account_status == 1 ? '启用' : '禁用'
                            //     _this.userList[i].enrollment_status = _this.userList[i]
                            //         .enrollment_status == 1 ? '已报名' : '未报名'
                            // }
                        },
                        error: function () {

                        }
                    })
                },
                getNowFormatDate(date) {
                    var seperator1 = "-";
                    var seperator2 = ":";
                    var month = date.getMonth() + 1;
                    var strDate = date.getDate();
                    var hour = date.getHours();
                    var minute = date.getMinutes();
                    var second = date.getSeconds();
                    if (month >= 1 && month <= 9) {
                        month = "0" + month;
                    }
                    if (strDate >= 0 && strDate <= 9) {
                        strDate = "0" + strDate;
                    }
                    if (hour >= 0 && hour <= 9) {
                        hour = "0" + hour;
                    }
                    if (minute >= 0 && minute <= 9) {
                        minute = "0" + minute;
                    }
                    if (second >= 0 && second <= 9) {
                        second = "0" + second;
                    }
                    var currentdate = date.getFullYear() + seperator1 + month + seperator1 + strDate +
                        " " + hour + seperator2 + minute +
                        seperator2 + second;
                    return currentdate;
                },
                handleSizeChange: function (size) {
                    this.pagesize = size;
                },
                search() {
                    console.log(this.stu)
                    var json = JSON.stringify(this.stu);
                    //     this.stu.enrollment_status = parseInt(this.stu.enrollment_status)
                    //     this.stu.fontdesk_account_status = parseInt(this.stu.fontdesk_account_status)
                    //     this.stu.project_id = parseInt(this.stu.project_id)
                    // this.stu.exam_id = parseInt(this.stu.exam_id)
                    //     console.log(json)
                    //     _this = this
                    //     if (this.stu.time != '') {
                    //         this.stu.begin_time = this.getNowFormatDate(this.stu.time[0])
                    //         this.stu.end_time = this.getNowFormatDate(this.stu.time[1])
                    //     }
                    obj = JSON.parse(JSON.stringify(this.stu))
                    obj.enrollment_status = parseInt(obj.enrollment_status)
                    obj.fontdesk_account_status = parseInt(obj.fontdesk_account_status)
                    obj.project_id = parseInt(obj.project_id)
                    console.log(obj)
                    _this = this
                    if (obj.time != '' && obj.time != null) {
                        obj.begin_time = this.getNowFormatDate(new Date(obj.time[0]))
                        obj.end_time = this.getNowFormatDate(new Date(obj.time[1]))
                    }
                    this.select_exams();
                    obj.exam_id = parseInt(obj.exam_id)
                    $.ajax({
                        url: 'http://192.168.10.166:8080/student/studentSearchBox',
                        type: 'post',
                        contentType: 'application/json',
                        data: JSON.stringify(obj),
                        dataType: 'json',
                        success: function (data) {
                            console.log(1)
                            _this.userList = data
                            for (let i = 0; i < _this.userList.length; i++) {
                                _this.userList[i].fontdesk_account_status = _this.userList[i]
                                    .fontdesk_account_status == 1 ? '启用' : '禁用'
                                _this.userList[i].enrollment_status = _this.userList[i]
                                    .enrollment_status == 1 ? '已报名' : '未报名'
                            }
                        },
                        error: function () {

                        }
                    })
                },
                handleCurrentChange: function (currentPage) {
                    this.currentPage = currentPage;
                },
                flexColumnWidth(num) {

                    return $('.el-table__header-wrapper').width() > 600 ? $('.el-table__header-wrapper')
                        .width() / 100 * num : 12 * num
                },
                flexColumnWidthc() {
                    return $('.el-table__header-wrapper').width() / 100 * 4
                },
                registerAll() {
                    console.log(this.multipleSelection1)
                    let ids = []
                    this.multipleSelection1.map((item) => {
                        ids.push(item.stu_id)
                    })
                    this.piliang.stu_ids = JSON.parse(JSON.stringify(ids))
                    if (this.multipleSelection1.length == 0) {
                        _this.$message.info({
                            message: '请选择学员',
                            // position: 'bottom-left',
                            duration: '2000'
                        });
                    } else {
                        window.location.href = 'indexregister.html'
                        localStorage.stu_id = JSON.stringify(ids)
                    }
                },
                dangan(scope) {
                    console.log(scope)
                    window.location.href = "indexdossier.html?stu_id=" + scope.stu_id
                },
                reviseA(scope) {
                    console.log(scope)
                    this.revise_pwd.stu_id = scope.stu_id;
                    this.model = 3
                },
                goYidong(scope) {
                    window.open('indextran.html?stu_id=' + scope.stu_id)
                },
                revise(scope) {
                    console.log(this.revise_pwd)
                    _this = this
                    obj = this.revise_pwd
                    $.ajax({
                        url: 'http://192.168.10.166:8080/student/updateStudentPass',
                        type: 'post',
                        contentType: 'application/json',
                        data: JSON.stringify(obj),
                        dataType: 'json',
                        success: function (data) {
                            if (data.code == 200) {
                                _this.$message.success({
                                    type: 'info',
                                    message: '修改成功',
                                    // position: 'bottom-left',
                                    duration: '2000'
                                });
                            } else {
                                _this.$message.error({
                                    type: 'info',
                                    message: '修改失败',
                                    // position: 'bottom-left',
                                    duration: '2000'
                                });
                            }
                        },
                        error: function () {
                            _this.$message.error({
                                type: 'info',
                                message: '服务器错误',
                                // position: 'bottom-left',
                                duration: '2000'
                            });
                        }
                    })
                },
                review_info(id) {
                    _this = this;
                    stu_id = id.stu_id
                    $.ajax({
                        url: 'http://192.168.10.166:8080/student/findStudentById',
                        type: 'post',
                        // contentType:'application/json',
                        data: {
                            stu_id
                        },
                        dataType: 'json',
                        success: function (data) {
                            console.log(data)
                            _this.stu_info = data
                            _this.selectInfo_exams()
                            _this.model = 1;
                        },
                        error: function () {
                            _this.$message.error({
                                type: 'info',
                                message: '服务器错误',
                                // position: 'bottom-left',
                                duration: '2000'
                            });
                        }
                    })
                },
                //批量分组
                piliang_group() {
                    console.log(this.multipleSelection1)
                    let ids = []
                    this.multipleSelection1.map((item) => {
                        ids.push(item.stu_id)
                    })
                    this.piliang.stu_ids = JSON.parse(JSON.stringify(ids))
                    if (this.multipleSelection1.length == 0) {
                        _this.$message.info({
                            message: '请选择学员',
                            // position: 'bottom-left',
                            duration: '2000'
                        });
                    } else {
                        this.model = 2
                    }
                },
                handleSelectionChange(val) {

                    this.multipleSelection1 = val;
                    console.log(this.multipleSelection1.length)
                    $('.sPan').text(this.multipleSelection1.length)
                    if (this.multipleSelection1.length > 0) {
                        $('.genggai').css('display', 'block')
                    } else {
                        $('.genggai').css('display', 'none')
                    }
                    let ids = []
                    this.multipleSelection1.map((item) => {
                        ids.push(item.stu_id)
                    })
                    this.selectedIDs = ids
                    console.log('多选', this.selectedIDs)
                },
                submit_review() {
                    console.log(this.stu_info)
                    _this = this
                    $.ajax({
                        url: 'http://192.168.10.166:8080/student/updateStudentInfoById',
                        type: 'post',
                        contentType: 'application/json',
                        data: JSON.stringify(_this.stu_info),
                        dataType: 'json',
                        success: function (data) {
                            if (data.code == 200) {
                                _this.$message.success({
                                    type: 'info',
                                    message: '修改成功',
                                    // position: 'bottom-left',
                                    duration: '2000'
                                });
                            } else {
                                _this.$message.error({
                                    type: 'info',
                                    message: '修改失败',
                                    // position: 'bottom-left',
                                    duration: '2000'
                                });
                            }
                        },
                        error: function () {
                            _this.$message.error({
                                type: 'info',
                                message: '服务器错误',
                                // position: 'bottom-left',
                                duration: '2000'
                            });
                        }
                    })
                },
                submit_project() {
                    _this = this
                    console.log(_this.piliang)
                    obj = _this.piliang
                    $.ajax({
                        url: 'http://192.168.10.166:8080/student/plUpdateGroup',
                        type: 'post',
                        contentType: 'application/json',
                        data: JSON.stringify(obj),
                        dataType: 'json',
                        success: function (data) {
                            if (data.code == "200") {
                                _this.$message.success({
                                    type: 'info',
                                    message: '添加成功',
                                    // position: 'bottom-left',
                                    duration: '2000'
                                });
                            } else {
                                _this.$message.error({
                                    type: 'info',
                                    message: data.message,
                                    // position: 'bottom-left',
                                    duration: '2000'
                                });
                            }
                        },
                        error: function () {
                            _this.$message.error({
                                type: 'info',
                                message: '服务器错误',
                                // position: 'bottom-left',
                                duration: '2000'
                            });
                        }
                    })
                },
                review(id) {
                    _this = this;
                    obj = {},
                        obj.stu_id = id.stu_id;
                    obj.fontdesk_account_status = id.fontdesk_account_status == '启用' ? 2 : 1;
                    zhuangtai = obj.fontdesk_account_status == 1 ? `启用` : `禁用`
                    console.log(_this.userList)
                    this.$confirm(`是否确认` + zhuangtai + `用户?`, '提示', {
                        confirmButtonText: '确定',
                        cancelButtonText: '取消',
                        type: 'info'
                    }).then(() => {
                        $.ajax({
                            url: 'http://192.168.10.166:8080/student/updateFontStatus',
                            type: 'post',
                            // contentType:'application/json',
                            data: obj,
                            dataType: 'json',
                            success: function (data) {
                                if (data.code == 200) {
                                    console.log(_this.userList)
                                    for (let i = 0; i < _this.userList.length; i++) {
                                        if (_this.userList[i].stu_id == obj.stu_id) {
                                            if (_this.userList[i].fontdesk_account_status ==
                                                '启用') {
                                                _this.userList[i].fontdesk_account_status =
                                                    '禁用'
                                            } else {

                                                _this.userList[i].fontdesk_account_status =
                                                    '启用'
                                            }
                                        }
                                    }
                                    _this.$message.success({
                                        type: 'info',
                                        message: '修改状态成功',
                                        // position: 'bottom-left',
                                        duration: '2000'
                                    });
                                } else {
                                    _this.$message.error({
                                        type: 'info',
                                        message: '修改状态失败',
                                        // position: 'bottom-left',
                                        duration: '2000'
                                    });
                                }
                            },
                            error: function () {
                                _this.$message.error({
                                    type: 'info',
                                    message: '服务器错误',
                                    // position: 'bottom-left',
                                    duration: '2000'
                                });
                            }
                        })
                    }).catch(() => {
                        this.$message({
                            type: 'warning',
                            message: '已取消',
                            position: 'bottom-left',
                            duration: '2000'
                        });
                    });
                },
                handleCommand(command, command1) {
                    console.log(command, command1)
                }
            }
        })
    </script>

</body>

</html>